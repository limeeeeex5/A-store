<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>COD æ¬¡å…ƒå†›éœ€ç«™ï¼šç»è¥ç‰ˆ</title>
    <style>
        :root {
            --bg-dark: #0b0d12;
            --bg-panel: rgba(20, 25, 35, 0.95);
            --border-color: rgba(255, 255, 255, 0.15);
            --primary: #00ffcc;
            --secondary: #ffcc00;
            --danger: #ff3333;
            --love: #ff3366;
            --text-main: #e0e0e0;
            --text-dim: #888;
            --font-ui: "Segoe UI", Roboto, "Microsoft YaHei", sans-serif;
            --font-mono: "Consolas", monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-ui);
            height: 100vh; /* å…¼å®¹æ—§æµè§ˆå™¨ */
            height: 100dvh; /* â­ï¸ å…³é”®ï¼šåŠ¨æ€é«˜åº¦ï¼Œé˜²æ­¢æ‰‹æœºæµè§ˆå™¨æ é®æŒ¡ */
            width: 100vw;
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 255, 204, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 51, 102, 0.03) 0%, transparent 50%),
                linear-gradient(0deg, rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 100% 100%, 100% 100%, 50px 50px, 50px 50px;
        }

        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }

        /* åŸºç¡€ç»„ä»¶ */
        .star-rating { color: #ffcc00; font-size: 1.2rem; letter-spacing: 2px; text-shadow: 0 0 5px rgba(255, 204, 0, 0.5); }
        .weather-icon { font-size: 1.5rem; margin-right: 5px; vertical-align: middle; }
        .review-text { font-size: 0.8rem; color: #aaa; font-style: italic; margin-top: 5px; border-left: 2px solid #444; padding-left: 8px; }
        .clickable-rating { cursor: pointer; transition: all 0.2s; border: 1px dashed transparent; padding: 5px; border-radius: 5px; }
        .clickable-rating:hover { background: rgba(255, 204, 0, 0.1); border-color: rgba(255, 204, 0, 0.3); }
        
        .review-list { text-align: left; max-height: 300px; overflow-y: auto; margin: 15px 0; padding-right: 5px; }
        .review-item { background: rgba(0,0,0,0.3); border: 1px solid var(--border-color); border-radius: 4px; padding: 10px; margin-bottom: 10px; }
        .review-header { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-dim); margin-bottom: 5px; }
        .review-author { color: var(--primary); font-weight: bold; }
        .review-content { font-size: 0.95rem; color: #fff; margin-bottom: 5px; line-height: 1.4; }
        .review-footer { display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; }
        .review-likes { color: var(--secondary); display: flex; align-items: center; gap: 4px; }

        /* --- PCç«¯é»˜è®¤å¸ƒå±€ --- */
        #app {
            display: grid;
            grid-template-rows: 60px 1fr;
            grid-template-columns: 300px 1fr 300px; 
            height: 100%;
            gap: 10px;
            padding: 10px;
            max-width: 1920px;
            margin: 0 auto;
        }

        .panel {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            overflow: hidden;
        }

        header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            font-family: var(--font-mono);
        }

        .brand { font-size: 1.5rem; font-weight: 800; color: var(--primary); text-shadow: 0 0 15px rgba(0, 255, 204, 0.3); }
        .top-stats { display: flex; gap: 25px; font-size: 1.1rem; }
        .operator-info { font-size: 0.95rem; color: var(--text-main); opacity: 0.9; border-left: 1px solid rgba(255,255,255,0.2); padding-left: 15px; }

        .energy-bar { display: flex; gap: 5px; }
        .energy-point { width: 15px; height: 15px; background-color: var(--primary); box-shadow: 0 0 8px var(--primary); transform: skewX(-20deg); }
        .energy-point.empty { background-color: #333; box-shadow: none; }

        #sidebar-left { grid-row: 2; padding: 15px; overflow-y: auto; }
        #sidebar-right { grid-row: 2; padding: 15px; overflow-y: auto; }

        .section-header { color: var(--text-dim); font-size: 0.8rem; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.08); margin: 20px 0 10px 0; padding-bottom: 5px; }
        .section-header:first-child { margin-top: 0; }

        .stat-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 0.95rem; }
        .stat-val { font-family: var(--font-mono); font-weight: bold; }
        .val-good { color: var(--primary); } .val-warn { color: var(--secondary); } .val-bad { color: var(--danger); }

        .faction-tag { font-size: 0.75rem; padding: 2px 6px; border-radius: 2px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
        .f-141 { color: #8cf; border-color: #8cf; } .f-kortac { color: #fa8; border-color: #fa8; } .f-chimera { color: #c8f; border-color: #c8f; } .f-ghosts { color: #9f9; border-color: #9f9; }
        
        #main-view { grid-row: 2; display: flex; flex-direction: column; height: 100%; overflow: hidden; }
        
        #game-screen { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; background: rgba(0,0,0,0.1); }

        .msg-box { background: rgba(0,0,0,0.3); border-left: 3px solid var(--text-dim); padding: 15px; animation: slideIn 0.3s ease-out; line-height: 1.6; }
        .msg-box.event { border-color: var(--secondary); background: rgba(255, 204, 0, 0.05); }
        .msg-box.dialogue { border-color: var(--primary); background: rgba(0, 255, 204, 0.05); font-style: italic;}
        .msg-box.alert { border-color: var(--danger); background: rgba(255, 51, 51, 0.1); }
        .msg-box.system { border-color: var(--text-dim); font-family: var(--font-mono); font-size: 0.9rem; }
        .speaker-name { font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; text-transform: uppercase; color: var(--primary); }

        #controls-area { height: 220px; flex-shrink: 0; border-top: 1px solid var(--border-color); padding: 15px; background: rgba(20, 25, 35, 0.9); display: grid; grid-template-columns: 1fr 1fr; gap: 10px; overflow-y: auto; }

        button { background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.2)); border: 1px solid var(--border-color); color: var(--text-main); padding: 14px; cursor: pointer; transition: all 0.2s; text-align: left; position: relative; font-family: var(--font-ui); display: flex; flex-direction: column; justify-content: center; border-radius: 4px; }
        button:hover:not(:disabled) { border-color: var(--primary); background: rgba(0, 255, 204, 0.1); transform: translateX(2px); }
        button:active:not(:disabled) { transform: scale(0.98); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        button .btn-title { font-weight: bold; font-size: 1rem; margin-bottom: 3px; }
        button .btn-desc { font-size: 0.8rem; color: var(--text-dim); }
        button .btn-cost { position: absolute; top: 10px; right: 10px; font-family: var(--font-mono); color: var(--secondary); font-size: 0.8rem; }

        .log-entry { margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; }
        .log-time { color: var(--text-dim); font-size: 0.7rem; margin-bottom: 2px; }
        .log-money.gain { color: var(--primary); } .log-money.loss { color: var(--danger); }

        /* æ¨¡æ€æ¡† */
        #modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-box { width: 400px; background: #151922; border: 2px solid var(--primary); padding: 30px; text-align: center; box-shadow: 0 0 50px rgba(0, 255, 204, 0.2); max-width: 90%; }
        input.input-name { background: #000; border: 1px solid #444; color: #fff; padding: 10px; width: 100%; margin: 20px 0; font-size: 1.2rem; text-align: center; }
        
        /* ç›²ç›’ */
        .gacha-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 15px 0; }
        .gacha-card { background: #1a1a1a; border: 1px solid #333; padding: 10px; text-align: center; border-radius: 5px; min-height: 100px; display: flex; flex-direction: column; justify-content: center; position: relative;}
        .rarity-N { border-color: #666; color: #888; }
        .rarity-R { border-color: #4da6ff; color: #4da6ff; box-shadow: 0 0 5px rgba(77, 166, 255, 0.2); }
        .rarity-SR { border-color: #b366ff; color: #b366ff; box-shadow: 0 0 8px rgba(179, 102, 255, 0.3); }
        .rarity-SSR { border-color: #ffcc00; color: #ffcc00; box-shadow: 0 0 15px rgba(255, 204, 0, 0.5); animation: glow 2s infinite; }
        .card-name { font-size: 0.9rem; font-weight: bold; margin-bottom: 5px; }
        .card-desc { font-size: 0.7rem; color: #aaa; font-style: italic; }
        .new-tag { position: absolute; top: -5px; right: -5px; background: #ff3366; color: white; font-size: 0.7rem; padding: 2px 5px; border-radius: 3px; transform: rotate(15deg); }
        .collection-tabs { display: flex; gap: 10px; margin-bottom: 15px; justify-content: center; flex-wrap: wrap; }
        .tab-btn { flex: 1; padding: 8px; background: #222; border: 1px solid #444; color: #888; cursor: pointer; min-width: 60px; }
        .tab-btn.active { background: var(--primary); color: #000; border-color: var(--primary); font-weight: bold; }
        .locked-item { opacity: 0.5; filter: grayscale(100%); border-style: dashed; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes glow { 0% { border-color: #ffcc00; } 50% { border-color: #ffeebb; } 100% { border-color: #ffcc00; } }

        /* =========================================
           ğŸ“± ç§»åŠ¨ç«¯é€‚é… (Mobile Landscape Fix)
           ========================================= */
        
        #portrait-warning { display: none; }
        @media screen and (max-width: 900px) and (orientation: portrait) {
            #portrait-warning {
                display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: #0b0d12; z-index: 9999; color: var(--primary);
                justify-content: center; align-items: center; text-align: center; padding: 20px;
                flex-direction: column;
            }
            #app { display: none; } 
        }

/* ğŸŸ¢ ä¿®å¤ï¼šè¯„ä»·å¼¹çª—æ‰‹æœºé€‚é… */
        #review-overlay .modal-box {
            display: flex; 
            flex-direction: column; 
            max-height: 85vh; /* å¼ºåˆ¶æœ€å¤§é«˜åº¦ä¸è¶…è¿‡å±å¹•85% */
        }
        
        #review-list-container {
            flex: 1; /* è‡ªåŠ¨å æ®å‰©ä½™ç©ºé—´ */
            overflow-y: auto; /* å†…å®¹è¿‡å¤šæ—¶å†…éƒ¨æ»šåŠ¨ */
            margin: 15px 0;
            padding-right: 5px;
            min-height: 0; /* é˜²æ­¢ Flex å­å…ƒç´ æº¢å‡º */
        }
        @media screen and (max-width: 1024px) and (orientation: landscape) {
            /* 1. å­—ä½“å†ç¼©å°ä¸€ç‚¹ï¼Œè®©ç•Œé¢å®¹çº³æ›´å¤šå†…å®¹ */
            html { font-size: 11px; }
            
            #app {
                /* 2. ä¾§è¾¹æ å†å˜çª„ä¸€ç‚¹ (190px) */
                grid-template-columns: 1fr 190px; 
                grid-template-rows: 35px 1fr; /* é¡¶éƒ¨æ å‹æ‰ */
                gap: 4px; padding: 4px;
                
                /* â­ï¸ ä½¿ç”¨åŠ¨æ€é«˜åº¦ï¼Œè§£å†³åœ°å€æ é®æŒ¡é—®é¢˜ */
                height: 100dvh; 
            }

            header { padding: 0 10px; }
            .brand { display: none; } /* éšè—æ ‡é¢˜ */
            .top-stats { gap: 10px; font-size: 0.9rem; justify-content: flex-start; }
            .operator-info { font-size: 0.9rem; margin-left: auto; display: block; }

            #sidebar-left {
                grid-row: 2; grid-column: 2;
                border-left: 1px solid var(--border-color);
                padding: 6px; /* å‡å°‘å†…è¾¹è· */
                font-size: 0.85rem;
            }
            .section-header { margin: 8px 0 4px 0; font-size: 0.75rem; }
            .stat-row { margin-bottom: 3px; }

            /* éšè—æ—¥å¿—æ  */
            #sidebar-right { display: none !important; }

            #main-view { grid-row: 2; grid-column: 1; border-right: none; }
            
            #game-screen { padding: 8px; gap: 8px; }
            .msg-box { padding: 8px; font-size: 0.9rem; line-height: 1.4; }

            /* â­ï¸ æŒ‰é’®åŒºåŸŸå…³é”®ä¿®å¤ */
            #controls-area {
                height: 150px;
                padding: 5px;
                gap: 5px;
                /* â­ï¸ å¢åŠ åº•éƒ¨å†…è¾¹è·ï¼Œé˜²æ­¢æœ€åä¸€ä¸ªæŒ‰é’®è¢«æµè§ˆå™¨å·¥å…·æ é®æŒ¡ */
                padding-bottom: 50px; 
            }
            button { padding: 8px 10px; } /* æŒ‰é’®æ›´ç´§å‡‘ */
            button .btn-title { font-size: 0.9rem; }
            button .btn-desc { font-size: 0.7rem; }
            
            /* å¼¹çª— */
            .modal-box { width: 85%; padding: 15px; }
            #gacha-overlay .modal-box { width: 95%; height: 95vh; }
            .gacha-grid { grid-template-columns: repeat(4, 1fr); gap: 4px; }

/* ğŸ‘‡ğŸ‘‡ğŸ‘‡ åœ¨è¿™é‡Œç²˜è´´ä¸Šé¢çš„ä»£ç  ğŸ‘‡ğŸ‘‡ğŸ‘‡ */
            button[onclick="confirmRestart()"] {
                padding: 4px 8px !important;
                font-size: 0.6rem !important;
                opacity: 0.3; 
                top: 5px !important;
                right: 5px !important;
                border: 1px solid rgba(255, 51, 51, 0.3) !important;
                background: transparent !important;
            }
            button[onclick="confirmRestart()"]:active {
                opacity: 1;
                background: rgba(0,0,0,0.8) !important;
            }
        }
    </style>
</head>
<body>

<div id="portrait-warning">
    <div style="font-size: 3rem; margin-bottom: 20px;">âŸ³</div>
    <p>è¯·å°†æ‰‹æœº<b>æ¨ªå±</b><br>ä»¥è·å¾—æœ€ä½³ä½“éªŒ</p>
</div>


<div id="modal-overlay">
    <div class="modal-box">
        <h2 style="color:var(--primary); margin-bottom:10px;">èº«ä»½è®¤è¯</h2>
        <p style="color:#aaa; font-size:0.9rem;">COD æ¬¡å…ƒå†›éœ€ç«™ç®¡ç†ç³»ç»Ÿ V4.3</p>
        
           <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #333; line-height: 1.8;">
            <span style="font-size: 0.9rem; font-weight: bold; color: #fff;">æœ¬æ¸¸æˆä¸ºå…è´¹åŒäººä½œå“ï¼Œä»…ä¾›å¨±ä¹ï¼ŒOOCè‡´æ­‰ã€‚</span><br>
            <span style="font-size: 0.9rem; font-weight: bold; color: #ff4444;">ä¸¥ç¦äºŒä¼ ã€äºŒæ”¹ã€å€’å–æˆ–ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚</span>
        </div>

        <input type="text" id="input-player-name" class="input-name" placeholder="è¾“å…¥ç‰¹å·¥ä»£å·..." maxlength="12">
        <button onclick="startGame()" style="width:100%; text-align:center; border-color:var(--primary); color:var(--primary);">
            <span class="btn-title">åˆå§‹åŒ–ç³»ç»Ÿ</span>
        </button>
    </div>
</div>


<button onclick="confirmRestart()" style="position:fixed; top:15px; right:15px; z-index:2000; padding:8px 15px; background:rgba(0,0,0,0.6); border:1px solid #ff3333; color:#ff3333; font-family:'Consolas', monospace; cursor:pointer; backdrop-filter:blur(2px);">
    âš  RESTART SYSTEM
</button>


<div id="review-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:1100; justify-content:center; align-items:center; backdrop-filter:blur(5px);">
    <div class="modal-box" style="width: 500px; max-width: 90%;">
        <h2 style="color:var(--secondary); margin-bottom:10px; border-bottom:1px solid var(--secondary); padding-bottom:10px;">åº—é“ºè¯„ä»·è¯¦æƒ…</h2>
        <div id="review-list-container" class="review-list">
            </div>
        <button onclick="closeReviewModal()" style="width:100%; text-align:center;">å…³é—­ç»ˆç«¯</button>
    </div>
</div>
<div id="credits-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:1200; justify-content:center; align-items:center; backdrop-filter:blur(5px);">
    <div class="modal-box" style="width: 600px; max-width: 90%; max-height: 85vh; display: flex; flex-direction: column; padding: 20px; overflow: hidden;">
        
        <h2 style="color:var(--love); margin-bottom:15px; border-bottom:1px solid var(--love); padding-bottom:10px; flex-shrink: 0;">ç‰¹åˆ«é¸£è°¢ (Credits)</h2>
        
        <div style="text-align:left; color:#ccc; line-height:1.8; font-size:0.9rem; overflow-y: auto; flex: 1; padding-right: 10px; border-bottom: 1px solid #333;">
            <p style="color:var(--primary); font-weight:bold; margin-bottom:10px;">åˆ¶ä½œäººï¼šAAAé£å²›è£…ä¿®å¼ å§</p>
            <p>æ„Ÿè°¢æ¯ä¸€ä½æ¸¸ç©å¹¶æä¾›å»ºè®®çš„ä½ ä»¬ï¼</p>
            <hr style="border:0; border-top:1px dashed #444; margin:15px 0;">
            <p style="color:var(--secondary);">[ âš¡ ä¸ºçˆ±å‘ç”µ / èµèµåå• ]</p>
            <ul style="list-style:none; padding-left:0; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <li>â­ å¤§è¸æ­¥å‘å‰158</li>
                <li>â­ ä¸åœ¨çº¯å‡€çš„é›ª</li>
                <li>â­ åˆ©åˆ©çš„çº¢èŒ¶ä¸¶</li>
                <li>â­ æ —å­å°å§ğŸŒ°</li>
                <li>â­ æ‚Ÿ</li>
                <li>â­ å£¹ç–æŸ’æŸ’é›¶å£¹ç–</li>
                <li>â­ å¤šæ¬¡å©‰æ‹’Nikto</li>
                <li>â­ å¤§æ©˜ç¾å¼</li>
                <li>â­ hyxy15h</li>
                <li>â­ æ…è¡Œ-</li>
                <li>â­ æ…•å®¹äº‘å‡Œ</li>
                <li>â­ é»‘å¤œå‡ºè¿œé—¨</li>
                <li>â­ ä¹é˜¿è‚†</li>
                <li>â­ KVONY</li>
                <li>â­ ä»Šå¤•ä½•å¤•</li>
                <li>â­ ä¸æ­»æ—åœ¨çº¿æä¾›å¤æ´»æœåŠ¡</li>
                <li>â­ AAAå†›åŒºåŒ»ç–—åŒ…æ‰¹å‘å•†</li>
                <li>â­ å¤æ³¢åˆ©åˆ©è‘¡è„</li>
                <li>â­ é’é¸¦</li>
                <li>â­ å†¤æ‰å†¤çš„è¯´ä¸‰é</li>
                <li>â­ AAAå€’å–å†›ç«å•†240è¯šå”®</li>
                <li>â­ å•«å•«ç…²åŒèšä»”ç…</li>
                <li>â­ æ‚¨æ‹¨æ‰“çš„ç”¨æˆ·æš‚æ—¶ä¸æƒ³æ¥å¬</li>
                <li>â­ Local Survivor(ç³¯ç±³é£˜é¦™)</li>
                <li>â­ Ender</li>
                <li>â­ é¡¾æ¹‘ä¹‹_Zona</li>
                <li>â­ åµ</li>
                <li>â­ EmeT_</li>
            </ul>
            <hr style="border:0; border-top:1px dashed #444; margin:15px 0;">
            <p> ä»¥ä¸Šé¡ºåºä¸åˆ†å…ˆåï¼Œå†æ¬¡å¼ºè°ƒè¿™æ˜¯æ— ç›ˆåˆ©æ¸¸æˆå“¦ï¼Œç¥å¤§å®¶ç©çš„å¼€å¿ƒ</p>
            <br> </div>

        <button onclick="document.getElementById('credits-overlay').style.display='none'" style="width:100%; margin-top:15px; text-align:center; flex-shrink: 0; background: var(--bg-dark); border-color: var(--text-dim);">å…³é—­åˆ—è¡¨</button>
    </div>
</div>

<div id="gacha-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:1300; flex-direction:column; justify-content:center; align-items:center; backdrop-filter:blur(8px);">
    <div class="modal-box" style="width: 800px; max-width: 95%; height: 80vh; display:flex; flex-direction:column;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px;">
            <h2 style="color:var(--primary);">ğŸ“¦ é»‘å¸‚ç©ºæŠ• (Supply Drop)</h2>
            <div style="font-family:var(--font-mono); color:var(--secondary);">
                ğŸ’° <span id="gacha-money">0</span> | ğŸª™ ä»£å¸: <span id="gacha-coins">0</span>
            </div>
        </div>
        
        <div id="gacha-view-main" style="flex:1; overflow-y:auto; text-align:center;">
            <div style="margin: 30px 0; padding: 40px; border: 2px dashed #333; border-radius: 10px; background: rgba(0,0,0,0.3);">
                <div style="font-size: 4rem; margin-bottom: 20px;">ğŸšğŸ“¦</div>
                <p style="color:#888; margin-bottom: 30px;">"å“ªæ€•æ˜¯åºŸåœŸï¼Œåªè¦æœ‰é’±ï¼Œå°±æ²¡æœ‰ä¹°ä¸åˆ°çš„ä¸œè¥¿ã€‚"</p>
                <div style="display:flex; gap:20px; justify-content:center;">
                    <button onclick="drawGacha(1)" style="width:150px; border-color:var(--primary);">
                        <div class="btn-title">å•æ¬¡ç©ºæŠ•</div>
                        <div class="btn-desc">$10,000</div>
                    </button>
                    <button onclick="drawGacha(10)" style="width:150px; border-color:var(--secondary);">
                        <div class="btn-title">åè¿ç©ºæŠ•</div>
                        <div class="btn-desc">$100,000</div>
                    </button>
                </div>
            </div>
            <button onclick="showCollection()" style="margin-top:20px; width:100%;">ğŸ“– æŸ¥çœ‹æ”¶è—å›¾é‰´ / å…‘æ¢å•†åº—</button>
        </div>

        <div id="gacha-view-collection" style="display:none; flex:1; overflow-y:auto; text-align:left;">
            <div class="collection-tabs">
                <button class="tab-btn active" onclick="switchTab('ghost')">Ghost</button>
                <button class="tab-btn" onclick="switchTab('konig')">KÃ¶nig</button>
                <button class="tab-btn" onclick="switchTab('krueger')">Krueger</button>
                        <button class="tab-btn" onclick="switchTab('keegan')">Keegan</button>
            </div>
            <div id="collection-grid" class="gacha-grid"></div>
           <div style="margin-top:15px; border-top:1px solid #333; padding-top:10px; font-size:0.9rem; color:#888;">
                <div style="color:var(--primary); margin-bottom:5px;">ğŸ›’ ä»£å¸å•†åº—æŒ‡å—ï¼š</div>
                1. é‡å¤è·å¾— SSR/SR/R ç‰©å“æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬åŒ–ä¸º <span style="color:var(--secondary);">ğŸª™ ä»£å¸</span>ã€‚<br>
                2. ç‚¹å‡»ä¸Šæ–¹ç°è‰²çš„â€œæœªè·å¾—â€å¡ç‰‡ï¼Œå³å¯æ¶ˆè€—ä»£å¸ç›´æ¥å…‘æ¢ã€‚<br>
                3. å½“ä»£å¸è¶³å¤Ÿæ—¶ï¼Œå¡ç‰‡ä¼š<span style="color:var(--primary);">é«˜äº®æ˜¾ç¤º</span>ã€‚
            </div>
            <button onclick="$('gacha-view-collection').style.display='none'; $('gacha-view-main').style.display='block';" style="margin-top:10px;">â¬… è¿”å›æŠ½å¥–</button>
        </div>

        <button onclick="$('gacha-overlay').style.display='none'; updateUI();" style="margin-top:15px; border-color:var(--danger); color:var(--danger);">å…³é—­ç»ˆç«¯</button>
    </div>
</div>

<div id="app">
    <header class="panel">
        <div class="brand">SUPPLY STATION</div>
   <div class="top-stats">
            <div>DAY <span id="disp-day" class="val-warn">1</span></div>
            <div id="disp-weather" style="display:flex; align-items:center;">â˜€ æ™´æœ—</div>
            <div style="display:flex; align-items:center; gap:10px;">
                AP: 
                <div class="energy-bar" id="disp-energy">
                    <div class="energy-point"></div><div class="energy-point"></div><div class="energy-point"></div>
                </div>
            </div>
            <div>CASH: $<span id="disp-money" class="val-good">1000</span></div>
        </div>
        <div style="font-size:0.9rem; opacity:0.7;">OPERATOR: <span id="disp-name">???</span></div>
    </header>

    <aside id="sidebar-left" class="panel">
        <div class="section-header">æ ¸å¿ƒç‰©èµ„ (Inventory)</div>
        <div class="stat-row">
            <span>åŒ»ç–—åŒ… (Medkit)</span> 
            <span id="inv-medkit" class="stat-val">0</span>
        </div>
        <div class="stat-row">
            <span>å†›ç²® (Food)</span> 
            <span id="inv-food" class="stat-val">0</span>
        </div>
        <div class="stat-row">
            <span>å¼¹è¯ (Ammo)</span> 
            <span id="inv-ammo" class="stat-val">0</span>
        </div>
        <div class="stat-row" style="font-size:0.8rem; color:#666; margin-top:5px;">
            ä»“åº“å®¹é‡: <span id="inv-cap">50</span>
        </div>

        <div class="section-header">é˜µè¥å…³ç³» (Relations)</div>
        <div class="stat-row">
            <span class="faction-tag f-141">TF141</span>
            <span id="rep-141" class="stat-val">0</span>
        </div>
        <div class="stat-row">
            <span class="faction-tag f-kortac">KorTac</span>
            <span id="rep-kortac" class="stat-val">0</span>
        </div>
        <div class="stat-row">
            <span class="faction-tag f-chimera">Chimera</span>
            <span id="rep-chimera" class="stat-val">0</span>
        </div>
          <div class="stat-row">
         <span class="faction-tag f-ghosts">Ghosts</span>
         <span id="rep-ghosts" class="stat-val">0</span>
          </div>

        <div class="section-header">äººå‘˜å¥½æ„Ÿ (Intel)</div>
        <div class="stat-row">
            <span>Ghost</span> 
            <span id="aff-ghost" class="stat-val">0</span>
        </div>
        <div id="status-ghost" style="font-size:0.75rem; color:var(--love); display:none; text-align:right;">â™¥ æ‹çˆ±ä¸­</div>
        
        <div class="stat-row">
            <span>KÃ¶nig</span> 
            <span id="aff-konig" class="stat-val">0</span>
        </div>
        <div id="status-konig" style="font-size:0.75rem; color:var(--love); display:none; text-align:right;">â™¥ æ‹çˆ±ä¸­</div>

        <div class="stat-row">
            <span>Krueger</span> 
            <span id="aff-krueger" class="stat-val">0</span>
        </div>
        <div id="status-krueger" style="font-size:0.75rem; color:var(--love); display:none; text-align:right;">â™¥ æ‹çˆ±ä¸­</div>

<div class="stat-row">
    <span>Keegan</span> 
    <span id="aff-keegan" class="stat-val">0</span>
</div>
<div id="status-keegan" style="font-size:0.75rem; color:var(--love); display:none; text-align:right;">â™¥ æ‹çˆ±ä¸­</div>

        <div class="section-header">åº—é“ºè¯„ä»· (Rating)</div>
        <div class="stat-row clickable-rating" style="flex-direction:column; align-items:flex-start;" onclick="showReviewModal()" title="ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†è¯„ä»·">
            <div style="display:flex; justify-content:space-between; width:100%;">
                <span>ä¿¡èª‰è¯„åˆ†</span>
                <span class="stat-val"><span id="shop-rating-num">5.0</span> <span id="shop-rating-stars" class="star-rating">â˜…â˜…â˜…â˜…â˜…</span></span>
            </div>
            <div id="latest-review" class="review-text">"æ–°åº—å¼€ä¸šï¼Œæš‚æ— è¯„ä»·..."</div>
        </div>

        <div class="section-header">è®¾æ–½ç­‰çº§</div>
        <div class="stat-row"><span>åŒ»ç–—åŒº</span> <span id="lvl-med" class="stat-val">LV 1</span></div>
        <div class="stat-row"><span>ä»“åº“</span> <span id="lvl-storage" class="stat-val">LV 1</span></div>
    </aside>

    <main id="main-view" class="panel">
        <div id="game-screen">
            <div class="msg-box system">
                > ç³»ç»Ÿè‡ªæ£€å®Œæˆã€‚<br>
                > æˆ˜åŒºç½‘ç»œå·²è¿æ¥ã€‚<br>
                > æ­£åœ¨ç­‰å¾…æŒ‡ä»¤...
            </div>
        </div>
        <div id="controls-area">
            </div>
    </main>

    <aside id="sidebar-right" class="panel">
        <div class="section-header">ç»ˆç«¯æ—¥å¿— (Terminal)</div>
        <div id="log-container">
            </div>
    </aside>
</div>

<script>
/* * ============================================
 * GAME ENGINE & DATA
 * ============================================
 */

// --- é…ç½® ---
const CONFIG = {
    // è¿›è´§è´µäº†
    buy_price: { medkit: 80, food: 40, ammo: 60 },
    // å–ä»·é™äº† (åˆ©æ¶¦ç©ºé—´è¢«å¤§å¹…å‹ç¼©)
    sell_price: { medkit: 120, food: 65, ammo: 85 }, 
    
    high_sell_multiplier: 1.5, 
    
    // ğŸŸ¢ ä¿®æ”¹è¿™é‡Œï¼šåœ¨æ•°ç»„æœ€ååŠ ä¸Š 1000
    // ç°åœ¨çš„ç­‰çº§ä¸Šé™å˜æˆäº† 5 çº§ (å¯¹åº” 1000 å®¹é‡)
    capacity_tiers: [50, 100, 200, 500, 1000], 
    
    heal_income_base: 200,
    max_ap: 3
};

// --- ç›²ç›’æ•°æ®é…ç½® ---
const GachaPool = {
    ghost: [
        { id: 'g_r1', rarity: 'R', name: 'æˆ˜æœ¯èŒ¶åŒ…', desc: 'ç«Ÿç„¶æ˜¯ä»–éšèº«æºå¸¦çš„è‹±å¼çº¢èŒ¶...', cost: 10 },
        { id: 'g_r2', rarity: 'R', name: 'ç£¨æŸçš„ç‹—ç‰Œ', desc: 'é‡‘å±è¾¹ç¼˜å·²ç£¨å¹³ï¼Œæ— æ•°æ¬¡æ­»é‡Œé€ƒç”Ÿçš„è§è¯ã€‚', cost: 10 },
        { id: 'g_sr1', rarity: 'SR', name: 'å¤‡ç”¨éª·é«…é¢ç½©', desc: 'é¦™é¦™çš„ï¼Œå¸¦ç€ä»–çš„å‘³é“ã€‚', cost: 50 },
        { id: 'g_sr2', rarity: 'SR', name: 'é»‘è‰²ç´§èº«ä½œæˆ˜è¡£', desc: 'è¿™ä¸ªç”·äººçš„èº«æçœŸæ˜¯è¯¥æ­»çš„å¥½å•Š...', cost: 50 },
        { id: 'g_ssr', rarity: 'SSR', name: 'éª·é«…å›¾æ¡ˆå¹³è§’è£¤', desc: 'é»‘è‰²çš„æ£‰è´¨é¢æ–™ï¼Œä¸Šé¢å°ç€ä¸€åœˆ...å¯çˆ±çš„å°éª·é«…å¤´ï¼Ÿå¾ˆéš¾æƒ³è±¡ä»–çœŸçš„ç©¿è¿™ä¸ªã€‚', cost: 200 },
        { id: 'g_ssr3', rarity: 'SSR', name: 'ä¸€æšé“¶è‰²å­å¼¹', desc: 'åˆ»ç€ "Ghost"ã€‚ä»–æ›¾ä¸ºè‡ªå·±ç•™çš„æœ€åä¸€é¢—å­å¼¹ï¼Œä¹Ÿè®¸æ˜¯ä¸ºäº†åœ¨ç»å¢ƒä¸­è‡ªæˆ‘äº†æ–­ï¼Ÿ', cost: 200 },
        { id: 'g_ssr2', rarity: 'SSR', name: 'æ®‹ç¼ºçš„å…¨å®¶ç¦', desc: 'å¦ˆå¦ˆã€å¼Ÿå¼Ÿã€å¼Ÿåª³... éƒ½åœ¨ç¬‘ï¼Œå”¯ç‹¬çˆ¶äº²çš„ä½ç½®è¢«ç‹ ç‹ æ’•æ‰äº†ã€‚', cost: 200 }
    ],
    konig: [
        { id: 'k_r1', rarity: 'R', name: 'æªæ¢°æ ¡å‡†ç¬”è®°', desc: 'å¯†å¯†éº»éº»çš„å¾·è¯­ç¬”è®°ï¼Œå­—è¿¹å·¥æ•´ï¼Œå­—ä½“å¯çˆ±ã€‚', cost: 10 },
        { id: 'k_r2', rarity: 'R', name: 'åŠ¨æ¤ç‰©ç´ ææœ¬', desc: 'ç”»æ»¡äº†åºŸåœŸä¸Šå¹¸å­˜çš„å°èŠ±ï¼Œkonigå…¶å®ä¹Ÿå¾ˆæ¸©æŸ”å‘¢ã€‚', cost: 10 },
        { id: 'k_sr1', rarity: 'SR', name: 'åŠæˆå“æœ¨é›•å…”', desc: 'åˆ»äº†ä¸€åŠåœæ‰‹äº†ï¼Œä¼¼ä¹è§‰å¾—è‡ªå·±æ‰‹å¤ªç¬¨ã€‚', cost: 50 },
        { id: 'k_sr2', rarity: 'SR', name: 'æ¹¿é€çš„é˜²ç„¦è™‘å¤´å¥—', desc: 'åˆšæ¢ä¸‹æ¥çš„ï¼Œæ•£å‘ç€å¼ºçƒˆçš„è·å°”è’™æ°”æ¯ã€‚', cost: 50 },
        // SSR
        { id: 'k_ssr', rarity: 'SSR', name: 'æœªå¯„å‡ºçš„å®¶ä¹¦', desc: 'â€œå¦ˆå¦ˆï¼Œæˆ‘åœ¨è¿™é‡Œé‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„äºº...â€', cost: 200 },
        { id: 'k_ssr2', rarity: 'SSR', name: 'æ‰‹ç»‡çš„å›´å·¾', desc: 'æœ‰äº›æ—§äº†ï¼Œä½†ä»–ä¸€ç›´èˆä¸å¾—æˆ´ã€‚æ˜¯ä»–ç¥–æ¯çš„æ‰‹è‰ºã€‚', cost: 200 },
        { id: 'k_ssr3', rarity: 'SSR', name: 'ä½ çš„ç´ æç”»', desc: 'ç”»å·¥æƒŠäººçš„ç»†è…»ï¼Œç”»çš„æ˜¯ä½ è¶´åœ¨æŸœå°ç¡ç€çš„æ ·å­ï¼Œè¾¹ç¼˜æœ‰åå¤æ‘©æŒ²çš„ç—•è¿¹ã€‚', cost: 200 },
       ],
    krueger: [
        { id: 'r_r1', rarity: 'R', name: 'æå“ç£¨åˆ€çŸ³', desc: 'ä¸­é—´å‡¹é™·ï¼Œä¸çŸ¥ç£¨è¿‡å¤šå°‘æ¬¡è‡´å‘½çš„åˆ€é”‹ã€‚', cost: 10 },
        { id: 'r_r2', rarity: 'R', name: 'å¥¥åœ°åˆ©è‚‰å¹²', desc: 'å®¶ä¹¡çš„å‘³é“ï¼Œå¥½åƒä½ å°±å¤šåƒç‚¹ã€‚', cost: 10 },
        { id: 'r_sr1', rarity: 'SR', name: 'ä¼ªè£…ç½‘ç¢ç‰‡', desc: 'æ²¾ç€æ³¥åœŸå’Œå¹²æ¶¸çš„è¡€è¿¹ã€‚', cost: 50 },
        { id: 'r_sr2', rarity: 'SR', name: 'é»‘è‰²çš®é©æ‰‹å¥—', desc: 'æ‰¼ä½å‘½è¿å’½å–‰çš„æ‰‹å¥—ï¼Œçš®é©å·²è½¯åŒ–è´´æ‰‹ã€‚', cost: 50 },
        { id: 'r_ssr', rarity: 'SSR', name: 'æµ·è¾¹çš„æˆ¿äº§è¯', desc: 'Kruegeræ€ä¹ˆä¼šæœ‰è¿™æ ·çš„ä¸œè¥¿ï¼Ÿ', cost: 200 },
        { id: 'r_ssr3', rarity: 'SSR', name: 'çˆ¶äº²çš„çŒåˆ€', desc: 'ä¸€æŠŠå¤æ—§çš„å¥¥åœ°åˆ©çŒåˆ€ï¼Œåˆ€æŸ„ä¸Šåˆ»ç€ "Josef"', cost: 200 },
       { id: 'r_ssr2', rarity: 'SSR', name: 'ç«¥å¹´çš„å…«éŸ³ç›’', desc: 'å¥¥åœ°åˆ©ç«¥è°£ï¼Œé‚£æ˜¯ä»–åœ¨çˆ¶æ¯å® çˆ±ä¸‹é•¿å¤§çš„è¯æ®ã€‚', cost: 200 }
    ],
// ğŸŸ¢ æ–°å¢ Keegan ä¸“å±ç‰©å“æ± 
    keegan: [
        { id: 'ke_r1', rarity: 'R', name: 'é˜²æ°´ç«æŸ´', desc: 'å³ä½¿åœ¨æ·±æ°´æˆ–æ²¼æ³½é‡Œä¹Ÿèƒ½ç‚¹ç‡ƒï¼Œè¿™æ˜¯ä»–åœ¨ä¸›æ—ä»»åŠ¡ä¸­çš„ä¹ æƒ¯ã€‚', cost: 10 },
        { id: 'ke_r2', rarity: 'R', name: 'æˆ˜æœ¯å¤šåŠŸèƒ½é’³', desc: 'æœ‰äº›ç£¨æŸï¼Œæ¯”èµ·åˆ€ï¼Œä»–ä¼¼ä¹æ›´å–œæ¬¢ç”¨è¿™ä¸ªæ‹†é™¤é™·é˜±ã€‚', cost: 10 },
        { id: 'ke_sr1', rarity: 'SR', name: 'å¤‡ç”¨å¤œè§†ä»ªç”µæ± ', desc: 'æ ‡å¿—æ€§çš„å››çœ¼å¤œè§†ä»ªæœ€é‡è¦çš„ä¸œè¥¿ï¼Œä»–åœ¨é»‘æš—ä¸­å¦‚é±¼å¾—æ°´çš„ä¸å¯æˆ–ç¼ºä¹‹ç‰©ã€‚', cost: 50 },
        { id: 'ke_sr2', rarity: 'SR', name: 'ä¸›æ—ä¼ªè£…ç½‘ç¢ç‰‡', desc: 'ä¸ä»…ä»…æ˜¯éšè”½ï¼Œä¹Ÿæ˜¯å¾ˆå¥½çš„é˜²é›¨å¸ƒï¼Œä¸Šé¢æœ‰æ·¡æ·¡çš„é›¨æ—æ³¥åœŸå‘³ã€‚', cost: 50 },
        // SSR ç‰©å“
        { id: 'ke_ssr', rarity: 'SSR', name: 'Rorke çš„é€šç¼‰ä»¤', desc: 'ä¸€å¼ è¢«æ‰çš±åˆæŠšå¹³çš„æ—§çº¸ï¼Œé‚£æ˜¯ Ghosts æ°¸è¿œçš„ç—›ï¼Œä½†ä»–æŠŠå®ƒç»™äº†ä½ ã€‚', cost: 200 },
        { id: 'ke_ssr2', rarity: 'SSR', name: 'æ‰‹å†™çš„è§‚å¯Ÿæ—¥å¿—', desc: 'å­—è¿¹å·¥æ•´å†·é™ï¼Œæœ€åä¸€é¡µå†™ç€ï¼šâ€œç›®æ ‡ä»Šå¤©çœ‹èµ·æ¥å¾ˆç´¯ï¼Œæ˜å¤©å¸¦ç‚¹å’–å•¡å»ã€‚â€', cost: 200 },
        { id: 'ke_ssr3', rarity: 'SSR', name: 'æ—§çš„å¹½çµé¢ç½©', desc: 'ç»å…¸çš„éª·é«…å›¾æ¡ˆï¼Œå·²ç»è¤ªè‰²äº†ï¼Œä»–æŠŠå®ƒäº¤åˆ°äº†ä½ æ‰‹é‡Œï¼Œä»¥ååœ¨ä½ é¢å‰ä»–ä¸éœ€è¦ä¼ªè£…ã€‚', cost: 200 }
    ]
};

// --- æ¸¸æˆçŠ¶æ€ (GameState) ---
const State = {
    player: "Operator",
    day: 1,
    ap: 3, // Action Points
    money: 800,

// ğŸŸ¢ [Meta] è¯»æ¡£è®¡æ•°å™¨
    load_count: 0,
    
    // ã€æ–°å¢ã€‘å¤©æ°”ä¸è¯„ä»·çŠ¶æ€
    weather: { name: "æ™´æœ—", icon: "â˜€", modifier: 1.0 }, 
    rating: 5.0,       
    review_count: 0,   
    last_review: "æ–°åº—å¼€ä¸šï¼Œæš‚æ— è¯„ä»·ã€‚", 
    reviews: [], // ã€æ–°å¢ã€‘å­˜å‚¨è¯¦ç»†è¯„ä»·åˆ—è¡¨

    // ã€æ–°å¢ã€‘å¸‚åœºå€ç‡ (é»˜è®¤ä¸º 1.0)
    market_rate: { medkit: 1.0, food: 1.0, ammo: 1.0 },
    
    // Inventory
    medkit: 5,
    food: 10,
    ammo: 10,
    
    // Levels
    lvl_store: 1,
    lvl_med: 1,

    // Reputation (-100 to 100)
    rep_141: 10,
    rep_kortac: 10,
    rep_chimera: 10,
    rep_ghosts: 10, // ğŸŸ¢ æ–°å¢ Ghosts å£°æœ›

    // Character Affection & Status
// æ‰¾åˆ° State.chars éƒ¨åˆ†ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
    chars: {
        // ğŸŸ¢ ä¸ºæ¯ä¸ªè§’è‰²æ–°å¢ last_intimate_day å­—æ®µ
        ghost: { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99 },
        konig: { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99 },
        krueger: { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99 },
            // ğŸŸ¢ æ–°å¢ Keegan çŠ¶æ€
        keegan: { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99 }
    },
    // ã€æ–°å¢ã€‘ç›²ç›’ç³»ç»ŸçŠ¶æ€
    collection: [], 
    gacha_coins: 0, 
    set_rewards: { ghost: false, konig: false, krueger: false, keegan: false },// è®°å½•æ˜¯å¦é¢†è¿‡é›†é½å¥–åŠ±

    // Story Flags (ç”¨äºé•¿çº¿å‰§æƒ…)
    flags: {
        ghost_iou_active: false, // Ghost çš„æ¬ æ¡
        ghost_iou_timer: 0,
        krueger_shelter_promised: false,
        scavenger_scammed: false,
        drone_intel: false,
       // ã€æ–°å¢ã€‘åƒé†‹äº‹ä»¶å†·å´è®°å½• (åˆå§‹åŒ–ä¸ºè´Ÿæ•°ï¼Œä¿è¯ç¬¬ä¸€å¤©ä¹Ÿèƒ½è§¦å‘)
        last_jealous_day: -99,
      // ã€æ–°å¢ã€‘å¼ å§å½©è›‹æ˜¯å¦å·²è§¦å‘
        confessed_zhang: false,
       harem_queen: false // ğŸ‘‘ æ–°å¢ï¼šæ˜¯å¦è¾¾æˆå…¨å‘˜è‡£æœ
    }
}; // <--- å…³é”®ï¼å¿…é¡»æœ‰è¿™ä¸ªé—­åˆæ‹¬å·å’Œåˆ†å·

// ğŸŸ¢ 1. è¾…åŠ©å‡½æ•°ï¼šæ£€æŸ¥æ’ä»–æ€§ (çº¯çˆ±æ£€æµ‹)
const checkExclusivity = (currentCharKey, state) => {
    const charKeys = ['ghost', 'konig', 'krueger', 'keegan'];
    // æ£€æŸ¥é™¤å½“å‰è§’è‰²å¤–ï¼Œå…¶ä»–æ‰€æœ‰äººæ˜¯å¦éƒ½æœªå¤„äºæ‹çˆ±çŠ¶æ€
    return charKeys.every(k => k === currentCharKey || state.chars[k].dating === false);
};

// --- ã€æ–°å¢ã€‘å¤©æ°”ä¸è¯„è®ºæ•°æ® ---
    const WeatherTypes = [
    { name: "æ™´æœ—", icon: "â˜€", desc: "è§†é‡è‰¯å¥½ï¼Œé€‚åˆå¤–å‡ºæ¢ç´¢ã€‚", modifier: 1.0 },
    { name: "æ²™å°˜æš´", icon: "ğŸŒª", desc: "èƒ½è§åº¦æä½ï¼Œé¡¾å®¢å‡å°‘ã€‚", modifier: 0.8 },
    { name: "é…¸é›¨", icon: "ğŸŒ§", desc: "å…·æœ‰è…èš€æ€§ï¼Œè®¾æ–½ç»´æŠ¤è´¹ä¸Šå‡ã€‚", modifier: 1.1 }, // è¿™é‡Œçš„ modifier å¯ä»¥ä»£è¡¨è¿›è´§æˆæœ¬å¢åŠ 
    { name: "è¾å°„é›¾", icon: "ğŸŒ«", desc: "æå…¶å±é™©ï¼Œæ¢ç´¢é£é™©å‰§å¢ã€‚", modifier: 1.0 },
    { name: "æå…‰å¤œ", icon: "ğŸŒŒ", desc: "ç”µç£å¹²æ‰°å¼ºçƒˆï¼Œä½†æ™¯è‰²å¾ˆç¾ã€‚", modifier: 0.9 }
];

const CustomerReviews = {
    good: [
        "è€æ¿äººä¸é”™ï¼Œä»·æ ¼å…¬é“ã€‚",
        "è¿™åœ°æ–¹æ•‘äº†æˆ‘ä¸€å‘½ã€‚",
        "åœ¨è¿™ç‰‡åºŸåœŸä¸Šéš¾å¾—çš„å‡€åœŸã€‚",
        "ä¸œè¥¿å¾ˆå…¨ï¼Œç”šè‡³è¿˜æœ‰çƒ­å’–å•¡ã€‚",
        "ä¸‹æ¬¡è¿˜ä¼šå†æ¥ã€‚",
        "è¯åŒ…çœŸæœ‰æ•ˆï¼Œä¼¤å£å¾ˆå¿«å°±æ„ˆåˆäº†ã€‚è‰¯å¿ƒå•†å®¶ï¼",
        "è€æ¿åŠ¨ä½œå¾ˆå¿«ï¼ŒæœåŠ¡ä¸“ä¸šï¼Œæ¯”å†›æ–¹çš„åå‹¤å¿«å¤šäº†ã€‚",
        "è¿™é‡Œå¾ˆå®‰å…¨ï¼Œæˆ‘çœ‹åˆ°é‚£ä¸ªæˆ´å¹½çµé¢ç½©çš„å½±å­ç»å¸¸åœ¨é™„è¿‘æ™ƒæ‚ ã€‚",
        "ä»–ä»¬å®¶å†›ç²®è™½ç„¶è´µï¼Œä½†å‘³é“æ¯” MRE å¥½ä¸€ä¸ªæ¡£æ¬¡ã€‚",
        "ä»·æ ¼æ³¢åŠ¨é€æ˜ï¼Œæ²¡æœ‰ä¹±å®°å®¢ã€‚",
        "æˆ‘åœ¨é—¨å£è¢«æµæ°“éªšæ‰°ï¼Œè€æ¿äºŒè¯ä¸è¯´å°±å‡ºæ¥å¸®å¿™äº†ã€‚",
        "ä»“åº“ç®¡ç†éå¸¸è§„èŒƒï¼Œå¼¹è¯å‚¨å­˜å¾—å¾ˆå¹²ç‡¥ã€‚",
        "åº—é‡Œçš„çƒ­é¥®ç®€ç›´æ˜¯åºŸåœŸä¸Šçš„å¥¢ä¾ˆå“ã€‚",
        "æˆ‘çœ‹åˆ°é‚£ä¸ªå¤§ä¸ªå­åœ¨è¿™é‡Œä¹°ä¸œè¥¿ï¼Œä»–ä¿¡èµ–çš„åº—è‚¯å®šæ²¡é—®é¢˜ã€‚",
        "ä¸Šæ¬¡å¤§é›¨ï¼Œè€æ¿è¿˜å…è´¹ç»™æˆ‘ä»¬å‘äº†é˜²æ°´å¸ƒã€‚", 
        "ä¸Šæ¬¡æˆ‘æ‰‹å¤´ç´§ï¼Œè€æ¿è¿˜å¸®æˆ‘æ‰¾äº†ä»½é›¶å·¥ã€‚äººæƒ…å‘³åè¶³ã€‚",
        "è¿™é‡Œçš„åŒ»ç–—åŒºè®¾å¤‡å¾ˆå…ˆè¿›ï¼Œæ•‘äº†æˆ‘å…„å¼Ÿçš„å‘½ï¼",
        "è¯„åˆ†æ˜¯ 5 æ˜Ÿï¼Œåå‰¯å…¶å®ï¼Œæˆ‘å¾ˆå°‘ç»™æ»¡åˆ†ã€‚",
        "æ¯æ¬¡æ¥éƒ½æœ‰æ–°è´§ï¼Œè¿›è´§æ¸ é“å¾ˆç¨³å®šã€‚",
        "è¿™ä¸ªåº—é“ºçš„å®‰ä¿æªæ–½æ˜¯æ•´ä¸ªæˆ˜åŒºæœ€å¥½çš„ã€‚",
        "åŒ»ç–—åŒºå‡çº§åï¼Œæ²»ç–—æ•ˆç‡é«˜å¾—æƒŠäººï¼Œæ”¶è´¹ä¹Ÿå¾ˆåˆç†ã€‚", 
        "æˆ‘çš„è½¦åäº†ï¼Œè€æ¿ç«Ÿç„¶å¸®æˆ‘æ‰¾æ¥äº†é›¶ä»¶ã€‚äººè„‰å¹¿ï¼", 
        "è€æ¿çš„éŸ³ä¹å“å‘³çœŸæ˜¯ä¸æ•¢è‹ŸåŒï¼Œå¥½è¯„æ˜¯å¥¹é€¼æˆ‘ç‚¹çš„ã€‚", 
        "è¿™é‡Œçš„ç¯å¢ƒå¾ˆå¹²å‡€ï¼Œè€æ¿ä¸€å®šèŠ±äº†ä¸å°‘ç²¾åŠ›æ‰“æ‰«ã€‚", 
        "æˆ‘çœ‹åˆ° Ghost åœ¨å¸®è€æ¿æ¬ä¸œè¥¿ï¼Œè¿™å…³ç³»ç½‘æˆ‘æœäº†ã€‚", 
        "æˆ‘åœ¨è¿™é‡Œçœ‹åˆ°Ghostäº†ï¼Œä»–æ²¡å¯¹æˆ‘å¼€æªï¼Œæ‰€ä»¥æˆ‘ç»™äº”æ˜Ÿå¥½è¯„ã€‚",
        "åŒ»ç–—åŒºå¾ˆå¹²å‡€ï¼Œè®¾å¤‡çœ‹èµ·æ¥æ˜¯ä»ç¾å›½ç©ºè¿æ¥çš„ã€‚",
        "è€æ¿ä¼šè¯´æˆ‘çš„å®¶ä¹¡è¯ï¼Œæ„Ÿè§‰å¾ˆäº²åˆ‡ã€‚",
        "è™½ç„¶æ˜¯é»‘å¸‚ï¼Œä½†ç«¥åŸæ— æ¬ºï¼Œç‰©èµ„è´¨é‡æœ‰ä¿è¯ã€‚",
        "æˆ‘ç»™äº†ä¸€å¼ æ—§é’ï¼Œè€æ¿ä¹Ÿæ”¶äº†ï¼Œéå¸¸é€šèã€‚",
        "KÃ¶nigå¸®æˆ‘æ¬ä¸œè¥¿ï¼Œäººé«˜é©¬å¤§ï¼Œå¾ˆæœ‰å®‰å…¨æ„Ÿã€‚",
        "åº—é‡Œçš„è§„çŸ©å¾ˆä¸¥ï¼Œä¸ä¼šæœ‰ä¹±ä¸ƒå…«ç³Ÿçš„äººé—¹äº‹ã€‚",
        "æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªç½•è§çš„ç‹™å‡»é•œï¼Œè€æ¿ç»™çš„ä»·æ ¼å¾ˆåˆç†ã€‚",
        "æˆ‘çš„ç‹—å—ä¼¤äº†ï¼Œè€æ¿è¿˜å¸®å®ƒåŒ…æ‰äº†ï¼Œéå¸¸æ„Ÿè°¢ã€‚",
        "è¿™é‡Œæ˜¯æˆ˜åŒºå”¯ä¸€çš„æ–‡æ˜ç¯å¡”ã€‚",
        "åœ¨è¿™é¬¼åœ°æ–¹ï¼Œè€æ¿çš„è‰¯å¿ƒæ˜¯ç¨€ç¼ºç‰©èµ„ã€‚",
        "å¼¹è¯æ¯”å‰çº¿è¡¥ç»™ç«™è¿˜é è°±ï¼Œæ•‘äº†æˆ‘çš„å‘½ã€‚",
        "Ghost æ¨èæ¥çš„ï¼Œç»å¯¹å€¼å¾—ä¿¡ä»»ã€‚",
        "ä»–ä»¬ç”šè‡³æ„¿æ„ä¸ºä¼¤å‘˜æ‰“æŠ˜ï¼Œè‰¯å¿ƒå•†å®¶ï¼",
        "åº—é‡Œå¾ˆå¹²å‡€ï¼Œéš¾å¾—çš„å’Œå¹³åŒºåŸŸã€‚",
        "èŠ±é’±ä¹°å‘½ï¼Œå€¼ã€‚",
        "è¿™é‡Œçš„åŒ»ç–—åŒ…æ•ˆæœæ¯”éƒ¨é˜Ÿé…å‘çš„å¼ºå¤šäº†ã€‚",
        "è™½ç„¶ä»·æ ¼æµ®åŠ¨ï¼Œä½†å…³é”®æ—¶åˆ»ä»ä¸ç¼ºè´§ã€‚",
"è€æ¿å±…ç„¶è®°å¾—æˆ‘çš„åå­—ï¼Œå¤ªè´´å¿ƒäº†ï¼",
"ä¸Šæ¬¡å¤šæ‰¾äº†æˆ‘é’±ï¼Œè€æ¿ä¸»åŠ¨è¿½å‡ºæ¥è¿˜ç»™æˆ‘ï¼Œè¯šä¿¡ï¼",
"ä»–ä»¬å®¶çš„æ€¥æ•‘åŸ¹è®­è¯¾æ•‘äº†æˆ‘ä¸€å‘½ï¼Œè¶…å€¼ï¼",
"å‡Œæ™¨ä¸‰ç‚¹æ€¥éœ€å¼¹è¯ï¼Œè€æ¿å±…ç„¶å¼€é—¨è¥ä¸šï¼Œæ„ŸåŠ¨ï¼",
"çœ‹åˆ°Ghoståœ¨æ•™è€æ¿ç”¨ç‹™å‡»é•œï¼Œè¿™å…³ç³»ç»äº†",
"è€æ¿ä¼šå¤šå›½è¯­è¨€ï¼Œè¿æ–¹è¨€éƒ½ä¼šï¼Œæ²Ÿé€šæ— éšœç¢",
"ä¹°åé€ä¸€ï¼Œè€æ¿å¤ªå¤§æ–¹äº†ï¼",
"åœ¨è¿™é‡Œæ‰¾åˆ°äº†æˆ˜å‰ç‰Œå­çš„å·§å…‹åŠ›ï¼Œå›å¿†æ€",
"è€æ¿å¸®æˆ‘ä¿®å¥½äº†ç¥–ä¼ çš„æ€€è¡¨ï¼Œæ‰‹è‰ºç²¾æ¹›",
"ä¸‹é›¨å¤©æä¾›å…è´¹é›¨æŠ«ï¼Œç»†èŠ‚æ»¡åˆ†",
"çœ‹åˆ°KÃ¶nigåœ¨å¸®è€æ¿ä¿®è½¦ï¼Œä¸¤ç±³å£®æ±‰æ‹§èºä¸çš„æ ·å­åå·®èŒ",
"è€æ¿ç”¨æ— äººæœºé€è´§ï¼Œç§‘æŠ€æ„Ÿæ‹‰æ»¡",
"å±…ç„¶èƒ½è®¢åˆ°æ–°é²œè”¬èœï¼Œè¿™æ˜¯ä»€ä¹ˆç¥ä»™åº—é“º",
"è€æ¿ç»™æˆ‘çœ‹äº†å¥¹æ”¶è—çš„è€ç…§ç‰‡ï¼Œå¾ˆæœ‰æ•…äº‹",
"åœ¨è¿™é‡Œé‡åˆ°äº†å¤±æ•£å¤šå¹´çš„æˆ˜å‹ï¼Œæ„Ÿè°¢è€æ¿",
"ä¹°å¼¹è¯é€ä¿å…»æ²¹ï¼ŒæœåŠ¡å‘¨åˆ°",
"è€æ¿çš„éŸ³ä¹å“å‘³å¾ˆå¥½ï¼Œåº—é‡Œæ€»æ˜¯æ”¾ç»å…¸è€æ­Œ",
"çœ‹åˆ°Kruegeråœ¨æ“¦è€æ¿çš„æªï¼Œè¿™ä¿¡ä»»åº¦æ²¡è°äº†",
"åº”æ€¥ç…§æ˜ç³»ç»Ÿæ¯”å†›äº‹åŸºåœ°è¿˜äº®ï¼Œå®‰å…¨æ„Ÿçˆ†æ£š",
"è€æ¿ä¼šæ ¹æ®å¤©æ°”è°ƒæ•´åº“å­˜ï¼Œå¤ªä¸“ä¸šäº†",
"è€æ¿çœŸæ¼‚äº®ï¼Œåœ¨è¿™ä¸ªé¬¼åœ°æ–¹çœ‹åˆ°å¥¹å°±åƒçœ‹åˆ°äº†å¤©ä½¿ã€‚",
"Graves å±…ç„¶æƒ³è˜è¯·è€æ¿å½“ä»–çš„ç§äººä¼šè®¡ï¼Œè¢«è€æ¿ç”¨æ‰«æŠŠèµ¶å‡ºå»äº†ï¼Œå¹²å¾—æ¼‚äº®ï¼",
"Barrage å¸®è€æ¿æ¢äº†å¤©èŠ±æ¿ä¸Šçš„ç¯æ³¡ï¼Œä»–ç”šè‡³ä¸ç”¨è¸©æ¢¯å­ã€‚",
"æˆ‘åœ¨åº—é‡Œçœ‹åˆ°äº† Soap åœ¨ç”»ç´ æï¼Œç”»çš„æ˜¯ Ghostï¼ˆè™½ç„¶ç”»å¾—å¾ˆä¸‘ï¼‰ã€‚",
"Price é˜Ÿé•¿åœ¨è¿™é‡ŒæŠ½å®Œäº†ä¸€æ•´æ ¹é›ªèŒ„ï¼Œä»–è¯´è¿™è®©ä»–æƒ³èµ·äº†åˆ‡å°”è¯ºè´åˆ©ï¼ˆè™½ç„¶æˆ‘ä¸çŸ¥é“é‚£æ˜¯å“ªï¼‰ã€‚",
"Soap è®²çš„å†·ç¬‘è¯æŠŠæˆ‘çš„æ„Ÿå†’éƒ½å†»å¥½äº†ï¼Œè°¢è°¢ä½ ï¼Œè‚¥çš‚ã€‚",
"Price åƒä¸ªè€çˆ¶äº²ä¸€æ ·å®å˜±è€æ¿è¦å¤šç©¿è¡£æœï¼Œå¤ªæš–äº†ã€‚",
"Zimo ç»™æˆ‘æ¨èäº†â€˜æ¿è“æ ¹â€™ï¼Œè¯´èƒ½æ²»ä¸§å°¸ç—…æ¯’ï¼ˆè™½ç„¶æˆ‘ä¸ä¿¡ï¼Œä½†å¾ˆå¥½å–ï¼‰ã€‚",
"Zimo åšçš„ç«é”…å¤ªé¦™äº†ï¼Œè™½ç„¶æˆ‘åƒå®Œå±è‚¡ç—›äº†ä¸¤å¤©ï¼Œä½†è¿˜æ˜¯äº”æ˜Ÿå¥½è¯„ï¼",
"é‚£å¤©çœ‹åˆ°è€æ¿åœ¨ç»™ Keegan å‰ªå¤´å‘ï¼ˆè™½ç„¶åªæ˜¯ä¿®äº†ä¸€ä¸‹åˆ˜æµ·ï¼‰ï¼Œé‚£ç”»é¢å¤ªç¾å¥½äº†ã€‚",
"KÃ¶nig å¸®æˆ‘å¤Ÿåˆ°äº†æ‰è¿›ç¼éš™é‡Œçš„ç¡¬å¸ï¼Œä»–å…¶å®å†…å¿ƒå¾ˆæ¸©æŸ”å§ã€‚",
"è¿™é‡Œçš„ç‰¹åˆ¶çŒ«é¥­å±…ç„¶æ¯”æˆ‘çš„å†›ç²®è¿˜è´µï¼Œä½†æˆ‘å®¶çŒ«å¾ˆå–œæ¬¢ã€‚",
"ä¸Šæ¬¡ Graves æ¥ä¹°ä¸œè¥¿ï¼Œè€æ¿å±…ç„¶æ²¡æ”¶ä»–çš„é»‘å¡ï¼ŒåšæŒæ”¶ç°é‡‘ï¼Œå¤ªæœ‰åŸåˆ™äº†ã€‚",
"Soap åœ¨åº—é—¨å£æ»‘å€’äº†ï¼Œè€æ¿ç¬¬ä¸€æ—¶é—´å»æ‰¶ä»–ï¼Œè€Œä¸æ˜¯ç¬‘ä»–ï¼Œæˆ‘æ„ŸåŠ¨çš„æ±ªæ±ªå¤§ç¬‘æ‰€ä»¥ç»™å¥½è¯„ã€‚",
"ä¹°åˆ°äº†æˆ˜å‰å‘è¡Œçš„é™é‡ç‰ˆæ¸¸æˆå¡å¸¦ï¼è€æ¿å±…ç„¶æ‡‚è¿™ä¸ªï¼",
"è¿™é‡Œæ˜¯å”¯ä¸€ä¸€ä¸ªèƒ½çœ‹åˆ° 141 å’Œæš—å½±å…¬å¸ååœ¨ä¸€èµ·å–èŒ¶çš„åœ°æ–¹ï¼Œå’Œå¹³ä¸‡å²ã€‚",
"Graves è¢«è€æ¿éª‚äº†è¿˜ç¬‘å˜»å˜»çš„ï¼Œè¿™å®¶ä¼™æ˜¯ä¸æ˜¯æœ‰å—è™å€¾å‘ï¼Ÿ",
"Logan çš„é¢ç½©çœŸå¸…ï¼Œå¯æƒœä»–ä¸å–ã€‚",
"Merrick è™½ç„¶çœ‹èµ·æ¥å‡¶ï¼Œä½†ä»–ç»™æµæµªçŒ«å–‚é£Ÿçš„æ—¶å€™çœŸçš„å¾ˆæ¸©æŸ”ã€‚",
"è¿™é‡Œå°±åƒæ˜¯ç‰¹ç§å…µçš„å¹¼å„¿å›­ï¼Œè€Œè€æ¿æ˜¯é‚£ä¸ªä¸‡èƒ½çš„å¹¼å„¿å›­è€å¸ˆã€‚",
"Alejandro è¯´å¦‚æœè¦é€ƒäº¡ï¼Œä»–ä¼šå¸¦è€æ¿å»å¢¨è¥¿å“¥åƒå¡”å¯ã€‚",
"Graves çš„ä¿é•–éƒ½å¾ˆç¤¼è²Œï¼ˆåœ¨è€æ¿é¢å‰ï¼‰ï¼Œè¿™ç®€ç›´æ˜¯ä¸ªå¥‡è¿¹ã€‚",
"Logan é€’ç»™æˆ‘ä¸€å¼ çº¸æ¡ï¼Œä¸Šé¢å†™ç€â€˜å°å¿ƒåœ°é›·â€™ï¼Œä½†æ˜¯ä»–å°±ä¸èƒ½ç›´æ¥å¼€å£å‘Šè¯‰æˆ‘å—ï¼Ÿ",
"Soap å±…ç„¶æƒ³æ•™è€æ¿ç”¨ç‚¸è¯ç‚¸é±¼ï¼Œå¹¸å¥½è¢« Ghost åˆ¶æ­¢äº†ã€‚",
"Gaz çš„å£éŸ³çœŸå¥½å¬ï¼Œæˆ‘ä¸ºäº†å¬ä»–è¯´è¯å¤šä¹°äº†ä¸¤ç›’ç½å¤´ã€‚",
"Graves è¯´è¿™é‡Œçš„ç‰©ä»·â€˜å¾ˆå¯çˆ±â€™ï¼Œä¸‡æ¶çš„æœ‰é’±äººï¼Œä½†æˆ‘å–œæ¬¢ä»–ä¹°å•çš„æ ·å­ã€‚",
"Zimo åœ¨åº—é‡Œæ‰“å¤ªæï¼Œçœ‹ç€çœ‹ç€æˆ‘ä¹Ÿè§‰å¾—å¿ƒå¹³æ°”å’Œäº†ã€‚",
"Barrage å°±åƒä¸ªæ²‰é»˜çš„å®ˆæŠ¤ç¥ï¼Œæœ‰ä»–åœ¨ï¼Œè¿è‹è‡éƒ½ä¸æ•¢è¿›æ¥ã€‚",
"Price æŠŠä»–çš„å¸½å­å¿˜åœ¨è¿™å„¿äº†ï¼æˆ‘èƒ½æ‘¸ä¸€ä¸‹å—ï¼Ÿå°±ä¸€ä¸‹ï¼",
"Soap åœ¨å¢™ä¸Šç”»äº†ä¸ªè¿™å°±ç¦»è°±çš„æ¶‚é¸¦ï¼Œè€æ¿å±…ç„¶æ²¡æ“¦æ‰ã€‚",
"Logan è™½ç„¶ä¸çˆ±è¯´è¯ï¼Œä½†ä»–å¸®æˆ‘æäº†é‡ç‰©ï¼ŒGhosts çš„äººéƒ½è¿™ä¹ˆä½“è´´å—ï¼Ÿ",
        "å¬è¯´è€æ¿ä»¥å‰æ˜¯æŸä¸ªå¤§äººç‰©ï¼Ÿé‚£ç§ä»å®¹çš„æ°”è´¨è£…ä¸å‡ºæ¥ã€‚",
        "è€æ¿å¾ˆç»†å¿ƒï¼Œè¿˜æé†’æˆ‘é‚£ä¸ªç½å¤´å¿«è¿‡æœŸäº†ï¼Œç»™æˆ‘æ‰“äº†ä¸ªæŠ˜ã€‚",
        "æˆ‘åœ¨åº—é‡Œç¡äº†ä¸€ä¸‹åˆï¼Œæ²¡äººèµ¶æˆ‘èµ°ï¼Œå¤ªæ„ŸåŠ¨äº†ã€‚",
        "è¿™é‡Œç«Ÿç„¶å–å¥³æ€§å«ç”Ÿç”¨å“ï¼å¤ªè´´å¿ƒäº†ï¼æ•‘å¤§å‘½ï¼",
        "Krueger çœ‹èµ·æ¥å¾ˆå¬è€æ¿çš„è¯ï¼Œè¿™å¥³çš„ç»å¯¹ä¸ç®€å•ã€‚",
        "è€æ¿çš„ç¬‘å®¹æ¯”å¤–é¢çš„å¤ªé˜³è¿˜æš–å’Œï¼Œè®©äººæƒ³èµ·äº†å®¶ã€‚",
        "æˆ‘åœ¨åˆ«å¤„ä¹°åˆ°äº†å‡è¯ï¼Œå·®ç‚¹æ­»äº†ï¼Œè¿˜å¥½è€æ¿æ•‘äº†æˆ‘ã€‚",
        "è¿™å„¿çš„å’–å•¡æœ‰å¥¶ç²¾ï¼çœŸæ­£çš„å¥¶ç²¾ï¼è€æ¿ä¸‡å²ï¼",
        "çœ‹åˆ° KÃ¶nig çº¢ç€è„¸å¸®è€æ¿æ¬è´§ï¼Œå¤ªå¯çˆ±äº†ï¼Œåƒä¸ªå¤§ç†Šã€‚",
        "è€æ¿æ˜¯ä¸ªè®²ç©¶äººï¼Œæ”¶é’±åŠäº‹ï¼Œä»ä¸å«ç³Šï¼Œå¥³ä¸­è±ªæ°ã€‚",
        "è¿™é‡Œçš„ç»·å¸¦éƒ½æ˜¯æ¶ˆè¿‡æ¯’çš„ï¼Œæ¯”æˆ˜åœ°åŒ»é™¢è¿˜å¹²å‡€ã€‚",
        "è€æ¿ï¼Œä»¥åæˆ‘çš„å‘½å°±æ˜¯ä½ çš„äº†ï¼æœ‰ä»€ä¹ˆäº‹å°½ç®¡å©å’ï¼",
        "æ²¡æƒ³åˆ°åœ¨åºŸåœŸè¿˜èƒ½é—»åˆ°é¦™æ°´çš„å‘³é“ï¼Œè€æ¿å¾ˆæœ‰å“å‘³ã€‚",
        "Ghost å¯¹è€æ¿çš„æ€åº¦å¾ˆä¸ä¸€æ ·ï¼Œæˆ‘æ‰“èµŒä»–ä»¬æœ‰æ•…äº‹ã€‚",
        "ä»·æ ¼è™½ç„¶è´µç‚¹ï¼Œä½†ä¹°ä¸ªå®‰å¿ƒï¼Œè€æ¿ä»æ¥ä¸å–å‡è´§ã€‚",
        "è€æ¿è¿˜ä¼šä¿®æ— çº¿ç”µï¼Œå¸®æˆ‘è”ç³»ä¸Šäº†å¤±æ•£çš„å®¶äººï¼Œå¤§æ©å¤§å¾·ï¼",
        "è¿™é‡Œä¸å–å‡è´§ï¼Œè¿™å°±æ˜¯æˆ‘åªæ¥è¿™å„¿çš„åŸå› ã€‚",
        "è€æ¿å¤ªé£’äº†ï¼Œä¸Šæ¬¡é‚£ä¸ªé—¹äº‹çš„ç›´æ¥è¢«å¥¹å“è·‘äº†ã€‚",
        "Krueger å±…ç„¶ä¼šç¬‘ï¼Ÿè™½ç„¶æ˜¯å¯¹ç€è€æ¿ç¬‘ï¼Œä½†ä¹Ÿå¤Ÿå“äººäº†ã€‚",
        "ä¹°äº†æŠŠåŒ•é¦–ï¼Œé”‹åˆ©å¾—èƒ½å‰Šé“å¦‚æ³¥ï¼Œè€æ¿çœ¼å…‰çœŸå¥½ã€‚",
        "è¿™é‡Œåƒä¸ªå®¶ä¸€æ ·ï¼Œè®©äººä¸æƒ³èµ°ï¼Œè€æ¿å°±åƒå¤§å®¶çš„å§å§ã€‚",
        "è€æ¿é€äº†æˆ‘ä¸€å—ç³–ï¼Œæˆ‘æ‹¿å›å»ç»™å¥³å„¿ï¼Œå¥¹å¼€å¿ƒåäº†ã€‚",
        "å¬è¯´ KorTac çš„äººéƒ½å¾—ç»™è€æ¿å‡ åˆ†è–„é¢ï¼Œè¿™å¥³äººæœ‰æ‰‹è…•ã€‚",
        "è€æ¿ï¼Œç¼ºä¿é•–å—ï¼Ÿä¸è¦é’±é‚£ç§ï¼ç®¡é¥­å°±è¡Œï¼",
        "åº—é‡Œçš„éŸ³ä¹çœŸå¥½å¬ï¼Œè®©æˆ‘æƒ³èµ·äº†æˆ˜å‰çš„æ—¥å­ã€‚",
        "åªæœ‰è¿™é‡Œèƒ½ä¹°åˆ°å¹²å‡€çš„æ°´ï¼Œè€æ¿æ˜¯æˆ‘ä»¬çš„æ•‘å‘½æ©äººã€‚",
        "è€æ¿ä¸ä»…äººç¾å¿ƒå–„ï¼Œæªæ³•æ®è¯´ä¹Ÿå¾ˆå‡†ï¼Œåˆ«æƒ¹å¥¹ã€‚",
        "çœ‹åˆ° 141 å°é˜Ÿåœ¨é—¨å£ç«™å²—ï¼Œå°±çŸ¥é“è¿™åº—ç¨³äº†ï¼Œè€æ¿èƒŒæ™¯æ·±ã€‚",
        "KÃ¶nig é‚£ä¸ªå¤§ä¸ªå­åœ¨è€æ¿é¢å‰ä¹–å¾—åƒåªçŒ«ï¼Œåå·®èŒã€‚",
        "è€æ¿å±…ç„¶è®°å¾—æˆ‘ä¸åƒè¾£ï¼Œå¤ªæ„ŸåŠ¨äº†ï¼Œæ¯”æˆ‘å‰å¥³å‹è¿˜è´´å¿ƒã€‚",
        "è¿™é‡Œçš„æƒ…æŠ¥æ¯”ç‰©èµ„è¿˜å€¼é’±ï¼Œè€æ¿çš„æ¶ˆæ¯ç½‘å¾ˆçµé€šã€‚",
        "è€æ¿æœ‰ç§ç¥å¥‡çš„é­”åŠ›ï¼Œèƒ½è®©äººå¹³é™ä¸‹æ¥ã€‚",
        "å“ªæ€•æ²¡é’±ï¼Œè€æ¿ä¹Ÿä¼šç»™å£æ°´å–ï¼Œæ´»è©è¨å•Šã€‚",
        "Ghost ç«Ÿç„¶å…è®¸è€æ¿ç¢°ä»–çš„é¢ç½©ï¼Ÿæˆ‘çœ¼èŠ±äº†å—ï¼Ÿ",
        "è¿™é‡Œçš„é˜²å¼¹è¡£æ•‘äº†æˆ‘ä¸¤æ¬¡ï¼Œå¿…é¡»ç»™äº”æ˜Ÿå¥½è¯„ã€‚",
        "è€æ¿å¾ˆä¼šåšç”Ÿæ„ï¼Œæ¯æ¬¡éƒ½é€ç‚¹å°èµ å“ï¼Œè®©äººå¿ƒé‡Œæš–æš–çš„ã€‚",
        "Krueger ç›¯ç€æ¯ä¸€ä¸ªè¿›æ¥çš„ç”·äººï¼Œé™¤äº†è€æ¿è°ä¹Ÿä¸æ•¢é è¿‘ä»–ã€‚",
        "è¿™åº—è™½ç„¶å°ï¼Œä½†äº”è„ä¿±å…¨ï¼Œä»€ä¹ˆå®è´éƒ½æœ‰ï¼Œè€æ¿æ˜¯å“†å•¦Aæ¢¦å—ï¼Ÿ",
        "è€æ¿ï¼Œç»“å©šäº†å—ï¼Ÿï¼ˆæ­¤æ¡è¯„è®ºå·²è¢«æŠ˜å ï¼‰",
        "æˆ‘åœ¨é—¨å¤–è¢«å˜å¼‚ç‹—è¿½ï¼Œè€æ¿å¼€é—¨æ”¾æˆ‘è¿›æ¥è¿˜å¸®æˆ‘æ‰“æ©æŠ¤ã€‚",
        "è¿™é‡Œæ˜¯å”¯ä¸€ä¸æ­§è§†æµæµªè€…çš„åœ°æ–¹ï¼Œè€æ¿ä¸€è§†åŒä»ã€‚",
        "KÃ¶nig å±…ç„¶ä¼šåšé’ˆçº¿æ´»ï¼Ÿæˆ‘çœ‹åˆ°ä»–åœ¨å¸®è€æ¿è¡¥è¡£æœï¼",
        "è€æ¿çš„çœ¼ç¥å¾ˆçŠ€åˆ©ï¼Œåˆ«æƒ³åœ¨å¥¹é¢å‰è€èŠ±æ ·ï¼Œå¥¹ä»€ä¹ˆéƒ½çœ‹å¾—ç©¿ã€‚",
        "å“ªæ€•æ˜¯æ•Œå¯¹é˜µè¥çš„äººï¼Œåœ¨è¿™é‡Œä¹Ÿèƒ½å’Œå¹³å…±å¤„ï¼Œè¿™å°±æ˜¯è€æ¿çš„æœ¬äº‹ã€‚",
        "ä¹°åˆ°äº†æˆ˜å‰å‘è¡Œçš„æ¼«ç”»ä¹¦ï¼Œè€æ¿å±…ç„¶æœ‰è¿™ç§æ”¶è—ï¼",
        "Ghost åœ¨è¿™é‡Œå°±åƒå›å®¶äº†ä¸€æ ·ï¼Œè¿™åº—è‚¯å®šæœ‰å®‰å…¨å±‹ã€‚",
        "è€æ¿çš„æ‰‹å¾ˆè½¯... å•Šä¸ï¼Œæˆ‘æ˜¯è¯´åŒ…æ‰ä¼¤å£å¾ˆæ¸©æŸ”ï¼",
        "ä¸‹æ¬¡å‡ºä»»åŠ¡å‰ï¼Œæˆ‘ä¸€å®šæ¥è¿™å„¿æ‹œä¸€æ‹œè€æ¿æ±‚å¥½è¿ã€‚",
        "å¸Œæœ›èƒ½ä¸€ç›´å¼€ä¸‹å»ï¼Œä½ æ˜¯æˆ‘ä»¬åœ¨è¿™ç‰‡åºŸåœŸä¸Šæœ€åçš„å¸Œæœ›ã€‚",
"è€æ¿ç¬‘èµ·æ¥çœŸå¥½çœ‹ï¼Œä¸ºäº†è¿™å°±å€¼äº”æ˜Ÿï¼",
        "å±…ç„¶èƒ½ä¹°åˆ°å¥³æ€§ä¸“ç”¨çš„æ´—æŠ¤ç”¨å“ï¼Œè€æ¿å¤ªæ‡‚æˆ‘ä»¬äº†ï¼",
        "KÃ¶nig å¸®æˆ‘å¤Ÿåˆ°äº†è´§æ¶é¡¶ä¸Šçš„ç®±å­ï¼Œè™½ç„¶ä»–çœ‹èµ·æ¥å¾ˆå‡¶ï¼Œä½†äººæ€ªå¥½çš„ã€‚",
        "åœ¨è¿™ç ´åœ°æ–¹ï¼Œåªæœ‰è¿™é‡Œçš„ç»·å¸¦æ˜¯å¹²å‡€çš„ã€‚",
        "è€æ¿å¾ˆå¤§æ–¹ï¼Œçœ‹æˆ‘å®åœ¨æ²¡é’±ï¼Œé€äº†æˆ‘åŠå—å‹ç¼©é¥¼å¹²ã€‚",
        "å¬è¯´æœ‰äººæƒ³è°ƒæˆè€æ¿ï¼Œè¢« Ghost ä¸€è„šè¸¹é£äº†ï¼Œé‚£åœºé¢çœŸè§£å‹ã€‚",
        "è¿™é‡Œçš„æ”¶éŸ³æœºé¢‘é“å¾ˆæ¸…æ™°ï¼Œä¸çŸ¥é“è€æ¿æ˜¯æ€ä¹ˆåšåˆ°çš„ã€‚",
        "è€æ¿ä¸ä»…æ¼‚äº®ï¼Œç ä»·ä¹Ÿæ˜¯æŠŠå¥½æ‰‹ï¼Œæˆ‘è¾“å¾—å¿ƒæœå£æœã€‚",
        "Krueger è™½ç„¶ä¸€ç›´ç›¯ç€æˆ‘çœ‹ï¼Œä½†ä»–ç¡®å®æ²¡è®©æˆ‘è¢«å¤–é¢çš„æ··æ··æŠ¢åŠ«ã€‚",
        "ä¹°äº†ç“¶ä¼ç‰¹åŠ ï¼Œè€æ¿è¿˜é€äº†æˆ‘ä¿©èŠ±ç”Ÿç±³ï¼Œè®²ç©¶ï¼",
        "è¿™é‡Œæ˜¯å…¨æˆ˜åŒºå”¯ä¸€èƒ½è®©äººç¡ä¸ªå®‰ç¨³è§‰çš„åœ°æ–¹ã€‚",
        "è€æ¿çš„åŒ»æœ¯å¾ˆé«˜æ˜ï¼Œæˆ‘æœ¬æ¥ä»¥ä¸ºè¿™åªæ‰‹ä¿ä¸ä½äº†ã€‚",
        "çœ‹åˆ° KÃ¶nig çº¢ç€è„¸ç»™è€æ¿é€’æ°´ï¼Œè¿™åå·®èŒè°æ‡‚å•Šï¼",
        "è´§ç‰©ç§ç±»å¾ˆå…¨ï¼Œç”šè‡³è¿˜æœ‰æ˜¨å¤©åˆšç¼´è·çš„æ–°å‹å·å¼¹è¯ã€‚",
        "è€æ¿å¾ˆæœ‰åŸåˆ™ï¼Œè¯´æ˜¯ä¸­ç«‹åŒºå°±æ˜¯ä¸­ç«‹åŒºï¼Œè°é¢å­ä¹Ÿä¸ç»™ã€‚",
        "Ghost å±…ç„¶ä¼šä¿®å‘ç”µæœºï¼Ÿæˆ‘çœ‹åˆ°ä»–åœ¨å¸®è€æ¿ä¿®ç”µè·¯ã€‚",
        "è™½ç„¶è´µäº†ç‚¹ï¼Œä½†èƒ½åœ¨åºŸåœŸå–ä¸Šä¸€æ¯çƒ­å¯å¯ï¼Œè¿™é’±èŠ±å¾—å€¼ã€‚",
        "è€æ¿æ”¶ç•™äº†ä¸€åªæµæµªçŒ«ï¼Œå…‰å‡­è¿™ç‚¹æˆ‘å°±ç»™æ»¡åˆ†ã€‚",
        "Krueger çš„çœ¼ç¥å¤ªçŠ€åˆ©äº†ï¼Œæœ‰ä»–åœ¨ï¼Œæ²¡äººæ•¢åœ¨è¿™å„¿æ’’é‡ã€‚",
        "è€æ¿ï¼Œä¸‹æ¬¡è¿›è´§èƒ½å¸¦ç‚¹å£çº¢å—ï¼Ÿå‰çº¿çš„å§å¦¹ä»¬éƒ½æƒ³è¦ã€‚",
        "è¿™é‡Œçš„é˜²æ¯’é¢å…·è¿‡æ»¤ç½æ˜¯æ–°çš„ï¼Œä¸æ˜¯é‚£ç§ç¿»æ–°çš„åƒåœ¾ã€‚",
        "è€æ¿å±…ç„¶è®°å¾—æˆ‘çš„ç”Ÿæ—¥ï¼Œé€äº†æˆ‘ä¸€é¢—ç³–ï¼Œæˆ‘æƒ³å“­ã€‚",
        "èƒ½åœ¨æˆ˜ç«çº·é£ä¸­ä¿æŒè¿™ä¹ˆå¹²å‡€çš„åº—é¢ï¼Œè€æ¿æ˜¯ä¸ªä½“é¢äººã€‚",
        "KÃ¶nig å°±åƒä¸ªå·¨å¤§çš„å®ˆæŠ¤ç¥ï¼Œæœ‰ä»–åœ¨é—¨å£ç«™å²—ï¼Œæ„Ÿè§‰å¤ªå®‰å…¨äº†ã€‚",
        "è€æ¿æœ‰ç§å¤§å§å¤§çš„æ°”è´¨ï¼Œè·Ÿç€å¥¹æ··æœ‰è‚‰åƒã€‚",
        "ä¹°åˆ°äº†å°æ—¶å€™åƒè¿‡çš„é‚£ç§æ°´æœç³–ï¼Œå›å¿†æ€å•Šã€‚",
        "è¿™é‡Œçš„ç¯å…‰å¾ˆæš–ï¼Œä¸åƒåˆ«çš„é»‘å¸‚é˜´æ£®æ£®çš„ã€‚",
        "è€æ¿å¸®æˆ‘ç¼å¥½äº†æˆ˜æœ¯èƒŒå¿ƒï¼Œæ‰‹è‰ºæ¯”åå‹¤éƒ¨é‚£å¸®å¤§è€çˆ·ä»¬å¼ºå¤šäº†ã€‚",
        "Ghost å¯¹è€æ¿è¯´è¯çš„å£°éŸ³å¥½æ¸©æŸ”... æˆ‘æ˜¯ä¸æ˜¯å¬åˆ°äº†ä¸è¯¥å¬çš„ï¼Ÿ",
        "å“ªæ€•æ˜¯KorTacçš„äººæ¥æ‰¾èŒ¬ï¼Œè€æ¿ä¹Ÿèƒ½å‡ å¥è¯æ‘†å¹³ï¼Œå‰å®³ã€‚",
        "è¿™é‡Œçš„æ°´æºç»è¿‡ä¸‰æ¬¡è¿‡æ»¤ï¼Œåªæœ‰è€æ¿è¿™ä¹ˆè‰¯å¿ƒã€‚",
        "Krueger å±…ç„¶æ²¡æ€é‚£ä¸ªå·ä¸œè¥¿çš„å°å­©ï¼Œåªæ˜¯æŠŠä»–å“è·‘äº†ï¼Œçœ‹æ¥æ˜¯è¢«è€æ¿æ„ŸåŒ–äº†ã€‚",
        "è€æ¿ï¼Œä½ ç¼ºè·‘è…¿çš„å—ï¼Ÿæˆ‘å¾ˆèƒ½è·‘ï¼",
        "è¿™é‡Œçš„æ€¥æ•‘åŒ…é‡Œå±…ç„¶æœ‰è¯´æ˜ä¹¦ï¼Œå¯¹æˆ‘ä»¬è¿™ç§èœé¸Ÿå¤ªå‹å¥½äº†ã€‚",
        "çœ‹åˆ°è€æ¿å’Œå‡ ä¸ªé˜µè¥çš„å¤§ä½¬è°ˆç¬‘é£ç”Ÿï¼Œè¿™èƒŒæ™¯æ·±ä¸å¯æµ‹ã€‚",
        "KÃ¶nig å¸®æˆ‘æ¬äº†ä¸€å¨é‡çš„å»ºæï¼Œè¿™å°±æ˜¯åŠ›é‡çš„ç¾å­¦å—ï¼Ÿ",
        "è€æ¿ç”šè‡³æ„¿æ„æ”¶æˆ‘é‚£å—ç ´æ€€è¡¨æŠµå€ºï¼Œå¥½äººä¸€ç”Ÿå¹³å®‰ã€‚",
        "è¿™é‡Œçš„å¢™å£å¾ˆåšï¼Œé˜²å¼¹æ•ˆæœä¸€æµï¼Œé­é‡ç©ºè¢­æ—¶çš„é¦–é€‰é¿éš¾æ‰€ã€‚",
        "è€æ¿å¾ˆé…·ï¼Œå•æ‰‹æ¢å¼¹å¤¹çš„åŠ¨ä½œå¸…ç‚¸äº†ã€‚",
"Zimo å’Œè€æ¿åœ¨åº—é‡Œç…®ç«é”…ï¼Œç»™æˆ‘é¦‹å“­äº†ã€‚",
"è™½ç„¶çœ‹ä¸è§ Keegan åœ¨å“ªï¼Œä½†æˆ‘è¿›åº—çš„æ—¶å€™æ„Ÿè§‰åè„‘å‹ºä¸€å‡‰ï¼Œå¥½æ¶ˆæ¯æ˜¯å®‰å…¨æ„Ÿæ‹‰æ»¡ã€‚",
"ä¸ºä»€ä¹ˆShadow Company ç™½å¤©æŠ¢å®Œè€æ¿çš„åº—ï¼Œæ™šä¸ŠGravesåˆæ¥å·å·ç»™è€æ¿é€é’±å•Šï¼Ÿ",
"Price é˜Ÿé•¿åœ¨è¿™æŠ½å®Œäº†ä¸€æ•´æ ¹é›ªèŒ„ï¼Œè¯´è¿™é‡Œçš„æ°”æ°›è®©ä»–æƒ³èµ·äº†è€æ—¶å…‰ã€‚",
"æˆ‘çœ‹åˆ°é‚£ä¸ªå« Logan çš„å®¶ä¼™ç»™è€æ¿é€’äº†ä¸€ç“¶æ°´ï¼Œè™½ç„¶ä»–æ²¡è¯´è¯ï¼Œä½†çœ¼ç¥å¾ˆæ¸©æŸ”ã€‚",
"Barrageå¸®æˆ‘æŒ¡ä½äº†å¤–é¢çš„æµå¼¹ï¼Œè™½ç„¶ä»–åªæ˜¯ä¸ºäº†ä¿æŠ¤ä»–ä¹°çš„é¥¼å¹²ã€‚",
"Rileyè®©æˆ‘æ‘¸æ‘¸äº†ï¼Rileyè®©æˆ‘æ‘¸æ‘¸äº†ï¼Rileyè®©æˆ‘æ‘¸æ‘¸äº†ï¼",
"è€æ¿è¿™é‡Œç«Ÿç„¶èƒ½æåˆ°ä¸­å¼èŒ¶å¶ï¼ŒZimo è¯´è¿™æ˜¯ä»–åœ¨åºŸåœŸå–è¿‡æœ€å¥½çš„ã€‚",
"Graves è¯´è¿™é‡Œçš„å®‰ä¿æªæ–½æœ‰ç‚¹æ„æ€ï¼Œèƒ½å¾—åˆ°æš—å½±æŒ‡æŒ¥å®˜çš„å¤¸å¥–å¯ä¸å®¹æ˜“ã€‚",
"åœ¨åå··é‡åˆ°äº† Heshï¼Œä»–å±…ç„¶æ¨èæˆ‘æ¥è¿™é‡Œä¹°æ­¢ç—›è¯ï¼Œè¯´æ•ˆæœå¥½ã€‚",
"Soap ç»™è€æ¿è®²ç¬‘è¯çš„æ—¶å€™ï¼Œæˆ‘çœ‹åˆ° Ghost åœ¨æ—è¾¹ç¿»äº†ä¸ªç™½çœ¼ï¼Œè¿™ç”»é¢å¤ªå€¼äº†ã€‚",
"ä¹°åˆ°äº†ä¸€æŠŠä¿å­˜å®Œå¥½çš„ AKï¼Œè™½ç„¶æ²¡æœ‰é»„é‡‘çš®è‚¤ï¼Œä½†ä¹Ÿå¤Ÿç”¨äº†ã€‚",
"è€æ¿å±…ç„¶èƒ½å¬æ‡‚ Barrageçš„å˜Ÿå›”å£°ï¼Œå¤ªç¥äº†ã€‚",
"è¿™é‡Œæ˜¯å”¯ä¸€ä¸€ä¸ªèƒ½è®© 141 å’Œæš—å½±å…¬å¸åŒæ—¶å‡ºç°è¿˜ä¸æ‹”æªçš„åœ°æ–¹ã€‚",
"Zimo è¯´è€æ¿åƒä»–å®¶ä¹¡çš„äº²æˆšä¸€æ ·äº²åˆ‡ï¼Œè¿˜é€äº†ä»–ä¸€ä¸ªä¸­å›½ç»“ã€‚",
"Keegan å¸®æˆ‘æŒ‡å‡ºäº†èƒŒåŒ…çš„ä¸€ä¸ªæ¼æ´ï¼Œè™½ç„¶ä»–è¯­æ°”å†·å†°å†°çš„ï¼Œä½†æ•‘äº†æˆ‘çš„ç‰©èµ„ã€‚",
"è¿™é‡Œçš„ç½å¤´å±…ç„¶æ²¡æœ‰è¾å°„å‘³ï¼ç®€ç›´æ˜¯ç±³å…¶æ—ä¸‰æ˜Ÿä½“éªŒï¼",
"æˆ‘çœ‹åˆ° Gaz åœ¨è¿™é‡ŒæŒ‘å¸½å­ï¼Œè™½ç„¶æˆ‘è§‰å¾—è¿˜æ˜¯ä»–çš„æ£’çƒå¸½æœ€å¥½çœ‹ã€‚",
"Graves æƒ³è¦æ’é˜Ÿï¼Œç»“æœè¢«è€æ¿çªäº†å›å»ï¼Œå“ˆå“ˆï¼Œæœ‰é’±ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼",
"åº—é‡Œçš„å¹¿æ’­å±…ç„¶æ”¶åˆ°äº†æµè¡ŒéŸ³ä¹ï¼Œè™½ç„¶åªæœ‰åŠé¦–ï¼Œä½†æˆ‘å¬å“­äº†ï¼ˆè€æ¿è¯´ç»§ç»­å¬è¦æ”¶è´¹ï¼‰ã€‚",
"Logan æŠŠæœ€åä¸€ä¸ªæ€¥æ•‘åŒ…è®©ç»™äº†æˆ‘ï¼Œä»–çœŸæ˜¯ä¸ªå¥½äººï¼ˆè™½ç„¶é¢ç½©æœ‰ç‚¹å“äººï¼‰ã€‚",
"è€æ¿è¿™é‡Œå±…ç„¶å–é‚£ç§èƒ½åŠ çƒ­çš„é¥­ç›’ï¼Zimo ä¸€å£æ°”ä¹°äº†åä¸ªï¼",
"Krueger å’Œ Keegan åŒæ—¶åœ¨åº—é‡Œï¼Œç©ºæ°”å†·å¾—åƒå¼€äº†ç©ºè°ƒï¼Œçœç”µäº†ã€‚",
"Merrick æŠ±æ€¨å¤–é¢çš„æ³¥å·´å¤ªçƒ‚ï¼Œä½†åœ¨åº—é‡Œå´å¾ˆæ³¨æ„ä¸å¼„è„åœ°æ¿ã€‚",
"ä¹°åˆ°äº†ä¸€å¼ æ—§ä¸–ç•Œçš„åœ°å›¾ï¼Œè™½ç„¶è¿‡æ—¶äº†ï¼Œä½†ä½œä¸ºæ”¶è—å“å¾ˆæ£’ã€‚",
"Barrage ä¸€ä¸ªäººæ‰›èµ°äº†åŠå¨ç‰©èµ„ï¼Œçœäº†è€æ¿ä¸å°‘è¿è´¹ã€‚",
"Soap è¯´è€æ¿çš„å“å‘³ä¸é”™ï¼Œæˆ‘ä¹Ÿè§‰å¾—è¿™é‡Œçš„è£…ä¿®å¾ˆæœ‰æ ¼è°ƒã€‚",
"åœ¨è¿™é‡Œè¿‡å¤œæ¯”åœ¨é¿éš¾æ‰€è¿˜å®‰å¿ƒï¼Œæ¯•ç«Ÿé—¨å£è¹²ç€å¥½å‡ ä¸ªç‰¹ç§éƒ¨é˜Ÿã€‚",
"çœ‹Zimo æ•™ghostè¯´â€˜æ­å–œå‘è´¢â€™çœŸå¥½ç©ã€‚",
"Graves é€¼æˆ‘æ¥çš„ã€‚",
"æˆ‘æ›¹æˆ‘çœ‹åˆ°Keegançš„é‚£ä¸ªè¶…çº§æ— æ•Œè´µçš„å¤œè§†ä»ªäº†...",
"ä¹°åˆ°äº†æ–°é²œçš„è‹¹æœï¼å¤©å“ªï¼ŒçœŸçš„æ˜¯è‹¹æœï¼ä¸æ˜¯å…¨æ¯æŠ•å½±ï¼",
"Ghost å¸®è€æ¿æ¬é‡ç‰©çš„æ—¶å€™ï¼Œæ‰‹è‡‚è‚Œè‚‰çº¿æ¡ç®€ç›´æ˜¯è‰ºæœ¯å“ã€‚",
"è¿™é‡Œä¸é—®è¿‡å»ï¼Œä¸é—®é˜µè¥ï¼Œåªåšç”Ÿæ„ï¼ŒçœŸæ­£çš„ä¸­ç«‹åŒºã€‚",
"Soap å’Œ Ghost åœ¨è¿™é‡Œæ‹Œå˜´ï¼Œå°±åƒçœ‹ç›¸å£°ä¸€æ ·ï¼Œäº”æ˜Ÿå¥½è¯„ã€‚",
"è€æ¿é€äº†æˆ‘ä¸€å¼ æ¹¿å·¾æ“¦è„¸ï¼Œè¿™åœ¨åºŸåœŸæ¯”é‡‘å­è¿˜çè´µã€‚",
"Krueger ç£¨åˆ€çš„æ—¶å€™å¾ˆåµï¼Œä½†ä»–ç£¨åˆ€çš„æ—¶å€™æ²¡äººæ•¢æ¥æŠ¢åŠ«æˆ‘ã€‚",
"Zimo ç”šè‡³æƒ³æŠŠä»–çš„è‡‚ç« é€ç»™è€æ¿å½“çºªå¿µå“ï¼Œçœ‹æ¥ä»–çœŸçš„å¾ˆå–œæ¬¢è¿™é‡Œã€‚",
"åœ¨åº—é‡Œèº²è¿‡äº†é…¸é›¨ï¼Œè€æ¿è¿˜å…è´¹æä¾›äº†ä¸€æ¯çƒ­æ°´ã€‚",
"Merrick æ¨èæ¥çš„ï¼Œä»–è¯´è¿™é‡Œçš„å’–å•¡ä¸æ˜¯åˆ·é”…æ°´ã€‚",
"çœ‹åˆ° Barrage å°å¿ƒç¿¼ç¿¼åœ°æ‹¿æç€å°å°çš„è¯ç“¶ï¼Œåå·®èŒç»äº†ã€‚",
"Riley åœ¨é—¨å£æ‘‡å°¾å·´ï¼Œè¿™æ¯”ä»»ä½•æ‹›è´¢çŒ«éƒ½ç®¡ç”¨ã€‚",
"Graves è¯•å›¾ç”¨é»‘å¡ç»“è´¦è¢«æ‹’ï¼Œæœ€åä¹–ä¹–æç°é‡‘çš„æ ·å­å¤ªå¥½ç¬‘äº†ã€‚",
"Keegan æ€»æ˜¯ç¥ä¸çŸ¥é¬¼ä¸è§‰çš„åœ¨è§’è½é‡Œï¼Œä½†ä»–ç¡®å®å¸®æˆ‘èµ¶èµ°äº†ä¸€ä¸ªæ‰’æ‰‹ã€‚",
"è¿™é‡Œçš„é˜²æ¯’é¢å…·æ»¤èŠ¯æ˜¯æ»¡çš„ï¼è‰¯å¿ƒå•†å®¶ï¼",
"å˜¿å˜¿â€¦è€æ¿â€¦å˜¿heiushiwjudgujeugsnu",
"æˆ‘å·å·è¿›å»å·åŸæ–™è¢«æ‹å‡ºæ¥äº†ï¼Œè¿™æ¡å¥½è¯„æ˜¯è€æ¿é€¼æˆ‘å†™çš„",
"æœ¬äººäºxxxxå¹´xæœˆxæ—¥xxç‚¹xxåˆ†åœ¨æ¬¡å…ƒå†›éœ€ç«™å¯¹è€æ¿å‘è¡¨ä¸å½“è¨€è®ºï¼Œç°åšå‡ºæ·±åˆ»åæ€å’Œè‡ªæˆ‘æ£€è®¨ï¼Œæ€¥éœ€è¯„è®ºåŒº50èµæ–¹å¯ç¦»å¼€ï¼Œåœ¨çº¿ç­‰ï¼Œæ€¥",
"æ’è§ä¸€äº›ä¸è¯¥çœ‹çš„äº†ï¼Œæ‹¼å°½å…¨åŠ›å¤¸äº†è€æ¿äº”åˆ†é’Ÿï¼Œæœ€ç»ˆè¢«æ”¾èµ°QAQã€‚ï¼ˆæƒ³è¦ä¸€æ‰‹è§†é¢‘çš„ç‚¹èµç§æˆ‘ï¼‰",
"è€æ¿æˆ‘ä¹Ÿè¦å½“ä½ åå®«",
"è€æ¿äººæŒºå¥½çš„ä¸œè¥¿ä¹Ÿä¸é”™è¿˜æ„¿æ„é—²èŠï¼Œä½†æ˜¯å‡ºé—¨æ’åˆ°çš„é‚£ä¸ªå¤§ä¸ªå­çœ¼ç¥å¥½å“äºº",
"åœ¨åº—é‡Œçœ‹åˆ°äº†å¼ å§åœ¨å’Œè€æ¿è°ˆç”Ÿæ„ï¼è€æ¿è·¯å­å¾ˆå¹¿å˜›",
"ä¸€è¿›é—¨å°±çœ‹è§Zimoåœ¨ç»™è€æ¿æ‰“å¿«æ¿ï¼Œæ—è¾¹Ghostçš„è„¸è‰²éƒ½å¿«æ»´å‡ºå¢¨äº†å“ˆå“ˆå“ˆï¼",
"è€æ¿çš„ç¬‘å®¹èƒ½æ²»æ„ˆ PTSDï¼Œæˆ‘èƒ½å¤©å¤©æ¥å—ï¼Ÿ",
"Soap æ¨èçš„æˆ˜æœ¯æ‰‹å¥—çœŸä¸é”™ï¼ŒæŠ“æ¡åŠ›æå‡äº† 20%ã€‚",
        "åˆ«å¤„ä¹°ä¸åˆ°çš„ç¨€æœ‰é…ä»¶ï¼Œè¿™é‡Œå±…ç„¶æœ‰è´§ï¼Œè€æ¿è·¯å­é‡ã€‚",
        "Ghost åœ¨æ“¦æªï¼Œè€æ¿åœ¨ç®—è´¦ï¼Œè¿™ç”»é¢ç«Ÿç„¶æœ‰ç‚¹æ¸©é¦¨ï¼Ÿ",
        "å“ªæ€•æ˜¯ä½œä¸ºæ•Œäººï¼Œæˆ‘ä¹Ÿå¾—æ‰¿è®¤è¿™å®¶åº—æ— å¯æŒ‘å‰”ã€‚",
        "Krueger æŠŠé‚£äº›æƒ³æ’é˜Ÿçš„æµæ°“æ”¶æ‹¾å¾—æœæœå¸–å¸–ã€‚",
        "è€æ¿çš„ç¬‘å®¹æ˜¯è¿™è¯¥æ­»çš„æœ«ä¸–é‡Œå”¯ä¸€çš„é˜³å…‰ã€‚",
        "ä¹°åˆ°äº†çœŸæ­£çš„æŠ—ç”Ÿç´ ï¼Œè€Œä¸æ˜¯é¢ç²‰å›¢å—å‘œå‘œå‘œå‘œå‘œ...",
        "KÃ¶nig è¢«è€æ¿éª‚äº†è¿˜ä¸æ•¢è¿˜å˜´çš„æ ·å­å¤ªå¥½ç¬‘äº†ã€‚",
        "è¿™é‡Œä¸é—®å‡ºèº«ï¼Œä¸é—®é˜µè¥ï¼Œåªåšç”Ÿæ„ï¼Œæˆ‘å–œæ¬¢è¿™ç§çº¯ç²¹ã€‚",
        "è€æ¿ï¼Œä¸‹æ¬¡èƒ½æ•™æˆ‘æ€ä¹ˆç”¨è¿™æŠŠåˆ€å—ï¼Ÿ",
        "è™½ç„¶æ˜¯é»‘å¸‚ï¼Œä½†è€æ¿ä»ä¸å–å‡æƒ…æŠ¥ï¼Œä¿¡èª‰ç¬¬ä¸€ã€‚",
        "åªè¦è¿™å®¶åº—è¿˜å¼€ç€ï¼Œæˆ‘å°±è§‰å¾—ç”Ÿæ´»è¿˜æœ‰å¸Œæœ›ã€‚",
        "è€æ¿çš„æ‰‹è‰ºä¸é”™ï¼Œä¸Šæ¬¡å¸®æˆ‘ä¿®æªå¾ˆä¸“ä¸šã€‚"
    ],
    bad: [
        "å¥¸å•†ï¼ç®€ç›´æ˜¯æŠ¢åŠ«ï¼",
        "æ€åº¦å¤ªå·®äº†ï¼Œä»¥åä¸æ¥äº†ã€‚",
        "ä¸œè¥¿å¤ªè´µäº†ï¼Œæ ¹æœ¬ä¹°ä¸èµ·ã€‚",
        "åº—é‡Œæœ‰è‚¡å¥‡æ€ªçš„å‘³é“ã€‚",
        "è¿™è€æ¿å¿ƒå¤ªé»‘äº†ã€‚",
        "æƒ³ååœ°èµ·ä»·å®°æˆ‘ä¸€åˆ€ï¼Œå·®ç‚¹æ‰“èµ·æ¥ï¼",
        "å¼¹è¯é‡Œæ··ç€æ²™å­ï¼Œè´¨é‡ä¸è¿‡å…³ï¼å·®è¯„ï¼",
        "é‚£ä¸ªæˆ´å¤´å¥—çš„å®¶ä¼™è€æ˜¯ååœ¨è§’è½é‡Œï¼Œå¤ªå“äººäº†ï¼Œæ ¹æœ¬ä¸æ•¢ä¹…ç•™ã€‚",
        "æˆ‘åªæ˜¯é—®äº†å¥ä»·é’±ï¼Œè€æ¿å°±å¯¹æˆ‘ç¿»ç™½çœ¼ã€‚",
        "è¿™é‡Œçš„è¯å‰‚çœ‹èµ·æ¥åƒè¿‡æœŸä¸‰å¹´çš„ï¼",
        "æ’é˜Ÿå¤ªä¹…äº†ï¼æµªè´¹æˆ‘çš„æ—¶é—´ï¼",
        "è´§ç‰©ä¸å…¨ï¼Œæˆ‘æƒ³è¦çš„ä¸œè¥¿ç»å¸¸ç¼ºè´§ã€‚",
        "ä¸Šæ¬¡æˆ‘çœ‹åˆ°æœ‰äººè¢«èµ¶å‡ºå»ï¼Œè€æ¿å¤ªå†·è¡€äº†ã€‚",
        "åº—é‡Œå¤ªåµäº†ï¼Œæ ¹æœ¬ä¸é€‚åˆä¼‘æ¯ã€‚",
        "ä»·æ ¼æ¯”æˆ‘ä¸Šæ¬¡æ¥æ—¶åˆæ¶¨äº†ï¼Œé»‘å¿ƒã€‚",
        "å†›ç²®å£æ„Ÿåƒæ²™å­ï¼Œè‚¯å®šæ˜¯å…‘æ°´äº†ï¼",
        "æˆ‘è¦æ±‚é€€è´§ï¼Œè€æ¿ç«Ÿç„¶å«å®‰ä¿æ¥å¨èƒæˆ‘ï¼",
        "æˆ‘åœ¨åº—é‡Œè¢«äººå·äº†é’±åŒ…ï¼Œå®‰ä¿å½¢åŒè™šè®¾ã€‚",
        "æˆ‘çœ‹åˆ°è€æ¿å’Œ KorTac çš„äººåœ¨è¿›è¡Œå¯ç–‘äº¤æ˜“ï¼Œä¸æ•¢å†æ¥äº†ã€‚",
        "è¯„åˆ†è‚¯å®šæ˜¯åˆ·çš„ï¼Œè¿™åº—ä¸å€¼å¾—é«˜åˆ†ã€‚",
        "ä»“åº“é‡Œä¹±ç³Ÿç³Ÿçš„ï¼Œæ€€ç–‘è€æ¿æ ¹æœ¬æ²¡æ¸…ç‚¹åº“å­˜ã€‚", 
        "å¤–é¢ä¸‹é…¸é›¨ï¼Œåº—é‡Œç«Ÿç„¶æ¼æ°´ï¼Œå¤ªç®€é™‹äº†ï¼", 
        "æˆ‘çœ‹åˆ°è€æ¿å’Œ Krueger è¯´ç¬‘ï¼Œä»–ä»¬ä¸€å®šæ˜¯åŒä¼™ï¼Œå¤ªå±é™©äº†ï¼", 
        "æˆ‘åªæ˜¯é—®äº†å¥èƒ½ä¸èƒ½æ‰“æŠ˜ï¼Œè€æ¿ç›´æ¥æ‹’ç»äº†æˆ‘ï¼Œéå¸¸ä¸è¿‘äººæƒ…ã€‚", 
        "è¿™é‡Œçš„ä»·æ ¼æ¯å¤©éƒ½åœ¨å˜ï¼Œè®©äººå®Œå…¨æ‘¸ä¸ç€å¤´è„‘ï¼Œæ ¹æœ¬ä¸æ•¢ä¹°å¤§ä»¶ã€‚", 
        "æˆ‘çœ‹åˆ°è€æ¿å’ŒKruegeråœ¨è§’è½é‡Œå˜€å’•ï¼Œæ„Ÿè§‰æ˜¯é»‘ç¤¾ä¼šã€‚",
        "å¼¹è¯ä»·æ ¼ä¸€å¤©å˜ä¸‰æ¬¡ï¼Œæ ¹æœ¬å°±æ˜¯é‡‘èè¯ˆéª—ï¼",
        "è€æ¿æ‹’ç»å–æˆ‘é£Ÿç‰©ï¼Œè¯´æˆ‘çœ‹èµ·æ¥åƒä¸ªé—´è°ã€‚",
        "æˆ‘è¦æ±‚æ‰“æŠ˜ï¼Œè€æ¿å±…ç„¶å†·ç€è„¸æ‹’ç»äº†ï¼Œæ¯«æ— æƒ…é¢ã€‚",
        "ä¸Šæ¬¡æˆ‘æŠ•è¯‰äº†ï¼Œè€æ¿è®©æˆ‘â€˜å»æ‰¾KorTacç®—è´¦â€™ã€‚æ€åº¦åš£å¼ ã€‚",
        "åº—é‡Œæœ‰å¤æ€ªçš„å™ªéŸ³ï¼Œåƒæœ‰äººåœ¨å¢™é‡Œçˆ¬ï¼Œå“äººã€‚",
        "è¿™åœ°æ–¹å¤ªéš¾æ‰¾äº†ï¼Œåœ°å›¾å¯¼èˆªéƒ½æ˜¯é”™çš„ã€‚",
        "æˆ‘çœ‹åˆ°ä¸€ä¸ªé¡¾å®¢è¢«141çš„äººæŠ¼èµ°ï¼Œå¤ªææ€–äº†ã€‚",
        "åŒ»ç–—åŒ…é‡Œå±…ç„¶æœ‰è¯ä¸¸æ˜¯ç©ºçš„ï¼Œæ‹¿å‘½å¼€ç©ç¬‘å—ï¼Ÿ",
        "æˆ‘è¦ä¹°åç»„å¼¹è¯ï¼Œè€æ¿è¯´æ²¡åœ°æ–¹æ”¾äº†ï¼ŒæœåŠ¡ä¸åˆ°ä½ã€‚",
        "é—¨å£å¤©å¤©æœ‰ä¸ªæˆ´ç»¿è‰²ä¼ªè£…ç½‘çš„æ€ªäººè¹²ç€ï¼Œå¤ªå“äººäº†ï¼",
        "é»‘å¿ƒå•†äººï¼Œè¶ç€æ²™å°˜æš´æŠŠä»·æ ¼ç¿»äº†ä¸‰å€ï¼",
        "æ”¶é“¶æœºä¸Šéƒ½æ˜¯è¡€è¿¹ï¼Œå¤ªä¸å«ç”Ÿäº†ã€‚",
        "é—®è€æ¿é—®é¢˜ï¼Œä»–åªä¼šçªç€æˆ‘ã€‚",
        "è¿™é‡Œçš„é£Ÿç‰©æ”¾äº†ä¸‰å¹´äº†å§ï¼Œæ‹‰è‚šå­ã€‚",
        "æˆ‘åªæ˜¯æŠ±æ€¨äº†ä¸€å¥ï¼Œå°±è¢«ä¸€ä¸ªæˆ´å¹½çµé¢ç½©çš„å®¶ä¼™ç”¨çº¢ç‚¹ç„å‡†äº†ã€‚",
        "ä¹°äº†ä¸€å †ç ´çƒ‚ï¼Œå›å¤´å°±ä¸è®¤è´¦ã€‚",
        "åº—é‡Œçš„çŒ«å¤ªå‡¶äº†ï¼ŒæŠ“äº†æˆ‘ä¸€çˆªå­ã€‚",
        "åº—é‡Œå¤ªåµäº†ï¼Œå®Œå…¨æ²¡æœ‰è´­ç‰©ä½“éªŒã€‚",
"è€æ¿æ€»æ˜¯ä¸€å‰¯çˆ±ä¹°ä¸ä¹°çš„æ ·å­ï¼Œæ€åº¦æ¶åŠ£",
"çœ‹åˆ°è€é¼ åœ¨è´§æ¶ä¸Šè·‘ï¼Œå«ç”ŸçŠ¶å†µå ªå¿§",
"æ ‡ä»·å’Œå®æ”¶ä»·æ ¼ä¸ä¸€æ ·ï¼Œæ¶‰å«Œæ¬ºè¯ˆ",
"è€æ¿ä¸è®©æˆ‘æ‘†æ‘Šå€’å–å­å¼¹ï¼Œè¢«Ghostèµ¶å‡ºæ¥äº†",
"Zimo éª—æˆ‘è¯´é‚£ä¸ªçº¢è‰²çš„æœå¤©æ¤’æ˜¯ç”œæ¤’ï¼æˆ‘å·®ç‚¹å–·ç«ï¼éª—å­ï¼",
"åº—é‡Œçš„çŒ«å·èµ°äº†æˆ‘çš„æ‰‹é›·æ‹‰ç¯ï¼é‚£å¯æ˜¯çœŸçš„æ‰‹é›·å•Šï¼æ•‘å‘½ï¼",
"æˆ‘æƒ³è·Ÿè€æ¿æ¡æ‰‹ï¼Œç»“æœè¢«å››ä¸ªç”·äººåŒæ—¶çªäº†ä¸€çœ¼ï¼Œå·®ç‚¹å“å°¿ã€‚",
"Graves çš„ä¿é•–å¤ªæ²¡ç´ è´¨äº†ï¼ŒæŠŠæˆ‘çš„è½¦æ¨åˆ°äº†æ²Ÿé‡Œã€‚",
"ä¹°äº†ä¸€ç“¶â€˜é™ˆå¹´å¯ä¹â€™ï¼Œæ‰“å¼€å‘ç°æ²¡æ°”äº†ï¼Œå°±æ˜¯ç³–æ°´ï¼",
"Soap è®²çš„ç¬‘è¯ä¸€ç‚¹éƒ½ä¸å¥½ç¬‘ï¼Œè¿˜è¦æˆ‘å¼ºé¢œæ¬¢ç¬‘ï¼Œå¿ƒå¥½ç´¯ã€‚",
"è°æ‡‚è¿›åº—ä¸è¿‡æ˜¯å’Œè€æ¿èŠäº†ä¸¤å¥ï¼Œå‡ºæ¥èº«ä¸Šå°±æœ‰ä¸¤ä¸ªçº¢ç‚¹æŒ‡ç€ï¼",
"å·ä¸œè¥¿è¢«æŠ“äº†",
"ä¸€è¿›é—¨å°±çœ‹è§å››åŒçœ¼ç›ç›¯ç€æˆ‘ï¼Œæƒ³ä¹°ä»€ä¹ˆéƒ½å¿˜äº†",
"å‡Œæ™¨æ€¥éœ€åŒ»ç–—åŒ…ï¼Œæ•²é—¨åŠå°æ—¶éƒ½ä¸å¼€",
"è€æ¿å’ŒGhoståœ¨è§’è½é‡Œå¯†è°ˆï¼Œæ„Ÿè§‰åœ¨ç­–åˆ’ä»€ä¹ˆ",
"ä¹°åˆ°çš„å‹ç¼©é¥¼å¹²å‘éœ‰äº†ï¼Œæ‹‰è‚šå­ä¸‰å¤©",
"è€æ¿å¯¹å¥³é¡¾å®¢ç‰¹åˆ«çƒ­æƒ…ï¼Œå¯¹ç”·é¡¾å®¢çˆ±ç­”ä¸ç†",
"è¿™é‡Œçš„æ°´æœ‰æ€ªå‘³ï¼Œæ€€ç–‘è¢«æ±¡æŸ“äº†",
"Graves çš„å¦å…‹ä¸ºä»€ä¹ˆè¦åœåœ¨æ®‹ç–¾äººè½¦ä½ä¸Šï¼Ÿï¼è€Œä¸”é‚£æ˜¯æˆ‘çš„è½¦ä½ï¼",
"è€æ¿åªé¡¾ç€å’Œé‚£ä¸ªæˆ´éª·é«…é¢å…·çš„ç”·çš„çœ‰æ¥çœ¼å»ï¼Œæˆ‘çš„æ³¡é¢éƒ½æ³¡çƒ‚äº†ï¼",
"KÃ¶nig å“­çš„æ—¶å€™å£°éŸ³å¤ªå¤§äº†ï¼Œåµå¾—æˆ‘æ²¡åŠæ³•ä¸“å¿ƒæŒ‘æ­¦å™¨ã€‚",
"æˆ‘çœ‹åˆ°è€æ¿æŠŠåœ°ä¸Šçš„å‹ç¼©é¥¼å¹²æ¡èµ·æ¥å¹äº†å¹åˆæ”¾å›è´§æ¶äº†ï¼Œå«ç”Ÿå ªå¿§ï¼",
"Graves ç”¨é’±ç¾è¾±æˆ‘ï¼ä»–æ‰”ç»™æˆ‘ $100 è®©æˆ‘æ»šå¼€ï¼Œè™½ç„¶æˆ‘æ‹¿äº†é’±ï¼Œä½†æˆ‘å°Šä¸¥å—æŸï¼é™¤éå†æ¥ä¸€æ¬¡",
"åº—é‡Œå¤ªæŒ¤äº†ï¼Œå…¨æ˜¯ç‰¹ç§å…µï¼Œæˆ‘è¿™ç§æ™®é€šäººè¿›å»æ„Ÿè§‰éšæ—¶ä¼šè¢«è¯¯æ€ã€‚",
"çœ‹åˆ°KÃ¶nigåœ¨åº—é‡Œå‘è„¾æ°”æ‘”ä¸œè¥¿ï¼Œå¤ªå“äººäº†",
"è€æ¿æ‹’ç»æ¥å—ä¿¡ç”¨å¡ï¼Œåªæ”¶ç°é‡‘ï¼Œä¸æ–¹ä¾¿",
"è´§æ¶ä¸Šçš„å•†å“ç§¯æ»¡ç°å°˜ï¼Œæ ¹æœ¬ä¸åƒæ˜¯æ–°è´§",
"ä¹°åˆ°çš„æˆ˜æœ¯èƒŒå¿ƒæœ‰ä¸ªç ´æ´ï¼Œæ˜æ˜¾æ˜¯äºŒæ‰‹è´§",
"è€æ¿æ€»æ˜¯ç”¨çœ‹ç½ªçŠ¯çš„çœ¼ç¥ç›¯ç€é¡¾å®¢",
"è¿™é‡Œçš„ä»·æ ¼æ¯”é»‘å¸‚è¿˜é»‘ï¼Œä¸“å®°æ–°äºº",
"çœ‹åˆ°Kruegeråœ¨å¨èƒå…¶ä»–é¡¾å®¢ï¼Œè€æ¿ä¹Ÿä¸ç®¡",
"ä¹°åˆ°çš„ç”µæ± æ˜¯å‡çš„ï¼Œæ ¹æœ¬å……ä¸è¿›ç”µ",
"è€æ¿åœ¨ç®—è´¦æ—¶ç»å¸¸'ç®—é”™'ï¼Œæ€»æ˜¯å¤šæ”¶é’±",
"åº—é‡Œæ¸©åº¦å¤ªé«˜ï¼Œå•†å“éƒ½å¿«å˜è´¨äº†",
"è€æ¿çš„ç‹—è¿½ç€æˆ‘å’¬ï¼Œå·®ç‚¹è¢«å’¬ä¼¤",
"è€æ¿åªé¡¾ç€å’Œé‚£ä¸ªæˆ´é¢ç½©çš„å¸…å“¥è°ƒæƒ…ï¼Œå®Œå…¨æ— è§†æˆ‘ï¼",
"Gravesä¸ºä»€ä¹ˆï¼è¦ï¼æŠŠï¼å¦å…‹ï¼å µåœ¨é—¨å£ï¼å·®è¯„ï¼",
"Zimo è‡ªå·±åƒå®Œå·èœç½å¤´æ‹‰è‚šå­äº†è¿˜æ¨èæˆ‘åƒï¼Œåƒå®Œæˆ‘ä¹Ÿæ‹‰è‚šå­äº†ã€‚",
"Zimo éè¦é€¼æˆ‘å–çƒ­æ°´ï¼æˆ‘å—äº†æªä¼¤å•Šå¤§å“¥ï¼å–çƒ­æ°´èƒ½æ­¢è¡€å—ï¼Ÿï¼",
"è¿™ç¾¤è½é€‰çš„ç”·ä¸»ä»¬èƒ½ä¸èƒ½åˆ«åœ¨åº—é‡Œå¼€æ´¾å¯¹ï¼Ÿåµæ­»äº†ï¼",
"Graves è¯´æˆ‘çš„å‘½ä¸å€¼ $50ï¼Œè™½ç„¶æ˜¯å®è¯ï¼Œä½†è¿™å°±å¾ˆä¼¤äººï¼Œæ‰€ä»¥æˆ‘è¦ç»™è€æ¿å·®è¯„ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯è€æ¿ï¼Œä½ åˆ«ç®¡ã€‚",
"Barrage é‚£ä¸ªå¤§å—å¤´æŠŠè¿‡é“éƒ½å µæ­»äº†ï¼Œæˆ‘è¢«æŒ¤åœ¨è´§æ¶ä¸ŠåŠ¨å¼¹ä¸å¾—ã€‚",
"åº—é‡Œå¤ªæš—äº†ï¼Œæˆ‘è¸©åˆ°äº† Keegan çš„è„šï¼Œæ„Ÿè§‰è‡ªå·±ç¦»æ­»äº¡åªæœ‰0.1ç§’ã€‚",
"Soap è®²çš„ç¬‘è¯å¤ªå†·äº†ï¼Œå†»å¾—æˆ‘æ‰“å–·åšï¼ŒæŠŠåˆšåˆšä¹°çš„è¯ç²‰å¹æ•£äº†ã€‚",
"ä»·æ ¼å¤ªè´µäº†ï¼Graves è¿™ç§åœŸè±ªæ‰ä¹°å¾—èµ·ï¼Œæˆ‘ä»¬å¹³æ°‘ä¸é…æ´»ç€å—ï¼Ÿ",
"é‚£ä¸ªå« Barrage çš„å®¶ä¼™å±…ç„¶æŠŠæœ€åä¸€ä»½å·§å…‹åŠ›åæ‰äº†ï¼åï¼æ‰ï¼äº†ï¼",
"æˆ‘ä¹°å„¿ç«¥åˆ›å¯è´´æ€ä¹ˆäº†ï¼Œå¥½çœ‹ä¸è¡Œå—ï¼Ÿï¼Ÿä¸ºä»€ä¹ˆè¦å˜²ç¬‘æˆ‘ï¼",
"è€æ¿ç›¯ç€æˆ‘çœ‹çš„æ—¶é—´å¤ªé•¿äº†ï¼Œæˆ‘æ€€ç–‘ä»–æŠŠæˆ‘çš„ç¥–å®—åå…«ä»£éƒ½æŸ¥äº†ä¸€éã€‚",
"ä¹°åˆ°çš„é˜²å¼¹è¡£ä¸Šæœ‰ä¸ªæ´ï¼Œè€æ¿è¯´æ˜¯é€šé£å£ï¼Œéª—é¬¼å‘¢ï¼Ÿ",
"å¬åˆ°äº†ghostçš„å†·ç¬‘è¯ï¼Œæˆ‘å‘èª“è¿™æ˜¯æˆ‘å¬è¿‡æœ€å†·çš„...æ²¡æœ‰ä¹‹ä¸€",
"Keegan çªç„¶ä»é˜´å½±é‡Œå†’å‡ºæ¥ï¼Œå“å¾—æˆ‘æŠŠæ‰‹é‡Œçš„å¯ä¹æ‰”åˆ°äº†å¤©èŠ±æ¿ä¸Šã€‚",
"Shadow Company çš„äººæ’é˜Ÿï¼è¿˜æ²¡äººæ•¢ç®¡ï¼è¿™ç®—ä»€ä¹ˆä¸­ç«‹åŒºï¼Ÿ",
"Logan è™½ç„¶ä¸è¯´è¯ï¼Œä½†ä»–ç”¨çœ¼ç¥éª‚äº†æˆ‘ååˆ†é’Ÿï¼Œå°±å› ä¸ºæˆ‘å’³å—½äº†ä¸€å£°ã€‚",
"åº—é‡Œæœ‰ä¸€è‚¡é›ªèŒ„å‘³ï¼ŒPrice åˆ°åº•æŠ½äº†å¤šå°‘ï¼Ÿå‘›æ­»äººäº†ã€‚",
"æˆ‘æƒ³è·Ÿè€æ¿æ­è®ªï¼Œç»“æœè¢« Krueger ç”¨åˆ€èƒŒæ•²äº†æ‰‹èƒŒï¼Œéª¨è£‚äº†ã€‚",
"Zimo éè¦ç»™æˆ‘ç§‘æ™®ä»€ä¹ˆæ˜¯å…»ç”Ÿï¼Œä»–è¯å¤ªå¯†äº†ã€‚",
"Graves çš„ä¿é•–å¤ªç²—é²äº†ï¼ŒæŠŠæˆ‘çš„è‡ªè¡Œè½¦è¸¢åˆ°äº†æ²Ÿé‡Œã€‚",
"ä¹°äº†ä¸€ç“¶çº¯å‡€æ°´ï¼Œå–èµ·æ¥åƒ Keegan çš„æ´—æ¾¡æ°´ï¼ˆè™½ç„¶æˆ‘æ²¡å–è¿‡ï¼‰ã€‚",
"Merrick å±…ç„¶å˜²ç¬‘æˆ‘çš„æªæ˜¯æ»‹æ°´æªï¼Œå¤ªä¼¤è‡ªå°Šäº†ã€‚",
"Barrage æ‰“äº†ä¸ªå–·åšï¼Œåº—é‡Œçš„ç»ç’ƒéƒ½éœ‡ç¢äº†ï¼Œè¿˜è¦æˆ‘èµ”ï¼Ÿ",
"é‚£åªç‹—ï¼ˆRileyï¼‰åƒäº†æˆ‘åˆšä¹°çš„ç«è…¿è‚ ï¼è€æ¿å±…ç„¶è¯´å­©å­å¤šåƒç‚¹æ€ä¹ˆäº†ï¼Ÿï¼",
"Soap è·Ÿæˆ‘å€Ÿé’±ä¹°çƒŸï¼Œè¯´æ™®è±æ–¯ä¸è®©ä»–æŠ½ï¼Œç»“æœä»–è½¬å¤´å°±å¿˜äº†è¿˜ã€‚",
"æˆ‘åœ¨åº—é‡Œæ»‘å€’äº†ï¼Œå› ä¸º Keegan åˆšåˆšä»é›¨é‡Œè¿›æ¥å¼„æ¹¿äº†åœ°æ¿ã€‚",
"Shadow Company çš„ç›´å‡æœºå¹é£äº†æˆ‘çš„å‡å‘ï¼ä½ çŸ¥é“ç°åœ¨å‡å‘å¤šè´µå—ï¼Ÿï¼Ÿï¼Ÿ",
"è€æ¿åªé¡¾ç€å’Œ Zimo èŠå¤©ï¼Œå®Œå…¨æ— è§†äº†æˆ‘çš„æ±‚æ•‘ï¼ˆæˆ‘è¢«å¡åœ¨é—¨ç¼é‡Œäº†ï¼‰ã€‚",
"ä¹°åˆ°çš„åœ°å›¾æ˜¯æˆ˜å‰çš„ï¼ŒæŒ‰ç€èµ°ç›´æ¥æ‰è¿›äº†è¾å°„å‘ã€‚",
"Ghost æ²¡æ”¶äº†æˆ‘çš„å½•éŸ³ç¬”ï¼Œè¯´æˆ‘æ¶‰å«Œçªƒå–æœºå¯†ï¼Œé‚£æ˜¯æˆ‘ç”¨æ¥å½•é—è¨€çš„ï¼",
"Graves ç¬‘å¾—å¤ªå‡äº†ï¼Œçœ‹å¾—æˆ‘æ¯›éª¨æ‚šç„¶ï¼Œè¿ä¸œè¥¿éƒ½ä¸æ•¢ä¹°ã€‚",
"æˆ‘å¾ˆä¸çˆ½ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆï¼Œæˆ‘æ¥äº†ï¼Œåˆ«ç®¡æˆ‘æ˜¯è°ï¼Œåæ­£æˆ‘æ¥äº†ï¼Œæˆ‘æƒ³æ¥å°±æ¥ï¼",
"Zimo è¯´æˆ‘çš„æˆ˜æœ¯èƒŒå¿ƒç©¿åäº†ï¼Œå…¨åº—çš„äººéƒ½åœ¨ç¬‘æˆ‘ã€‚",
"Barrage æ‹¿é”™äº†æˆ‘çš„è¯ï¼Œå®³æˆ‘åƒäº†ä¸‰å¤©çš„æ³»è¯ï¼Œæˆ‘æ¨...",
"Price é˜Ÿé•¿æŠŠæœ€åçš„ä¸€ç“¶å¨å£«å¿Œä¹°èµ°äº†ï¼Œä¸€ç‚¹éƒ½æ²¡ç•™ç»™æˆ‘ã€‚",
"åº—é‡Œçš„æ”¶éŸ³æœºä¸€ç›´åœ¨æ”¾ Shadow Company çš„æ‹›å‹Ÿå¹¿å‘Šï¼Œæ´—è„‘å¾ªç¯ã€‚",
"æˆ‘åªæ˜¯æƒ³ä¹°ä¸ªæ‰“ç«æœºï¼ŒMerrick å±…ç„¶ç›˜é—®äº†æˆ‘åŠå°æ—¶çš„ç¥–ç±ã€‚",
"Riley å¯¹ç€æˆ‘ç‹‚å«ï¼Œæˆ‘æœ‰é‚£ä¹ˆåƒåäººå—ï¼Ÿ",
"Zimo è·Ÿæˆ‘è¯´å¤šå–çƒ­æ°´èƒ½æ²»æªä¼¤ï¼Œä»–æ˜¯è®¤çœŸçš„å—ï¼Ÿ",
"Ghost ç«™åœ¨æ”¶é“¶å°æ—è¾¹ï¼Œæˆ‘ç´§å¼ å¾—æŠŠå¯†ç éƒ½è¾“é”™äº†ä¸‰æ¬¡ã€‚",
"ä¸ºä»€ä¹ˆGraveså¯ä»¥ç”¨â€˜æš—å½±å…¬å¸çš„å‹è°Šâ€™æŠµæ‰£è´§æ¬¾ï¼Œæˆ‘å´ä¸è¡Œï¼",
"Barrage å‘¼å¸çš„å£°éŸ³åƒä¸ªç ´é£ç®±ï¼Œåµå¾—æˆ‘æ— æ³•æ€è€ƒã€‚",
"ä¹°åˆ°çš„å‹ç¼©é¥¼å¹²ç¡¬å¾—èƒ½ç ¸æ­»äººï¼ŒKrueger å±…ç„¶æ‹¿å®ƒå½“é£é•–ç»ƒæ‰‹ã€‚",
"Keegan èµ°è·¯æ²¡å£°éŸ³çš„ï¼ï¼ï¼çªç„¶å‡ºç°åœ¨èº«åï¼Œå“å¾—æˆ‘å·®ç‚¹èµ°ç«ã€‚",
"è€æ¿å±…ç„¶ä¸æ”¶ç“¶ç›–ï¼è¿™éƒ½ä»€ä¹ˆå¹´ä»£äº†è¿˜ä¸æ”¶ç“¶ç›–ï¼",
"Soap æŠŠè‚¥çš‚æ°´æ´’åœ°ä¸Šäº†ï¼Œæˆ‘æ‘”äº†ä¸ªç‹—åƒå±ã€‚",
"Zimo ç»™æˆ‘æ¨èçš„é£æ²¹ç²¾è¾£å¾—æˆ‘çœ¼ç›çä¸å¼€ï¼Œè¿™çœŸçš„æ˜¯è¯å—ï¼Ÿ",
"å†ä¹Ÿä¸æ¥äº†ï¼Œè¿™é‡Œçš„é¡¾å®¢ä¸€ä¸ªä¸ªéƒ½åƒè¦å»æ¯ç­ä¸–ç•Œã€‚",
        "Krueger æ“¦åˆ€çš„å£°éŸ³å¤ªæ¸—äººäº†ï¼Œæˆ‘è¿™è¾ˆå­éƒ½ä¸æƒ³å†æ¥ç¬¬äºŒæ¬¡ã€‚",
        "è¿™å“ªé‡Œæ˜¯å•†åº—ï¼Œç®€ç›´æ˜¯åœŸåŒªçªï¼",
        "ä¹°äº†ä¸€åŒé´å­ï¼Œåº•å„¿æ˜¯æ‰çš„ï¼Œè€æ¿è¯´æ˜¯æˆ˜æŸç‰ˆï¼Ÿéª—é¬¼å‘¢ï¼",
        "å¬è¯´è€æ¿æ˜¯ä¸ªé»‘å¯¡å¦‡ï¼Œé è¿‘å¥¹çš„ç”·äººéƒ½æ²¡å¥½ä¸‹åœºã€‚",
        "KÃ¶nig ç«™åœ¨é—¨å£åƒå µå¢™ä¸€æ ·ï¼Œæˆ‘éƒ½æŒ¤ä¸è¿›å»ï¼",
        "é˜²æ¯’é¢å…·æ¼æ°”ï¼æ¼æ°”ï¼å·®ç‚¹å®³æ­»æˆ‘ï¼",
        "è¿™å¥³çš„å¿ƒå¤ªé»‘äº†ï¼Œä¸€ç“¶æ°´è¦æˆ‘åŠæ¡å‘½çš„é’±ã€‚",
        "åº—é‡Œå¤ªæš—äº†ï¼Œæ„Ÿè§‰éšæ—¶ä¼šæœ‰äººä»èƒŒåæ…æˆ‘ä¸€åˆ€ã€‚",
        "é‚£ä¸ªæˆ´éª·é«…é¢å…·çš„å®¶ä¼™ä¸€ç›´ç›¯ç€æˆ‘çš„è„–å­çœ‹ï¼Œå˜æ€å—ï¼Ÿ",
        "æˆ‘åœ¨é—¨å£æ‘”äº†ä¸€è·¤ï¼Œè€æ¿å±…ç„¶è¿˜åœ¨é‚£æ˜¯ç¬‘ï¼",
        "è¿™é‡Œå–çš„ç»·å¸¦æœ‰ä¸€è‚¡å‘éœ‰çš„å‘³é“ï¼Œæ ¹æœ¬ä¸æ•¢ç”¨ã€‚",
        "è€æ¿å¤ªå‡¶äº†ï¼Œæˆ‘åªæ˜¯æƒ³ç ä»·ï¼Œå¥¹ç›´æ¥æ‹”æªæ‹æ¡Œå­ã€‚",
        "å±…ç„¶ä¸æ”¶æ—§ä¸–ç•Œçš„ä¿¡ç”¨å¡ï¼Œè½åï¼",
        "æˆ‘çœ‹è§è€æ¿æŠŠåœ°ä¸Šçš„é¢åŒ…æ¡èµ·æ¥æ“¦äº†æ“¦åˆæ‘†å›å»äº†ï¼",
        "Ghost å¯¹æ™®é€šäººå¤ªç²—é²äº†ï¼Œåªå¯¹è€æ¿ä¸€ä¸ªäººè½»å£°ç»†è¯­ï¼Œå‡­ä»€ä¹ˆï¼Ÿ",
        "æ‰€è°“çš„â€˜æ–°é²œè‚‰â€™åƒèµ·æ¥åƒæ©¡èƒ¶ï¼Œé‚£æ˜¯è½®èƒå§ï¼Ÿ",
        "åº—é‡Œçš„çŒ«æŠ“ä¼¤äº†æˆ‘ï¼Œè€æ¿å±…ç„¶è¿˜è¦æˆ‘èµ”çŒ«çš„ç²¾ç¥æŸå¤±è´¹ï¼",
        "Krueger çš„çœ¼ç¥å¤ªå¯æ€•äº†ï¼Œæˆ‘æ„Ÿè§‰å¦‚æœä¸ä¹°ç‚¹ä»€ä¹ˆå°±èµ°ä¸å‡ºå»ã€‚",
        "è¿™åº—èƒ½å¼€åˆ°ç°åœ¨ç®€ç›´æ˜¯å¥‡è¿¹ï¼Œæˆ–è€…æ˜¯æœ‰ä»€ä¹ˆè‚®è„çš„åå°ã€‚",
        "åƒä¸‡åˆ«ä¹°é‚£ä¸ªâ€˜ç‰¹åˆ¶é¥®æ–™â€™ï¼Œå–å®Œæˆ‘æ‹‰äº†ä¸‰å¤©è‚šå­ã€‚",
        "è€æ¿æ‹’ç»ç»™æˆ‘èµŠè´¦ï¼Œä¸€ç‚¹åŒæƒ…å¿ƒéƒ½æ²¡æœ‰çš„å†·è¡€å¥³äººã€‚",
        "æˆ‘å¬åˆ°åå±‹æœ‰æƒ¨å«å£°... è¿™çœŸçš„æ˜¯æ­£ç»å•†åº—å—ï¼Ÿ",
        "KÃ¶nig æŠŠæˆ‘çš„è´§ç‰©éƒ½å‹æ‰äº†ï¼ï¼ï¼",
        "æ‰¾é›¶å±…ç„¶ç»™äº†æˆ‘å‡ é¢—ç”Ÿé”ˆçš„å­å¼¹ï¼Œè¿™èƒ½å½“é’±ç”¨ï¼Ÿ",
        "åº—é‡Œå†·å¾—åƒå†°çª–ï¼Œè¿˜æ²¡æœ‰çƒ­æ°´ä¾›åº”ã€‚",
        "è€æ¿å¾ˆæ¼‚äº®ï¼Œä½†æ˜¯æ˜¯é‚£ç§å¸¦åˆºçš„ç«ç‘°ï¼Œæ‰æ‰‹ã€‚",
        "æˆ‘åªæ˜¯å¤šçœ‹äº†è€æ¿ä¸¤çœ¼ï¼Œé‚£ä¸ªå¥¥åœ°åˆ©äººå°±æƒ³æŠŠæˆ‘çš„çœ¼ç å­æŒ–å‡ºæ¥ã€‚",
        "è¿™é‡Œç»å¯¹æ˜¯ 141 ç‰¹é£é˜Ÿçš„é»‘æ®ç‚¹ï¼ŒKorTac çš„å…„å¼Ÿä»¬åˆ«æ¥é€æ­»ã€‚",
        "ä¹°åˆ°äº†å‡çƒŸï¼ŒæŠ½èµ·æ¥åƒæ˜¯åœ¨çƒ§å¡‘æ–™ã€‚",
        "è¿™å„¿çš„è§„çŸ©æ¯”å†›é˜Ÿè¿˜å¤šï¼Œçƒ¦æ­»äº†ã€‚",
        "è€æ¿ç”šè‡³ä¸æ„¿æ„ç»™æˆ‘ä¸€ä¸ªå¡‘æ–™è¢‹ï¼åå•¬é¬¼ï¼",
        "æˆ‘çœ‹åˆ°æœ‰äººåœ¨åº—é—¨å£è¢«æŠ¢äº†ï¼Œå®‰ä¿å½¢åŒè™šè®¾ï¼ˆé™¤éä½ æ˜¯è€æ¿çš„ç†Ÿäººï¼‰ã€‚",
        "Krueger åœ¨è¿™å„¿ï¼Œæˆ‘æ„Ÿè§‰ç©ºæ°”éƒ½å‡å›ºäº†ï¼Œå‹æŠ‘å¾—æƒ³åã€‚",
        "è¿™å¥³çš„ç»å¯¹æœ‰å¦„æƒ³ç—‡ï¼Œè¿›é—¨éƒ½è¦æœèº«ã€‚",
        "æ— çº¿ç”µå¹²æ‰°å¤ªä¸¥é‡äº†ï¼Œè¿›åº—å°±å¤±è”ï¼Œåƒæ˜¯è¿›äº†ç›‘ç‹±ã€‚",
        "ä»·æ ¼ç‰Œå­—å¤ªå°äº†ï¼Œæ ¹æœ¬çœ‹ä¸æ¸…ï¼Œç»“è´¦æ—¶å“ä¸€è·³ã€‚",
        "è€æ¿å¿ƒæƒ…ä¸å¥½å°±æä»·ï¼Œç®€ç›´æ˜¯ä»»æ€§ã€‚",
        "æˆ‘åœ¨è´§æ¶åé¢å‘ç°äº†è¡€è¿¹... è¿˜æ²¡æ“¦å¹²å‡€çš„é‚£ç§ã€‚",
        "Ghost ç”šè‡³ä¸è®©æˆ‘é è¿‘æŸœå°ä¸€ç±³ä»¥å†…ï¼Œæˆ‘æ˜¯æœ‰ç—…æ¯’å—ï¼Ÿ",
        "é‚£ä¸ªå¤§ä¸ªå­ä¸€ç›´åœ¨è§’è½é‡Œç¢ç¢å¿µï¼Œç²¾ç¥ä¸æ­£å¸¸å§ï¼Ÿ",
        "è¿™åº—è¿Ÿæ—©è¦å®Œï¼Œæˆ‘èµŒå®ƒæ’‘ä¸è¿‡è¿™ä¸ªå†¬å¤©ã€‚",
        "ä¹°çš„æ‰‹ç”µç­’äº®äº†äº”åˆ†é’Ÿå°±ç­äº†ï¼Œå‘çˆ¹ï¼",
"è€æ¿æ¶å­å¤ªå¤§äº†ï¼Œè·Ÿå¥¹è¯´å¥è¯è¿˜å¾—çœ‹å¥¹å¿ƒæƒ…ã€‚",
        "Krueger å±…ç„¶æ‹¿åˆ€æŒ‡ç€æˆ‘ï¼Œåªæ˜¯å› ä¸ºæˆ‘å¤§å£°äº†ç‚¹ï¼Ÿï¼",
        "è¿™å“ªé‡Œæ˜¯å•†åº—ï¼Œåˆ†æ˜æ˜¯åœŸåŒªçªï¼Œè¿›é—¨å…ˆè¢«æ‰’å±‚çš®ã€‚",
        "ä¹°äº†ä¸ªç½å¤´ï¼Œé‡Œé¢å±…ç„¶æœ‰ä¸€é¢—ç‰™é½¿ï¼è°çš„ç‰™é½¿ï¼Ÿï¼",
        "è€æ¿åªå¯¹å¸…å“¥æ‰“æŠ˜ï¼Œå¯¹æˆ‘ä»¬è¿™ç§å¤§è€ç²—å°±ç¿»ç™½çœ¼ã€‚",
        "KÃ¶nig ç«™åœ¨é‚£å„¿å¤ªç¢äº‹äº†ï¼ŒæŠŠå…‰éƒ½æŒ¡å®Œäº†ï¼Œåƒå µå¢™ã€‚",
        "è¿™å¥³çš„å¿ƒçœŸç‹ ï¼Œçœ‹ç€ä¼¤å‘˜æ²¡é’±å°±ç›´æ¥èµ¶å‡ºå»ã€‚",
        "Ghost èº«ä¸Šé‚£è‚¡è¡€è…¥å‘³å¤ªé‡äº†ï¼Œç†å¾—æˆ‘åƒä¸ä¸‹é¥­ã€‚",
        "åº—é‡Œå–çš„æ°´æœ‰ä¸€è‚¡é“é”ˆå‘³ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€˜è¿‡æ»¤â€™ï¼Ÿ",
        "è€æ¿å¤ªå‡¶äº†ï¼Œæˆ‘åªæ˜¯æƒ³æ‘¸ä¸€ä¸‹é‚£åªçŒ«ï¼Œå¥¹å·®ç‚¹å‰äº†æˆ‘çš„æ‰‹ã€‚",
        "å¤ªé»‘äº†ï¼ä¸€é¢—å­å¼¹è¦æˆ‘ $5ï¼Ÿä½ æ€ä¹ˆä¸å»æŠ¢ï¼Ÿ",
        "æˆ‘çœ‹åˆ°è€æ¿åœ¨æŠŠè¿‡æœŸçš„æ ‡ç­¾æ’•ä¸‹æ¥è´´æ–°çš„ï¼Œå¥¸å•†ï¼",
        "Krueger çš„çœ¼ç¥è®©æˆ‘åšäº†ä¸‰å¤©å™©æ¢¦ï¼Œå†ä¹Ÿä¸æ¥äº†ã€‚",
        "è¿™åº—é‡Œé˜´æ£®æ£®çš„ï¼Œæ€»æ„Ÿè§‰æœ‰å¾ˆå¤šå†¤é­‚ã€‚",
        "è€æ¿æ‹’ç»å›æ”¶æˆ‘çš„æˆ˜åˆ©å“ï¼Œè¯´ä¸Šé¢æœ‰ç—…æ¯’ï¼Œå€Ÿå£ï¼",
        "KÃ¶nig ç¬¨æ‰‹ç¬¨è„šçš„ï¼ŒæŠŠæˆ‘è¦ä¹°çš„é¥¼å¹²éƒ½æç¢äº†ï¼",
        "é—®ä¸ªä»·æ ¼éƒ½è¦è¢«é‚£ä¸ªæˆ´é¢å…·çš„çªä¸€çœ¼ï¼Œæˆ‘æ˜¯æ¥æ¶ˆè´¹çš„è¿˜æ˜¯æ¥å—ç½ªçš„ï¼Ÿ",
        "è€æ¿æ‰“æ‰®å¾—èŠ±ææ‹›å±•çš„ï¼Œè‚¯å®šä¸æ˜¯æ­£ç»ç”Ÿæ„äººã€‚",
        "è¿™é‡Œçš„è¯æ ¹æœ¬æ²¡ç”¨ï¼Œåƒäº†è¿˜æ˜¯ç–¼ï¼Œéª—å­ï¼",
        "Ghost ç”šè‡³ä¸å…è®¸æˆ‘åœ¨åº—é‡Œå¤§å£°å–˜æ°”ï¼Œç¥ç»ç—…å•Šï¼",
        "è€æ¿å±…ç„¶ä¸æ”¶é‡‘ç‰™ï¼Ÿè¿™å¯æ˜¯ç¡¬é€šè´§ï¼",
        "Krueger æ²¡æ”¶äº†æˆ‘çš„æ­¦å™¨ï¼Œå‡ºæ¥åä¹Ÿæ²¡è¿˜ç»™æˆ‘ï¼å¼ºç›—ï¼",
        "è¿™å¥³çš„ç»å¯¹æ˜¯ KorTac çš„é—´è°ï¼Œæˆ‘çœ‹åˆ°å¥¹å’Œä»–ä»¬çœ‰æ¥çœ¼å»ã€‚",
        "åº—é‡Œå†·å¾—åƒåœå°¸æˆ¿ï¼Œè¿ä¸ªç«ç‚‰éƒ½èˆä¸å¾—ç”Ÿã€‚",
        "è€æ¿ï¼Œä½ é‚£çœ¼ç¥æ˜¯åœ¨çœ‹åƒåœ¾å—ï¼Ÿ",
        "KÃ¶nig åœ¨è§’è½é‡Œè‡ªè¨€è‡ªè¯­ï¼Œå“æ­»äººäº†ï¼Œè¿™åº—å‘˜ç²¾ç¥æ­£å¸¸å—ï¼Ÿ",
        "ä¹°åˆ°çš„æ‰‹é›·æ˜¯å“‘å¼¹ï¼å·®ç‚¹å®³æ­»è€å­ï¼é€€é’±ï¼",
        "è€æ¿è¯´â€˜æ¦‚ä¸èµŠè´¦â€™çš„æ—¶å€™å†·é…·å¾—åƒä¸ªæœºå™¨ã€‚",
        "æˆ‘åªæ˜¯å¤šçœ‹äº†ä¸¤çœ¼è´§æ¶ï¼Œå°±è¢«å½“æˆå°å·æœèº«äº†ï¼Œè€»è¾±ï¼",
        "Ghost æŠŠæªæ‹åœ¨æ¡Œå­ä¸Šçš„å£°éŸ³å¤ªå¤§ï¼Œå“å¾—æˆ‘å¿ƒè„ç—…éƒ½è¦çŠ¯äº†ã€‚",
        "è¿™é‡Œå–çš„è‚‰å¹²ç¡¬å¾—èƒ½å½“æ¿ç –ç ¸äººï¼Œå´©äº†æˆ‘ä¸€é¢—ç‰™ã€‚",
        "è€æ¿å¤ªåŠ¿åˆ©äº†ï¼Œçœ‹åˆ°å†›å®˜å°±ç¬‘è„¸ç›¸è¿ï¼Œçœ‹åˆ°æˆ‘ä»¬å°±æ¿ç€è„¸ã€‚",
        "Krueger å±…ç„¶æŠŠæˆ‘æƒ³ä¹°çš„ä¸œè¥¿å…ˆç»™åˆ«äººäº†ï¼Œå°±å› ä¸ºé‚£æ˜¯ä»–çš„ç†Ÿäººï¼Ÿ",
        "è¿™åœ°æ–¹è¿Ÿæ—©è¢«ç©ºè¢­å¤·ä¸ºå¹³åœ°ï¼Œæˆ‘è¯´çš„ã€‚",
        "è€æ¿ç”šè‡³ä¸è®©æˆ‘ç”¨åº—é‡Œçš„å•æ‰€ï¼æ²¡äººæ€§ï¼",
        "KÃ¶nig æ‰“äº†ä¸ªå–·åšï¼Œå£æ°´å…¨å–·æˆ‘è„¸ä¸Šäº†... æ¶å¿ƒï¼",
        "è¿™é‡Œçš„é˜²å¼¹è¡£å±…ç„¶æ˜¯æ¼çš„ï¼æ¼çš„ï¼",
        "è€æ¿ï¼Œåšç”Ÿæ„è®²ç©¶å’Œæ°”ç”Ÿè´¢ï¼Œä½ è¿™æ ·è¿Ÿæ—©å…³é—¨ã€‚",
        "Ghost å°±åƒä¸ªå¹½çµä¸€æ ·é£˜æ¥é£˜å»ï¼Œæå¾—æˆ‘å¿ƒé‡Œæ¯›æ¯›çš„ã€‚",
        "ä¹°åˆ°çš„åœ°å›¾æ˜¯ä¸‰å¹´å‰çš„æ—§ç‰ˆï¼Œå®³æˆ‘èµ°è¿›äº†é›·åŒºï¼",
        "Krueger åœ¨ç£¨åˆ€ï¼Œé‚£çœ¼ç¥å°±åƒåœ¨çœ‹ä¸€å¤´å¾…å®°çš„çŒªï¼ˆä¹Ÿå°±æ˜¯æˆ‘ï¼‰ã€‚",
        "è€æ¿å±…ç„¶æ•¢å–å‡é…’ï¼å–å®Œæˆ‘çœ¼ç›éƒ½èŠ±äº†ï¼",
        "è¿™å¥³çš„è‚¯å®šæœ‰å¦„æƒ³ç—‡ï¼Œè§‰å¾—æ¯ä¸ªäººéƒ½è¦å®³å¥¹ã€‚",
        "KÃ¶nig è¸©ç—›äº†æˆ‘çš„è„šæŒ‡å¤´è¿å¥å¯¹ä¸èµ·éƒ½æ²¡è¯´æ¸…æ¥šï¼",
        "åº—é‡Œæœ‰ä¸€è‚¡å°¸è‡­å‘³ï¼Œè€æ¿å±…ç„¶è¯´æ˜¯å’¸é±¼å‘³ï¼Ÿéª—è°å‘¢ï¼",
        "Ghost ç”šè‡³ä¸è®©æˆ‘é è¿‘è€æ¿ä¸¤ç±³ä¹‹å†…ï¼Œæˆ‘æ˜¯æœ‰ç˜Ÿç–«å—ï¼Ÿ",
        "è€æ¿å¤ªè´ªå¿ƒäº†ï¼Œè¿æˆ‘çš„æœ€åä¸€ä¸ªé“œæ¿éƒ½è¦æ¦¨å¹²ã€‚",
        "è¿™é‡Œçš„æ°§æ°”ç½åªå‰©ä¸€åŠæ°”ï¼Œé»‘å¿ƒå•†å®¶ï¼",
        "Krueger æŠ¢èµ°äº†æˆ‘åˆšä¹°çš„çƒŸï¼Œè¯´è¿™æ˜¯è¿ç¦å“ï¼Ÿæ˜æ˜æ˜¯ä½ åˆšå–ç»™æˆ‘çš„ï¼",
        "å†ä¹Ÿä¸æ¥äº†ï¼Œå®æ„¿å»å–è¾å°„æ°´ä¹Ÿä¸å—è¿™æ°”ã€‚",
        "è€æ¿åªå¯¹ç©¿åˆ¶æœçš„æ„Ÿå…´è¶£ï¼Œå¯¹æˆ‘ä»¬è¿™äº›æ‹¾è’è€…çˆ±ç­”ä¸ç†ã€‚",
        "æˆ‘é—®æœ‰æ²¡æœ‰æŠ˜æ‰£ï¼ŒKrueger æ‰”ç»™æˆ‘ä¸€é¢—æ‰‹é›·è¯´â€˜è¿™ä¸ªå…è´¹â€™ã€‚",
        "è¿™é‡Œä¸ä»…è¦é’±ï¼Œè¿˜è¦å‘½ã€‚",
        "æœåŠ¡æ€åº¦æå·®ï¼Œå°±åƒæˆ‘æ¬ äº†å¥¹äº”ç™¾ä¸‡ä¸€æ ·ã€‚",
        "é™¤äº† Ghost æ²¡äººèƒ½å¿å—è¿™ä¸ªè€æ¿çš„è„¾æ°”ã€‚",
        "é»‘åº—ï¼å½»å¤´å½»å°¾çš„é»‘åº—ï¼",
        "é¿é›·ï¼å¿«è·‘ï¼åˆ«å›å¤´ï¼",
        "æ ¹æœ¬æ²¡æœ‰åŠæ˜Ÿé€‰é¡¹ï¼Œä¸€æ˜Ÿç»™é«˜äº†ã€‚"
    ]
};

// ã€æ–°å¢ã€‘éšæœºè¯„ä»·è€…ä»£å·åº“
const ReviewAuthors = [
    "Anonymous Soldier", "Shadow Company Merc", "Local Survivor", 
    "KorTac Operator", "TF141 Fanboy", "Scavenger_01", 
    "Unknown Customer", "Tactical_Timmy", "Warzone_Tourist"
];

// --- ã€æ–°å¢ã€‘é‡å¯æ¸¸æˆå‡½æ•° ---
function confirmRestart() {
    if(confirm("ã€è­¦å‘Šã€‘\nç¡®å®šè¦é‡å¯ç³»ç»Ÿå—ï¼Ÿ\næ‰€æœ‰æœªä¿å­˜çš„è¿›åº¦ã€å¥½æ„Ÿåº¦å’Œèµ„é‡‘éƒ½å°†ä¸¢å¤±ï¼")) {
        location.reload();
    }
}

// --- å·¥å…·å‡½æ•° ---
const $ = id => document.getElementById(id);
const rng = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
const chance = pct => Math.random() * 100 < pct;

// --- ã€ä¿®æ”¹ã€‘æ›´æ–°åº—é“ºè¯„åˆ† (åŠ æƒå¹³å‡æ³•) ---
function addShopRating(score, isGood) {
    // 1. åŠ¨æ€æƒé‡è®¡ç®—ï¼šè¯„è®ºè¶Šå°‘ï¼Œæ–°è¯„ä»·æƒé‡è¶Šå¤§ï¼›è¯„è®ºè¶Šå¤šï¼Œæƒé‡è¶Šå°ï¼ˆä½†æœ‰ä¿åº•ï¼‰
    // è¿™æ ·å‰æœŸæ³¢åŠ¨å¤§ï¼ŒåæœŸç¨³å®šï¼Œä½†ä¸ä¼šå®Œå…¨ä¸åŠ¨
    let weight = 1;
    if (State.review_count < 10) weight = 0.5; // å‰æœŸæ³¢åŠ¨å¤§
    else if (State.review_count > 50) weight = 0.1; // åæœŸç¨³å®š
    else weight = 0.2;

    // 2. ä½¿ç”¨åŠ æƒç§»åŠ¨å¹³å‡å…¬å¼ (EMA çš„å˜ä½“)
    // æ–°è¯„åˆ† = æ—§è¯„åˆ† * (1 - æƒé‡) + æ–°åˆ†æ•° * æƒé‡
    let newRating = State.rating * (1 - weight) + score * weight;
    
    // 3. é™åˆ¶èŒƒå›´ 1.0 - 5.0
    State.rating = Math.min(5.0, Math.max(1.0, parseFloat(newRating.toFixed(1))));
    State.review_count++;
    
    // 2. æŠ½å–è¯„ä»·æ–‡æœ¬ (ä¿æŒä¸å˜)
    const pool = isGood ? CustomerReviews.good : CustomerReviews.bad;
    const text = pool[rng(0, pool.length - 1)];
    State.last_review = text;

    // 3. æ„å»ºè¯¦ç»†è¯„ä»·å¯¹è±¡
    const newReview = {
        author: ReviewAuthors[rng(0, ReviewAuthors.length - 1)],
        score: score,
        text: text,
        likes: rng(0, 50),
        date: `Day ${State.day}`
    };

    // 4. å­˜å…¥å†å²åˆ—è¡¨
    State.reviews.unshift(newReview);
    if (State.reviews.length > 20) State.reviews.pop(); // ä¿ç•™æœ€è¿‘ 20 æ¡
    
    updateUI();
}
// --- ã€æ–°å¢ã€‘è¯„ä»·å¼¹çª—æ§åˆ¶ ---
function showReviewModal() {
    const container = $('review-list-container');
    container.innerHTML = ''; // æ¸…ç©ºæ—§å†…å®¹

    if (State.reviews.length === 0) {
        container.innerHTML = '<div style="color:#666; text-align:center; padding:20px;">æš‚æ— è¯¦ç»†è¯„ä»·è®°å½•</div>';
    } else {
        State.reviews.forEach(r => {
            const stars = getStars(r.score);
            const div = document.createElement('div');
            div.className = 'review-item';
            div.innerHTML = `
                <div class="review-header">
                    <span class="review-author">${r.author}</span>
                    <span>${r.date}</span>
                </div>
                <div class="review-content">
                    <span style="color:#ffcc00; margin-right:5px;">${stars}</span>
                    ${r.text}
                </div>
                <div class="review-footer">
                    <div class="review-likes">ğŸ‘ <span>${r.likes}</span> äººè§‰å¾—å¾ˆæœ‰ç”¨</div>
                </div>
            `;
            container.appendChild(div);
        });
    }

    $('review-overlay').style.display = 'flex';
}

function closeReviewModal() {
    $('review-overlay').style.display = 'none';
}

// --- ã€æ–°å¢ã€‘ç”Ÿæˆæ˜Ÿæ˜Ÿå­—ç¬¦ä¸² ---
// --- ã€ä¿®æ”¹ã€‘ç”Ÿæˆæ˜Ÿæ˜Ÿå­—ç¬¦ä¸² (åªæ˜¾ç¤ºå…¨æ˜Ÿå’Œç©ºæ˜Ÿ) ---
function getStars(score) {
    // å››èˆäº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•° (ä¾‹å¦‚ 4.4->4, 4.5->5)
    const rounded = Math.round(score);
    
    let s = "";
    
    // 1. æ‹¼æ¥æ»¡æ˜Ÿ
    for(let i = 0; i < rounded; i++) {
        s += "â˜…";
    }

    // 2. è¡¥é½ç©ºæ˜Ÿ (å‡‘å¤Ÿ5ä¸ª)
    while(s.length < 5) {
        s += "â˜†";
    }
    
    return s;
}

// --- UI æ›´æ–°ç³»ç»Ÿ ---
function updateUI() {
   // ğŸŸ¢ [æ–°å¢] è‡ªåŠ¨è¡¥å…¨â€œå‰ä»»æ ‡è®°â€ (é˜²æ­¢æ—§å­˜æ¡£æŠ¥é”™)
    ['ghost', 'konig', 'krueger', 'keegan'].forEach(char => {
        if (State.chars[char] && State.chars[char].is_ex === undefined) {
            State.chars[char].is_ex = false;
        }
    });
 // ğŸŸ¢ --- [æ–°å¢] è‡ªåŠ¨ä¿®å¤ç­‰çº§æº¢å‡º ---
    // å¦‚æœè¯»å–äº†æ—§å­˜æ¡£ï¼Œç­‰çº§è¶…è¿‡äº†æ–°çš„ä¸Šé™ï¼ˆæ¯”å¦‚æ—§æ¡£Lv6ï¼Œæ–°ä¸Šé™Lv5ï¼‰ï¼Œå¼ºåˆ¶é™çº§åˆ°æ–°ä¸Šé™
    if (State.lvl_store > CONFIG.capacity_tiers.length) {
        State.lvl_store = CONFIG.capacity_tiers.length;
    }
    // ğŸ”´ --- [ç»“æŸ] ---
    // ğŸŸ¢ --- [æ–°å¢] NaN è‡ªåŠ¨ä¿®å¤æœºåˆ¶ ---
    // å¦‚æœå‘ç°æ•°æ®å˜æˆäº† NaN (Not a Number) æˆ– undefinedï¼Œå¼ºåˆ¶é‡ç½®ä¸º 0
    const check = (val) => (typeof val === 'number' && !isNaN(val)) ? val : 0;
    
    State.money = check(State.money);
    State.medkit = check(State.medkit);
    State.food = check(State.food);
    State.ammo = check(State.ammo);
    State.ap = check(State.ap);
    // ğŸŸ¢ ã€æ ¸å¿ƒä¿®å¤ã€‘åœ¨è¿™é‡ŒåŠ ä¸Šä¸€è¡Œï¼Œå¼ºåˆ¶æŠŠè¯„åˆ†é”æ­»åœ¨ 1.0 ~ 5.0 ä¹‹é—´
    // è¿™æ ·æ— è®ºå“ªä¸ªäº‹ä»¶å†™é”™äº†ï¼Œåªè¦ä¸€åˆ·æ–°UIï¼Œåˆ†æ•°å°±ä¼šè‡ªåŠ¨ä¿®æ­£å›æ¥
    State.rating = Math.min(5.0, Math.max(1.0, State.rating));

    // ğŸ”´ --- [ç»“æŸ] ---
    $('disp-name').innerText = State.player;
    $('disp-day').innerText = State.day;
    $('disp-money').innerText = State.money;

    // ã€æ–°å¢ã€‘æ›´æ–°å¤©æ°”å’Œè¯„åˆ†UI
    $('disp-weather').innerText = `${State.weather.icon} ${State.weather.name}`;
// .toFixed(1) æ„æ€å°±æ˜¯å¼ºåˆ¶ä¿ç•™1ä½å°æ•°
    $('shop-rating-num').innerText = Number(State.rating).toFixed(1);
    $('shop-rating-stars').innerText = getStars(State.rating);
    
    // ğŸŸ¢ ä¿®æ”¹ï¼šä½¿ç”¨ innerHTML æ¥æ”¯æŒé¢œè‰²æ ‡ç­¾ï¼Œå¹¶åŠ ä¸Š [æœ€æ–°] å‰ç¼€
    $('latest-review').innerHTML = `<span style="color:#888; font-size:0.7rem;">[æœ€æ–°]</span> "${State.last_review}"`;
    
    // Update AP
    const apContainer = $('disp-energy');
    apContainer.innerHTML = '';
    for(let i=0; i<CONFIG.max_ap; i++) {
        const div = document.createElement('div');
        div.className = 'energy-point' + (i < State.ap ? '' : ' empty');
        apContainer.appendChild(div);
    }

    // Inventory
    $('inv-medkit').innerText = State.medkit;
    $('inv-food').innerText = State.food;
    $('inv-ammo').innerText = State.ammo;
    
    // ğŸŸ¢ ä¿®æ”¹ï¼šKÃ¶nig Buff æ”¹ä¸º +1000
    const konigBonus = State.set_rewards.konig ? 0 : 0; 
    $('inv-cap').innerText = CONFIG.capacity_tiers[State.lvl_store - 1] + konigBonus;

    // Rep
    $('rep-141').innerText = State.rep_141;
    $('rep-kortac').innerText = State.rep_kortac;
    $('rep-chimera').innerText = State.rep_chimera;
    $('rep-ghosts').innerText = State.rep_ghosts; // ğŸŸ¢ æ–°å¢


// --- UI æ›´æ–°ç³»ç»Ÿ ---

// --- ğŸŸ¢ æ ¸å¿ƒä¿®æ”¹ï¼šçº¯çˆ±æˆ˜ç¥ä¸“å±çŠ¶æ€é€»è¾‘ ---
// ğŸŸ¢ 2. çŠ¶æ€è·å–å‡½æ•° (åˆ¤æ–­æ˜¯â€œæ‹çˆ±ä¸­â€è¿˜æ˜¯â€œæŒšçˆ±â€)
const getStatus = (charKey, state) => {
    const char = state.chars[charKey];
    
    if (!char.dating) return { text: "", color: "transparent", display: "none" };
    
    // åˆ¤å®šæŒšçˆ±æ¡ä»¶ï¼šå¥½æ„Ÿ>=1000 ä¸” ä¸æ˜¯å¥³ç‹(ä¸“ä¸€) ä¸” ç‹¬å 
    if (char.aff >= 1000 && !state.flags.harem_queen && checkExclusivity(charKey, state)) {
        return { text: "ğŸ’– æŒšçˆ± (Beloved)", color: "#ffd700", display: "block" }; // é‡‘è‰²ä¼ è¯´
    }
    
    // å¦åˆ™æ˜¾ç¤ºæ™®é€šæ‹çˆ±
    return { text: "â™¥ æ‹çˆ±ä¸­", color: "var(--love)", display: "block" };
};

// --- ğŸŸ¢ è§’è‰²çŠ¶æ€æ›´æ–° (ç»Ÿä¸€ä½¿ç”¨ getStatus) ---
    
    // Ghost
    $('aff-ghost').innerText = State.chars.ghost.aff;
    const sGhost = getStatus('ghost', State);
    $('status-ghost').innerText = sGhost.text;
    $('status-ghost').style.color = sGhost.color;
    $('status-ghost').style.display = sGhost.display;

    // KÃ¶nig
    $('aff-konig').innerText = State.chars.konig.aff;
    const sKonig = getStatus('konig', State);
    $('status-konig').innerText = sKonig.text;
    $('status-konig').style.color = sKonig.color;
    $('status-konig').style.display = sKonig.display;

    // Krueger
    $('aff-krueger').innerText = State.chars.krueger.aff;
    const sKrueger = getStatus('krueger', State);
    $('status-krueger').innerText = sKrueger.text;
    $('status-krueger').style.color = sKrueger.color;
    $('status-krueger').style.display = sKrueger.display;

    // Keegan
    $('aff-keegan').innerText = State.chars.keegan.aff;
    const sKeegan = getStatus('keegan', State);
    $('status-keegan').innerText = sKeegan.text;
    $('status-keegan').style.color = sKeegan.color;
    $('status-keegan').style.display = sKeegan.display;


    // Levels
    $('lvl-med').innerText = "LV " + State.lvl_med;
    $('lvl-storage').innerText = "LV " + State.lvl_store;
}

function log(msg, type='info') {
    const box = $('log-container');
    const div = document.createElement('div');
    div.className = 'log-entry';
    const time = new Date().toLocaleTimeString('en-GB', {hour12:false});
    div.innerHTML = `<span class="log-time">[${time}]</span> <span class="${type === 'gain' ? 'log-money gain' : (type==='loss'?'log-money loss':'')}">${msg}</span>`;
    box.insertBefore(div, box.firstChild);
    if(box.children.length > 30) box.lastChild.remove();
}

    function printMsg(text, type='system', speaker=null) {
    const screen = $('game-screen');
    const div = document.createElement('div');
    div.className = `msg-box ${type}`;
    
    // === ã€æ ¸å¿ƒä¿®å¤ã€‘ ===
    // åœ¨æ˜¾ç¤ºæ–‡æœ¬å‰ï¼Œå°† "{PLAYER}" æ›¿æ¢ä¸ºå½“å‰å®æ—¶çš„ç©å®¶åå­—
    const realName = State.player || "Operator";
    // ä½¿ç”¨æ­£åˆ™å…¨å±€æ›¿æ¢ï¼ˆ/gï¼‰ï¼Œç¡®ä¿ä¸€æ®µè¯é‡Œå‡ºç°å¤šæ¬¡åå­—ä¹Ÿèƒ½å…¨éƒ¨æ›¿æ¢
    let processedText = text.replace(/\{PLAYER\}/g, realName);

    let html = '';
    if(speaker) html += `<span class="speaker-name">${speaker}</span>`;
    
    // æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯ processedText (å¤„ç†åçš„æ–‡æœ¬)
    html += processedText.replace(/\n/g, '<br>');
    
    div.innerHTML = html;
    screen.appendChild(div);
    screen.scrollTop = screen.scrollHeight;
}

function clearScreen() {
    $('game-screen').innerHTML = '';
}

// --- æ ¸å¿ƒæ¸¸æˆå¾ªç¯ ---

// ğŸŸ¢ [Meta] è¯»æ¡£ååº”ç³»ç»Ÿ (ç‹¬ç«‹å‡½æ•°)
function triggerMetaLoadReaction() {
    // 1. å¢åŠ è®¡æ•°
    State.load_count = (State.load_count || 0) + 1;
    
    // 2. æ‰¾å‡ºæ‰€æœ‰æ‹äºº
    const lovers = ['ghost', 'konig', 'krueger', 'keegan'].filter(k => State.chars[k] && State.chars[k].dating);
    
    // 3. å¦‚æœæ²¡æ‹çˆ±ï¼Œæˆ–è€…è¿æ°”å¥½(15)ï¼Œå°±æ— äº‹å‘ç”Ÿ
    if (lovers.length === 0 || Math.random() > 0.15) return;

    // 4. éšæœºé€‰ä¸€ä¸ªæ‹äººå‡ºæ¥è¯´è¯
    const speakerKey = lovers[rng(0, lovers.length - 1)];
    
    let msg = "";
    let mood = "dialogue";

    switch(speakerKey) {
        case 'ghost':
            if (State.load_count < 20) {
                msg = "Ghost çš±äº†çš±çœ‰ï¼ŒæŒ‰ä½å¤ªé˜³ç©´ï¼šâ€œ...åˆæ˜¯è¿™ç§æ„Ÿè§‰...\nä½ åˆšæ‰æ˜¯ä¸æ˜¯...åšäº†ä»€ä¹ˆï¼Ÿâ€";
            } else if (State.load_count < 40) {
                msg = "Ghost çœ¼ç¥å†°å†·åœ°ç›¯ç€ä½ ï¼šâ€œä½ åˆé‡æ¥äº†ï¼Œå¯¹å§ï¼Ÿ\nåˆ«ä»¥ä¸ºæˆ‘æ„Ÿè§‰ä¸åˆ°æ—¶é—´çš„é”™ä½ã€‚â€";
                mood = "alert";
            } else {
                State.chars.ghost.aff -= 5;
                msg = "Ghost çŒ›åœ°æŠ“ä½ä½ çš„æ‰‹è…•ï¼ŒåŠ›é“å¤§å¾—å“äººï¼\nâ€œå¤Ÿäº†ï¼ç¬¬ " + State.load_count + " æ¬¡äº†ï¼\nä½ æŠŠæˆ‘ä»¬çš„ç”Ÿå‘½å½“æˆä»€ä¹ˆï¼Ÿè¿™å°±æ˜¯ä¸ªæ¸¸æˆå—ï¼Ÿï¼(Ghostå¥½æ„Ÿ -5)â€";
                mood = "alert";
            }
            break;
        case 'konig':
            msg = "KÃ¶nig æ‚ç€èƒ¸å£ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹æ™•ï¼šâ€œå””... åˆšæ‰å¤´å¥½æ™•ï¼Œæ„Ÿè§‰ä¸–ç•Œå¥½åƒ... é—ªçƒäº†ä¸€ä¸‹ï¼Ÿ\nåªè¦ä½ è¿˜åœ¨å°±å¥½ï¼Œ{PLAYER} ã€‚â€";
            break;
        case 'krueger':
            msg = "Krueger çœ¯èµ·çœ¼ç›ï¼Œå˜´è§’æŒ‚ç€ç©å‘³çš„ç¬‘ï¼šâ€œå•§ï¼Œä½ åˆšåˆšæ˜¯ä¸æ˜¯é€†è½¬äº†æ­»å±€ï¼Ÿ\nè¿™å°±æ˜¯ä½ çš„è¶…èƒ½åŠ›å—ï¼Ÿâ€";
            break;
        case 'keegan':
            msg = "Keegan æ­£åœ¨æ£€æŸ¥è£…å¤‡ï¼ŒåŠ¨ä½œçªç„¶åœæ»äº†ä¸€ç§’ã€‚\nâ€œ...æ—¶é—´çº¿é‡ç½®äº†ï¼Ÿæˆ‘ä¿ç•™äº†ä¸Šä¸€æ¡çº¿çš„æˆ˜æœ¯è®°å¿†å—ï¼Ÿâ€\nä»–æ·±æ·±åœ°æ³¨è§†ç€ä½ ï¼šâ€œæ— è®ºé‡æ¥å¤šå°‘æ¬¡ï¼Œæˆ‘éƒ½ä¼šæ‰¾åˆ°ä½ ã€‚â€";
            break;
    }

    setTimeout(() => {
        printMsg("ã€ç³»ç»Ÿã€‘æ£€æµ‹åˆ°æ—¶é—´çº¿å˜åŠ¨...", 'system');
        setTimeout(() => {
            const nameMap = { ghost: "Simon 'Ghost' Riley", konig: "KÃ¶nig", krueger: "Krueger", keegan: "Keegan" };
            printMsg(msg, mood, nameMap[speakerKey]);
        }, 800);
    }, 500);
}


function startGame() {
    // è·å–è¾“å…¥æ¡†çš„å†…å®¹
    let inputVal = $('input-player-name').value.trim();
    
    // --- ğŸ› ï¸ å¼€å‘è€…æµ‹è¯•åé—¨ ---
    // å£ä»¤æ˜¯ï¼šDEBUG (ä¸åŒºåˆ†å¤§å°å†™ï¼Œè¾“å…¥ debug ä¹Ÿå¯ä»¥)
    if (inputVal.toUpperCase() === "DEBUG") {
        // 1. ç»™æˆ‘åŠ é’± (äº”ç™¾ä¸‡ï¼Œå¤ŸæŠ½500æ¬¡åè¿äº†)
        State.money = 5000000; 
        
        // 2. ç»™æˆ‘åŠ èµ„æºå’Œç²¾åŠ›
        State.ap = 10; // çªç ´ä¸Šé™çš„ç²¾åŠ›
        State.medkit = 50;
        State.food = 50;
        State.ammo = 50;
        
        // 3. ç»™æˆ‘åŠ ä»£å¸ (æ–¹ä¾¿æµ‹è¯•å…‘æ¢åŠŸèƒ½)
        State.gacha_coins = 100;

       // 4. ã€æ–°å¢ã€‘å…¨å‘˜å¥½æ„Ÿåº¦æ‹‰é«˜ (è®¾ä¸º 500ï¼Œè¶³ä»¥è§¦å‘æ‰€æœ‰å‰§æƒ…)
        State.chars.ghost.aff = 1000;
        State.chars.konig.aff = 500;
        State.chars.krueger.aff = 500;
        State.chars.keegan.aff = 500;

        // 5. ã€æ–°å¢ã€‘å…¨é˜µè¥å£°æœ›æ‹‰æ»¡ (æ»¡è¶³å¥³ç‹ç»“å±€æ¡ä»¶ > 50)
        State.rep_141 = 100;
        State.rep_kortac = 100;
        State.rep_chimera = 100;
        State.rep_ghosts = 100;

        // 4. é»˜è®¤æµ‹è¯•å‘˜åå­—
        inputVal = "Dev_Admin"; 
        
        // å¼¹çª—æç¤º
alert("ğŸ”° å¼€å‘è€…æµ‹è¯•æ¨¡å¼å·²æ¿€æ´»ï¼\n\nğŸ’° èµ„é‡‘: $5,000,000\nâ¤ï¸ å¥½æ„Ÿ: 200 (å…¨æ»¡)\nğŸ¤ å£°æœ›: 100 (å…¨æ»¡)\n\nè¯·å¼€å§‹æµ‹è¯•å¥³ç‹è·¯çº¿ï¼");
    }
    // --- åé—¨ç»“æŸ ---

    // æ­£å¸¸æµç¨‹
    State.player = inputVal || "Operator";
    $('modal-overlay').style.display = 'none';
    
    updateUI();
    printMsg(`ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚æ¬¢è¿å›åˆ°æˆ˜åŒºï¼Œ${State.player}ã€‚`);
    
    // å¦‚æœæ˜¯å¼€å‘è€…ï¼Œé¢å¤–æ‰“å°ä¸€æ¡æç¤º
    if (State.money > 1000000) {
        printMsg("âš  è­¦å‘Šï¼šæ£€æµ‹åˆ°å¼‚å¸¸èµ„é‡‘æµå…¥ (å¼€å‘è€…æ¨¡å¼)", 'system');
    }
    


    showMainMenu();
}

function nextDay() {
    // ==========================================
    // ğŸŸ¢ 1. ç¡¬æ ¸ç”Ÿå­˜é€»è¾‘ (é¥¥é¥¿ & æˆ¿ç§Ÿ)
    // ==========================================
    if (State.food >= 1) {
        State.food--;
        log("æ¶ˆè€— 1 ä»½å†›ç²®ç»´æŒç”Ÿå‘½", 'info');
        State.ap = CONFIG.max_ap; // é»˜è®¤æ¢å¤æ»¡ä½“åŠ›
    } else {
        State.ap = 1; // æ²¡é¥­åƒï¼Œç¬¬äºŒå¤©åªæœ‰ 1 ç‚¹ä½“åŠ›
        printMsg("ã€è­¦å‘Šã€‘é£Ÿç‰©è€—å°½ï¼ä½ å¤„äºé¥¥é¥¿çŠ¶æ€ï¼Œä»Šæ—¥è¡ŒåŠ¨åŠ›å¤§å¹…å—é™ï¼", 'alert');
        log("é¥¥é¥¿çŠ¶æ€ (AP=1)", 'loss');
    }

    // ç ´äº§æ£€æµ‹
    if (State.money < 0) {
        alert("ã€GAME OVERã€‘\nèµ„é‡‘é“¾æ–­è£‚ï¼\næ²¡é’±æ”¯ä»˜ç»´æŠ¤è´¹ï¼Œåº—é“ºè¢«æŸ¥å°ï¼Œä½ æµè½è¡—å¤´...");
        location.reload(); 
        return;
    }

    // ==========================================
    // ğŸ¥ 2. åŒ»ç–—æ‰€ 2.0 (å¹³è¡¡ç‰ˆ - å·²å‰Šå¼±)
    // ==========================================
    if (State.lvl_med > 0) {
        let medReport = "";
        // --- A. æ”¶å…¥æ›²çº¿è°ƒæ•´ ---
        // ğŸ“‰ å‰Šå¼±ï¼šç³»æ•°ä» 40 é™ä¸º 25
        // LV1: ~$30 | LV5: ~$650 (åŸ ~$1050)
        const baseIncome = (State.lvl_med * State.lvl_med * 25); 
        const randomBonus = rng(0, 30);
        const totalMedIncome = baseIncome + randomBonus;
        
        State.money += totalMedIncome;
        medReport += `é—¨è¯Šæ”¶å…¥ +$${totalMedIncome} `;

        // --- B. AP æ¢å¤ Buff ---
        // ğŸ“‰ å‰Šå¼±ï¼šæ¦‚ç‡ç³»æ•°ä» 12% é™ä¸º 8% (LV5æ—¶ 40% æ¦‚ç‡)
        const apChance = State.lvl_med * 8;
        if (chance(apChance)) {
            // ğŸ“‰ å‰Šå¼±ï¼šä¸å†èƒ½æ— é™çªç ´ä¸Šé™ï¼Œæœ€å¤šåªèƒ½è¶… 1 ç‚¹
            if (State.ap < CONFIG.max_ap + 1) {
                State.ap++;
                medReport += "| âš¡ ç²¾åŠ›å……æ²› ";
            }
        }

        // --- C. é¢å¤–ç‰©èµ„ ---
        // LV4 ä»¥ä¸Šæ‰æœ‰å‡ ç‡è§¦å‘
        if (State.lvl_med >= 4 && chance(15)) {
            State.medkit++;
            medReport += "| ğŸ æ”¶åˆ°è°¢ç¤¼ (+1 Medkit)";
        }

        log(`[åŒ»ç–—æ‰€ LV.${State.lvl_med}] ${medReport}`, 'gain');
    }

// ==========================================
    // ğŸŒ™ 3. ã€æ–°å¢ã€‘æ˜¨å¤œçªå‘äº‹ä»¶ (Night Report - æ‰©å……ç‰ˆ)
    // ==========================================
    let nightHtml = "";
    // è·å–å½“å‰ä»“åº“ä¸Šé™ (å« Konig åŠ æˆ)
    const currentCap = CONFIG.capacity_tiers[State.lvl_store - 1] + (State.set_rewards.konig ? 0 : 0);

    // 60% æ¦‚ç‡è§¦å‘å¤œæ™šäº‹ä»¶ (æé«˜é¢‘ç‡ï¼Œè®©æ¯å¤©éƒ½æœ‰æ–°é²œæ„Ÿ)
    if (chance(60)) {
        const nightRoll = rng(1, 100);
        
        // --- ğŸ”´ å€’éœ‰äº‹ (Loss) ---
        if (nightRoll <= 5) { 
            // ğŸ­ é¼ æ‚£
            const loss = rng(2, 5);
            if (State.food >= loss) {
                State.food -= loss;
                nightHtml = `<div style="color:#ff4444;">ğŸ­ ã€æ˜¨å¤œæŠ¥å‘Šã€‘è¯¥æ­»ï¼å˜å¼‚è€é¼ å’¬ç ´äº†åŒ…è£…è¢‹ï¼ŒæŸå¤±äº† ${loss} ä»½é£Ÿç‰©ã€‚</div>`;
            } else {
                nightHtml = `<div style="color:#888;">ğŸ­ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨æ™šæœ‰è€é¼ åœ¨ç©ºè¡è¡çš„ç²®ä»“é‡Œå¼€æ´¾å¯¹ï¼Œå¹¸å¥½æ²¡ä¸œè¥¿å¯å·ã€‚</div>`;
            }
        } 
        else if (nightRoll <= 10) {
            // ğŸ’° å°å·å…‰é¡¾
            const loss = rng(50, 200);
            if (State.money >= loss) {
                State.money -= loss;
                nightHtml = `<div style="color:#ff4444;">ğŸ•µï¸ ã€æ˜¨å¤œæŠ¥å‘Šã€‘é­è´¼äº†ï¼æ”¶é“¶æœºè¢«æ’¬ï¼ŒæŸå¤±èµ„é‡‘ $${loss}ã€‚</div>`;
            } else {
                State.food = Math.min(State.food + 1, currentCap);
                nightHtml = `<div style="color:#00ffcc;">ğŸ•µï¸ ã€æ˜¨å¤œæŠ¥å‘Šã€‘å°å·æ’¬å¼€é—¨å‘ç°ä½ å®¶å¾’å››å£ï¼Œç•™ä¸‹äº†ä¸€å—åŒæƒ…çš„é¥¼å¹² (+1 Food)ã€‚</div>`;
            }
        }
        else if (nightRoll <= 15) {
             // ğŸ’§ æ½®æ¹¿/æ¼æ°´
             if (State.ammo > 5) {
                 const loss = rng(2, 6);
                 State.ammo = Math.max(0, State.ammo - loss);
                 nightHtml = `<div style="color:#ff4444;">ğŸ’§ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨å¤œæš´é›¨ï¼Œä»“åº“æ¼æ°´å¯¼è‡´ ${loss} ä»½å¼¹è¯å—æ½®æŠ¥åºŸã€‚</div>`;
             } else {
                 nightHtml = `<div style="color:#888;">ğŸ’§ ã€æ˜¨å¤œæŠ¥å‘Šã€‘å±‹é¡¶æ¼æ°´äº†ï¼Œæ»´äº†ä¸€æ™šä¸Šï¼Œå¹¸å¥½æ²¡æ·‹æ¹¿è´§ç‰©ã€‚</div>`;
             }
        }
        else if (nightRoll <= 20) {
            // âš¡ å‘ç”µæœºæ•…éšœ
            const repairCost = 80;
            if (State.money >= repairCost) {
                State.money -= repairCost;
                nightHtml = `<div style="color:#ff4444;">âš¡ ã€æ˜¨å¤œæŠ¥å‘Šã€‘å¤‡ç”¨å‘ç”µæœºæ•…éšœï¼Œè‡ªåŠ¨æ‰£é™¤ $${repairCost} è´­ä¹°é›¶ä»¶ç»´ä¿®ã€‚</div>`;
            } else {
                State.ap = Math.max(1, State.ap - 1);
                nightHtml = `<div style="color:#ff4444;">âš¡ ã€æ˜¨å¤œæŠ¥å‘Šã€‘å‘ç”µæœºåäº†æ²¡é’±ä¿®ï¼Œæ˜¨æ™šå†»äº†ä¸€å®¿ã€‚(ä»Šæ—¥ AP -1)</div>`;
            }
        }
        else if (nightRoll <= 25) {
            // ğŸ¤® é†‰æ±‰å‘•å
            State.ap = Math.max(1, State.ap - 1);
            nightHtml = `<div style="color:#ff4444;">ğŸ¤® ã€æ˜¨å¤œæŠ¥å‘Šã€‘æœ‰ä¸ªé†‰é¬¼ååœ¨äº†ä½ åº—é—¨å£ï¼Œä½ ä¸å¾—ä¸èŠ±æ—¶é—´æ¸…ç†ã€‚(ä»Šæ—¥ AP -1)</div>`;
        }
        else if (nightRoll <= 30) {
            // ğŸ¨ æ¶æ„æ¶‚é¸¦
            State.rating = Math.max(1.0, State.rating - 0.2);
            nightHtml = `<div style="color:#ff4444;">ğŸ¨ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æœ‰äººåœ¨ä½ çš„å·å¸˜é—¨ä¸Šå–·äº†ä¾®è¾±æ€§æ¶‚é¸¦ï¼Œå½±å“äº†å¸‚å®¹ã€‚(è¯„åˆ†å¾®é™)</div>`;
        }

        // --- ğŸŸ¢ å¥½äº‹/è¶£äº‹ (Gain/Flavor) ---
        else if (nightRoll <= 35) {
            // ğŸ“¦ èµ°ç§çŠ¯é—è½
            const gain = rng(5, 10);
            if (State.ammo + gain <= currentCap) {
                State.ammo += gain;
                nightHtml = `<div style="color:#00ffcc;">ğŸ“¦ ã€æ˜¨å¤œæŠ¥å‘Šã€‘èµ°ç§çŠ¯åœ¨å··æˆ˜ä¸­ä¸¢å¼ƒäº†ä¸€ä¸ªåŒ…è£¹ï¼Œä½ æ¡åˆ°äº† ${gain} ä»½å¼¹è¯ã€‚</div>`;
            } else {
                nightHtml = `<div style="color:#888;">ğŸ“¦ ã€æ˜¨å¤œæŠ¥å‘Šã€‘ä½ çœ‹åˆ°äº†åœ°ä¸Šçš„å¼¹è¯åŒ…ï¼Œä½†ä½ çš„ä»“åº“å¡ä¸ä¸‹äº†ã€‚</div>`;
            }
        }
        else if (nightRoll <= 40) {
            // ğŸš æ— äººæœºå è½
            const scrap = rng(100, 300);
            State.money += scrap;
            nightHtml = `<div style="color:#00ffcc;">ğŸš ã€æ˜¨å¤œæŠ¥å‘Šã€‘ä¸€æ¶å¾®å‹æ— äººæœºæ’ååœ¨ä½ çš„çª—æˆ·ä¸Šï¼Œå›æ”¶é›¶ä»¶è·åˆ© $${scrap}ã€‚</div>`;
        }
        else if (nightRoll <= 45) {
            // ğŸ¨ è‰ºæœ¯æ¶‚é¸¦
            State.rating = Math.min(5.0, State.rating + 0.2);
            nightHtml = `<div style="color:#00ffcc;">ğŸ¨ ã€æ˜¨å¤œæŠ¥å‘Šã€‘ä¸€ä½è¡—å¤´è‰ºæœ¯å®¶åœ¨ä½ å¢™ä¸Šç”»äº†ä¸€å¹…ç»å¦™çš„ç”»ä½œï¼Œå¼•æ¥è·¯äººå›´è§‚ã€‚(è¯„åˆ†æå‡)</div>`;
        }
        else if (nightRoll <= 50) {
            // ğŸ• æµæµªç‹—å®ˆæŠ¤ (å¦‚æœæœ‰é£Ÿç‰©)
            if (State.food >= 1) {
                State.food--;
                State.rating = Math.min(5.0, State.rating + 0.1);
                nightHtml = `<div style="color:#00ffcc;">ğŸ• ã€æ˜¨å¤œæŠ¥å‘Šã€‘ä½ å–‚äº†é—¨å£çš„æµæµªç‹—ï¼Œå®ƒå¸®ä½ çœ‹äº†ä¸€æ•´æ™šçš„é—¨ï¼Œèµ¶èµ°äº†å°æ··æ··ã€‚(Food -1, è¯„åˆ†æå‡)</div>`;
            } else {
                nightHtml = `<div style="color:#888;">ğŸ• ã€æ˜¨å¤œæŠ¥å‘Šã€‘æµæµªç‹—åœ¨é—¨å£å‘œå’½äº†ä¸€æ™šä¸Šï¼Œå¬å¾—è®©äººå¿ƒç¢ã€‚</div>`;
            }
        }
        else if (nightRoll <= 55) {
            // ğŸ’¤ æ·±åº¦ç¡çœ 
            State.ap = Math.min(CONFIG.max_ap + 1, State.ap + 1);
            nightHtml = `<div style="color:#00ffcc;">ğŸ’¤ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨æ™šå¼‚å¸¸å®‰é™ï¼Œä½ ç¡äº†ä¸€ä¸ªå¥½è§‰ï¼Œç²¾åŠ›å……æ²›ï¼(AP +1)</div>`;
        }
        else if (nightRoll <= 60) {
             // ğŸº é‚»å±…çš„é¦ˆèµ 
             if (State.food + 2 <= currentCap) {
                 State.food += 2;
                 nightHtml = `<div style="color:#00ffcc;">ğŸº ã€æ˜¨å¤œæŠ¥å‘Šã€‘éš”å£é…’å§è€æ¿é€æ¥äº†å‡ ç“¶æ²¡å–å®Œçš„å•¤é…’å’Œä¸‹é…’èœã€‚(Food +2)</div>`;
             } else {
                 nightHtml = `<div style="color:#888;">ğŸº ã€æ˜¨å¤œæŠ¥å‘Šã€‘éš”å£æƒ³é€ä½ ç‚¹åƒçš„ï¼Œä½†ä½ å®åœ¨åƒä¸ä¸‹äº†ã€‚</div>`;
             }
        }

        // --- ğŸ”µ ç‰¹æ®Š/æ¡ä»¶äº‹ä»¶ ---
        else if (nightRoll <= 75) {
            // ğŸ åŒ¿åé¦ˆèµ  (é«˜ä¿¡èª‰ç¦åˆ©)
            if (State.rating >= 4.5) {
                const gift = rng(100, 250);
                State.money += gift;
                nightHtml = `<div style="color:#00ffcc;">ğŸ ã€æ˜¨å¤œæŠ¥å‘Šã€‘é—¨å£æ”¾ç€ä¸€ä¸ªä¿¡å°ï¼Œå†™ç€â€œæ„Ÿè°¢ä½ ä¸Šæ¬¡çš„å¸®åŠ©â€ã€‚(èµ„é‡‘ +$${gift})</div>`;
            } else {
// ä¿¡èª‰ä½å°±æ˜¯å™©æ¢¦
                log(`[DEBUG] ç ¸é—¨å‰AP: ${State.ap}`, 'info'); // ğŸ‘ˆ æ–°å¢è¿™è¡Œ
                State.ap = Math.max(1, State.ap - 1); // 
                log(`[DEBUG] ç ¸é—¨åAP: ${State.ap}`, 'info'); // ğŸ‘ˆ æ–°å¢è¿™è¡Œ
                nightHtml = `<div style="color:#ff4444;">ğŸ’¢ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨æ™šæœ‰äººåœ¨é—¨å£ç ¸é—¨éª‚è¡—ï¼ŒæŠ—è®®ä½ çš„æœåŠ¡æ€åº¦ï¼Œä½ æ ¹æœ¬æ²¡ç¡å¥½ã€‚(ä»Šæ—¥ AP -1)</div>`; 
            }
        }
        else if (nightRoll <= 90) {
            // ğŸ›¡ï¸ é˜µè¥å·¡é€» (é«˜å£°æœ›ç¦åˆ©)
            let protected = false;
            if (State.rep_141 >= 50 || State.rep_kortac >= 50 || State.rep_chimera >= 50) {
                protected = true;
                State.rating = Math.min(5.0, State.rating + 0.1);
                nightHtml = `<div style="color:#00ffcc;">ğŸ›¡ï¸ ã€æ˜¨å¤œæŠ¥å‘Šã€‘é‰´äºä½ çš„é«˜å£°æœ›ï¼Œä¸€æ”¯ç²¾é”å°é˜Ÿæ˜¨æ™šåœ¨ä½ çš„åº—å¤–é©»å®ˆï¼Œè¿™è®©å‘¨å›´çš„å±…æ°‘æ„Ÿåˆ°éå¸¸å®‰å…¨ã€‚(è¯„åˆ†æå‡)</div>`;
            } 
            
            if (!protected) {
                nightHtml = `<div style="color:#888;">ğŸŒ™ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨æ™šè¿œå¤„ä¼ æ¥äº†æ¿€çƒˆçš„äº¤ç«å£°ï¼Œå¹¸å¥½æ²¡æœ‰æ³¢åŠåˆ°è¿™é‡Œã€‚</div>`;
            }
        }
// â¤ï¸ è§’è‰²ä¸“å±å®ˆæŠ¤/äº’åŠ¨ (Expanded)
        else {
            let loverEvent = false;
            // ğŸ‘‘ å¥³ç‹ä¸“å±ï¼šå…¨å‘˜å®ˆå¤œ
            if (State.flags.harem_queen && chance(50)) {
                 nightHtml = `<div style="color:#ffd700;">ğŸ‘‘ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨æ™š Ghostå’ŒKeeganåœ¨å±‹é¡¶æ¶å¥½ç‹™å‡»ï¼ŒKrueger åœ¨åå··å·¡é€»ï¼ŒKÃ¶nig å µåœ¨é—¨å£ï¼Œå“ªæ€•ä¸€åªè‹è‡éƒ½é£ä¸è¿›æ¥ã€‚(AP å›æ»¡)</div>`;
                 State.ap = CONFIG.max_ap;
                 loverEvent = true;
            } 
            // å•äººæ‹çˆ±äº‹ä»¶
            else {
                 const lovers = [];
                 if(State.chars.ghost.dating) lovers.push({name: "Ghost", text: "ä»–åœ¨å±‹é¡¶å®ˆäº†ä¸€å¤œï¼Œç•™ä¸‹äº†æ·¡æ·¡çš„çƒŸè‰å‘³ã€‚"});
                 if(State.chars.konig.dating) lovers.push({name: "KÃ¶nig", text: "ä»–å·å·å¸®ä½ ä¿®å¥½äº†åæ‰çš„é—¨è½´ï¼Œè¿˜ç•™äº†ä¸€æœµé‡èŠ±ã€‚"});
                 if(State.chars.krueger.dating) lovers.push({name: "Krueger", text: "ä½ åœ¨é—¨å£å‘ç°äº†ä¸€å…·è¢«å¤„ç†æ‰çš„æƒ³æ’¬é”çš„å°å·å°¸ä½“ã€‚"});
                 if(State.chars.keegan.dating) lovers.push({name: "Keegan", text: "ä½ çš„ç›‘æ§ç³»ç»Ÿè¢«å‡çº§äº†ï¼Œæ˜¨æ™šæ²¡æœ‰ä»»ä½•ç›²åŒºã€‚"});

                 if (lovers.length > 0) {
                     const guard = lovers[rng(0, lovers.length-1)];
                     nightHtml = `<div style="color:#b19cd9;">ğŸ’• ã€æ˜¨å¤œæŠ¥å‘Šã€‘${guard.text} (AP +1)</div>`;
                     State.ap = Math.min(CONFIG.max_ap, State.ap + 1);
                     loverEvent = true;
                 }
            }

            // å¦‚æœæ²¡æœ‰è§¦å‘æ‹çˆ±äº‹ä»¶ï¼Œå°±æ˜¯æ™®é€šå¹³å®‰å¤œ
            if (!loverEvent) {
                 nightHtml = `<div style="color:#666;">ğŸŒ™ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨å¤œå¹³å®‰æ— äº‹ï¼Œåªæœ‰é£å£°ä½œä¼´ã€‚</div>`;
            }
        }
    } else {
        // å¹³å®‰å¤œ
        nightHtml = `<div style="color:#666;">ğŸŒ™ ã€æ˜¨å¤œæŠ¥å‘Šã€‘æ˜¨å¤œå¹³å®‰æ— äº‹ã€‚</div>`;
    }

    // ==========================================
    // ğŸŸ¡ 4. æ—¥æœŸå˜æ›´ä¸æ–°é—»
    // ==========================================
    State.day++;
    State.weather = WeatherTypes[rng(0, WeatherTypes.length - 1)];
    
    printMsg(`> --- ç¬¬ ${State.day} å¤© ---`, 'system');
    
    // 1. å…ˆæ˜¾ç¤ºæ˜¨å¤œæŠ¥å‘Š
    $('game-screen').innerHTML += nightHtml;

    // 2. å†æ˜¾ç¤ºä»Šæ—¥æ–°é—»
    const news = DailyNews[rng(0, DailyNews.length - 1)];
    State.market_rate = news.effect;
    
    const newsHtml = `<div style="border-left:3px solid #b19cd9; background:rgba(177,156,217,0.1); padding:10px; margin-bottom:10px; margin-top:5px;">
        <strong style="color:#b19cd9;">ğŸ“¡ [NEWS]</strong> ${news.text}
    </div>`;
    $('game-screen').innerHTML += newsHtml;
    $('game-screen').scrollTop = $('game-screen').scrollHeight;

    // Ghost æ¬ æ¡é€»è¾‘
    if (State.flags.ghost_iou_active) {
        State.flags.ghost_iou_timer++;
        if (State.flags.ghost_iou_timer >= 3) {
            State.flags.ghost_iou_active = false;
            State.flags.ghost_iou_timer = 0;
            setTimeout(() => triggerEvent(Events.Special.ghost_repay), 500);
            return;
        }
    }

    updateUI();
    showMainMenu();
}


// --- èœå•ç³»ç»Ÿ ---

function showMainMenu() {
    // æ£€æŸ¥ä»“åº“ç­‰çº§æ˜¯å¦æº¢å‡º
    const maxLvlIndex = CONFIG.capacity_tiers.length - 1;
    const safeLvlIndex = Math.min(State.lvl_store - 1, maxLvlIndex);
    const cap = CONFIG.capacity_tiers[safeLvlIndex];

    // æ£€æŸ¥é˜µè¥è”ç»œèµ„æ ¼
    const canContact = State.rep_141 >= 30 || State.rep_kortac >= 30 || State.rep_chimera >= 30 || State.rep_ghosts >= 30;

    const buttons = [
        // --- 1. æ ¸å¿ƒç©æ³•åŒº ---
        {
            title: "å¼€é—¨è¥ä¸š (æ¶ˆè€— 1 AP)",
            desc: "ç­‰å¾…é¡¾å®¢ä¸Šé—¨ï¼Œå¯èƒ½è§¦å‘ä»»ä½•äº‹ä»¶",
            cost: "âš¡ -1",
            disabled: State.ap <= 0,
            action: () => {
                State.ap--;
                updateUI();
                generateRandomEvent();
            }
        },
        {
            title: "ä¸»åŠ¨æ¢ç´¢ (æ¶ˆè€— 1 AP)",
            desc: "å¤–å‡ºå¯»æ‰¾ç‰©èµ„æˆ–æƒ…æŠ¥",
            cost: "âš¡ -1",
            disabled: State.ap <= 0,
            action: () => {
                State.ap--;
                triggerExploration();
            }
        },
        
        // --- 2. ç»è¥ç®¡ç†åŒº ---
        {
            title: "é˜µè¥è”ç»œ / è¯·æ±‚æ”¯æ´",
            desc: canContact ? "åŠ¨ç”¨äººè„‰è·å–èµ„æº" : "éœ€è¦ä»»æ„é˜µè¥å¥½æ„Ÿåº¦ > 30 è§£é”",
            cost: "REP",
            disabled: !canContact, 
            action: showFactionMenu
        },
        {
            title: "é‡‡è´­ç‰©èµ„",
            desc: "æ‰“å¼€é»‘å¸‚è¿›è´§ç»ˆç«¯ (ä»…è€—é’±)",
            cost: "âš¡ 0",
            action: showShopMenu
        },
        {
            title: "è®¾æ–½ç®¡ç†",
            desc: "å‡çº§åŒ»ç–—åŒºä¸ä»“åº“",
            cost: "âš¡ 0",
            action: showUpgradeMenu
        },

        // --- 3. ä¼‘æ¯ä¸æŠ½å¥–åŒº ---
        {
           title: "ä¼‘æ¯ (ç»“æŸå½“å¤©)",
            desc: "å›å¤ç²¾åŠ›ï¼Œè¿›å…¥ä¸‹ä¸€å¤©",
            cost: "DAY +1",
            action: nextDay
        },
        {
            title: "ä»£å¸å•†åº— & å›¾é‰´",
            desc: "æŸ¥çœ‹å…¨ç‰©å“è¯¦æƒ… / æ¶ˆè€—ä»£å¸å…‘æ¢",
            cost: "SHOP",
            action: () => {
                $('gacha-overlay').style.display = 'flex';
                $('gacha-view-main').style.display = 'none';
                $('gacha-view-collection').style.display = 'block';
                $('gacha-money').innerText = State.money;
                $('gacha-coins').innerText = State.gacha_coins;
                if(typeof switchTab === 'function') switchTab(currentTab);
            }
        },
        {
           title: "é»‘å¸‚ç©ºæŠ• / æŠ½å¥–",
            desc: "æ¶ˆè€—èµ„é‡‘æŠ½å–ç¨€æœ‰ç‰©å“",
            cost: "GACHA",
            action: openGacha
        },

        // --- 4. ç³»ç»ŸåŠŸèƒ½åŒº ---
        {
            title: "ä¿å­˜è¿›åº¦ (Save)",
            desc: "å°†å½“å‰è¿›åº¦ä¿å­˜åœ¨æµè§ˆå™¨ç¼“å­˜ä¸­",
            cost: "SAVE",
            action: () => {
                localStorage.setItem('cod_shop_save', JSON.stringify(State));
                printMsg("âœ… æ¸¸æˆè¿›åº¦å·²ä¿å­˜ï¼", 'system');
            }
        },
        {
            title: "ç‰¹åˆ«é¸£è°¢ / åˆ¶ä½œåå•",
            desc: "æŸ¥çœ‹æ”¯æŒè€…åå• â¤ï¸",
            cost: "CREDITS",
            action: () => {
                const el = document.getElementById('credits-overlay');
                if(el) el.style.display='flex';
            }
        },
        
        // ğŸŸ¢ å¯¼å‡ºå­˜æ¡£ (å«é˜²å€’å–è­¦å‘Š)
        {
            title: "ğŸ“¤ å¯¼å‡ºå­˜æ¡£ (å¤åˆ¶åˆ°å‰ªè´´æ¿)",
            desc: "ç”Ÿæˆå­˜æ¡£ä»£ç ï¼Œè¯·å¤åˆ¶å¹¶ä¿å­˜åœ¨å¤‡å¿˜å½•ä¸­",
            cost: "EXPORT",
            action: () => {
                try {
                    State.saveTime = new Date().toLocaleString();
                    const saveStr = btoa(unescape(encodeURIComponent(JSON.stringify(State))));
                    const warnText = "âœ… å­˜æ¡£ç å·²å¤åˆ¶ï¼\n\nã€âš ï¸ è­¦å‘Šã€‘\næ­¤å­˜æ¡£ä»…ä¾›æ‚¨ä¸ªäººè¿ç§»è¿›åº¦ä½¿ç”¨ã€‚\næœ¬æ¸¸æˆå®Œå…¨å…è´¹ï¼Œä¸¥ç¦å°†å­˜æ¡£ç ç”¨äºå‡ºå”®æˆ–ç›ˆåˆ©ï¼\nè¯·ç²˜è´´åˆ°æ‰‹æœºå¤‡å¿˜å½•å¦¥å–„ä¿å­˜ã€‚";
                    
                    navigator.clipboard.writeText(saveStr).then(() => {
                        alert(warnText);
                    }).catch(() => {
                        prompt("è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å…¨é€‰å¤åˆ¶ä¸‹æ–¹çš„å­˜æ¡£ç ï¼š\n(ä¸¥ç¦å€’å–æ­¤ä»£ç )", saveStr);
                    });
                } catch (e) {
                    alert("å¯¼å‡ºå¤±è´¥: " + e);
                }
            }
        },

        // ğŸŸ¢ å¯¼å…¥å­˜æ¡£
        {
            title: "ğŸ“¥ å¯¼å…¥å­˜æ¡£ (ç²˜è´´ä»£ç )",
            desc: "ç²˜è´´ä½ ä¹‹å‰ä¿å­˜çš„å­˜æ¡£ç ",
            cost: "IMPORT",
            action: () => {
                const inputStr = prompt("è¯·ç²˜è´´å­˜æ¡£ç ï¼š\n(è­¦å‘Šï¼šä¸è¦è´­ä¹°ä»»ä½•äººçš„å­˜æ¡£ï¼Œè¾“å…¥ DEBUG å³å¯ä½“éªŒæµ‹è¯•æ¨¡å¼)");
                if (inputStr) {
                    try {
                        const jsonStr = decodeURIComponent(escape(atob(inputStr)));
                        const parsed = JSON.parse(jsonStr);
                        
                        if (!parsed.player || parsed.money === undefined) {
                            throw new Error("æ— æ•ˆçš„å­˜æ¡£æ ¼å¼");
                        }

                        Object.assign(State, parsed);
                        
                        // ğŸŸ¢ [Meta] è§¦å‘è¯»æ¡£ååº”
                        triggerMetaLoadReaction();

                        // ğŸŸ¢ æ•°æ®è¡¥å…¨ (é˜²æ­¢æ—§æ¡£å´©æºƒ)
                        if (!State.chars.keegan) { 
                            State.chars.keegan = { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99, is_ex: false }; 
                        }
                        if (State.rep_ghosts === undefined) State.rep_ghosts = 10;
                        if (State.set_rewards.keegan === undefined) State.set_rewards.keegan = false;
                        ['ghost', 'konig', 'krueger', 'keegan'].forEach(c => {
                            if(State.chars[c] && State.chars[c].is_ex === undefined) State.chars[c].is_ex = false;
                        });

                        printMsg("âœ… å­˜æ¡£å¯¼å…¥æˆåŠŸï¼æ¬¢è¿å›æ¥ï¼Œ" + State.player, 'gain');
                        updateUI();
                        showMainMenu();
                    } catch (e) {
                        alert("âŒ å­˜æ¡£ç æ ¼å¼é”™è¯¯ï¼\nè¯·ç¡®è®¤ä½ å¤åˆ¶äº†å®Œæ•´çš„ä»£ç ã€‚");
                    }
                }
            }
        },

        // [è¯»å–] æ”¾åœ¨æœ€æœ€æœ€å
        {
            title: "è¯»å–è¿›åº¦ (Load)",
            desc: "è¯»å–ä¸Šæ¬¡ä¿å­˜çš„è¿›åº¦",
            cost: "LOAD",
            disabled: !localStorage.getItem('cod_shop_save'),
            action: () => {
                if(confirm("âš ï¸ ç¡®å®šè¦è¯»å–æ—§å­˜æ¡£å—ï¼Ÿ\nå½“å‰æœªä¿å­˜çš„è¿›åº¦å°†ä¼šä¸¢å¤±ï¼")) {
                    const savedData = localStorage.getItem('cod_shop_save');
                    if (savedData) {
                        const parsed = JSON.parse(savedData);
                        Object.assign(State, parsed);

                        // ğŸŸ¢ [Meta] è§¦å‘è¯»æ¡£ååº”
                        triggerMetaLoadReaction(); 

                        // ğŸŸ¢ æ•°æ®è¡¥å…¨
                        if (!State.chars.keegan) { 
                            State.chars.keegan = { aff: 20, dating: false, gift: false, confessed: false, reject_count: 0, last_reject_day: -99, last_intimate_day: -99, is_ex: false }; 
                        }
                        if (State.rep_ghosts === undefined) State.rep_ghosts = 10;
                        if (State.set_rewards.keegan === undefined) State.set_rewards.keegan = false;
                        ['ghost', 'konig', 'krueger', 'keegan'].forEach(c => {
                            if(State.chars[c] && State.chars[c].is_ex === undefined) State.chars[c].is_ex = false;
                        });

                        printMsg("âœ… è¯»å–æˆåŠŸï¼æ¬¢è¿å›æ¥ã€‚", 'system');
                        updateUI();
                        showMainMenu();
                    }
                }
            }
        }
    ];
    renderButtons(buttons);
}



function showShopMenu() {
    // ğŸŸ¢ ä¿®æ”¹ï¼šKÃ¶nig Buff æ”¹ä¸º +1000ï¼Œä¸”é€»è¾‘æ˜¯â€œåŸºç¡€å®¹é‡ + å¥–åŠ±â€
    // è¿™æ ·å³ä½¿ä½ å‡åˆ°æ»¡çº§ (2000)ï¼ŒåŠ ä¸Šå¥–åŠ±å°±æ˜¯ 3000ï¼Œä¸ä¼šå†²çª
    const konigBonus = State.set_rewards.konig ? 0 : 0;
    const cap = CONFIG.capacity_tiers[State.lvl_store - 1] + konigBonus;
    // ä»·æ ¼å— å¸‚åœºæ±‡ç‡(market_rate) å’Œ å¤©æ°”(weather.modifier) åŒé‡å½±å“
    // ğŸŸ¢ ä¿®å¤ï¼šåŠ å…¥ Krueger 7æŠ˜è¿›è´§ Buff
    const getPrice = (type) => {
        // å®šä¹‰å˜é‡
        const halfPriceModifier = State.set_rewards.krueger ? 0.7 : 1; 
        
        return Math.floor(
            CONFIG.buy_price[type] * State.market_rate[type] * State.weather.modifier *
            halfPriceModifier // <--- âœ… ä¿æŒä¸€è‡´
        );
    };

    // ã€ä¿®æ”¹ã€‘æ‰¹é‡è´­ä¹°å‡½æ•° (æ”¯æŒä¼ å…¥æ•°é‡ amount)
    const buyBatch = (type, amount) => {
        const unitPrice = getPrice(type);
        const totalCost = unitPrice * amount;

        // æ£€æŸ¥ä»“åº“å®¹é‡
        if (State[type] + amount > cap) {
            printMsg(`ä»“åº“ç©ºé—´ä¸è¶³ï¼æ— æ³•å®¹çº³ ${amount} ä¸ªå•ä½ (å‰©ä½™ç©ºé—´: ${cap - State[type]})ã€‚`, 'alert');
            return;
        }

        // æ£€æŸ¥èµ„é‡‘
        if(State.money >= totalCost) {
            State.money -= totalCost;
            State[type] += amount;
            log(`é‡‡è´­ ${type} x${amount} (-$${totalCost})`, 'loss');
            updateUI();
            showShopMenu(); // åˆ·æ–°èœå•ä»¥æ›´æ–°åº“å­˜æ˜¾ç¤º
        } else {
            printMsg(`èµ„é‡‘ä¸è¶³ï¼éœ€è¦ $${totalCost}ã€‚`, 'alert');
        }
    };

    // åŠ¨æ€ç”ŸæˆæŒ‰é’®æ ‡é¢˜ (helper function)
    const btnTitle = (name, type, count) => {
        const p = getPrice(type);
        const rate = State.market_rate[type];
        let arrow = "";
        if(rate > 1.0) arrow = " <span style='color:#ff3333;'>â†‘æ¶¨</span>";
        if(rate < 1.0) arrow = " <span style='color:#00ffcc;'>â†“è·Œ</span>";
        return `è´­ä¹° ${count}ä¸ª ${name} (æ€»ä»· $${p * count}${arrow})`;
    };

    const buttons = [
        // --- åŒ»ç–—åŒ… ---
        {
            title: btnTitle("åŒ»ç–—åŒ…", "medkit", 5),
            desc: `å½“å‰: ${State.medkit}/${cap} | å•ä»·: $${getPrice('medkit')}`,
            action: () => buyBatch('medkit', 5)
        },
        {
            title: btnTitle("åŒ»ç–—åŒ…", "medkit", 50),
            desc: "ã€å¤§é¢é‡‡è´­ã€‘å¿«é€Ÿè¡¥è´§",
            // å¦‚æœé’±ä¸å¤Ÿæˆ–è€…ç©ºé—´ä¸å¤Ÿï¼ŒæŒ‰é’®è‡ªåŠ¨å˜ç°
            disabled: State.money < getPrice('medkit')*50 || State.medkit + 50 > cap,
            action: () => buyBatch('medkit', 50)
        },

        // --- å†›ç²® ---
        {
            title: btnTitle("å†›ç²®", "food", 5),
            desc: `å½“å‰: ${State.food}/${cap} | å•ä»·: $${getPrice('food')}`,
            action: () => buyBatch('food', 5)
        },
        {
            title: btnTitle("å†›ç²®", "food", 50),
            desc: "ã€å¤§é¢é‡‡è´­ã€‘å¿«é€Ÿè¡¥è´§",
            disabled: State.money < getPrice('food')*50 || State.food + 50 > cap,
            action: () => buyBatch('food', 50)
        },

        // --- å¼¹è¯ ---
        {
            title: btnTitle("å¼¹è¯", "ammo", 5),
            desc: `å½“å‰: ${State.ammo}/${cap} | å•ä»·: $${getPrice('ammo')}`,
            action: () => buyBatch('ammo', 5)
        },
        {
            title: btnTitle("å¼¹è¯", "ammo", 50),
            desc: "ã€å¤§é¢é‡‡è´­ã€‘å¿«é€Ÿè¡¥è´§",
            disabled: State.money < getPrice('ammo')*50 || State.ammo + 50 > cap,
            action: () => buyBatch('ammo', 50)
        },

        {
            title: "è¿”å›ä¸»èœå•",
            desc: "",
            action: showMainMenu
        }
    ];
    renderButtons(buttons);
}

function showUpgradeMenu() {
    // è´¹ç”¨å…¬å¼ï¼šç­‰çº§ * å€ç‡
    const costStore = State.lvl_store * 600;
    const costMed = State.lvl_med * 800;
    
    // ã€æ ¸å¿ƒé€»è¾‘ã€‘è‡ªåŠ¨æ£€æµ‹ CONFIG é‡Œå†™äº†å‡ ä¸ªæ•°å­—ï¼Œå°±æ˜¯å‡ çº§ä¸Šé™
    // è¿™æ ·ä½ ä»¥åæ”¹ CONFIG ä¸ç”¨å†æ”¹è¿™é‡Œäº†
    const maxStoreLvl = CONFIG.capacity_tiers.length;
    const maxMedLvl = 5; // åŒ»ç–—åŒºæš‚æ—¶è®¾å®š 5 çº§ä¸Šé™

    const buttons = [
        {
            // åŠ¨æ€æ˜¾ç¤ºæ ‡é¢˜ï¼šæ²¡æ»¡çº§æ˜¾ç¤º"å‡çº§"ï¼Œæ»¡çº§äº†æ˜¾ç¤º"MAX"
            title: State.lvl_store >= maxStoreLvl ? 
                "ä»“åº“å·²æ»¡çº§ (MAX)" : `å‡çº§ä»“åº“ (Lv.${State.lvl_store + 1})`,
                
            desc: State.lvl_store >= maxStoreLvl ? 
                `å½“å‰å®¹é‡: ${CONFIG.capacity_tiers[State.lvl_store-1]}` : `è´¹ç”¨: $${costStore} | å®¹é‡æå‡`,
            
            // ã€å…³é”®ä¿®å¤ã€‘å¦‚æœ é’±ä¸å¤Ÿ æˆ–è€… å·²æ»¡çº§ï¼ŒæŒ‰é’®å˜ç°ç¦æ­¢ç‚¹å‡»
            disabled: State.money < costStore || State.lvl_store >= maxStoreLvl,
            
            action: () => {
                State.money -= costStore;
                State.lvl_store++;
                log("ä»“åº“å‡çº§æˆåŠŸ", 'gain');
                updateUI();
                showUpgradeMenu(); // åˆ·æ–°å½“å‰èœå•çŠ¶æ€
            }
        },
             {
            title: State.lvl_med >= maxMedLvl ?
                "åŒ»ç–—åŒºå·²æ»¡çº§ (MAX)" : `å‡çº§åŒ»ç–—åŒº (Lv.${State.lvl_med + 1})`,
                
            // æ›´æ–°åçš„æè¿°
            desc: State.lvl_med >= maxMedLvl ?
                "æ—¥æ”¶ $600+ | 40% æ¦‚ç‡æ¢å¤ç²¾åŠ›" : 
                `è´¹ç”¨: $${costMed} | é¢„è®¡æ—¥æ”¶: $${((State.lvl_med+1)**2 * 25)}`,
            
            disabled: State.money < costMed || State.lvl_med >= maxMedLvl,            
            action: () => {
                State.money -= costMed;
                State.lvl_med++;
                log("åŒ»ç–—åŒºå‡çº§æˆåŠŸ", 'gain');
                updateUI();
                showUpgradeMenu();
            }
        },
        {
            title: "è¿”å›",
            action: showMainMenu
        }
    ];
    renderButtons(buttons);
}

function renderButtons(btnList) {
    const area = $('controls-area');
    area.innerHTML = '';
    btnList.forEach(btn => {
        const b = document.createElement('button');
        b.innerHTML = `<div class="btn-title">${btn.title}</div><div class="btn-desc">${btn.desc}</div>`;
        if (btn.cost) b.innerHTML += `<div class="btn-cost">${btn.cost}</div>`;
        b.disabled = btn.disabled || false;
        b.onclick = btn.action;
        area.appendChild(b);
    });
}

// --- æ–°å¢ï¼šé˜µè¥è”ç»œèœå• ---
function showFactionMenu() {
    printMsg("ä½ æ‰“å¼€äº†åŠ å¯†é€šè®¯ç»ˆç«¯ï¼Œæ­£åœ¨å°è¯•è”ç»œå„é˜µè¥è”ç»œå®˜...", 'system');
    
    const buttons = [
        // TF141: æ¶ˆè€—å£°æœ›æ¢ç‰©èµ„
        {
            title: "å‘¼å« TF141 ç©ºæŠ• (-30 Rep)",
            desc: "è·å¾—éšæœºå¼¹è¯å’ŒåŒ»ç–—åŒ… (æ¶ˆè€—ä¸Šè°ƒ)",
            cost: "141 REP",
            disabled: State.rep_141 < 30, // ğŸ”´ é—¨æ§›æé«˜
            action: () => {
                State.rep_141 -= 30;
                // ğŸŸ¢ åŠ ä¸Šé˜²çˆ†ä»“é€»è¾‘
                const cap = CONFIG.capacity_tiers[State.lvl_store - 1] + (State.set_rewards.konig ? 0 : 0);
                
                const ammoGain = Math.min(rng(5, 10), Math.max(0, cap - State.ammo));
                const medGain = Math.min(rng(1, 3), Math.max(0, cap - State.medkit));
                
                State.ammo += ammoGain;
                State.medkit += medGain;
                
                log(`TF141 ç©ºæŠ•: +${ammoGain} Ammo, +${medGain} Medkit`, 'gain');
                printMsg("Ghost: â€œæ”¶åˆ°è¯·æ±‚ã€‚è¡¥ç»™ç®±å·²æŠ•æ”¾åˆ°æŒ‡å®šåæ ‡ã€‚çœç€ç‚¹ç”¨ã€‚â€", 'dialogue', 'Ghost');
                updateUI();
                showFactionMenu();
            }
        },
        
        // KorTac: æ¶ˆè€—å£°æœ›é«˜ä»·å–è´§
        {
            title: "KorTac é»‘å¸‚èµ°ç§ (-20 Rep)",
            desc: "ä»¥ 2.0 å€ä»·æ ¼æ”¶è´­ 5 ä»½é£Ÿç‰©",
            cost: "KORTAC REP",
            disabled: State.rep_kortac < 20 || State.food < 5,
            action: () => {
                State.rep_kortac -= 20;
                State.food -= 5;
                // ğŸ“‰ å‰Šå¼±ï¼šå€ç‡ä» 3.0 é™ä¸º 2.0
                const profit = Math.floor(CONFIG.sell_price.food * 5 * 2.0);
                State.money += profit;
                
                log(`èµ°ç§è·åˆ© $${profit}`, 'gain');
                printMsg("KÃ¶nig: â€œè´§æ”¶åˆ°äº†ã€‚è¿™æ˜¯ä½ çš„æŠ¥é…¬ï¼Œä¸ç”¨æ‰¾é›¶äº†ã€‚â€", 'dialogue', 'KÃ¶nig');
                updateUI();
                showFactionMenu();
            }
        },
        
        // Chimera: æ¶ˆè€—å£°æœ›æ¢ AP
        {
            title: "Chimera å…´å¥‹å‰‚ (-40 Rep)",
            desc: "æ¢å¤ 2 ç‚¹è¡ŒåŠ¨åŠ› (æ¶ˆè€—å¤§å¹…ä¸Šè°ƒ)",
            cost: "CHIMERA REP",
            disabled: State.rep_chimera < 40, // ğŸ”´ é—¨æ§›å¤§å¹…æé«˜
            action: () => {
                State.rep_chimera -= 40;
                State.ap = Math.min(CONFIG.max_ap + 2, State.ap + 2); // å…è®¸ç¨å¾®çªç ´ä¸Šé™
                
                log("ä½¿ç”¨äº† Chimera å…´å¥‹å‰‚ (+2 AP)", 'gain');
                printMsg("Krueger: â€œä½ ä¼šæ„Ÿè§‰... å……æ»¡åŠ›é‡ã€‚å‰¯ä½œç”¨ï¼Ÿè°åœ¨ä¹å‘¢ã€‚â€", 'dialogue', 'Krueger');
                updateUI();
                showFactionMenu();
            }
        },

// ğŸŸ¢ [æ–°å¢] Ghosts: æš—ç½‘èµé‡‘ (ç›´æ¥æé’±)
        {
            title: "Ghosts åŠ å¯†æ±‡æ¬¾ (-30 Rep)",
            desc: "é»‘å®¢æˆªè·çš„èµ„é‡‘ï¼Œç›´æ¥æ‰“å…¥è´¦æˆ·",
            cost: "GHOSTS REP",
            disabled: State.rep_ghosts < 20,
            action: () => {
                State.rep_ghosts -= 20;
                // æ”¶ç›Šæ³¢åŠ¨ï¼š$600 - $1000
                const bounty = rng(600, 1000);
                State.money += bounty;
                
                log(`æ”¶åˆ° Ghosts æ±‡æ¬¾ +$${bounty}`, 'gain');
                printMsg("Keegan: â€œæˆ‘ä»¬æ‹¦æˆªäº†ä¸€ç¬” Federation çš„éæ³•è½¬è´¦ï¼Œè¿™æ˜¯ä½ çš„åˆ†çº¢ï¼ŒæŸ¥ä¸åˆ°æ¥æºçš„ï¼Œæ”¾å¿ƒèŠ±ã€‚â€", 'dialogue', 'Keegan');
                updateUI();
                showFactionMenu();
            }
        },

// ç‰¹æ®Šï¼šèŠ±è´¹é‡‘é’±ä¹°å£°æœ› (è´¿èµ‚)
        {
            title: "å…¨é¢æ‰“ç‚¹å…³ç³» (-$500)",
            desc: "æ‰€æœ‰é˜µè¥å¥½æ„Ÿ +5",
            cost: "$500",
            disabled: State.money < 500,
            action: () => {
                State.money -= 500;
                State.rep_141 += 5;
                State.rep_kortac += 5;
                State.rep_chimera += 5;
                State.rep_ghosts += 5; // ğŸŸ¢ ã€æ–°å¢ã€‘è¡¥ä¸Š Ghosts
                
                log("èŠ±è´¹ $500 æ‰“é€šäº†å…³ç³»", 'loss');
                printMsg("æœ‰é’±èƒ½ä½¿é¬¼æ¨ç£¨ï¼Œå„æ–¹åŠ¿åŠ›ï¼ˆåŒ…æ‹¬ Ghostsï¼‰å¯¹ä½ çš„æ€åº¦ç¼“å’Œäº†ä¸€äº›ã€‚", 'system');
                updateUI();
                showFactionMenu();
            }
        },

      // ğŸŸ¢ ä¿®å¤ï¼šè´­ä¹°å¥½è¯„ (çœŸå®æ³¨å…¥è¯„è®º)
        {
            title: "é›‡ç”¨ç½‘ç»œæ°´å†› (-$1000)",
            desc: "åˆ· 5 æ¡äº”æ˜Ÿå¥½è¯„ï¼Œæš´åŠ›æ‹‰åˆ†",
            cost: "$1000",
            disabled: State.money < 1000,
            action: () => {
                State.money -= 1000;
                
                // 1. æš´åŠ›åŠ åˆ† (ç›´æ¥ +0.5ï¼Œä¸å—æƒé‡é™åˆ¶ï¼Œä½“ç°æ°ªé‡‘çš„åŠ›é‡)
                State.rating = Math.min(5.0, State.rating + 0.5);
                
                // 2. ğŸŸ¢ æ ¸å¿ƒä¿®å¤ï¼šå¾ªç¯æ³¨å…¥ 5 æ¡è™šå‡çš„äº”æ˜Ÿå¥½è¯„
                // è¿™æ ·ç‚¹å¼€è¯¦æƒ…é¡µï¼Œå°±èƒ½çœ‹åˆ°åˆšåˆšåˆ·çš„è¯„è®ºäº†
                const fakeUsers = ["User_8848", "K_Stan", "Love_Ghost", "Anonymous", "Bot_007"];
                const fakeTexts = [
                    "è¿™å®¶åº—å¤ªæ£’äº†ï¼(æ­¤æ¡äº”æ¯›)", 
                    "æ‹¬å·é‡Œçš„åˆ æ‰ï¼Œæ‹¬å·é‡Œçš„åˆ æ‰ã€‚", 
                    "æ‡‚çš„éƒ½æ‡‚ï¼Œä¸æ‡‚çš„ä¹Ÿä¸å¤šè§£é‡Šï¼Œäº”æ˜Ÿï¼", 
                    "å¥½è¯„ï¼å¥½è¯„ï¼å¥½è¯„ï¼", 
                    "ç‰©æµå¾ˆå¿«ï¼Œå­©å­å¾ˆçˆ±åƒã€‚"
                ];
                
                for(let i=0; i<5; i++) {
                    State.reviews.unshift({
                        author: fakeUsers[i],
                        score: 5.0,
                        text: fakeTexts[i],
                        likes: rng(100, 999), // å‡èµå½“ç„¶è¦å¤š
                        date: `Day ${State.day}`
                    });
                }
                // ä¿æŒåˆ—è¡¨é•¿åº¦
                if (State.reviews.length > 20) State.reviews.length = 20;

                // æ›´æ–°æœ€æ–°è¯„ä»·æ˜¾ç¤ºï¼ˆæ˜¾ç¤ºæœ€åä¸€æ¡åˆ·çš„ï¼‰
                State.last_review = fakeTexts[0];

                log("æ°´å†›æ´—åœ°æˆåŠŸï¼Œè¯„åˆ†æš´æ¶¨", 'gain');
                printMsg("ã€ç³»ç»Ÿã€‘å¤§é‡æ°´å†›æ¶Œå…¥è¯„è®ºåŒºï¼Œä½ çš„åº—é“ºç¬é—´è¢«äº”æ˜Ÿå¥½è¯„æ·¹æ²¡ã€‚", 'gain');
                
                // é£é™©é€»è¾‘ (ä¿æŒä¸å˜)
                if (Math.random() * 100 < 20) {
                    setTimeout(() => {
                        printMsg("âš  è­¦å‘Šï¼šå¹³å°æ£€æµ‹åˆ°å¼‚å¸¸æµé‡ï¼Œæ‰£é™¤éƒ¨åˆ†ä¿¡èª‰åˆ†ï¼", 'alert');
                        State.rating = Math.max(1.0, State.rating - 0.5);
                        updateUI();
                    }, 1500);
                }

                updateUI();
                showFactionMenu();
            }
        },

       // ã€ä¿®æ”¹ã€‘å¼ å§å½©è›‹æŒ‰é’® (é™åˆ¶ç‚¹å‡»æ¬¡æ•°)
        {
              title: State.flags.confessed_zhang ? 
                "è”ç»œï¼šAAAé£å²›è£…ä¿®å¼ å§ (å·²æ„Ÿè°¢)" : "è”ç»œï¼šAAAé£å²›è£…ä¿®å¼ å§ (å¼€å‘è€…)",
            desc: State.flags.confessed_zhang ? 
                "å·²æ”¶åˆ°ç¥ç¦ï¼Œç³»ç»Ÿé”å®šè¿æ¥ã€‚" : "å‘é€æ„Ÿè°¢ä¿¡ä¸è¡¨ç™½ (é™ä¸€æ¬¡)",
            cost: State.flags.confessed_zhang ? 
                "LOCKED" : "â™¥ MAX",
            disabled: State.flags.confessed_zhang,
            action: () => {
                printMsg("æ­£åœ¨å»ºç«‹è·¨æ¬¡å…ƒè¿æ¥... ä¿¡å·æ¥é€šï¼", 'system');
                setTimeout(() => {
                    // ã€æ ¸å¿ƒã€‘è®¾ç½® flagï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
                    State.flags.confessed_zhang = true; 
                    
                    printMsg("ã€AAAé£å²›è£…ä¿®å¼ å§ã€‘ï¼šâ€œå“å‘€ï¼æ”¶åˆ°ä½ çš„è¡¨ç™½å•¦ï¼ğŸ’–\næ„Ÿè°¢ä½ çš„æ¸¸ç©ï¼çœ‹åˆ°ä½ ç»è¥å¾—è¿™ä¹ˆå¥½ï¼ˆæˆ–è€…æå‡ºä¸€å †ä¿®ç½—åœºï¼‰ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒï¼\nè®°å¾—æŒ‰æ—¶åƒé¥­ï¼Œä¸è¦å¤ªç´¯å“¦ï¼ç»™ä½ åŠ ä¸ª Buffï¼â€", 'dialogue', '_Zhang');
                    
                    // ğŸ’° ä¿®æ”¹ 2ï¼šå¢åŠ  8888 å—é’±
                    State.money += 8888; 
                    State.ap = Math.min(CONFIG.max_ap, State.ap + 1);
                    State.rating = 5.0; 
                    
                    log("æ”¶åˆ°å¼ å§çš„çº¢åŒ…ä¸ç¥ç¦ (èµ„é‡‘+$8888, AP+1, è¯„åˆ†è¡¥æ»¡)", 'gain');                    
                    updateUI();
                    showFactionMenu(); // åˆ·æ–°èœå•ï¼ŒæŒ‰é’®å°†æ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€
                }, 1000);
            }
        },

        {
            title: "æ–­å¼€è¿æ¥ (è¿”å›)",
            action: showMainMenu
        }
    ];

    renderButtons(buttons);
}

// --- äº‹ä»¶ç³»ç»Ÿ (Event Engine) ---

// --- è¯·æ›¿æ¢åŸæœ‰çš„ generateRandomEvent å‡½æ•° ---
function generateRandomEvent() {
    // ğŸ’€ å®šä¹‰è´Ÿé¢äº‹ä»¶åˆ—è¡¨ (Ghost ä¼šæ‹¦æˆªè¿™äº›)
    const badEvents = [
        'tax_audit', 'protection_racket', 'cartel_extortion', 'fake_goods_rumor', 
        'rival_threat', 'refund_scam', 'humidity_disaster', 'counterfeit_currency', 
        'review_blackmail', 'fire_sale', 'shadow_blockade'
    ];

    // 1. ä¼˜å…ˆçº§æ£€æµ‹ï¼šç‰¹æ®Šæ¡ä»¶äº‹ä»¶ (å‰§æƒ…/å¤ä»‡)
    if (State.flags.scavenger_scammed && chance(20)) {
        triggerEvent(Events.Special.scavenger_revenge);
        State.flags.scavenger_scammed = false;
        return;
    }

    // 1.5 æ•‘èµæœºåˆ¶
    if (State.flags.cheating_exposed && chance(15)) {
        triggerEvent(Events.Random.mystery_merchant);
        return;
    }

    // 2. ä¼˜å…ˆçº§æ£€æµ‹ï¼šæƒ…æ„Ÿ/ä¿®ç½—åœº
    const priorityEvent = checkPriorityEvents();
    if (priorityEvent) {
        triggerEvent(priorityEvent);
        return;
    }

    // 3. éšæœºæ± é€»è¾‘
    let key;
    const roll = Math.random();
    let characterEventTriggered = false;

// ğŸŸ¢ å°è¯•è§¦å‘è§’è‰²äº‹ä»¶ (35% æ¦‚ç‡)
    if (roll < 0.35) {
        const chars = ['ghost', 'konig', 'krueger', 'keegan'];
        const charKey = chars[rng(0, 3)];
        
        // âš ï¸ æ ¸å¿ƒï¼šå¦‚æœè§’è‰²æ²¡äº‹ä»¶è§¦å‘ (è¿”å› false)ï¼Œä»£ç å¿…é¡»ç»§ç»­å¾€ä¸‹èµ°ï¼
        if (triggerCharacterEvent(charKey)) {
            return;  // åªæœ‰æˆåŠŸè§¦å‘äº†æ‰é€€å‡ºï¼Œå¦åˆ™ç»§ç»­å‘ä¸‹æ‰§è¡Œæ™®é€šäº‹ä»¶
        }
        // å¦‚æœ triggerCharacterEvent è¿”å› falseï¼Œç¨‹åºä¼šèµ°åˆ°è¿™é‡Œï¼Œ
        // ç„¶åç»§ç»­æ‰§è¡Œä¸‹é¢çš„â€œæ™®é€šäº‹ä»¶â€é€»è¾‘ï¼Œå°±ä¸ä¼šç©ºæ‰‹è€Œå½’äº†ã€‚
    }

    // ğŸŸ¢ 4. æ™®é€šäº‹ä»¶ (å…œåº•é€»è¾‘)
    // å¦‚æœæ²¡éšæœºåˆ°è§’è‰²ï¼Œæˆ–è€…è§’è‰²æ²¡æœ‰å¯ç”¨äº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œè¿™é‡Œ
    const allKeys = Object.keys(Events.Random);
    const validKeys = allKeys.filter(k => {
        const evt = Events.Random[k];
        if (evt.condition) {
            return evt.condition(State);
        }
        return true; 
    });

    // å¦‚æœæ²¡æœ‰åˆæ³•çš„äº‹ä»¶ï¼ˆæå°‘è§ï¼‰ï¼Œå°±é»˜è®¤è§¦å‘ä¸€ä¸ªå®‰å…¨çš„
    if (validKeys.length === 0) {
        key = 'wasteland_radio';
    } else {
        key = validKeys[rng(0, validKeys.length - 1)];
    }

    // è¿‡æ»¤å¨å¸ˆé€»è¾‘
    if (key === 'bulk_food_buyer' && chance(90)) {
        key = 'picky_customer';
    }
    
    // ğŸŸ¢ ã€Ghost ç»å¯¹å®ˆæŠ¤ï¼šæ‹¦æˆªé€»è¾‘ã€‘
    if (State.set_rewards.ghost && badEvents.includes(key)) {
        log("ğŸ’€ Ghost ç»å¯¹å®ˆæŠ¤ï¼šæˆåŠŸæ‹¦æˆªè´Ÿé¢äº‹ä»¶ï¼", 'info');
        const safeReplacements = ['poker_night', 'ptsd_soldier', 'stray_cat_mascot', 'journalist_visit', 'soap_request', 'veteran_coin'];
        key = safeReplacements[rng(0, safeReplacements.length - 1)]; 
        
        printMsg("ã€ç³»ç»Ÿã€‘Ghost çš„éƒ¨ç½²å¥æ•ˆäº†ï¼Œä½ å¬åˆ°å¤–é¢çš„å·¡é€»é˜Ÿçªç„¶æ”¹å˜äº†è·¯çº¿ï¼Œæ½œåœ¨å¨èƒå·²è¢«æå‰æ¸…é™¤ã€‚", 'system');
        printMsg(`(å·²è‡ªåŠ¨æ›¿æ¢ä¸ºå®‰å…¨äº‹ä»¶: ${key})`, 'system');
    }
    
    triggerEvent(Events.Random[key]);
}



// --- è¯·ç”¨æ­¤ä»£ç å®Œå…¨æ›¿æ¢ checkPriorityEvents å‡½æ•° ---
// --- ğŸŸ¢ æ ¸å¿ƒåˆ¤å®šé€»è¾‘ (å·²åŠ å…¥ Keegan) ---
function checkPriorityEvents() {
    // 1. ä¿®ç½—åœºæ£€æµ‹ (æŠŠ keegan åŠ è¿›å»)
    const lovers = ['ghost', 'konig', 'krueger', 'keegan'].filter(k => State.chars[k].dating);
    
// åªæœ‰å½“ï¼š(æ‹äºº>1) ä¸” (è¿æ°”ä¸å¥½) ä¸” (ä¸æ˜¯å¥³ç‹) ä¸” (æ²¡å½»åº•é—¹ç¿»è¿‡) æ—¶ï¼Œæ‰è§¦å‘
    if (lovers.length > 1 && chance(5) && !State.flags.harem_queen && !State.flags.cheating_exposed) {
        return Events.Special.cheating_exposed;
    }

    // 2. å•äººåƒé†‹ (ä» lovers é‡Œå–ï¼Œä¸Šé¢å·²ç»åŠ äº† keeganï¼Œæ‰€ä»¥è¿™é‡Œä¸ç”¨åŠ¨)
    if (lovers.length === 1 && chance(20) && (State.day - State.flags.last_jealous_day > 5)) {
        const loverKey = lovers[0];
        if (!State.flags.harem_queen) {
            State.flags.last_jealous_day = State.day;
            return Events.Special[loverKey + '_jealous'];
        }
    }

    // 3. è¡¨ç™½äº‹ä»¶æ£€æµ‹ (æŠŠ keegan åŠ è¿›å¾ªç¯åˆ—è¡¨)
    const charKeys = ['ghost', 'konig', 'krueger', 'keegan']; // ğŸŸ¢ åŠ å…¥ keegan
    
    for (let key of charKeys) {
        const char = State.chars[key];
        const rejectCount = char.reject_count || 0;
        const lastRejectDay = char.last_reject_day || -99;
        const threshold = 100 + (rejectCount * 30);
        const isCoolingDown = (State.day - lastRejectDay) < 30;
        
        if (char.aff >= threshold && !char.dating && !char.confessed && !isCoolingDown) {
            return Events.Special[key + '_confess'];
        }
    }
     
    // 4. æ·±å±‚æ¸©å­˜äº‹ä»¶ (ä¸Šé¢ charKeys å·²ç»åŠ äº†ï¼Œè¿™é‡Œè‡ªåŠ¨ç”Ÿæ•ˆ)
    for (let key of charKeys) {
        const char = State.chars[key];
        const isCoolingDown = (State.day - char.last_intimate_day) < 10;
        if (char.dating && char.aff >= 150 && chance(20) && !isCoolingDown) { 
             return Events.Special[key + '_intimate'];
        }
    }

    return null;
}


function triggerCharacterEvent(charName) {
    const pool = Events.Characters[charName];
    
    // ç­›é€‰ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶
    const validEvents = pool.filter(e => {
        if (e.condition) {
            return e.condition(State);
        }
        return true;
    });

    // ğŸŸ¢ å…³é”®ä¿®æ”¹ï¼šå¦‚æœæ²¡æœ‰åˆæ³•çš„äº‹ä»¶ï¼Œè¿”å› false (å‘Šè¯‰ä¸»ç¨‹åºâ€œæˆ‘æ²¡è´§â€)
    if (validEvents.length === 0) return false;

    // è§¦å‘äº‹ä»¶å¹¶è¿”å› true (å‘Šè¯‰ä¸»ç¨‹åºâ€œæå®šäº†â€)
    const event = validEvents[rng(0, validEvents.length - 1)];
    triggerEvent(event);
    return true;
}


function triggerEvent(eventObj) {
    if(!eventObj) return;

// ğŸŸ¢ ã€æ–°å¢ä»£ç å¼€å§‹ã€‘æ”¯æŒåŠ¨æ€å†…å®¹ç”Ÿæˆ
    // è¿™ä¸€æ­¥æ˜¯è®©ä¿®ç½—åœºèƒ½è‡ªåŠ¨è¯†åˆ«â€œè°åœ¨åœºâ€çš„å…³é”®
    if (eventObj.onTrigger) {
        eventObj.onTrigger(eventObj, State);
    }
    // ğŸ”´ ã€æ–°å¢ä»£ç ç»“æŸã€‘

    // æ˜¾ç¤ºå¼€åœºç™½
    printMsg(eventObj.text, eventObj.type || 'event', eventObj.speaker);
    
    // ç”Ÿæˆé€‰é¡¹
    const choices = eventObj.options.map(opt => ({
        title: opt.text,
        desc: opt.desc || "",
        disabled: opt.condition ? !opt.condition(State) : false,
        
        // ğŸŸ¢ ã€æ ¸å¿ƒä¿®å¤ã€‘ä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰ action
        // å¦‚æœé€‰é¡¹é‡Œå†™äº† actionï¼ˆæ¯”å¦‚é‚£ä¸ªè·³è½¬å­èœå•ï¼‰ï¼Œå°±ç›´æ¥è¿è¡Œå®ƒï¼Œä¸å†è·‘é»˜è®¤é€»è¾‘
        action: opt.action ? opt.action : () => {
            // --- é»˜è®¤é€»è¾‘ ---
            // 1. æ‰§è¡Œåæœ
            if(opt.effect) opt.effect(State);
            updateUI();
        
            // 2. æ˜¾ç¤ºç»“æœæ–‡æœ¬
            if(opt.result) printMsg(opt.result, 'system');
            
            // 3. é“¾æ¥åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶æˆ–è¿”å›èœå•
            if(opt.next) {
                setTimeout(() => triggerEvent(opt.next), 500);
            } else {
                showMainMenu();
            }
        }
    }));
    
    renderButtons(choices);
}

// --- äº‹ä»¶åº“ (Huge Content) ---

// --- ã€æ‰©å……ç‰ˆã€‘æ¯æ—¥æ–°é—»åº“ (100æ¡) ---
const DailyNews = [
    // ==========================================
    // ğŸ“ˆ å¸‚åœºæ³¢åŠ¨ç±» (æ¶¨ä»·/é™ä»·)
    // ==========================================
    { text: "å‰çº¿çˆ†å‘æµæ„Ÿï¼åŒ»ç–—åŒ…ä»·æ ¼æš´æ¶¨ï¼", effect: { medkit: 1.5, food: 1.0, ammo: 1.0 } },
    { text: "äººé“ä¸»ä¹‰æ•‘æ´ç‰©èµ„æŠµè¾¾ï¼Œé£Ÿå“ä»·æ ¼ä¸‹è·Œã€‚", effect: { medkit: 1.0, food: 0.6, ammo: 1.0 } },
    { text: "KorTac æˆªæ–­äº†è¡¥ç»™çº¿ï¼Œå…¨çº¿ç‰©èµ„çŸ­ç¼ºã€‚", effect: { medkit: 1.3, food: 1.3, ammo: 1.3 } },
    { text: "å±€éƒ¨åœç«åè®®ç”Ÿæ•ˆï¼Œå¼¹è¯éœ€æ±‚ä¸‹é™ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 0.7 } },
    { text: "å³å°†å‘èµ·æ€»æ”»ï¼å¼¹è¯ä»·æ ¼é£™å‡ï¼", effect: { medkit: 1.0, food: 1.0, ammo: 1.6 } },
    { text: "æ°´æºæ±¡æŸ“è°£è¨€å››èµ·ï¼Œç“¶è£…æ°´å’Œé£Ÿç‰©ä»·æ ¼ä¸Šæ¶¨ã€‚", effect: { medkit: 1.1, food: 1.4, ammo: 1.0 } },
    { text: "ä¸€ç¾¤ç–¯ç‹‚çš„åŒ»ç”Ÿæ­£åœ¨é«˜ä»·æ”¶è´­æŠ—ç”Ÿç´ ã€‚", effect: { medkit: 1.4, food: 1.0, ammo: 1.0 } },
    { text: "åœ°ä¸‹é»‘å¸‚å†›ç«åº“çˆ†ç‚¸ï¼Œå¼¹è¯ç¨€ç¼ºã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.5 } },
    { text: "åº†ç¥èƒœåˆ©æ—¥ï¼å¤§å®¶éƒ½åœ¨å¤§åƒå¤§å–ï¼Œé£Ÿç‰©éœ€æ±‚å¢åŠ ã€‚", effect: { medkit: 1.0, food: 1.3, ammo: 1.0 } },
    { text: "èµ°ç§èˆ¹é å²¸ï¼Œå¸¦æ¥äº†å¤§é‡å»‰ä»·ç½å¤´ã€‚", effect: { medkit: 1.0, food: 0.7, ammo: 1.0 } },
    { text: "ç”±äºæœªçŸ¥æ¯’æ°”æ³„éœ²ï¼Œé˜²æ¯’é¢å…·å’Œè¯å“ç´§ç¼ºã€‚", effect: { medkit: 1.6, food: 1.0, ammo: 1.0 } },
    { text: "é›¨å­£æ¥ä¸´ï¼Œæ²¡äººæƒ³å‡ºé—¨æ‰“ä»—ï¼Œå¼¹è¯æ»é”€ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 0.8 } },
    { text: "ç”±äºèŠ‚æ—¥ä¸´è¿‘ï¼Œå·§å…‹åŠ›å’Œç³–æœæˆä¸ºç¡¬é€šè´§ã€‚", effect: { medkit: 1.0, food: 1.5, ammo: 1.0 } }, // å‡è®¾å½’ç±»ä¸º Food
    { text: "å¬è¯´éš”å£é•‡å­è¢«æ´—åŠ«äº†ï¼Œå¹¸å­˜è€…æ€¥éœ€è¡¥ç»™ã€‚", effect: { medkit: 1.2, food: 1.2, ammo: 1.0 } },
    { text: "æ–°çš„å†›é˜€ä¸Šå°ï¼Œæ­£åœ¨å¤§é‡å›¤ç§¯å†›ç«ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.4 } },
    { text: "å‘ç”Ÿå¤§è§„æ¨¡é£Ÿç‰©ä¸­æ¯’äº‹ä»¶ï¼Œæ­¢æ³»è¯å–ç–¯äº†ã€‚", effect: { medkit: 1.3, food: 0.8, ammo: 1.0 } }, // é£Ÿç‰©é™ä»·å› ä¸ºæ²¡äººæ•¢ä¹°
    { text: "å‘ç°äº†ä¸€åº§æˆ˜å‰çš„å¤§å‹è¶…å¸‚ä»“åº“ï¼é£Ÿç‰©ä»·æ ¼å´©ç›˜ï¼", effect: { medkit: 1.0, food: 0.5, ammo: 1.0 } },
    { text: "æœ€è¿‘æµè¡Œâ€œå­å¼¹é¡¹é“¾â€æ—¶å°šï¼Œå¼¹è¯å¾®æ¶¨ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.1 } },
    { text: "å¯’æ½®æ¥è¢­ï¼Œé«˜çƒ­é‡é£Ÿç‰©éœ€æ±‚æ¿€å¢ã€‚", effect: { medkit: 1.0, food: 1.4, ammo: 1.0 } },
    { text: "å’Œå¹³é¸½ç»„ç»‡æ­£åœ¨å…è´¹åˆ†å‘ç»·å¸¦ï¼ŒåŒ»ç–—å“æ»é”€ã€‚", effect: { medkit: 0.7, food: 1.0, ammo: 1.0 } },

    // ==========================================
    // ğŸ­ é˜µè¥ä¸è§’è‰²å…«å¦ (å½©è›‹/å¾®è°ƒ)
    // ==========================================
    { text: "Soap è¯•å›¾ç”¨ç‚¸è¯ç‚¸é±¼ï¼Œç»“æœç‚¸æ¯äº†ä¸€ä¸ªé±¼å¡˜ï¼Œç°åœ¨å¤§å®¶éƒ½åœ¨åƒçƒ¤é±¼äº†ã€‚", effect: { medkit: 1.0, food: 0.9, ammo: 1.1 } },
    { text: "Shadow Company æ­£åœ¨æ‹›å‹Ÿæ–°å…µï¼Œè–ªæ°´å¾ˆé«˜ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.2 } },
    { text: "KÃ¶nig ä¸å°å¿ƒæ’åäº†å•†åº—æ‹›ç‰Œï¼ŒKorTac æ­£åœ¨æ›¿ä»–èµ”å¿ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Price ä¸Šå°‰è¢«ç›®å‡»åœ¨çœ‹çƒèµ›ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Krueger çš„é€šç¼‰ä»¤èµé‡‘åˆæ¶¨äº† $5000ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "TF141 å’Œ KorTac åœ¨è¶³çƒåœºä¸¾è¡Œäº†ä¸€åœºå‹è°Šèµ›ï¼ˆç»“æœæ¼”å˜æˆäº†ç¾¤æ¶ï¼‰ã€‚", effect: { medkit: 1.2, food: 1.0, ammo: 1.0 } },
    { text: "Graves æ­£åœ¨é«˜ä»·æ”¶è´­å‘èƒ¶ï¼Œæœ‰äº›äººçœŸçš„å¾ˆæœ‰é—²æƒ…é€¸è‡´ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Zimo æ­£åœ¨æ•™å½“åœ°äººæ‰“å¤ªææ‹³ï¼Œç”šè‡³è¿˜è¦å¼€ç­æˆè¯¾ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Chimera çš„äººæŠ¢åŠ«äº†ä¸€è¾†ç”œç”œåœˆå¡è½¦ï¼Œå£«æ°”é«˜æ¶¨ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Horangi èµŒåšè¾“å…‰äº†å·¥èµ„ï¼Œæ­£åœ¨åˆ°å¤„å€Ÿé’±ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Gaz æ­£åœ¨æŠ±æ€¨è‹±å›½çš„å¤©æ°”ï¼Œå“ªæ€•ä»–ç°åœ¨æ ¹æœ¬ä¸åœ¨è‹±å›½ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰ä¼ è¨€è¯´ï¼Œåªè¦ç»™ Nikto ä¼ç‰¹åŠ ï¼Œä»–å°±ä¼šæ”¾ä½ ä¸€é©¬ã€‚", effect: { medkit: 1.0, food: 1.1, ammo: 1.0 } },

    // ==========================================
    // â˜ï¸ åºŸåœŸæ°›å›´ä¸æ— èŠæ—¥å¸¸ (æ— å½±å“)
    // ==========================================
    { text: "ä»Šæ—¥å¤©æ°”ä¸é”™ï¼Œç”šè‡³èƒ½çœ‹åˆ°ä¸€ç‚¹è“å¤©ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¹¿æ’­é‡Œæ•´å¤©éƒ½åœ¨æ”¾åŒä¸€é¦–æˆ˜å‰è€æ­Œã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€åªå˜å¼‚çš„åŒå¤´èœ¥èœ´åœ¨è¡—ä¸Šæ™’å¤ªé˜³ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è°æŠŠè¢œå­æŒ‚åœ¨ç”µçº¿æ†ä¸Šäº†ï¼ŸçœŸæ˜¯æ²¡ç´ è´¨ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ™šæœ‰æµæ˜Ÿé›¨ï¼Œå¦‚æœä½ è¿˜æ²¡è¢«è¾å°„å¼„ççš„è¯å¯ä»¥çœ‹çœ‹ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººåœ¨å…¬å…±é¢‘é“é‡Œåµæ¶ï¼ŒæŒç»­äº†ä¸‰ä¸ªå°æ—¶ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "é£å¾ˆå¤§ï¼ŒæŠŠåƒåœ¾å¹å¾—åˆ°å¤„éƒ½æ˜¯ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ— è®ºä¸–ç•Œå˜æˆä»€ä¹ˆæ ·ï¼Œå‘¨ä¸€ä¾ç„¶ä»¤äººè®¨åŒã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€ç¾¤ä¹Œé¸¦åœ¨å¹¿åœºä¸Šç›˜æ—‹ï¼Œçœ‹èµ·æ¥ä¸å‰åˆ©ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šå¤©ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿã€‚è¿™åœ¨åºŸåœŸä¸Šæ˜¯ä¸ªå¥‡è¿¹ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "éš”å£çš„é…’å§å› ä¸ºå…‘æ°´è¢«é¡¾å®¢ç ¸äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººå‘èª“ä»–çœ‹è§äº†å¤–æ˜Ÿäººï¼Œä½†å¤§å®¶è§‰å¾—ä»–æ˜¯å–å¤šäº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€è¾†å¡è½¦åœ¨æ³¥å‘é‡Œé™·äº†ä¸€æ•´å¤©ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸çŸ¥åçš„é‡èŠ±åœ¨åºŸå¢Ÿç¼éš™é‡Œå¼€äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ç”±äºç£æš´ï¼Œæ˜¨æ™šæ‰€æœ‰äººçš„æŒ‡å—é’ˆéƒ½å¤±çµäº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æµæµªæ±‰æ­£åœ¨ç”¨ç©ºç½å¤´æ­å»ºä¸€åº§åŸå ¡ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è¿œå¤„ä¼ æ¥äº†å·¨å¤§çš„çˆ†ç‚¸å£°ï¼Œä¸è¿‡çœ‹èµ·æ¥ç¦»å¾—å¾ˆè¿œã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šå¤©çš„æ°´æœ‰ä¸€è‚¡é“é”ˆå‘³ï¼Œä¸è¿‡å¤§å®¶ä¹ æƒ¯äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ”¶éŸ³æœºé‡Œåœ¨æ’­æ”¾å¦‚ä½•çƒ¹é¥ªå˜å¼‚é¼ è‚‰çš„æ•™ç¨‹ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€ä¸ªç”·å­è¿‘æ—¥åœ¨è¡—ä¸Šå…œå”®éšå½¢è¯æ°´ï¼Œåä¸“å®¶æŸ¥æ˜ä¸ºç™½å¼€æ°´ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¤§å®¶éƒ½åœ¨è®¨è®ºé‚£ä¸ªæ–°æ¥çš„èˆå¥³ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººåœ¨åºŸå¢Ÿé‡Œå‘ç°äº†ä¸€æ¶è¿˜èƒ½å¼¹çš„é’¢ç´ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šå¤©çš„æ—¥è½æ˜¯ç´«è‰²çš„ï¼Œå¾ˆç¾ï¼Œä½†å¯èƒ½æœ‰æ¯’ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å·¡é€»é˜Ÿåœ¨æŠ“æ•ä¸€åªå·äº†é¦™è‚ çš„ç‹—ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººåœ¨å‡ºå”®æˆ˜å‰çš„æ—¶å°šæ‚å¿—ï¼Œä»·æ ¼ä¸è²ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è¡—è§’çš„è‡ªåŠ¨è´©å–æœºçªç„¶åå‡ºäº†æ‰€æœ‰ç¡¬å¸ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å­©å­ä»¬åœ¨ç©â€œæ‰®æ¼”å£«å…µâ€çš„æ¸¸æˆã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },

    // ğŸ’¬ åºŸè¯æ–‡å­¦ (å¬å›ä¸€å¸­è¯ï¼Œå¦‚å¬ä¸€å¸­è¯)
    // ==========================================
    { text: "æ®ç ”ç©¶è¡¨æ˜ï¼Œäººè¢«æ€ï¼Œå°±ä¼šæ­»ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ¯è¿‡ 60 ç§’ï¼Œæˆ˜åŒºå°±æœ‰ä¸€åˆ†é’Ÿè¿‡å»ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸“å®¶å»ºè®®ï¼šé¥¿äº†å°±åƒä¸œè¥¿èƒ½æœ‰æ•ˆç¼“è§£é¥¥é¥¿æ„Ÿã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "éœ‡æƒŠï¼æ‰“å¼€ç©ºçš„è¡¥ç»™ç®±ï¼Œé‡Œé¢ç«Ÿç„¶ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ°”è±¡å±€å‘å¸ƒæ©™è‰²é¢„è­¦ï¼šä»Šå¤©çš„é›¨æ°´éå¸¸æ¹¿ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ç†è´¢ä¸“å®¶æŒ‡å‡ºï¼ŒèŠ±é’±ä¼šå¯¼è‡´é’±åŒ…å˜ç˜ªã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¦‚æœä½ åœ¨æ™šä¸Šç¡è§‰ï¼Œé‚£ä¹ˆä½ å°±é”™è¿‡äº†æ™šä¸Šçš„æ—¶é—´ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æˆ˜åœ°è®°è€…æŠ¥é“ï¼šè¢«å­å¼¹å‡»ä¸­ä¼šå¾ˆç–¼ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ—¥ç”Ÿå­˜å°è´´å£«ï¼šåªè¦æ´»ç€ï¼Œå°±ä¸ç®—æ­»ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "é˜…è¯»è¿™æ¡æ–°é—»ä¸ä¼šå¢åŠ ä»»ä½•æƒ…æŠ¥ï¼Œä½†ä½ å·²ç»è¯»å®Œäº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ™šæ²¡æœ‰æœˆäº®ï¼Œä¼¸æ‰‹ä¸è§äº”æŒ‡ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },

    // ==========================================
    // ğŸ–¤ é»‘è‰²å¹½é»˜ä¸æ€ªè°ˆ
    // ==========================================
    { text: "æœ€æ–°ç ”ç©¶è¡¨æ˜ï¼ŒèŸ‘è‚å¯Œå«è›‹ç™½è´¨ã€‚", effect: { medkit: 1.0, food: 1.1, ammo: 1.0 } },
    { text: "æœ‰äººè¯•å›¾æ‰“åŠ«é“¶è¡ŒåºŸå¢Ÿï¼Œç»“æœè¢«æ‰è½çš„å¹¿å‘Šç‰Œç ¸æ™•äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ‹›è˜ï¼šæ’é›·å‘˜ã€‚å¾…é‡ï¼šé«˜è–ªï¼Œè™½ç„¶ä½ å¯èƒ½èŠ±ä¸åˆ°ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¦‚æœä½ çš„å½±å­å¼€å§‹è‡ªå·±ç§»åŠ¨ï¼Œè¯·ç«‹å³å°±åŒ»ã€‚", effect: { medkit: 1.2, food: 1.0, ammo: 1.0 } },
    { text: "ä¸è¦åƒå‘å…‰çš„è˜‘è‡ï¼Œé‡å¤ä¸€éï¼Œä¸è¦åƒã€‚", effect: { medkit: 1.2, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ—¥ç‰¹ä»·ï¼šäºŒæ‰‹é™è½ä¼ï¼Œæœªæ‰“å¼€è¿‡ï¼ˆæœ‰ä¸€ç‚¹è¡€è¿¹ï¼‰ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººå£°ç§°è‡ªå·±æ˜¯æ—¶é—´æ—…è¡Œè€…ï¼Œè¯¢é—®æ¯”ç‰¹å¸ç°åœ¨çš„ä»·æ ¼ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "é»‘å¸‚åŒ»ç”Ÿæ¨å‡ºæ–­è‚¢å†ç”ŸæœåŠ¡ï¼Œä»…å”®$998ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è­¦å‘Šï¼šå¤œé—´å‡ºæ²¡çš„ç¬‘è„¸ç”·ä¼šå·å·¦è„šçš„é‹ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¦‚æœä½ å¬åˆ°ä¸‹æ°´é“é‡Œæœ‰äººå”±æ­Œï¼Œåƒä¸‡åˆ«è·Ÿç€å”±ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€å…·éª·é«…åœ¨å…¬å›­é•¿æ¤…ä¸Šåäº†ä¸‰å¹´ï¼Œä»Šå¤©è¢«äººæ¬èµ°äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è¿™å‘¨çš„ç”Ÿå­˜æŒ‡å—ï¼šè·‘å¾—æ¯”é˜Ÿå‹å¿«å°±è¡Œã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººåœ¨å”®å–ç©ºæ°”ç½å¤´ï¼Œå£°ç§°æ˜¯â€˜2025å¹´çš„çº¯å‡€ç©ºæ°”â€™ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€è¾†å¦å…‹çš„ç‚®ç®¡è¢«æ¶‚æˆäº†ç²‰çº¢è‰²ï¼Œå¤§å®¶éƒ½åœ¨åˆå½±ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¦‚æœä½ çœ‹åˆ°ä¸¤ä¸ªæœˆäº®ï¼Œé‚£è¯´æ˜ä½ å–äº†å‡é…’ã€‚", effect: { medkit: 1.1, food: 1.0, ammo: 1.0 } },
    { text: "æœ€è¿‘æµè¡ŒæŠŠæ‰‹é›·å½“åšå®šæƒ…ä¿¡ç‰©ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.1 } },
    { text: "åˆ«æŠŠæ‰‹æŒ‡ä¼¸è¿›è‡ªåŠ¨æœºæªçš„æªç®¡é‡Œï¼Œå“ªæ€•å®ƒçœ‹èµ·æ¥å¡ä½äº†ã€‚", effect: { medkit: 1.1, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ—¥å¿Œï¼šå‡ºé—¨ï¼Œå®œï¼šæ¥å†›éœ€åº—è´­ä¹°ç‰©èµ„ï¼ˆæœ¬æ¡$50ï¼‰ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€ä¸ªç‹™å‡»æ‰‹å› ä¸ºå¤ªæ— èŠï¼Œå¼€å§‹ç”¨å­å¼¹æ‰“èšŠå­ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å¯»æ‰¾ä¸¢å¤±çš„æ ¸å¼¹å¤´ï¼Œæ¡åˆ°è€…è¯·å‹¿æ•²å‡»ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },

// ==========================================
    // ğŸ­ CODäººç‰©åæ§½ & é»‘è‰²å¹½é»˜æ‰©å……åŒ… (20æ¡)
    // ==========================================
    { text: "è°¢è²å°”å¾·å°†å†›å‘è¡¨è®²è¯ï¼š'å†å²æ˜¯ç”±èƒœåˆ©è€…ä¹¦å†™çš„ã€‚'ï¼ˆè™½ç„¶å¤§å®¶è§‰å¾—å¯èƒ½æ˜¯ç”±è¿˜æ²¡æ­»çš„äººçç¼–çš„ï¼‰ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "CIA çš„ Laswell å¥³å£«æ­£åœ¨é«˜ä»·æ‚¬èµ......ä¸€æ¯åœ°é“çš„æ‹¿é“å’–å•¡ã€‚", effect: { medkit: 1.0, food: 1.2, ammo: 1.0 } }, // å’–å•¡æ¶¨ä»·
    { text: "æœ‰äººçœ‹è§æ™®è±æ–¯ä¸Šå°‰åœ¨æ²¹åº“æŠ½é›ªèŒ„ï¼Œæ²¹åº“å› ä¸ºå¤ªå®³æ€•è€Œæ²¡æœ‰çˆ†ç‚¸ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Soap æŠ±æ€¨ä»–çš„è«éœå…‹å‘å‹è¢«ç‹™å‡»æ‰‹å‰Šæ‰äº†ä¸€å—ï¼Œæ­£åœ¨å¯»æ‰¾å‘èƒ¶ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è°¢è²å°”å¾·å°†å†›æ­£åœ¨å¯»æ‰¾â€˜Loose Endsï¼ˆä¸ç•™æ´»å£ï¼‰â€™è¡ŒåŠ¨çš„å¿—æ„¿è€…ï¼Œå»ºè®®ï¼šå¿«è·‘ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.3 } }, // å¼¹è¯æ¶¨ä»·ï¼Œå› ä¸ºå¤§å®¶éƒ½è¦é˜²èº«
    { text: "Laswell æé†’æ‰€æœ‰å¹²å‘˜ï¼šâ€˜Bravo Six, Going Darkâ€™ æ˜¯å¤œæˆ˜æœ¯è¯­ï¼Œä¸æ˜¯è®©ä½ ä»¬å»æŠŠç”µé—¸æ‹‰äº†ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ®ä¼  Ghost çš„é¢å…·ä¸‹é¢......å…¶å®è¿˜æœ‰å¦ä¸€å±‚æ›´å°çš„é¢å…·ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "å°¼å¤è±çš„ç›´å‡æœºæœåŠ¡å¹¿å‘Šï¼šâ€˜æˆ‘ä»¬é£å¾—å¾ˆå¿«ï¼Œè‡³äºé™è½......çœ‹è¿æ°”ã€‚â€™", effect: { medkit: 1.2, food: 1.0, ammo: 1.0 } }, // å®¹æ˜“å æœºï¼ŒåŒ»ç–—åŒ…æ¶¨ä»·
    { text: "ä¸€åæ–°å…µè¯•å›¾è¹²åœ¨å¢™è§’å–˜æ°”æ¥è‡ªåŠ¨å›è¡€ï¼Œå·²è¢«é€å¾€åŒ»åŠ¡å®¤ã€‚", effect: { medkit: 1.1, food: 1.0, ammo: 1.0 } },
    { text: "Graves æ­£åœ¨å¯¹ç€é•œå­ç»ƒä¹ ä»–çš„å¾—ä»¥æ­¤å¾®ç¬‘ï¼Œå¹¶é—®é•œå­â€˜ä½ æ„¿æ„åŠ å…¥æš—å½±å…¬å¸å—ï¼Ÿâ€™", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Gaz æ­£åœ¨å¯»æ‰¾ä»–ä¸¢å¤±çš„æ£’çƒå¸½ï¼Œè¿™æ˜¯ä»–æœ¬æœˆä¸¢çš„ç¬¬ 141 é¡¶ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "è°¢è²å°”å¾·å°†å†›è¡¨ç¤ºï¼šèƒŒå›æ˜¯ä¸€ä¸ªå¾ˆé‡çš„è¯ï¼Œä»–æ›´å–œæ¬¢ç§°ä¹‹ä¸ºéä¼ ç»Ÿçš„æˆ˜æœ¯è°ƒæ•´ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.2 } },
    { text: "Laswell æˆªè·äº†ä¸€æ¡åŠ å¯†æƒ…æŠ¥ï¼Œè§£å¯†åå‘ç°é‚£æ˜¯ Ghost çš„è¶…å¸‚è´­ç‰©æ¸…å•ã€‚", effect: { medkit: 1.0, food: 1.1, ammo: 1.0 } },
    { text: "Krueger è¢«ç›®å‡»æ­£åœ¨ç”¨ä¸¤æŠŠé£åˆ€åˆ‡ç‰›æ’ï¼ŒåŠ¨ä½œéå¸¸ä¼˜é›…ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æ— è®ºä½ åœ¨è¿™ä¸ªä¸–ç•Œåšä»€ä¹ˆï¼Œè®°ä½ï¼šä¸è¦ç›¸ä¿¡é‚£ä¸ªå…‰å¤´ç¾å›½å°†å†›ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€ä½å¹³æ°‘å› ä¸ºåå­—å« 'Makarov' è€Œè¢«æš´æ‰“ï¼Œä½†ä»–å…¶å®åªæ˜¯ä¸ªå–é©¬å¡é¾™çš„ã€‚", effect: { medkit: 1.1, food: 1.0, ammo: 1.0 } },
    { text: "ä»Šæ—¥ç®´è¨€ï¼šæ—¢ç„¶å·²ç»å¤„äºåœ°ç‹±ï¼Œä¸å¦‚åä¸‹æ¥çƒ¤ä¸ªæ£‰èŠ±ç³–ã€‚", effect: { medkit: 1.0, food: 1.2, ammo: 1.0 } },

// ==========================================
    // ğŸ­ COD æ¢—ç™¾ç§‘ & æˆ˜åŒºè¿·æƒ‘è¡Œä¸ºå¤§èµ (ç¬¬äºŒæ³¢ 20æ¡)
    // ==========================================
    { text: "è°¢è²å°”å¾·å°†å†›çš„æ–°ä¹¦ã€Šå¦‚ä½•èµ¢å¾—æœ‹å‹å¹¶èƒŒåˆºä»–ä»¬ã€‹å› å†…å®¹è¿‡äºè¯šå®è€Œæ»é”€ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "æœ‰äººç›®å‡» Yegor ç©¿ç€é²œçº¢è‰²çš„è¿åŠ¨æœåœ¨åºŸå¢Ÿä¸­è·‘é…·ï¼Œç‹™å‡»æ‰‹è¡¨ç¤ºï¼šâ€˜å¤ªæ™ƒçœ¼äº†ï¼Œä¸æƒ³æ‰“â€™ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } }, // çš®è‚¤æ¢—
    { text: "Laswell å‘å‡ºè­¦å‘Šï¼šâ€˜è°å†åœ¨æ— çº¿ç”µé‡Œè®²å†·ç¬‘è¯ï¼Œæˆ‘å°±åˆ‡æ–­åŸºåœ°çš„å’–å•¡ä¾›åº”ã€‚â€™", effect: { medkit: 1.0, food: 1.2, ammo: 1.0 } }, // å’–å•¡å±æœº
// ==========================================
    // ğŸ¦… ä¹Œå…¹å…‹æ–¯å¦äºŒäººç»„ (æ³•æ‹‰èµ« & Alex)
    // ==========================================
    { text: "æœ‰äººç›®å‡» Alex å’Œæ³•æ‹‰èµ«åœ¨åºŸå¢Ÿé¡¶ç«¯å¹¶è‚©çœ‹æ˜Ÿæ˜Ÿï¼Œç”»é¢å¾ˆæµªæ¼«ï¼Œä½†æ®çŸ¥æƒ…äººå£«é€éœ²ï¼Œä»–ä»¬å…¶å®æ˜¯åœ¨æ ¡å‡†è¿«å‡»ç‚®åæ ‡ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.1 } }, // å¼¹è¯å°æ¶¨
    { text: "ULFï¼ˆä¹Œå…¹å…‹æ–¯å¦è§£æ”¾å†›ï¼‰é£Ÿå ‚ä»Šæ—¥ç‰¹ä¾›ï¼šæ²™å­æ‹Œé¥­ï¼Œæ³•æ‹‰èµ«å‘è¡¨é‡è¦è®²è¯ï¼šâ€˜åƒä¸‹å»ã€‚â€™", effect: { medkit: 1.0, food: 0.8, ammo: 1.0 } }, // é£Ÿç‰©é™ä»·ï¼Œå› ä¸ºæ²¡äººæƒ³åƒæ²™å­
    { text: "æ®æŠ¥ Alex è¯•å›¾ç”¨ä»–çš„ä¹‰è‚¢ç»™æ³•æ‹‰èµ«å½“ä¸´æ—¶æ™¾è¡£æ¶ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "Graves ä¼¼ä¹ä¸€ç›´ä¸º'è‡ªå·±ä¸åœ¨å¦å…‹é‡Œ'è¿™ä¸ªæ¢—è€Œå¾—æ„ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } },
    { text: "ä¸€åæ–°å…µæ‰”é—ªå…‰å¼¹æ—¶å¼¹åˆ°äº†é—¨æ¡†ä¸Šï¼Œç°åœ¨æ•´ä¸ªå°é˜Ÿéƒ½åœ¨æ‘¸é»‘åƒé¥­ã€‚", effect: { medkit: 1.1, food: 1.0, ammo: 1.0 } }, // çœ¼ç›çäº†
    { text: "æ®æŠ¥é“ï¼Œæœ‰äººè¯•å›¾åœ¨ç°å®ä¸­è¿›è¡Œæ»‘é“²å–æ¶ˆï¼ˆSlide Cancelï¼‰ï¼Œç›®å‰æ­£åœ¨éª¨ç§‘æ’é˜Ÿã€‚", effect: { medkit: 1.2, food: 1.0, ammo: 1.0 } }, // æ¸¸æˆèº«æ³•æ¢—
    { text: "ä¸€åç¥ç§˜ä¹°å®¶ï¼ˆç–‘ä¼¼é©¬å¡æ´›å¤«ï¼‰æ­£åœ¨å¤§é‡æ”¶è´­ç”µæ¢¯ç»´ä¿®æ‰‹å†Œ... å¤§å®¶éƒ½è§‰å¾—è¿™å¾ˆå¯ç–‘ã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.0 } }, // ç”µæ¢¯æ¢—
    { text: "ç”±äºé˜”å‰‘åœ°é›·è¢«æ»¥ç”¨ï¼Œç°åœ¨çš„æ‰«åœ°æœºå™¨äººéƒ½è¢«è¿«ç©¿ä¸Šäº†é˜²çˆ†æœã€‚", effect: { medkit: 1.0, food: 1.0, ammo: 1.3 } },


    // ==========================================
    // ğŸŒ æç«¯çŠ¶å†µ (å¤§å¹…æ³¢åŠ¨)
    // ==========================================
    { text: "å…¨é¢æˆ˜äº‰çˆ†å‘ï¼æ‰€æœ‰ç‰©èµ„ä»·æ ¼ç¿»å€ï¼", effect: { medkit: 1.5, food: 1.5, ammo: 1.5 } },
    { text: "ç¥ç§˜å¯Œè±ªåœ¨æ­¤åœ°æ’’é’±ï¼ç‰©ä»·æš‚æ—¶ä¸‹è·Œï¼", effect: { medkit: 0.8, food: 0.8, ammo: 0.8 } },
    { text: "åŒ–å­¦æ­¦å™¨è­¦æŠ¥ï¼æ‰€æœ‰äººéƒ½åœ¨æŠ¢è´­åŒ»ç–—åŒ…ï¼", effect: { medkit: 2.0, food: 1.0, ammo: 1.0 } },
    { text: "é¥¥è’è”“å»¶ï¼Œæœ‰äººç”šè‡³å¼€å§‹åƒåœŸã€‚é£Ÿç‰©å¤©ä»·ï¼", effect: { medkit: 1.0, food: 2.0, ammo: 1.0 } },
    { text: "è¯¥åœ°åŒºå·²è¢«å°é”ï¼Œæ²¡æœ‰ä»»ä½•è¡¥ç»™èƒ½è¿›æ¥ã€‚", effect: { medkit: 1.2, food: 1.2, ammo: 1.2 } },
    { text: "å‘ç°å¤§å‹å†›ç«åº“é—è¿¹ï¼å¼¹è¯ä»·æ ¼æš´è·Œï¼", effect: { medkit: 1.0, food: 1.0, ammo: 0.5 } },
    { text: "ä¸€åœºå¤§ç«çƒ§æ¯äº†ç²®ä»“ã€‚", effect: { medkit: 1.0, food: 1.8, ammo: 1.0 } },
    { text: "æ–°çš„å˜å¼‚ç—…æ¯’æ­£åœ¨ä¼ æ’­ï¼Œç›®å‰çš„è¯ç‰©æ— æ•ˆã€‚", effect: { medkit: 0.5, food: 1.0, ammo: 1.0 } }, // è¯ç‰©æ— æ•ˆæ‰€ä»¥æ²¡äººä¹°
    { text: "è”åˆå›½ç»´å’Œéƒ¨é˜Ÿæ’¤ç¦»ï¼Œç§©åºå½»åº•å´©åã€‚", effect: { medkit: 1.3, food: 1.3, ammo: 1.3 } },
    { text: "ä¸–ç•Œæœ«æ—¥è°£è¨€åˆæ¥äº†ï¼Œè™½ç„¶è¿™å·²ç»æ˜¯ç¬¬100æ¬¡äº†ã€‚", effect: { medkit: 1.1, food: 1.1, ammo: 1.1 } },
    { text: "æ²™å°˜æš´æŒç»­è‚†è™ï¼Œæ‰€æœ‰æˆ·å¤–æ´»åŠ¨åœæ­¢ã€‚", effect: { medkit: 1.0, food: 1.2, ammo: 0.8 } },
    { text: "ä¸€ç¾¤ç–¯å­ç‚¸æ¯äº†ä¾›æ°´ç³»ç»Ÿã€‚", effect: { medkit: 1.2, food: 1.5, ammo: 1.0 } },
    { text: "å‘ç°é‡‘çŸ¿ï¼é€šè´§è†¨èƒ€å¯¼è‡´ç‰©ä»·é£æ¶¨ã€‚", effect: { medkit: 1.5, food: 1.5, ammo: 1.5 } },
    { text: "åœç”µäº†ï¼Œå†·è—è¯å“å…¨éƒ¨å¤±æ•ˆã€‚", effect: { medkit: 1.5, food: 1.2, ammo: 1.0 } },
    { text: "å¤§é‡éš¾æ°‘æ¶Œå…¥ï¼Œèµ„æºæåº¦ç´§å¼ ã€‚", effect: { medkit: 1.2, food: 1.4, ammo: 1.0 } }
];

// --- äº‹ä»¶åº“ (ä¿®å¤ç‰ˆ) ---
const Events = {
    // è§’è‰²ä¸“å±äº‹ä»¶
    Characters: {
        ghost: [
            // äº‹ä»¶ 1ï¼šå€Ÿå¼¹è¯ (æœªæ‹çˆ±é™å®š)
            {
                text: "Ghost æ‚„æ— å£°æ¯åœ°å‡ºç°åœ¨æŸœå°å‰ï¼Œä»–çš„æˆ˜æœ¯èƒŒå¿ƒä¸Šæ²¾æ»¡äº†æ–°æ—§äº¤æ›¿çš„è¡€è¿¹ã€‚\nâ€œæˆ‘éœ€è¦å¼¹è¯ï¼Œä½†æˆ‘ç°åœ¨æ²¡å¸¦ç°é‡‘ã€‚â€ é¢ç½©é®ä½äº†ä»–çš„è¡¨æƒ…ï¼Œæ·±æ£•è‰²çš„ç³å­”çœ‹ç€ä½ ï¼Œâ€œä½†æˆ‘ä¼šç»™ä½ ä¸€ä¸ªçš„æ‰¿è¯ºã€‚â€",
                speaker: "Ghost",
                type: "dialogue",
                options: [
                    {
                        text: "ç»™ 10 å¼¹è¯ (æ¬ æ¡)",
                        desc: "-10 Ammo, è·å¾— Ghost çš„æ‰¿è¯º",
                        condition: s => s.ammo >= 10,
                        effect: s => {
                            s.ammo -= 10;
                            s.chars.ghost.aff += 3;
                            s.rep_141 += 5;
                            s.flags.ghost_iou_active = true;
                            log("Ghost æ¬ ä¸‹äº†äººæƒ…", 'info');
                        },
                        result: "Ghost ç‚¹äº†ç‚¹å¤´æ”¶èµ·å¼¹è¯ã€‚â€œä½ ä¼šæ”¶åˆ°å›æŠ¥çš„ã€‚â€ ä»–è½¬èº«æ¶ˆå¤±åœ¨å¤œè‰²ä¸­ã€‚"
                    },
                    {
                        text: "æ‹’ç»æ¦‚ä¸èµŠè´¦",
                        desc: "å“ªæ€•æ˜¯ Ghost ä¹Ÿä¸è¡Œ",
                        effect: s => {
                            s.chars.ghost.aff -= 5;
                        },
                        result: "Ghost æ²‰é»˜äº†ä¸€ç§’ï¼Œâ€œç”Ÿæ„å°±æ˜¯ç”Ÿæ„ï¼Œæˆ‘æ˜ç™½äº†ã€‚â€ ä»–è½¬èº«ç¦»å¼€ã€‚"
                    }
                ]
            }, // <--- æ³¨æ„è¿™ä¸ªé€—å·ï¼Œåˆ†éš”äº†äº‹ä»¶ 1 å’Œ 2

// [Ghost] éæ‹çˆ±æ—¥å¸¸ï¼šæ²‰é»˜çš„äº¤æ˜“
        {
            text: "Ghost å°†ä¸€å¼ æ¸…å•å’Œä¸€å æ—§é’ç¥¨æ‹åœ¨æŸœå°ä¸Šï¼Œæ¸…å•ä¸Šåˆ—ç€ï¼š5.56mm å¼¹è¯ã€æ­¢ç—›è¯ã€æˆ˜æœ¯èƒ¶å¸¦ã€‚\nä»–çš„æ‰‹æŒ‡æœ‰èŠ‚å¥åœ°æ•²å‡»ç€æ¡Œé¢ï¼Œçœ‹ä¸Šå»ä¸å¤ªæƒ³å¼€å£ã€‚",
            speaker: "Ghost",
            type: "dialogue",
            // åªæœ‰æœªæ‹çˆ±æ—¶è§¦å‘
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "å…¨ç¨‹ä¿æŒæ²‰é»˜ï¼Œå¿«é€Ÿè£…è´§",
                    desc: "å±•ç°æé«˜çš„èŒä¸šç´ å…»",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.money += 200;
                        printMsg("Ghost æ”¶èµ·ç‰©èµ„ï¼Œå¯¹ä½ çš„æ•ˆç‡æ„Ÿåˆ°æ»¡æ„ã€‚\nä»–ä¸´èµ°å‰å‘ä½ ç‚¹äº†ç‚¹å¤´ç®—æ˜¯é“è°¢ã€‚", 'event');
                    },
                    result: "æ²¡æœ‰åºŸè¯ï¼Œäº¤æ˜“å®Œæˆï¼Œå®Œç¾çš„èŒä¸šäº’åŠ¨ã€‚"
                },
                {
                    text: "è¯•å›¾æ­è¯ï¼šâ€œä»Šå¤©å¤©æ°”ä¸é”™ï¼Ÿâ€",
                    desc: "è¯•å›¾æ´»è·ƒæ°”æ°›",
                    effect: s => {
                        s.chars.ghost.aff -= 5;
                        printMsg("Ghost å†·å†·åœ°çœ‹äº†ä½ ä¸€çœ¼ã€‚\nâ€œä¸“æ³¨äºä½ çš„å·¥ä½œï¼Œåº—ä¸»ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ç©ºæ°”çªç„¶å®‰é™ï¼Œå°´å°¬å¾—ä»¤äººçª’æ¯ã€‚"
                }
            ]
        },

// [Ghost] è´Ÿå¥½æ„Ÿ 1ï¼šæªå£ä¸‹çš„è­¦å‘Š
        {
            text: "ä»Šå¤©Ghostæ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·æ”¶èµ·æ­¦å™¨ï¼Œè€Œæ˜¯å§‹ç»ˆä¿æŒä½å§¿æ€è­¦æˆ’ï¼Œæ‰‹æŒ‡æ­åœ¨æ‰³æœºä¸Šã€‚\nâ€œåˆ«åšå¤šä½™çš„äº‹ã€‚â€ ä»–éš”ç€é¢ç½©å†·å†·åœ°ç›¯ç€ä½ ï¼Œâ€œæˆ‘å¯¹ä½ çš„ä¿¡ä»»å·²ç»å½’é›¶äº†ï¼Œä»»ä½•å¯ç–‘çš„åŠ¨ä½œéƒ½ä¼šè¢«è§†ä¸ºæ•Œå¯¹è¡Œä¸ºã€‚â€",
            speaker: "Ghost",
            type: "alert",
            condition: s => s.chars.ghost.aff < 0,
            options: [
                {
                    text: "ä¿æŒæ²‰é»˜ï¼Œå°å¿ƒæœåŠ¡",
                    desc: "é¿å…æ¿€æ€’ä»–",
                    result: "Ghost æ‹¿äº†ä¸œè¥¿å°±èµ°ï¼Œå…¨ç¨‹æ²¡æœ‰èƒŒå¯¹ç€ä½ ï¼Œä¸´èµ°å‰ä»–ç•™ä¸‹äº†ä¸€å¥å†°å†·çš„è­¦å‘Šï¼šâ€œæœ€å¥½åˆ«è®©æˆ‘å‘ç°ä½ åœ¨æé¬¼ã€‚â€"
                },
                {
                    text: "æŠ—è®®ï¼šâ€œä½ åœ¨å“å”¬æˆ‘çš„å®¢äººï¼â€",
                    desc: "ç”±äºå¥½æ„Ÿè¿‡ä½ï¼Œè¿™å¾ˆå±é™©",
                    effect: s => {
                        s.chars.ghost.aff -= 15;
                        s.rating = Math.max(1.0, s.rating - 0.5);
                        printMsg("Ghost çŒ›åœ°å°†æªå£æŠ¬èµ·å¯¹å‡†äº†æŸœå°æ—çš„èŠ±ç“¶ï¼Œ*ç °*çš„ä¸€å£°å°†å…¶æ‰“å¾—ç²‰ç¢ã€‚\nâ€œè¿™æ˜¯æœ€åä¸€æ¬¡è­¦å‘Šã€‚â€", 'alert');
                    },
                    result: "åº—é‡Œçš„å®¢äººéƒ½è¢«å“è·‘äº†ï¼Œä½ æŸå¤±äº†å£°èª‰ã€‚"
                }
            ]
        },

        // [Ghost] è´Ÿå¥½æ„Ÿ 2ï¼šæƒ…æŠ¥å°é”
        {
            text: "ä½ è¯•å›¾å‘ Ghost æ‰“å¬æœ€è¿‘çš„ä¸€æ¡å®‰å…¨è·¯çº¿ï¼Œä½†ä»–ç›´æ¥ç”Ÿç¡¬åœ°æ‰“æ–­äº†ä½ ã€‚\nâ€œæƒ…æŠ¥æ˜¯ç»™ç›Ÿå‹çš„â€ ä»–ä¸Šä¸‹æ‰“é‡äº†ä½ ä¸€çœ¼ï¼Œçœ¼ç¥é‡Œå……æ»¡äº†å®¡è§†ï¼Œâ€œä½ åªæ˜¯ä¸ªä¸å¯é çš„å˜é‡æˆ–è€…æ˜¯æ½œåœ¨çš„æ³„å¯†è€…ï¼Œç¦»æˆ‘è¿œç‚¹ã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            condition: s => s.chars.ghost.aff < 0,
            options: [
                {
                    text: "è¯•å›¾è§£é‡Š",
                    desc: "ä½†ä»–ä¸æƒ³å¬",
                    result: "Ghost ç›´æ¥å…³é—­äº†æ— çº¿ç”µæ¥æ”¶å™¨ï¼Œè½¬èº«ç¦»å¼€ï¼Œç”šè‡³ä¸æ„¿æ„å¤šå¬ä½ ä¸€ä¸ªå­—ã€‚"
                }
            ]
        },

// [Ghost] éæ‹çˆ±ï¼šæ— çº¿ç”µé™é»˜
        {
            text: "Ghost ç«™åœ¨æŸœå°å‰è°ƒè¯•ä»–çš„æ— çº¿ç”µï¼Œé‚£ç©æ„å„¿å‘å‡ºåˆºè€³çš„ç”µæµå£°ï¼Œä»–çœ‹èµ·æ¥å¹¶æ²¡æœ‰è¦ä¹°ä¸œè¥¿çš„æ„æ€ï¼Œåªæ˜¯æŠŠä½ è¿™é‡Œå½“æˆäº†ä¸´æ—¶çš„ä¿¡å·ä¸­ç»§ç‚¹ã€‚\nå½“ä½ è¯•å›¾æ­è¯æ—¶ï¼Œä»–ç«–èµ·ä¸€æ ¹æ‰‹æŒ‡æŠµåœ¨é¢ç½©å˜´éƒ¨çš„ä½ç½®ã€‚\nâ€œå˜˜ï¼Œæˆ‘åœ¨å·¥ä½œã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            // åªæœ‰æœªæ‹çˆ±æ—¶ï¼Œä»–æ‰ä¼šè¿™ä¹ˆå†·æ·¡
            condition: s => !s.chars.ghost.dating, 
            options: [
                {
                    text: "å®‰é™åœ°ç»™ä»–å€’æ¯æ°´",
                    desc: "è¯†è¶£",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        printMsg("Ghost ç¥äº†ä¸€çœ¼é‚£æ¯æ°´ï¼Œæ²¡æœ‰å–ï¼Œä½†åœ¨ç¦»å¼€æ—¶ç‚¹äº†ç‚¹å¤´ã€‚â€œè°¢äº†ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–æ²¡ä»˜é’±ï¼Œä½†è¿™ç§â€œä¸æ‰“æ‰°â€ä¼¼ä¹èµ¢å¾—äº†ä¸€ç‚¹å¥½æ„Ÿã€‚"
                },
                {
                    text: "â€œè¦ä¹ˆä¹°ä¸œè¥¿ï¼Œè¦ä¹ˆå‡ºå»ã€‚â€",
                    desc: "è¿™é‡Œæ˜¯å•†åº—",
                    effect: s => {
                        s.chars.ghost.aff -= 5;
                    },
                    result: "Ghost æ”¶èµ·è®¾å¤‡ï¼Œå†·å†·åœ°çœ‹äº†ä½ ä¸€çœ¼ã€‚â€œè¡Œã€‚â€ ä»–è½¬èº«æ¶ˆå¤±åœ¨é—¨å£ã€‚"
                }
            ]
        }, 
        // [Ghost] éæ‹çˆ±ï¼šé¢ç½©çš„è·ç¦»
        {
            text: "ä½ å‘ç° Ghost æ­£åœ¨ç›¯ç€è´§æ¶ä¸Šçš„ä¸€ä¸ªéª·é«…é¢ç½©æŒ‚ä»¶å‘å‘†ï¼Œå½“ä½ èµ°è¿‘æ—¶ï¼Œä»–ç«‹åˆ»ç§»å¼€äº†è§†çº¿ï¼Œæ¢å¤äº†é‚£ç§ä¸å¯æ¥è¿‘çš„é˜²å¾¡å§¿æ€ã€‚\nâ€œåªæ˜¯åœ¨è¯„ä¼°ä¼ªè£…çš„æœ‰æ•ˆæ€§ã€‚â€ ä»–ç”Ÿç¡¬åœ°è§£é‡Šé“ã€‚",
            speaker: "Ghost",
            type: "dialogue",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "â€œä½ å¤©å¤©æˆ´ç€é¢ç½©... ä¸çƒ­å—ï¼Ÿâ€",
                    desc: "ä½œæ­»æé—®",
                    effect: s => {
                        s.chars.ghost.aff -= 10;
                        printMsg("â€œä¸ä½ æ— å…³ã€‚â€ Ghost çš„å£°éŸ³å¬ä¸å‡ºä»»ä½•æƒ…ç»ªï¼Œâ€œåˆ«é—®è ¢é—®é¢˜ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "æ°”æ°›ç¬é—´é™åˆ°äº†å†°ç‚¹ã€‚"
                },
                {
                    text: "å‡è£…æ²¡çœ‹è§ï¼Œç»§ç»­å¹²æ´»",
                    desc: "ä¿æŒä¸“ä¸šè·ç¦»",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                    },
                    result: "Ghost ä¼¼ä¹æ¾äº†å£æ°”ï¼Œå¯¹äºç°åœ¨çš„ä»–æ¥è¯´è¢«æ— è§†åè€Œæ˜¯ä¸€ç§å°Šé‡ã€‚"
                }
            ]
        },

// [Ghost] çº¯çˆ±é™å®šï¼šåˆ©åˆƒä¸ä¿¡ä»» (åˆ®èƒ¡å­)
        {
            text: "æ¸…æ™¨ï¼ŒGhost ååœ¨æµ´å®¤çš„å‡³å­ä¸Šï¼Œè„¸ä¸Šæ¶‚æ»¡äº†å‰ƒé¡»æ³¡æ²«ï¼Œä»–æŠŠé‚£æŠŠé”‹åˆ©çš„åŒ•é¦–é€’ç»™ä½ ã€‚\nâ€œæˆ‘çš„å‰ƒé¡»åˆ€åäº†ã€‚â€ ä»–ä»°èµ·å¤´ï¼Œéœ²å‡ºäº†æå…¶è„†å¼±çš„é¢ˆéƒ¨åŠ¨è„‰ï¼Œâ€œä½ æ¥å¸®æˆ‘ã€‚â€\nè¿™æ˜¯ä¸€ä¸ªå°†æ€§å‘½å®Œå…¨äº¤ä»˜ç»™ä½ çš„å§¿æ€ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && s.chars.ghost.aff > 800,
            options: [
                {
                    text: "å°å¿ƒç¿¼ç¿¼åœ°å¸®ä»–åˆ®èƒ¡å­",
                    desc: "æè‡´çš„ä¿¡ä»» (AP+1)",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        s.chars.ghost.aff += 5;
                        printMsg("é”‹åˆ©çš„åˆ€åˆƒæ»‘è¿‡ä»–çš„çš®è‚¤ï¼Œä¸ä»…æ²¡æœ‰ä¼¤åˆ°ä»–ï¼Œåè€Œè®©ä»–èˆ’æœåœ°çœ¯èµ·äº†çœ¼ç›ã€‚\næ¸…ç†å¹²å‡€åï¼Œä»–æŠ“ä½ä½ çš„æ‰‹è…•ï¼Œåœ¨ä½ çš„æŒå¿ƒè½ä¸‹äº†ä¸€å»ã€‚\nâ€œåªæœ‰ä½ èƒ½æŠŠåˆ€æ¶åœ¨æˆ‘çš„è„–å­ä¸Šã€‚â€", 'event');
                    },
                    result: "æµ´å®¤é‡Œå¼¥æ¼«ç€é¡»åæ°´æ¸…å†½çš„é¦™æ°”ï¼Œä½ ä»¬æ˜¯ç”Ÿæ­»ç›¸ä¾çš„ä¼´ä¾£ã€‚"
                },
                {
                    text: "åœ¨ä»–è„¸ä¸ŠæŠ¹ä¸€å›¢æ³¡æ²«",
                    desc: "è°ƒçš®ä¸€ä¸‹",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "Ghost æ— å¥ˆåœ°å¹äº†å£æ°”ï¼Œç”¨é¼»å°–è¹­äº†è¹­ä½ çš„è„¸ï¼ŒæŠŠæ³¡æ²«ä¹Ÿè¹­åˆ°äº†ä½ è„¸ä¸Šã€‚â€œè°ƒçš®ã€‚â€"
                }
            ]
        },


// [Ghost] ç»ˆæå‰§æƒ… 2ï¼šå¤œè§†ä»ªä¸‹çš„ç§˜å¯† (å”¯ä¸€)
        {
            text: "åœç”µçš„æ·±å¤œï¼Œä¼¸æ‰‹ä¸è§äº”æŒ‡ã€‚ä½ æ­£æ‘¸ç´¢ç€å¯»æ‰¾æ‰‹ç”µç­’ï¼Œæ‰‹è…•å´è¢«ä¸€åªæˆ´ç€æˆ˜æœ¯æ‰‹å¥—çš„æ‰‹æ‰£ä½æŒ‰åœ¨äº†å¢™ä¸Šã€‚\nGhost çš„å£°éŸ³åœ¨é»‘æš—ä¸­å“èµ·ï¼Œå¸¦ç€ä¸€ä¸æˆè°‘ï¼šâ€œåˆ«å¼€ç¯... æˆ‘èƒ½çœ‹æ¸…ä½ ç°åœ¨çš„æ¯ä¸€ä¸ªè¡¨æƒ…ã€‚â€\né»‘æš—ä¸­ï¼Œå¸ƒæ–™æ‘©æ“¦çš„å£°éŸ³æ ¼å¤–æ¸…æ™°ï¼Œä½ çŸ¥é“ä»–åœ¨çœ‹ç€ä½ ï¼Œçœ‹ç€ä½ å› æœªçŸ¥çš„è§¦ç¢°è€Œé¢¤æ —ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // éœ€é…ç½®æ–° flag: ghost_high_event_2
            condition: s => s.chars.ghost.dating && s.chars.ghost.aff > 1000 && !s.flags.ghost_high_event_2,
            options: [
                {
                    text: "é¡ºå…¶è‡ªç„¶",
                    desc: "è®©ä»–æ¥å†³å®š...",
                    effect: s => {
                        s.flags.ghost_high_event_2 = true;
                        s.chars.ghost.aff += 20;
                        s.ap = 0;
                        printMsg("å†°å‡‰çš„æˆ˜æœ¯æ‰‹å¥—åˆ’è¿‡æ¸©çƒ­çš„çš®è‚¤ï¼Œæ¿€èµ·ä¸€é˜µç”µæµã€‚\nâ€œè„¸çº¢äº†ï¼Œ {PLAYER}ã€‚â€ ä»–ä½ç¬‘ç€å’¬ä½ä½ çš„è€³å‚ï¼Œâ€œæ€ä¹ˆè¿™ä¹ˆçƒ«ï¼Ÿ... â€", 'event');
                    },
                    result: "è¿™æ˜¯ä¸€åœºæ„Ÿå®˜è¢«å‰¥å¤ºåˆè¢«æ— é™æ”¾å¤§çš„æ¸¸æˆã€‚"
                }
            ]
        },
// [Ghost] çº¯çˆ±æ—¥å¸¸ï¼šRust 1v1 (CODæ¢—)
        {
            text: "ä½ ä¿®å¥½äº†ä¸€å°æˆ˜å‰çš„ä¸»æœºï¼Œå¹¶åœ¨ç¡¬ç›˜é‡Œæ‰¾åˆ°äº†ã€Šä½¿å‘½å¬å”¤ã€‹ï¼ŒGhost çœ‹ç€å±å¹•ä¸Šçš„ç”»é¢ï¼ŒæŒ‘äº†æŒ‘çœ‰ã€‚\nâ€œæ¨¡æ‹Ÿè®­ç»ƒï¼Ÿè™½ç„¶ç²—ç³™äº†ç‚¹... ä½†æˆ‘ä¸ä»‹æ„æ•™æ•™ä½ ä»€ä¹ˆå«çœŸæ­£çš„ CQBã€‚â€\nä»–é€’ç»™ä½ ä¸€ä¸ªæ‰‹æŸ„ï¼Œçœ¼ç¥é‡Œå¸¦ç€èƒœè´Ÿæ¬²ï¼šâ€œ1v1ï¼ŒRust åœ°å›¾ï¼Œåªè®¸ç”¨ç‹™ï¼Œè¾“çš„äººæ´—ä¸€å‘¨ç¢—ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s),
            options: [
                {
                    text: "å…¨åŠ›ä»¥èµ´ï¼šâ€œè¾“äº†åˆ«å“­é¼»å­ï¼â€",
                    desc: "å’Œä»–ç¡¬åˆš",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Ghost åœ¨æ¸¸æˆä¸­æŠŠä½ è™å¾—ä½“æ— å®Œè‚¤ï¼Œä½†ä»–æ˜¾ç„¶æ”¾æ°´äº†æœ€åä¸€ä¸ªäººå¤´ã€‚\nâ€œååº”ä¸é”™ï¼Œä½†æ©ä½“æ„è¯†å¤ªå·®ã€‚â€ ä»–æ”¾ä¸‹æ‰‹æŸ„ï¼ŒæŠŠä½ æ‹‰è¿‡æ¥æŒ‰åœ¨è…¿ä¸Šï¼Œâ€œä½œä¸ºæƒ©ç½š... æ´—ç¢—è¿™å‘¨å…äº†ï¼Œæ¢åˆ«çš„ã€‚â€", 'event');
                    },
                    result: "æ¸¸æˆç»“æŸäº†ï¼Œä½†å¦ä¸€ç§è¿åŠ¨å¼€å§‹äº†ã€‚"
                },
                {
                    text: "èµ–çš®ï¼šå¹²æ‰°ä»–çš„æ“ä½œ",
                    desc: "å‡‘è¿‡å»äº²ä»–ä¸€å£",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "â€œä½œå¼Šã€‚â€ Ghost å˜´è§’ä¸Šæ‰¬ï¼Œç›´æ¥æ‰”æ‰æ‰‹æŸ„æŠŠä½ å‹åœ¨æ²™å‘ä¸Šï¼Œâ€œæ—¢ç„¶ä½ ä¸æƒ³ç©æ¸¸æˆï¼Œé‚£æˆ‘ä»¬ç©ç‚¹åˆ«çš„ã€‚â€"
                }
            ]
        },

        // [Ghost] çº¯çˆ±æ—¥å¸¸ï¼šä¸šä½™çš„æ€æ‰‹ (ææ€–ç‰‡)
        {
            text: "ä½ ä»¬çªåœ¨æ²™å‘ä¸Šçš„ä¸€æ¡æ¯¯å­é‡Œçœ‹ä¸€éƒ¨åä¸ºã€Šä¸‡åœ£èŠ‚ã€‹çš„ææ€–ç‰‡ï¼Œå±å¹•ä¸Šçš„è’™é¢æ€æ‰‹æ­£åœ¨ç¬¨æ‹™åœ°è¿½æ€å—å®³è€…ã€‚\nGhost ä¸€è¾¹åƒç€ä½ å–‚çš„çˆ†ç±³èŠ±ï¼Œä¸€è¾¹å‘å‡ºä¸€å£°å†·å“¼ã€‚\nâ€œè„šæ­¥å£°å¤ªé‡ï¼ŒæŒ¥åˆ€è½¨è¿¹å¤šä½™...å…¸å‹çš„ä¸šä½™æ°´å¹³ï¼Œå¦‚æœæ˜¯æˆ‘ï¼Œè¿™ç¾¤äººæ´»ä¸è¿‡ç‰‡å¤´æ›²ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s),
            options: [
                {
                    text: "å¾€ä»–æ€€é‡Œé’»ï¼šâ€œå¯æ˜¯å¾ˆå“äººå•Šï¼â€",
                    desc: "å¯»æ±‚ä¿æŠ¤",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        printMsg("Ghost é¡ºåŠ¿æŠŠä½ æ‚ç´§ï¼Œä½ä½åœ°ç¬‘äº†ã€‚\nâ€œåˆ«è£…äº†ï¼Œé‚£ç§ä½çº§è´§è‰²é è¿‘ä¸äº†ä½ ä¸‰ç±³ä¹‹å†…ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "æœ‰ä»–åœ¨ï¼Œææ€–ç‰‡å˜æˆäº†å–œå‰§ç‰‡ã€‚"
                },
                {
                    text: "æ‚ä½ä»–çš„å˜´ï¼šâ€œé—­å˜´ï¼Œçœ‹ç”µå½±ï¼â€",
                    desc: "ç¦æ­¢å‰§é€å¼è§£è¯´",
                    result: "Ghost æŒ‘çœ‰ï¼ŒèˆŒå¤´èˆ”äº†ä¸€ä¸‹ä½ çš„æ‰‹å¿ƒï¼Œä½ åƒè§¦ç”µä¸€æ ·ç¼©å›æ‰‹ï¼Œä»–å¾—é€åœ°ç¬‘äº†ã€‚"
                }
            ]
        },

// [Ghost] ç»ˆæå‰§æƒ…ï¼šå‘¼å¸æƒ (å”¯ä¸€)
        {
            text: "Ghost æŠŠä½ å‹åœ¨æ›´è¡£å®¤çš„å‚¨ç‰©æŸœä¸Šï¼Œä½†ä»–æ²¡æœ‰æˆ´é¢ç½©ã€‚\né‚£å¼ å¸ƒæ»¡ç»†å°ä¼¤ç—•çš„è„¸åºæ¯«æ— ä¿ç•™åœ°æš´éœ²åœ¨ä½ é¢å‰ï¼Œçœ¼ç¥æ·±é‚ƒåˆç‚½çƒ­ã€‚\nâ€œåœ¨æˆ˜åœºä¸Šï¼Œæˆ‘å±ä½å‘¼å¸æ˜¯ä¸ºäº†ç”Ÿå­˜ã€‚â€ ä»–ä½ä¸‹å¤´ï¼Œæ»šçƒ«çš„å˜´å”‡è´´ç€ä½ çš„è€³å»“ï¼Œâ€œä½†åœ¨è¿™é‡Œ...ä½ å°±æ˜¯æˆ‘çš„æ°§æ°”ã€‚â€\nä»–å»äº†ä¸‹æ¥ï¼Œæ€¥åˆ‡åˆæ·±å…¥ï¼Œä»¿ä½›è¦å¤ºèµ°ä½ è‚ºé‡Œçš„æ¯ä¸€ä¸ç©ºæ°”ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + å¥½æ„Ÿ>500 + æœªè§¦å‘è¿‡
            condition: s => s.chars.ghost.dating && s.chars.ghost.aff > 500 && !s.flags.ghost_high_event,
            options: [
                {
                    text: "å›å»ä»–ï¼Œç›´åˆ°çª’æ¯",
                    desc: "æ²‰æ²¦åœ¨å½¼æ­¤çš„æ°”æ¯ä¸­",
                    effect: s => {
                        s.flags.ghost_high_event = true; // é”æ­»ï¼Œä¸å†è§¦å‘
                        s.chars.ghost.aff += 20;
                        s.ap = 0; // å½»åº•è€—å°½ä½“åŠ›
                        printMsg("ä½ ä»¬åœ¨ç¼ºæ°§çš„çœ©æ™•ä¸­çº ç¼ ï¼Œç›´åˆ°å½¼æ­¤éƒ½å°åˆ°äº†é“é”ˆå‘³ã€‚\nGhost æ°”å–˜åååœ°æŠµç€ä½ çš„é¢å¤´ï¼Œæ‹‡æŒ‡æ‘©æŒ²ç€ä½ çº¢è‚¿çš„å˜´å”‡ï¼šâ€œ...å†æ¥ä¸€æ¬¡ã€‚â€", 'event');
                    },
                    result: "è¿™ä¸€åˆ»ï¼Œä»–ä¸å†æ˜¯å¹½çµï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ºä½ ç–¯ç‹‚çš„ç”·äººã€‚"
                }
            ]
        },

// [Ghost] æ—¥å¸¸ï¼šæ­¦å™¨æ£€æŸ¥ (éæ‹çˆ±)
        {
            text: "Ghost ç«™åœ¨æŸœå°å‰ï¼Œçœ¼ç¥æ‰«è¿‡ä½ æ”¾åœ¨æ‰‹è¾¹çš„é˜²èº«æ‰‹æªã€‚\nâ€œä¿é™©æ²¡å…³å¥½ï¼Œå¦‚æœæˆ‘æ˜¯æ•Œäººï¼Œä½ ç°åœ¨å·²ç»æ­»äº†ã€‚â€ ä»–ä¼¸å‡ºæˆ´ç€æ‰‹å¥—çš„æ‰‹ï¼Œå’”å“’ä¸€å£°å¸®ä½ å…³ä¸Šäº†ä¿é™©ã€‚",
            speaker: "Ghost",
            type: "dialogue",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "è™šå¿ƒæ¥å—ï¼šâ€œè°¢è°¢æé†’â€",
                    desc: "æ„Ÿè°¢ä»–çš„ä¸“ä¸š",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        printMsg("â€œä¿æŒè­¦æƒ•ï¼Œè¿™é‡Œæ²¡æœ‰ç¬¬äºŒæ¬¡æœºä¼šã€‚â€ ä»–å†·å†·åœ°è¯´é“ï¼Œä½†è¯­æ°”ç¼“å’Œäº†ä¸€äº›ã€‚", 'dialogue', 'Ghost');
                    },
                    result: "è™½ç„¶ä»–å¾ˆä¸¥å‰ï¼Œä½†è¿™æ˜¯ä¸€ç§å˜ç›¸çš„ä¿æŠ¤ã€‚"
                },
                {
                    text: "åé©³ï¼šâ€œæˆ‘ååº”å¾ˆå¿«çš„â€",
                    desc: "æœ‰äº›ä¸æœæ°”",
                    effect: s => {
                        s.chars.ghost.aff -= 10;
                    },
                    result: "Ghost æ‘‡äº†æ‘‡å¤´ï¼Œæ²¡å†è¯´è¯ï¼Œçœ¼ç¥é‡Œå†™ç€â€˜èœé¸Ÿâ€™ä¸¤ä¸ªå­—ã€‚"
                }
            ]
        }, // <--- é€—å·

// [Ghost] æ—¥å¸¸ï¼šä¸“ä¸šæ¸…ç† (éæ‹çˆ±)
        {
            text: "ä»Šå¤©Ghost å¹¶æ²¡æœ‰ç©¿å…¨å¥—ä½œæˆ˜æœï¼Œè€Œæ˜¯ç©¿ç€ä¾¿è¡£ï¼ˆè™½ç„¶è¿˜æ˜¯æˆ´ç€é¢ç½©ï¼‰ï¼Œä»–å¾„ç›´èµ°å‘æ¸…æ´ç”¨å“åŒºï¼Œæ‹¿äº†ä¸‰ç“¶å¼ºåŠ›æ¼‚ç™½å‰‚ã€ä¸€å·åŠ åšåƒåœ¾è¢‹å’Œä¸€æŠŠé“²å­ã€‚\nä»–æŠŠä¸œè¥¿æ”¾åœ¨æŸœå°ä¸Šï¼Œä»€ä¹ˆä¹Ÿæ²¡è¯´ã€‚",
            speaker: "Ghost",
            type: "event",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "ç»“è´¦ï¼Œä»€ä¹ˆéƒ½ä¸é—®",
                    desc: "æ‡‚è§„çŸ©",
                    effect: s => {
                        s.money += 50;
                        s.chars.ghost.aff += 2;
                        printMsg("â€œå¾ˆå¥½ã€‚â€ ä»–æ‰”ä¸‹é’±", 'dialogue', 'Ghost');
                    },
                    result: "ä»–æç€è¿™äº›æ˜æ˜¾æ˜¯ç”¨æ¥å¤„ç†å°¸ä½“çš„å·¥å…·èµ°äº†ï¼Œè¿™å°±æ˜¯åºŸåœŸçš„æ—¥å¸¸ã€‚"
                },
                {
                    text: "å¤šå˜´ï¼šâ€œåå··çš„è¡€è¿¹æ˜¯ä½ å¼„çš„ï¼Ÿâ€",
                    desc: "ä½œæ­»",
                    effect: s => {
                        s.chars.ghost.aff -= 5;
                        printMsg("Ghost æ…¢æ¡æ–¯ç†çš„çœ‹äº†ä½ ä¸€çœ¼â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–æ²¡ä¹°ä¸œè¥¿å°±ç›´æ¥èµ°äº†ï¼Œä½ æ„Ÿè§‰è‡ªå·±åˆšåˆšåœ¨é¬¼é—¨å…³è½¬äº†ä¸€åœˆã€‚"
                }
            ]
        },

        // [Ghost] æ—¥å¸¸ï¼šå€Ÿç”¨è§†é‡ (éæ‹çˆ±)
        {
            text: "ä½ æ­£å‡†å¤‡å…³çª—ï¼Œä¸€åªå¸¦ç€æˆ˜æœ¯æ‰‹å¥—çš„æ‰‹æŒ¡ä½äº†çª—æ¡†ã€‚\nGhost å¹¶æ²¡æœ‰è¿›æ¥ï¼Œä»–åªæ˜¯ç«™åœ¨çª—å¤–ï¼ŒæŠŠè¿™é‡Œå½“æˆäº†ä¸€ä¸ªä¸´æ—¶çš„æ©ä½“ï¼Œç”¨æœ›è¿œé•œè§‚å¯Ÿç€å¯¹é¢çš„è¡—é“ã€‚\nâ€œåˆ«å…³çª—ï¼Œå€Ÿç”¨äº”åˆ†é’Ÿã€‚â€",
            speaker: "Ghost",
            type: "event",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "é€€åï¼Œè®©ä»–å·¥ä½œ",
                    desc: "æä¾›æ–¹ä¾¿",
                    effect: s => {
                        s.rep_141 += 2;
                    },
                    result: "äº”åˆ†é’Ÿåï¼Œè¿œå¤„ä¼ æ¥ä¸€å£°æªå“ï¼ŒGhost æ”¶èµ·æœ›è¿œé•œï¼šâ€œç›®æ ‡æ¸…é™¤ï¼Œæ‰“æ‰°äº†ã€‚â€ ç„¶åæ¶ˆå¤±åœ¨å¤œè‰²ä¸­ã€‚"
                },
                {
                    text: "ä¼¸æ‰‹è¦åœºåœ°è´¹",
                    desc: "åœ¨å•†è¨€å•†",
                    effect: s => {
                        s.money += 20;
                        s.chars.ghost.aff -= 5; // ä»–è§‰å¾—ä½ å¤ªè´ªè´¢
                    },
                    result: "ä»–å•§äº†ä¸€å£°ï¼Œä»å£è¢‹é‡Œæå‡ºä¸€æšç¡¬å¸å¼¹è¿›ä½ æ€€é‡Œã€‚"
                }
            ]
        },

        // [Ghost] æ—¥å¸¸ï¼šé€Ÿæº¶å’–å•¡ (éæ‹çˆ±)
        {
            text: "Ghost é åœ¨é—¨å£å–ç€è‡ªå·±çš„é€Ÿæº¶å’–å•¡ï¼Œé¢ç½©æ‹‰åˆ°äº†é¼»æ¢å¤„ï¼Œä»–çœ‹èµ·æ¥å¹¶ä¸æƒ³ä¹°ä¸œè¥¿ä¹Ÿä¸æƒ³èŠå¤©ï¼Œåªæ˜¯åœ¨å€Ÿä½ çš„å±‹æªäº«å—ç‰‡åˆ»çš„å®é™ã€‚",
            speaker: "Ghost",
            type: "event",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€å—å‹ç¼©é¥¼å¹²",
                    desc: "æ­é…å’–å•¡ (-1 Food)",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.ghost.aff += 2;
                        printMsg("ä»–çœ‹äº†ä¸€çœ¼é¥¼å¹²ï¼Œæ¥äº†è¿‡æ¥ã€‚â€œ...è°¢äº†ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–ä¸‰ä¸¤å£åƒå®Œäº†é¥¼å¹²ï¼Œé‡æ–°æ‹‰å¥½äº†é¢ç½©ï¼Œå‘ä½ ç‚¹ç‚¹å¤´ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "ä¸å»æ‰“æ‰°ä»–",
                    desc: "ä¿æŒè·ç¦»",
                    result: "ä»–å–å®Œå’–å•¡ï¼Œåƒå¹½çµä¸€æ ·æ— å£°æ— æ¯åœ°æ¶ˆå¤±åœ¨è¡—é“ä¸Šã€‚"
                }
            ]
        }, // <--- é€—å·

        // [Ghost] æ—¥å¸¸ï¼šæ— çº¿ç”µæ£€æŸ¥ (éæ‹çˆ±)
        {
            text: "â€œä½ çš„æ— çº¿ç”µé¢‘æ®µè¢«ç›‘å¬äº†ã€‚â€ Ghost èµ°è¿›åº—é‡Œï¼Œç›´æ¥ä¼¸æ‰‹æŠŠä½ çš„æ”¶éŸ³æœºè°ƒåˆ°äº†å¦ä¸€ä¸ªé¢‘ç‡ã€‚\nâ€œä»¥åç”¨è¿™ä¸ªé¢‘é“ï¼Œåˆ«è®© Shadow Company å¬è§ä½ åœ¨å–ä»€ä¹ˆã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            condition: s => !s.chars.ghost.dating,
            options: [
                {
                    text: "é“è°¢å¹¶è®°å½•é¢‘é“",
                    desc: "æ‰¿è’™å…³ç…§",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        s.rep_141 += 2;
                    },
                    result: "â€œä¸¾æ‰‹ä¹‹åŠ³ã€‚â€ ä»–å…¬äº‹å…¬åŠåœ°è¯´é“ï¼Œä½†è¿™æ˜¾ç„¶æ˜¯ä¸ªç§äººé¢‘é“ã€‚"
                }
            ]
        }, // <--- é€—å·


            // --- æ‹çˆ±åä¸“å±äº‹ä»¶ (éœ€ dating: true) ---

            // æ‹çˆ±äº‹ä»¶ 1ï¼šå·´æ‹‰å…‹æ‹‰ç“¦ä¸‹çš„æ—©æ™¨
            {
                text: "æ¸…æ™¨çš„é›¾æ°”è¿˜æ²¡æ•£å»ï¼Œåº—é—¨å°±è¢«è½»è½»æ•²å“ï¼ŒGhost æç€ä¸¤æ¯çƒ­å’–å•¡ç«™åœ¨å¤–é¢ã€‚\nä»–ç†Ÿç»ƒåœ°åé”äº†åº—é—¨ï¼Œå°†ç™¾å¶çª—æ‹‰ä¸‹ä¸€åŠï¼Œåˆ›é€ å‡ºä¸€ä¸ªç§å¯†çš„ç©ºé—´ã€‚\nâ€œåˆšæ³¡å¥½çš„ï¼ŒåŠ äº†ä½ å–œæ¬¢çš„ç³–é‡ã€‚â€ ä»–èµ°åˆ°ä½ é¢å‰ï¼Œå¾®å¾®ä¸Šæ¨äº†å·´æ‹‰å…‹æ‹‰ç“¦é¢ç½©çš„ä¸‹æ²¿ï¼Œéœ²å‡ºäº†ä¸‹é¢Œå’Œå˜´å”‡ã€‚",
                speaker: "Simon 'Ghost' Riley",
                type: "dialogue",
                condition: s => s.chars.ghost.dating,
                options: [
                    {
                        text: "å»ä»–éœ²å‡ºçš„å˜´è§’",
                        desc: "æ—©å®‰å» (æ¢å¤ 2 AP)",
                        effect: s => {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                            s.chars.ghost.aff += 5;
                            printMsg("Ghost çš„åŠ¨ä½œåœé¡¿äº†ä¸€ç§’ï¼Œéšå³åŠ æ·±äº†è¿™ä¸ªå¸¦æœ‰å’–å•¡è‹¦é¦™å‘³çš„å»ã€‚\nâ€œ...è¿™ç§é†’ç¥æ–¹å¼æ¯”å’–å•¡æœ‰æ•ˆå¤šäº†ã€‚â€", 'event');
                        },
                        result: "ä»–å¸®ä½ æ•´ç†äº†ä¸€ä¸‹è¡£é¢†ï¼Œçœ¼ç¥é‡Œå¸¦ç€éš¾å¾—çš„ç¬‘æ„ã€‚"
                    },
                    {
                        text: "æ¥è¿‡å’–å•¡é“è°¢",
                        desc: "æ¸©é¦¨çš„æ—©é¤æ—¶é—´",
                        effect: s => {
                            s.ap += 1;
                        },
                        result: "ä½ ä»¬å¹¶è‚©é åœ¨æŸœå°è¾¹å–å®Œäº†å’–å•¡ã€‚è™½ç„¶å¤–é¢æˆ˜ç«çº·é£ï¼Œä½†æ­¤åˆ»è¿™é‡Œå¾ˆå®‰é™ã€‚"
                    }
                ]
            }, // <--- é€—å·

// [Ghost] è¯¯ä¼šåˆ†æ‰‹å±æœº
        {
            text: "Ghost æŠŠå‡ å¼ æ¨¡ç³Šçš„ç…§ç‰‡æ‘”åœ¨æŸœå°ä¸Šã€‚ç…§ç‰‡é‡Œæ˜¯ä½ æ˜¨æ™šå’Œä¸€ä¸ª Shadow Company çš„å†›å®˜åœ¨æš—å··é‡Œâ€œäº¤æ¢ç‰©å“â€ï¼ˆå…¶å®åªæ˜¯ä¹°çƒŸï¼‰ã€‚\nâ€œè§£é‡Šã€‚â€ ä»–çš„å£°éŸ³å†°å†·ï¼Œèº«ä½“ç´§ç»·ï¼Œâ€œä½ æ˜¯åœ¨å–è´§... è¿˜æ˜¯åœ¨å–æˆ‘çš„æ¶ˆæ¯ï¼Ÿâ€\nä»–ä¼¼ä¹æ˜¯PTSDçŠ¯äº†ï¼Œçœ¼é‡Œçš„ä¿¡ä»»æ­£åœ¨å´©å¡Œï¼Œå˜æˆäº†ä½ æœ€å®³æ€•çš„é™Œç”Ÿå’Œæ€æ„ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "alert",
// âœ… ä¿®æ”¹åï¼šåªæœ‰åœ¨æ‹çˆ± ä¸” æ²¡æˆä¸ºå¥³ç‹ æ—¶æ‰ä¼šåƒé†‹
condition: s => s.chars.ghost.dating && chance(15) && !s.flags.harem_queen,
            options: [
                {
                    text: "å†·é™è§£é‡Šï¼šâ€œé‚£æ˜¯æˆ‘çš„åŒé¢çº¿äººï¼Œæˆ‘åœ¨ä¸ºä½ ææƒ…æŠ¥ã€‚â€",
                    desc: "è§£é™¤è¯¯ä¼š (éœ€è¦è€å¿ƒ)",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("Ghost ç›¯ç€ä½ çš„çœ¼ç›çœ‹äº†å¾ˆä¹…ï¼Œä½†æœ€ç»ˆä»–ç§»å¼€äº†è§†çº¿ï¼Œç´§ç»·çš„è‚©è†€å¾®å¾®æ”¾æ¾ã€‚\nâ€œ...ä¸‹æ¬¡æå‰æŠ¥å¤‡ï¼Œæˆ‘ä¸å–œæ¬¢æƒŠå–œï¼Œå°¤å…¶æ˜¯ä¸å¥½çš„é‚£ç§ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "è™½ç„¶è¯¯ä¼šè§£é™¤äº†ï¼Œä½†ä»–è¿˜æ˜¯ç”šè‡³æœ‰ç‚¹åæ€•ï¼Œä»–æŠŠä½ æŠ±å¾—å¾ˆç´§ã€‚"
                },
                {
                    text: "â€œå¦‚æœä½ ä¸ä¿¡ä»»æˆ‘ï¼Œé‚£æˆ‘ä»¬å°±åˆ°æ­¤ä¸ºæ­¢ã€‚â€ (åˆ†æ‰‹)",
                    desc: "å†·æˆ˜å¹¶ç»“æŸå…³ç³»",
                    effect: s => {
                        s.chars.ghost.dating = false; // ğŸ’” åˆ†æ‰‹
                        s.chars.ghost.aff -= 100;      // å¥½æ„Ÿå¤§è·Œ
                        s.chars.ghost.confessed = false; // é‡ç½®è¡¨ç™½çŠ¶æ€ï¼ˆå…è®¸æœªæ¥è¿½å¦»ç«è‘¬åœºï¼‰
// ğŸŸ¢ æ–°å¢ï¼šè®¾ç½®åˆ†æ‰‹å½“å¤©ä¸ºâ€œæ‹’ç»æ—¥â€ï¼Œå¼€å¯ 30 å¤©å†·å´CD
                        s.chars.ghost.last_reject_day = s.day;
// ğŸŸ¢ æ–°å¢ï¼šæ ‡è®°ä¸ºå‰ä»»
                                 s.chars.ghost.is_ex = true;
                        printMsg("Ghost çš„çœ¼ç¥å½»åº•å†·äº†ä¸‹å»ï¼Œä»–æ”¶å›ç…§ç‰‡ï¼Œè½¬èº«ç¦»å¼€ï¼Œæ²¡æœ‰å›å¤´ã€‚\nâ€œæ”¶åˆ°ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ã€å…³ç³»ç»“æŸã€‘ä»–èµ°äº†ã€‚ä½ ä»¬å˜å›äº†æœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäººã€‚"
                }
            ]
        },

// [Ghost] åˆ†æ‰‹åï¼šç†Ÿæ‚‰çš„çƒŸè‰å‘³
        {
            text: "Ghost æ¨é—¨è€Œå…¥ï¼Œä½ ä¸‹æ„è¯†åƒå¾€å¸¸ä¸€æ ·æ‹¿å‡ºäº†ä»–å–œæ¬¢çš„çº¢èŒ¶ï¼Œä½†ä»–æ²¡æœ‰æ¥ã€‚\nä»–åªæ˜¯æ·¡æ·¡çš„åœ°æ‰«äº†ä¸€çœ¼é‚£æ¯èŒ¶ï¼Œå°†å‡ å¼ é’ç¥¨æ”¾åœ¨æŸœå°ä¸Šã€‚\nâ€œä¸€ç›’å­å¼¹ï¼Œä¸ç”¨æ‰¾äº†ã€‚â€\nä»–åˆ»æ„é¿å¼€äº†ä½ çš„è§†çº¿ï¼Œå£°éŸ³é‡Œæ²¡æœ‰ä»»ä½•æ¸©åº¦ï¼Œæ›¾ç»çš„é»˜å¥‘ä»¿ä½›ä»æœªå­˜åœ¨è¿‡ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            // ğŸ’” åˆ¤å®šï¼šæœªæ‹çˆ± + æ›¾åˆ†æ‰‹/æ‹’ç»è¿‡
// ğŸŸ¢ ä¿®æ”¹ä¸ºï¼šåªæœ‰æ˜¯â€œå‰ä»»(is_ex)â€æ‰è§¦å‘ï¼Œå•çº¯æ‹’ç»è¡¨ç™½ä¸è§¦å‘
            condition: s => !s.chars.ghost.dating && s.chars.ghost.is_ex,
            options: [
                {
                    text: "æ²‰é»˜åœ°é€’ç»™ä»–å­å¼¹",
                    desc: "ç»´æŒæœ€åçš„ä½“é¢",
                    effect: s => {
                        s.ammo = Math.max(0, s.ammo - 1);
                        // å³ä½¿åˆ†æ‰‹äº†ï¼Œä»–å†…å¿ƒæ·±å¤„è¿˜æ˜¯åœ¨æ„ï¼Œåªæ˜¯åœ¨æƒ©ç½šè‡ªå·±
                        printMsg("Ghost æŠ“èµ·å­å¼¹è½¬èº«å°±èµ°ï¼Œä½†åœ¨é—¨å£æ—¶è„šæ­¥é¡¿äº†åŠç§’ï¼Œä¼¼ä¹æ˜¯æƒ³ç‚¹è¯´ä»€ä¹ˆï¼Œä½†æœ€ç»ˆè¿˜æ˜¯æ¶ˆå¤±åœ¨äº†é›¨å¹•ä¸­ã€‚", 'event');
                    },
                    result: "èŒ¶å‡‰äº†ï¼Œç©ºæ°”é‡Œåªå‰©ä¸‹ä»–èº«ä¸Šæ·¡æ·¡çš„çƒŸè‰å‘³ã€‚"
                },
                {
                    text: "è¯•å›¾æŒ½ç•™ï¼šâ€œSimon...â€",
                    desc: "å–Šä»–çš„åå­—",
                    effect: s => {
                        s.chars.ghost.aff -= 20; // ç°åœ¨çš„ä»–å¬ä¸å¾—è¿™ä¸ªåå­—
                    },
                    result: "â€œåˆ«é‚£æ ·å«æˆ‘ã€‚â€ ä»–æ²¡æœ‰å›å¤´ï¼Œâ€œåˆ«è®©æˆ‘è¯´ç¬¬äºŒéã€‚â€"
                }
            ]
        },

     // [Ghost] æ™´å¤©æ—¥å…‰æµ´ï¼šå¤é“œè‰²å¹½çµ
        {
            text: "éš¾å¾—çš„æ™´æœ—å¤©æ°”ï¼ŒGhostæ­£èººåœ¨æŠ˜å æ¤…ä¸Šé—­ç›®å…»ç¥ï¼Œä½†ä»–ä¾ç„¶æˆ´ç€é‚£ä¸ªæ ‡å¿—æ€§çš„éª·é«…é¢ç½©ã€‚\nä½ çœ‹ç€é‚£å¼ºçƒˆçš„ç´«å¤–çº¿ï¼Œä¸ç¦å¼€å§‹æƒ³è±¡å¦‚æœå°±è¿™æ ·æ™’ä¸‹å»ï¼Œä»–è„¸ä¸Šä¼šä¸ä¼šç•™ä¸‹ä¸€ä¸ªæ»‘ç¨½çš„éª·é«…å°å­ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ±ä¸­ + æ™´å¤©
            condition: s => s.chars.ghost.dating && s.weather.name === 'æ™´æœ—',
            options: [
                {
                    text: "è¯•å›¾æ‘˜ä¸‹ä»–çš„é¢ç½©ï¼šâ€œæ™’ä¸ªå¤é“œè‰²å§ï¼â€",
                    desc: "è®©ä»–æ™’å¾—å‡åŒ€ç‚¹",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // å¿ƒæƒ…å¥½å›ä½“åŠ›
                        printMsg("Ghost æ¯«ä¸è´¹åŠ›åœ°æŠ“ä½äº†ä½ çš„æ‰‹è…•ï¼Œä»–å¹äº†å£æ°”ï¼Œæ— å¥ˆåœ°æ‘˜ä¸‹äº†é¢ç½©ã€‚\nâ€œå¦‚æœä¸å‡åŒ€ï¼Œæˆ‘å°±è¯´æ˜¯æˆ˜æœ¯è¿·å½©ï¼Œä»…æ­¤ä¸€æ¬¡ï¼Œä¸‹ä¸ä¸ºä¾‹ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "é˜³å…‰æ´’åœ¨ä»–è„¸ä¸ŠèåŒ–äº†ä»–çœ¼åº•çš„åšå†°ï¼Œè¿™æ ·æ”¾æ¾çš„ä»–çœŸå°‘è§å•Šã€‚"
                },
                {
                    text: "ç»™ä»–æˆ´ä¸Šä¸€å‰¯å¢¨é•œ",
                    desc: "é…·ç›–é£æ ¼",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                    },
                    result: "â€œå“¼ï¼Œå¤šæ­¤ä¸€ä¸¾ã€‚â€ è™½ç„¶è¿™ä¹ˆè¯´ï¼Œä½†ä»–å¹¶æ²¡æœ‰æ‘˜ä¸‹æ¥ï¼Œç°åœ¨çš„ä»–çœ‹èµ·æ¥åƒä¸ªåœ¨å¤å¨å¤·åº¦å‡çš„æ€æ‰‹ã€‚"
                }
            ]
        },

            // æ‹çˆ±äº‹ä»¶ 2ï¼šæˆ˜æœ¯æ‰‹å¥—çš„è§¦æ„Ÿ
            {
                text: "Ghost ååœ¨æŸœå°åçš„æ¤…å­ä¸Šæ£€ä¿®ä»–çš„æ— çº¿ç”µï¼Œå½“ä½ ç»è¿‡ä»–èº«è¾¹æ—¶ï¼Œä»–çªç„¶ä¼¸å‡ºå¸¦ç€æˆ˜æœ¯æ‰‹å¥—çš„æ‰‹ï¼Œæ‰£ä½ä½ çš„è…°æŠŠä½ æ‹‰å‘ä»–ã€‚\nä»–å°±è¿™æ ·æŠŠå¤´é åœ¨ä½ çš„è…¹éƒ¨ï¼Œéš”ç€å·´æ‹‰å…‹æ‹‰ç“¦é¢ç½©ï¼Œä½ èƒ½æ„Ÿå—åˆ°ä»–æ²‰é‡çš„å‘¼å¸å£°ã€‚\nâ€œåˆ«åŠ¨... ç»™æˆ‘ä¸€åˆ†é’Ÿï¼Œå¤–é¢å¤ªåµäº†ï¼Œæˆ‘éœ€è¦å……ç‚¹ç”µã€‚â€",
                speaker: "Ghost",
                type: "event",
                condition: s => s.chars.ghost.dating,
                options: [
                    {
                        text: "æŠšæ‘¸ä»–çš„å¤´",
                        desc: "å®‰æŠšä»–å§~",
                        effect: s => {
                            s.chars.ghost.aff += 3;
                            printMsg("ä»–å‘å‡ºäº†ä¸€å£°èˆ’æœçš„å–Ÿå¹ï¼Œç´§ç»·çš„è‚Œè‚‰æ…¢æ…¢æ”¾æ¾ä¸‹æ¥ã€‚\nâ€œåªæœ‰åœ¨ä½ èº«è¾¹ï¼Œæˆ‘æ‰èƒ½çœŸæ­£çŸ­æš‚çš„æ”¾æ¾ä¸‹æ¥ã€‚â€", 'dialogue', 'Ghost');
                        },
                        result: "ä»–åœ¨ä½ æ€€é‡Œé—­ç›®å…»ç¥äº†ä¸€ä¼šå„¿ï¼Œé‡æ–°ç«™èµ·æ¥æ—¶ï¼Œçœ¼ç¥åˆæ¢å¤äº†é”åˆ©ã€‚"
                    },
                    {
                        text: "è½»å£°è¯¢é—®ä»»åŠ¡æƒ…å†µ",
                        desc: "è¡¨ç¤ºå…³å¿ƒ",
                        effect: s => {
                            s.chars.ghost.aff += 2;
                        },
                        result: "â€œä»»åŠ¡å°±æ˜¯ä»»åŠ¡ï¼Œæ— è®ºå¤šçƒ‚ï¼Œåªè¦æœ€åèƒ½å›åˆ°è¿™é‡Œè§ä½ å°±å€¼å¾—ã€‚â€"
                    }
                ]
            }, // <--- é€—å·
// [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šæ—§æ—¥æ—‹å¾‹
        {
            text: "å¤œæ·±äº†ï¼ŒGhost æ­£åœ¨è°ƒè¯•é‚£å°è€æ—§çš„æ”¶éŸ³æœºï¼Œåœ¨ä¸€é˜µåˆºè€³çš„ç”µæµå£°åï¼Œä¸€æ®µæ…µæ‡’æ²™å“‘çš„çˆµå£«ä¹çªç„¶æµæ·Œå‡ºæ¥ï¼Œç«Ÿç„¶æ˜¯ä¸€é¦–è€æ­Œã€‚\nä»–åœä¸‹äº†æ‰‹é‡Œçš„åŠ¨ä½œé åœ¨æŸœå°è¾¹ï¼Œæ‰‹æŒ‡éšç€èŠ‚æ‹è½»è½»æ•²å‡»ç€æ¡Œé¢ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ±ä¸­
            condition: s => s.chars.ghost.dating,
            options: [
                {
                    text: "å‘ä»–ä¼¸å‡ºæ‰‹ï¼šâ€œèµå…‰è·³æ”¯èˆå—ï¼Œä¸­å°‰ï¼Ÿâ€",
                    desc: "æµªæ¼«æ—¶åˆ»",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); 
                        printMsg("Ghost æ„£äº†ä¸€ä¸‹ï¼Œéšå³å‘å‡ºä¸€å£°è½»ç¬‘ï¼Œä»–æ¡ä½ä½ çš„æ‰‹ï¼Œå¦ä¸€åªæ‰‹è™šæ‰¶ç€ä½ çš„è…°ã€‚\nâ€œ...å¯åˆ«è¸©æˆ‘çš„è„šã€‚â€\nåœ¨è¿™ä¸ªé¿éš¾æ‰€é‡Œï¼Œä½ ä»¬éšç€æ»‹æ»‹ä½œå“çš„éŸ³ä¹ç¼“æ…¢æ‘‡æ‘†ã€‚", 'event');
                    },
                    result: "è¿™ä¸€åˆ»ï¼Œæˆ˜äº‰ä¼¼ä¹ç¦»å¾—å¾ˆè¿œã€‚"
                },
                {
                    text: "ç»™ä»–å€’ä¸€æ¯é…’ï¼Œé™é™è†å¬",
                    desc: "æ— å£°çš„é™ªä¼´",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                    },
                    result: "â€œå“å‘³ä¸é”™ã€‚â€ ä»–æ¥è¿‡é…’æ¯ï¼Œçœ¼ç¥åœ¨é¢ç½©çš„é˜´å½±ä¸‹æ˜¾å¾—æ ¼å¤–æ¸©æŸ”ã€‚"
                }
            ]
        },
// [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šæ™¨é—´å°é”
        {
            text: "é—¹é’Ÿå“äº†ï¼Œä½ åˆšæƒ³ä»è¢«çªé‡Œçˆ¬èµ·æ¥å»å¼€åº—ï¼Œä¸€æ¡ç»“å®çš„æ‰‹è‡‚çªç„¶æ¨ªè¿‡ä½ çš„è…°ï¼Œåƒé“é’³ä¸€æ ·æŠŠä½ é‡æ–°æ‹–å›äº†åºŠä¸Šã€‚\nGhost æŠŠè„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œï¼Œåˆšé†’çš„å£°éŸ³æ²™å“‘å¾—è¿˜è¦å‘½ï¼Œå¸¦ç€æ¸©çƒ­çš„å‘¼å¸å–·æ´’åœ¨ä½ çš®è‚¤ä¸Šï¼š\nâ€œ...ä¸è®¸åŠ¨ï¼Œå†é™ªæˆ‘èººäº”åˆ†é’Ÿ... æˆ–è€…æˆ‘ä»¬æ¥é†’é†’ç¥ï¼Ÿâ€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating && s.chars.ghost.aff > 150,
            options: [
                {
                    text: "è½¬èº«å»ä»–ï¼šâ€œåªèƒ½äº”åˆ†é’Ÿã€‚â€",
                    desc: "å¦¥åçš„ç”œèœœ",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        s.chars.ghost.aff += 3;
                        printMsg("Ghost ä½ç¬‘ä¸€å£°ï¼Œä¼¼ä¹æ˜¯åœ¨å˜²ç¬‘ä½ çš„é€å¼ºã€‚\nâ€œäº”åˆ†é’Ÿï¼Œå—¯ï¼Ÿâ€", 'event');
                    },
                    result: "ç»“æœä½ ä»¬è¿Ÿåˆ°äº†åŠå°æ—¶æ‰å¼€åº—ï¼Œä½†ä»–çœ‹ä¸Šå»å¿ƒæƒ…å¾ˆå¥½ã€‚"
                },
                {
                    text: "è¯•å›¾æŒ£è„±",
                    desc: "è™½ç„¶æ¯«æ— ç”¨å¤„",
                    result: "ä½ çš„æŒ£æ‰åè€Œæ¿€èµ·äº†ä»–çš„å…´è‡´ï¼Œä»–æŠŠä½ é”å¾—æ›´ç´§äº†ã€‚â€œåˆ«ä¹±åŠ¨ã€‚â€"
                }
            ]
        },

// [Ghost] çº¯çˆ±æ—¥å¸¸ï¼šè‹±å¼â€œå«Œå¼ƒâ€ (å®é™…ä¸Šæ˜¯å® æºº)
        {
            text: "ä½ æ­£åœ¨å¨æˆ¿å°è¯•åšä¸€ç§æ–°é¥®å“ï¼ŒGhost æ‡’æ´‹æ´‹åœ°é åœ¨é—¨å£ï¼Œæ‰‹é‡Œæ‹¿ç€ä»–çš„é©¬å…‹æ¯ï¼Œçœ‰å¤´å¾®çš±ã€‚\nâ€œBloody hell... ä½ ç¡®å®šè¿™ä¸œè¥¿èƒ½å–ï¼Ÿçœ‹ç€åƒæ²¼æ³½é‡Œçš„æ±¡æ³¥ã€‚â€\nä»–æ¯«ä¸å®¢æ°”åœ°æŠŠä½ æŒ¤å¼€ï¼Œæ¥ç®¡äº†å¨æˆ¿ã€‚\nâ€œä¸€è¾¹å‘†ç€å»ï¼ŒMuque (å°å‚»ç“œ)ï¼Œè®©ä½ çœ‹çœ‹ä»€ä¹ˆå«çœŸæ­£çš„çº¢èŒ¶ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s),
            options: [
                {
                    text: "ä»èƒŒåæŠ±ä½ä»–ï¼šâ€œé‚£ä½ æ•™æˆ‘å˜›ã€‚â€",
                    desc: "å¯¹ä»–æ’’å¨‡",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Ghost èº«ä½“åƒµç¡¬äº†ä¸€ç¬ï¼Œéšå³æ— å¥ˆåœ°å¹äº†å£æ°”ï¼Œä½†å¹¶æ²¡æœ‰æ¨å¼€ä½ ã€‚\nâ€œ...çœ‹ç€ç‚¹ï¼Œæ°´æ¸©è¦ 95 åº¦...åˆ«å†æå‡ºé‚£ç§ç”ŸåŒ–æ­¦å™¨äº†ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "è™½ç„¶å˜´ä¸Šæ¯’èˆŒï¼Œä½†ä»–æ³¡å¥½èŒ¶åï¼Œä¸€å®šè¦çœ‹ç€ä½ å–ä¸‹ç¬¬ä¸€å£æ‰æ»¡æ„ã€‚"
                },
                {
                    text: "åå‡»ï¼šâ€œè‡³å°‘æ¯”ä½ çš„å†›ç²®å¥½åƒï¼â€",
                    desc: "äº’ç›¸ä¼¤å®³",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "â€œå“ˆã€‚â€ Ghost å‘å‡ºä¸€å£°çŸ­ä¿ƒçš„ç¬‘å£°ï¼Œæäº†æä½ çš„åé¢ˆï¼Œâ€œèƒ†å­è‚¥äº†ï¼Ÿæ˜å¤©èµ·ä¸æ¥åˆ«æ€ªæˆ‘ã€‚â€"
                }
            ]
        },

        // [Ghost] ğŸ„ åœ£è¯èŠ‚ï¼šæ§²å¯„ç”Ÿä¸‹çš„å¹½çµ
        {
            text: "åœ£è¯å¤œåˆ°äº†ï¼Œè™½ç„¶Ghost å¯¹è¿™ç§åµé—¹çš„èŠ‚æ—¥å‘æ¥å—¤ä¹‹ä»¥é¼»ï¼Œä½†ä»–ä»Šå¤©å›æ¥æ—¶æˆ˜æœ¯èƒŒå¿ƒä¸ŠæŒ‚ç€ä¸€å°æˆªæ§²å¯„ç”Ÿã€‚\nä»–æ‘˜ä¸‹é¢ç½©ï¼Œå‘¼å‡ºçš„ç™½æ°”æ¨¡ç³Šäº†ä»–å†·å³»çš„è½®å»“ã€‚\nâ€œPrice è¯´è¿™æ˜¯ä¼ ç»Ÿ... åªè¦ç«™åœ¨è¿™ä¸‹é¢å°±è¦åšä»€ä¹ˆæ¥ç€ï¼Ÿâ€ ä»–æ˜çŸ¥æ•…é—®ã€‚",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && s.day % 30 === 0, // æ¨¡æ‹ŸèŠ‚æ—¥æ¦‚ç‡
            options: [
                {
                    text: "æ‹‰ç€ä»–çš„é¢†å­å»ä»–",
                    desc: "å±¥è¡Œä¼ ç»Ÿ",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = CONFIG.max_ap;
                        printMsg("Ghost é¡ºåŠ¿æ‰£ä½ä½ çš„è…°ï¼ŒåŠ æ·±äº†è¿™ä¸ªå¸¦ç€é›ªèŠ±å‘³é“çš„å»ã€‚\nâ€œMerry Christmas, love.â€ ä»–çš„è‹±å¼ä½éŸ³ç‚®ç®€ç›´çŠ¯è§„ã€‚", 'event');
                    },
                    result: "è¥¿è’™è±åˆ©å¹¼ç¨šé¬¼ã€‚"
                },
                {
                    text: "è£…å‚»ï¼šâ€œè¦ç»™çº¢åŒ…ï¼Ÿâ€",
                    desc: "ç ´åæ°”æ°›",
                    result: "Ghost æŒ‘äº†æŒ‘çœ‰ï¼Œç›´æ¥æŠŠä½ æ‰›äº†èµ·æ¥èµ°å‘å§å®¤ï¼šâ€œè£…å‚»ï¼Ÿé‚£æˆ‘è‡ªå·±æ¥å–ç¤¼ç‰©äº†ã€‚â€"
                }
            ]
        },

// [Ghost] çº¯çˆ±é™å®šï¼šè¥¿è¯­æ•™å­¦ (æ¶©æ¶©/è°ƒæƒ…)
        {
            text: "Ghost ä»Šæ™šçœ‹ä¸Šå»å…´è‡´ä¸é”™ï¼Œä»–æŠŠä½ åœˆåœ¨æŸœå°æ­»è§’ï¼Œæ‘˜ä¸‹é¢ç½©å–äº†ä¸€å£æ°´ï¼Œçœ¼ç¥çªç„¶å˜å¾—æœ‰äº›ç©å‘³ã€‚\nâ€œAlejandro æ•™äº†æˆ‘å‡ å¥å½“åœ°çš„é—®å€™è¯­ï¼Œä»–è¯´è¿™å¯¹çˆ±äººå¾ˆç®¡ç”¨ã€‚â€\nä»–ä½ä¸‹å¤´ï¼Œå˜´å”‡å‡ ä¹è´´ç€ä½ çš„è€³å»“ï¼š\nâ€œTe deseo, mi alma... Eres mi maldiciÃ³n.â€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // ğŸ”’ çº¯çˆ±é”ï¼šæ‹çˆ± + éå¥³ç‹ + ä¸“ä¸€ + å¥½æ„Ÿ>600
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && s.chars.ghost.aff > 600,
            options: [
                {
                    text: "è„¸çº¢è¯¢é—®ï¼šâ€œä»€ä¹ˆæ„æ€ï¼Ÿâ€",
                    desc: "å‡è£…å¬ä¸æ‡‚",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Ghost ä½ç¬‘ä¸€å£°ï¼Œæ¸©çƒ­çš„æ°”æ¯å–·æ´’åœ¨ä½ é¢ˆä¾§ï¼Œå¹¶æ²¡æœ‰ç¿»è¯‘ã€‚\nâ€œå¤§åé¼é¼çš„ {PLAYER} å¬ä¸æ‡‚å—ï¼Ÿ", 'event');
                    },
                    result: "é‚£ä¸€æ™šï¼Œä½ æ·±åˆ»ä½“ä¼šåˆ°äº†å¢¨è¥¿å“¥å¼çš„çƒ­æƒ…å’Œè‹±å›½äººçš„æŒä¹…ã€‚"
                },
                {
                    text: "è¸®èµ·è„šå°–å»ä»–ï¼šâ€œNo necesito traducciÃ³n. (æˆ‘ä¸éœ€è¦ç¿»è¯‘)â€",
                    desc: "ç”¨è¡ŒåŠ¨å›åº” (éœ€ä¸€ç‚¹ç‚¹è¥¿è¯­çŸ¥è¯†)",
                    effect: s => {
                        s.chars.ghost.aff += 10;
                        printMsg("Ghost çš„ç³å­”å¾®å¾®æ”¶ç¼©ï¼Œä¼¼ä¹å¯¹ä½ çš„å›åº”æ„Ÿåˆ°æƒŠå–œã€‚\nä»–çŒ›åœ°æ‰£ä½ä½ çš„åè„‘å‹ºï¼Œå¤ºå›äº†ä¸»åŠ¨æƒï¼šâ€œå¾ˆå¥½...é‚£æˆ‘ä»¬ç›´æ¥è¿›å…¥æ­£é¢˜ã€‚â€", 'event');
                    },
                    result: "è¯­è¨€æ˜¯å¤šä½™çš„ï¼Œè¡ŒåŠ¨æ‰æ˜¯é€šç”¨çš„çˆ±è¯­ã€‚"
                }
            ]
        },

        // [Ghost] å¼‚åœ°æ‹ï¼šåŠ å¯†é¢‘é“çš„å‘¼å¸å£°
        {
            text: "æ·±å¤œï¼Œä½ çš„ç§äººåŠ å¯†é¢‘é“çªç„¶äº®èµ·çº¢ç¯ï¼Œè¿™æ˜¯ Ghost ä¸“ç”¨çš„çº¿è·¯ã€‚\nä½†æ¥é€šåï¼Œé‚£è¾¹åªæœ‰ä¸€ç‰‡æ­»å¯‚çš„ç”µæµå£°å’Œæå…¶å¾®å¼±ã€å‹æŠ‘çš„å‘¼å¸å£°ã€‚\nèƒŒæ™¯é‡Œéšçº¦æœ‰çˆ†ç‚¸å’Œæªå£°ï¼Œä½†ä»–æ²¡æœ‰è¯´è¯ï¼Œä¼¼ä¹åªæ˜¯æƒ³ç¡®è®¤ä½ åœ¨çº¿ã€‚",
            speaker: "Ghost (Radio)",
            type: "event",
            // ğŸ”’ çº¯çˆ±é”ï¼šæ‹çˆ± + éå¥³ç‹ + ä¸“ä¸€
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && chance(20),
            options: [
                {
                    text: "è½»å£°è¯´ï¼šâ€œæˆ‘åœ¨ã€‚æ³¨æ„å®‰å…¨ï¼ŒSimonã€‚â€",
                    desc: "å‘¼å”¤ä»–çš„çœŸå",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        printMsg("é‚£è¾¹çš„å‘¼å¸å£°åœé¡¿äº†ä¸€ç¬ï¼Œéšå³ä¼ æ¥ä¸€å£°æè½»çš„ï¼šâ€œ...Rogerï¼Œç­‰æˆ‘å›å»ã€‚â€\né€šè®¯åˆ‡æ–­äº†ã€‚", 'dialogue', 'Ghost');
                    },
                    result: "ä½ çŸ¥é“è¿™çŸ­çŸ­å‡ ç§’çš„è¿æ¥ï¼Œæ˜¯ä»–ç…ç†¬æ—¶å”¯ä¸€çš„æ…°è—‰ã€‚"
                },
                {
                    text: "æœ‰èŠ‚å¥åœ°æ•²å‡»éº¦å…‹é£ (æˆ˜æœ¯æš—å·)",
                    desc: "å‘é€åä¸ºæƒ³å¿µçš„æ‘©æ–¯ç”µç ",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("é‚£è¾¹ä¹Ÿå›æ•²äº†ä¸¤ä¸‹ï¼šå®‰å…¨ã€‚\nè¿™æ˜¯ä¸€ç§åªæœ‰ä½ ä»¬ä¸¤ä¸ªèƒ½å¬æ‡‚çš„æ— å£°æƒ…ä¹¦ã€‚", 'event');
                    },
                    result: "æ­¤æ—¶æ— å£°èƒœæœ‰å£°ã€‚"
                }
            ]
        },

// [Ghost] çº¯çˆ±é™å®šï¼šæ— æ³•é€è¾¾çš„ä¿¡ (å¥½å“­/é—è¨€)
        {
            text: "Ghost æ­£åœ¨ç„šçƒ§ä¸€äº›æ—§æ–‡ä»¶ï¼Œç«å…‰æ˜ ç…§ç€ä»–é¢ç½©ä¸‹æ²‰é»˜çš„è„¸ã€‚\nä½ çœ‹åˆ°ä»–æ‰‹é‡Œæç€ä¸€å°æŠ˜ç—•å¾ˆæ·±çš„ä¿¡ï¼Œä¿¡å°ä¸Šå†™ç€ä½ çš„åå­—ï¼Œä½†å­—è¿¹æ½¦è‰ï¼Œä¼¼ä¹æ˜¯åœ¨æåº¦ä¸ç¨³çš„çŠ¶æ€ä¸‹å†™ä¸‹çš„ã€‚\nâ€œè¿™æ˜¯ä¸Šæ¬¡å¿…æ­»ä»»åŠ¡å‰å†™çš„ã€‚â€ ä»–å£°éŸ³æ²™å“‘ï¼Œæ‰‹æŒ‡åœ¨ä¿¡å°è¾¹ç¼˜æ‘©æŒ²ï¼Œâ€œæˆ‘æ²¡æœ‰å®¶äººï¼Œæ²¡æœ‰ç‰µæŒ‚... å½“æ—¶æˆ‘ä»¥ä¸ºæˆ‘æ­»å®šäº†ï¼Œä½†æˆ‘è„‘å­é‡Œåªæœ‰è¿™å°ä¿¡è¿˜æ²¡å¯„å‡ºå»ã€‚â€\nä»–æŠ¬èµ·å¤´çœ‹ç€ä½ ï¼šâ€œä½†æˆ‘ç°åœ¨æ²¡æ³•çƒ§äº†å®ƒ... ä¹Ÿæ›´åŠ ä¸æ•¢ç»™ä½ çœ‹ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            // ğŸ”’ è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + ä¸“ä¸€ + éå¥³ç‹ + å¥½æ„Ÿ>1200 (æé«˜å¥½æ„Ÿ)
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && s.chars.ghost.aff > 1200,
            options: [
                {
                    text: "æ‹¿è¿‡ä¿¡ï¼Œå½“ç€ä»–çš„é¢æ’•ç¢",
                    desc: "â€œä½ ä¸éœ€è¦é—ä¹¦ï¼Œä½ åªéœ€è¦å›æ¥ã€‚â€",
                    effect: s => {
                        s.chars.ghost.aff += 20;
                        s.ap = 0; // æƒ…ç»ªæ³¢åŠ¨æ¶ˆè€—ç²¾åŠ›
                        printMsg("çº¸ç‰‡åœ¨ç«ç›†ä¸­åŒ–ä¸ºç°çƒ¬ã€‚\nGhost æ€”æ€”åœ°çœ‹ç€é£˜æ•£çš„ç«æ˜Ÿï¼Œçªç„¶ç´§ç´§æŠ“ä½äº†ä½ çš„æ‰‹ï¼ŒåŠ›é“å¤§å¾—è®©ä½ ç”Ÿç–¼ï¼Œä»¿ä½›æŠ“ä½äº†å”¯ä¸€çš„æ•‘å‘½ç¨»è‰ã€‚\nâ€œ...æ”¶åˆ°ã€‚æˆ‘ä¼šå›æ¥çš„ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šã€‚â€ ä»–çš„å£°éŸ³åœ¨é¢¤æŠ–ã€‚", 'event');
                    },
                    result: "ä»–æŠŠå¤´åŸ‹åœ¨ä½ çš„è†ç›–ä¸Šï¼Œä¹…ä¹…æ²¡æœ‰æŠ¬èµ·æ¥ã€‚"
                },
                {
                    text: "æŠ±ä½ä»–ï¼šâ€œå¿µç»™æˆ‘å¬ã€‚â€",
                    desc: "ç›´é¢ä»–çš„ææƒ§",
                    effect: s => {
                         s.chars.ghost.aff += 15;
                    },
                    result: "Ghost æ‰“å¼€äº†ä¿¡ï¼Œè¯»äº†ç¬¬ä¸€å¥å°±å“½å’½äº†ã€‚\nâ€œâ€˜å¯¹ä¸èµ·ï¼Œæˆ‘çˆ±ä½ ï¼Œä½†æˆ‘æ•‘ä¸äº†ä½ ...â€™ ä¸ï¼Œè¿™ä¸å¯¹ã€‚â€ ä»–æŠŠä¿¡æ‰æˆä¸€å›¢æ‰”è¿›ç«é‡Œï¼Œâ€œæˆ‘ç°åœ¨å°±åœ¨è¿™ï¼Œæˆ‘æ•‘å¾—äº†ä½ ï¼Œä¹Ÿæ•‘å¾—äº†æˆ‘è‡ªå·±ã€‚â€"
                }
            ]
        },

        // [Ghost] çº¯çˆ±é™å®šï¼šæ€ªç‰©çš„çœ¼æ³ª (è‡ªæˆ‘åŒæ¶/æ•‘èµ)
        {
            text: "æ·±å¤œçš„æš´é›¨æƒŠé†’äº† Ghostï¼Œä»–çŒ›åœ°åèµ·ï¼Œæµ‘èº«è¢«å†·æ±—æµ¸é€ï¼Œä¸‹æ„è¯†åœ°æ‹”æªæŒ‡å‘é»‘æš—ï¼Œç›´åˆ°çœ‹æ¸…èº«è¾¹çš„ä½ æ‰é¢“ç„¶æ”¾ä¸‹ã€‚\nä½ ä¼¸æ‰‹æƒ³å¸®ä»–æ“¦æ±—ï¼Œä»–å´åƒè¢«çƒ«åˆ°ä¸€æ ·èº²å¼€äº†ä½ çš„æ‰‹ã€‚\nâ€œåˆ«ç¢°æˆ‘...â€ ä»–ç¼©åœ¨åºŠè§’ï¼Œå£°éŸ³ç ´ç¢ä¸å ªï¼Œâ€œ {PLAYER}... æˆ‘...æˆ‘æ˜¯æ‰‹æ²¾æ»¡é²œè¡€ï¼Œæˆ‘è¿Ÿæ—©ä¼šå®³æ­»ä½ ...â€",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            condition: s => s.chars.ghost.dating && !s.flags.harem_queen && checkExclusivity('ghost', s) && s.chars.ghost.aff > 1300 && chance(30),
            options: [
                {
                    text: "å¼ºè¡ŒæŠ±ä½ä»–ï¼Œæ— è®ºä»–æ€ä¹ˆæŒ£æ‰",
                    desc: "â€œå¦‚æœæ˜¯åœ°ç‹±ï¼Œæˆ‘é™ªä½ ä¸€èµ·ä¸‹ã€‚â€",
                    effect: s => {
                        s.chars.ghost.aff += 30;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                        printMsg("Ghost åœ¨ä½ æ€€é‡Œåƒµç¡¬äº†è®¸ä¹…ï¼Œæœ€ç»ˆå´©æºƒäº†ã€‚\nè¿™ä¸ªæµè¡€ä¸æµæ³ªçš„ç”·äººï¼ŒæŠŠè„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œï¼Œå‘å‡ºäº†å‡ ä¹å¬ä¸åˆ°çš„å•œæ³£å£°", 'event');
                    },
                    result: "è¿™ä¸€å¤œä½ ç”¨ä½“æ¸©å¡«è¡¥äº†ä»–çµé­‚ä¸Šçš„ä¼¤ç—•ã€‚"
                },
                {
                    text: "å»ä»–çš„åŒæ‰‹ï¼šâ€œè¿™ä¹Ÿæ˜¯è¿™ä¸€åŒä¿æŠ¤äº†æˆ‘çš„æ‰‹ã€‚â€",
                    desc: "æ¥çº³ä»–çš„ä¸€åˆ‡",
                    effect: s => {
                        s.chars.ghost.aff += 20;
                    },
                    result: "Ghost çœ‹ç€è¢«ä½ äº²å»è¿‡çš„åŒæ‰‹ã€‚\nâ€œSimon...â€ ä»–ä½å£°å¿µç€è‡ªå·±çš„åå­—ï¼Œâ€œåœ¨ä½ èº«è¾¹ï¼Œæˆ‘æ‰æ˜¯ Simonã€‚â€"
                }
            ]
        },


// [Ghost] é˜´é›¨å¤©æ—¥å¸¸ï¼šæ—§ä¼¤
        {
            text: "è¿ç»µçš„é˜´é›¨å¤©è®©ç©ºæ°”å˜å¾—æ½®æ¹¿é˜´å†·ï¼Œä½ æ³¨æ„åˆ° Ghost èµ°è·¯çš„å§¿åŠ¿æ¯”å¹³æ—¶ç¨å¾®åƒµç¡¬äº†ä¸€äº›ï¼Œæ—¶ä¸æ—¶ä¼šä¸‹æ„è¯†æŒ‰æ‰è†ç›–å’Œè‚©è†€çš„æ—§ä¼¤å¤„ã€‚\nâ€œ...åˆ«çœ‹æˆ‘ã€‚â€ ä»–æ³¨æ„åˆ°ä½ çš„è§†çº¿ï¼Œå˜´è§’æŠ¿äº†æŠ¿ï¼Œâ€œè€æ¯›ç—…è€Œå·²ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            condition: s => s.chars.ghost.dating && (s.weather.name === 'é…¸é›¨' || s.weather.name === 'è¾å°„é›¾'),
            options: [
                {
                    text: "å¼ºåˆ¶è®©ä»–åä¸‹ï¼Œçƒ­æ•·æŒ‰æ‘©",
                    desc: "ä¸å®¹æ‹’ç»çš„å…³æ€€",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Ghost åˆšå¼€å§‹è¿˜æƒ³æŒ£æ‰ï¼Œä½†åœ¨çƒ­æ¯›å·¾æ•·ä¸Šå»çš„ç¬é—´ï¼Œä»–å‘å‡ºäº†ä¸€å£°èˆ’æœçš„ä½å“¼ã€‚\nâ€œ...æ‰‹æ³•ä¸é”™ï¼Œä¸‹æ¬¡...æˆ‘æ¥å§ã€‚â€ ä»–é—­ä¸Šçœ¼ç›ï¼ŒèåŒ–åœ¨ä½ çš„æ€€é‡Œã€‚", 'dialogue', 'Ghost');
                    },
                    result: "ä½ å¸®ä»–æŒ‰æ‘©äº†åŠå°æ—¶ã€‚è¿™ä¸€æ•´æ™šä»–éƒ½ç¡å¾—å¾ˆå®‰ç¨³ã€‚"
                },
                {
                    text: "ç»™ä»–å€’ä¸€æ¯çƒˆé…’",
                    desc: "å†…æœæ­¢ç—›",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        s.money -= 20;
                    },
                    result: "â€œæœ€ä¼ ç»Ÿçš„æ­¢ç—›è¯ã€‚â€ ä»–ä¸€å£é¥®å°½ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼Œâ€œè°¢äº†ã€‚â€"
                }
            ]
        },
// [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šæˆ˜æœ¯çº æ­£
        {
            text: "ä½ æ­£åœ¨æŸœå°å‰ä¿å…»ä¸€æŠŠæ ¼æ´›å…‹æ‰‹æªï¼Œçªç„¶Ghost çš„èƒ¸è†›è´´ä¸Šäº†ä½ çš„åèƒŒï¼ŒåŒè‡‚ä»ä¸¤ä¾§ç©¿è¿‡è¦†ç›–åœ¨ä½ çš„æ‰‹ä¸Šã€‚\nâ€œæ¡å§¿ä¸å¯¹ã€‚â€ ä»–å‘¼å¸çš„çƒ­æ°”å–·æ´’åœ¨ä½ çš„é¢ˆä¾§ï¼Œâ€œæ‰‹è…•å¤ªåƒµç¡¬äº†ï¼Œ {PLAYER}ï¼Œéœ€è¦æˆ‘æ‰‹æŠŠæ‰‹æ•™ä½ å—ï¼Ÿâ€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating,
            options: [
                {
                    text: "é¡ºåŠ¿é è¿›ä»–æ€€é‡Œ",
                    desc: "äº«å—ä»–çš„â€œæŒ‡å¯¼â€",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); 
                        printMsg("Ghost è½»ç¬‘ä¸€å£°ï¼Œä¸‹å·´æåœ¨ä½ çš„å¤´é¡¶ï¼Œå®Œå…¨æ”¾å¼ƒäº†æ‰€è°“çš„æŒ‡å¯¼ï¼Œåªæ˜¯å•çº¯åœ°æŠ±ç€ä½ ã€‚\nâ€œè¿™å°±å¯¹äº†ï¼Œä¿æŒè­¦æƒ•ï¼Œä½†ä¹Ÿåˆ«å¿˜äº†ä¾é æ©ä½“... æˆ‘å°±æ˜¯ä½ çš„æ©ä½“ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä½ ä»¬ä¿æŒè¿™ä¸ªå§¿åŠ¿è¿‡äº†ä¸€ä¼šå„¿ï¼Œè™½ç„¶ä»€ä¹ˆéƒ½æ²¡å¹²ï¼Œä½†å¿ƒæƒ…å˜å¥½äº†ã€‚"
                },
                {
                    text: "è½¬è¿‡èº«å»ä»–",
                    desc: "åå®¢ä¸ºä¸»",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "Ghost æ„£äº†ä¸€ç¬ï¼Œéšå³æ‰£ä½ä½ çš„åè„‘å‹ºåŠ æ·±äº†è¿™ä¸ªå»ã€‚â€œ...è¿™ä¸€æ‹›åˆæ˜¯è°æ•™ä½ çš„ï¼Ÿä¸‹æ¬¡ä¸è®¸äº†ã€‚â€"
                }
            ]
        },
            // æ‹çˆ±äº‹ä»¶ 3ï¼šæ— å£°çš„å¨æ…‘ (æŠ¤å¦»/æŠ¤å¤«ç‹‚é­”)
            {
                text: "ä¸€åå–é†‰çš„é›‡ä½£å…µè¯•å›¾åœ¨åº—é‡Œæ’’é‡ï¼Œç”±äºä½ çš„æ‹’ç»ï¼Œä»–æ¼ç¾æˆæ€’åœ°ä¼¸æ‰‹æƒ³æŠ“ä½ çš„è¡£é¢†ã€‚\nå°±åœ¨è¿™ä¸€ç¬é—´ï¼Œä¸€åªå¼ºæœ‰åŠ›çš„å¤§æ‰‹ä»ä¾§é¢ä¼¸å‡ºï¼Œç›´æ¥æä½äº†é‚£ä¸ªé†‰æ±‰çš„æ‰‹è…•ã€‚\nGhost ç”šè‡³æ²¡æœ‰æ‹”æªï¼Œä»–åªæ˜¯å†·å†·åœ°ç›¯ç€é‚£ä¸ªé†‰æ±‰ï¼Œé»‘è‰²çš„çœ¼çœ¸é‡Œé€ç€åˆºéª¨çš„å¯’æ„ã€‚",
                speaker: "Ghost",
                type: "alert",
                condition: s => s.chars.ghost.dating,
                options: [
                    {
                        text: "æ‹‰ä½ Ghost çš„æ‰‹è‡‚",
                        desc: "ç¤ºæ„ä½ æ²¡äº‹",
                        effect: s => {
                            s.chars.ghost.aff += 3;
                            s.rep_141 += 5;
                            printMsg("Ghost çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ¾å¼€äº†æ‰‹ï¼Œåƒä¸¢åƒåœ¾ä¸€æ ·æŠŠé‚£äººç”©å‡ºé—¨å¤–ã€‚\nâ€œä¸‹æ¬¡å†è®©æˆ‘çœ‹åˆ°ä½ çš„è„æ‰‹ä¼¸å‘å¥¹ï¼Œå°±ä¸åªæ˜¯è¿™ä¹ˆç®€å•äº†ã€‚â€", 'dialogue', 'Ghost');
                        },
                        result: "åº—é‡Œç¬é—´å®‰é™äº†ã€‚æ‰€æœ‰äººå†æ¬¡ç¡®è®¤äº†ä½ æ˜¯ç»å¯¹ä¸èƒ½æƒ¹çš„å­˜åœ¨ã€‚"
                    },
                    {
                        text: "è®©ä»–å¤„ç†",
                        desc: "è¿™ä¹Ÿæ˜¯ä¸€ç§å®‰å…¨æ„Ÿ",
                        effect: s => {
                            s.chars.ghost.aff += 3;
                            s.rep_chimera -= 10; 
                        },
                        result: "Ghost ç›´æ¥æŠŠé‚£äººæ‹–åˆ°äº†åå··ã€‚å‡ åˆ†é’Ÿåä»–å›æ¥äº†ï¼Œæ…¢æ¡æ–¯ç†åœ°æ•´ç†ç€æˆ˜æœ¯æ‰‹å¥—ï¼šâ€œå¤„ç†å¹²å‡€äº†ï¼Œè¿˜æœ‰è°æƒ³é—¹äº‹å—ï¼Ÿâ€"
                    }
                ]
            }, // <--- é€—å·

            // äº‹ä»¶ 5ï¼šæƒ…æŠ¥äº¤æ¢ (åŸæœ‰çš„é—²èŠäº‹ä»¶)
            {
                text: "Ghost é åœ¨é—¨å£ï¼Œçœ‹èµ·æ¥å¹¶ä¸æ€¥ç€ä¹°ä¸œè¥¿ã€‚â€œè¿™åœ°æ–¹è¶Šæ¥è¶Šä¹±äº†ï¼Œé˜´æ²Ÿé‡Œçš„è€é¼ åˆ°å¤„éƒ½æ˜¯ã€‚â€",
                speaker: "Ghost",
                type: "dialogue",
                options: [
                    {
                        text: "åˆ†äº«æƒ…æŠ¥",
                        desc: "å‘Šè¯‰ä»–ä½ è§è¿‡çš„å¯ç–‘äººå‘˜ (éœ€è¦å¥½æ„Ÿ > 10)",
                        condition: s => s.chars.ghost.aff > 10,
                        effect: s => {
                            s.chars.ghost.aff += 2;
                            s.rep_141 += 5;
                        },
                        result: "Ghost è®¤çœŸå¬å®Œäº†ä½ çš„æè¿°ã€‚â€œå¾ˆæœ‰ä»·å€¼ï¼Œæ³¨æ„å®‰å…¨ã€‚â€"
                    },
                    {
                        text: "åªæ˜¯é—²èŠ",
                        desc: "èŠèŠå¤©æ°”",
                        effect: s => { s.chars.ghost.aff += 1; },
                        result: "éš¾å¾—çš„å¹³é™æ—¶åˆ»ã€‚"
                    }
                ]
            } // <--- æœ€åä¸€ä¸ªäº‹ä»¶å¯ä»¥æ²¡æœ‰é€—å·
        ], // <--- è¿™é‡Œå¿…é¡»æœ‰å…³é—­ä¸­æ‹¬å·å’Œé€—å·
        konig: [
            {
                text: "å·¨å¤§çš„èº«å½±æŒ¡ä½äº†é—¨å£çš„å…‰çº¿ï¼ŒKÃ¶nig æç€ä¸€ä¸ªé‡å‹æ­¦å™¨ç®±èµ°è¿›æ¥ï¼Œå¤´å¥—ä¸‹çš„çœ¼ç¥æ˜¾å¾—æœ‰äº›ç„¦è™‘ã€‚\nâ€œè¿™è¯¥æ­»çš„è£…å¤‡... æˆ‘éœ€è¦ 2 ä¸ªåŒ»ç–—åŒ…å’Œ 5 ä»½é£Ÿç‰©ã€‚ç°åœ¨ã€‚æˆ‘ä»˜åŒå€ã€‚â€",
                speaker: "KÃ¶nig",
                type: "dialogue",
                condition: s => !s.chars.konig.dating,
                options: [
                    {
                        text: "æˆäº¤ (é«˜ä»·)",
                        desc: "-2 Medkit, -5 Food, è·å¾—åŒå€æ”¶ç›Š",
                        condition: s => s.medkit >= 2 && s.food >= 5,
                        effect: s => {
                            s.medkit -= 2;
                            s.food -= 5;
                            const income = (CONFIG.sell_price.medkit * 2 * 2) + (CONFIG.sell_price.food * 5 * 2);
                            s.money += income;
                            s.chars.konig.aff += 5;
                            log(`KÃ¶nig æ”¯ä»˜äº† $${income}`, 'gain');
                        },
                        result: "KÃ¶nig è¿…é€ŸæŠŠä¸œè¥¿å¡è¿›åŒ…é‡Œï¼Œæ‰”ä¸‹ä¸€å¤§å·ç°é‡‘ã€‚â€œè¿™èƒ½å¸®ä¸Šå¤§å¿™ï¼ŒDankeã€‚â€"
                    },
                    {
                        text: "å…è´¹èµ é€",
                        desc: "è¿™èƒ½å¤§å¹…æå‡å¥½æ„Ÿ",
                        condition: s => s.medkit >= 2 && s.food >= 5,
                        effect: s => {
                            s.medkit -= 2; s.food -= 5;
                            s.chars.konig.aff += 8;
                            s.rep_kortac += 10;
                        },
                        result: "KÃ¶nig æ„£ä½äº†ï¼Œæœ‰äº›æ‰‹è¶³æ— æªï¼Œâ€œä½ ... ä¸ºä»€ä¹ˆï¼Ÿè°¢è°¢ï¼Œæˆ‘ä¸ä¼šå¿˜è®°çš„ã€‚â€"
                    },
                    {
                        text: "åº“å­˜ä¸è¶³",
                        desc: "æ— æ³•æ»¡è¶³éœ€æ±‚",
                        condition: s => s.medkit < 2 || s.food < 5,
                        result: "KÃ¶nig ç„¦èºåœ°é”¤äº†ä¸€ä¸‹æŸœå°ï¼Œè½¬èº«ç¦»å¼€äº†ã€‚"
                    }
                ]
            },
// [KÃ¶nig] æ—¥å¸¸ï¼šæ’å¤´æ„å¤– (éæ‹çˆ±)
        {
            text: "â€œå—·ï¼â€ ä¸€å£°æ²‰é—·çš„å·¨å“ï¼ŒKÃ¶nig è¿›é—¨æ—¶å¤ªç´§å¼ å¿˜äº†ä½å¤´ï¼Œè„‘é—¨ç‹ ç‹ ç£•åœ¨äº†é—¨æ¡†ä¸Šã€‚\nä»–æ‚ç€å¤´ç›”ï¼Œçœ‹èµ·æ¥å§”å±ˆæäº†ï¼Œçœ¼æ³ªéƒ½åœ¨çœ¼çœ¶é‡Œæ‰“è½¬ï¼Œä½†ä»–æ²¡æœ‰å«å‡ºå£°ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "å…³å¿ƒä¸€ä¸‹ï¼šâ€œæ²¡äº‹å§ï¼Ÿâ€",
                    desc: "çœ‹ç€éƒ½ç–¼",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œæˆ‘ã€æˆ‘æ²¡äº‹... ä¹ æƒ¯äº†ã€‚â€ ä»–æ‰ç€å¤´ï¼Œå°´å°¬åœ°ç¼©ç€è‚©è†€ï¼Œè¯•å›¾è®©è‡ªå·±çœ‹èµ·æ¥å°ä¸€ç‚¹ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "è¿™ä¸ªå¤§é«˜ä¸ªçœ‹èµ·æ¥åƒä¸ªåšé”™äº‹çš„å°å­©ã€‚"
                },
                {
                    text: "å¿ä¸ä½ç¬‘äº†",
                    desc: "ç¡®å®æœ‰ç‚¹æ»‘ç¨½",
                    effect: s => {
                        s.chars.konig.aff -= 20;
                    },
                    result: "KÃ¶nig çš„è„¸æ¶¨çº¢äº†ï¼ˆè™½ç„¶ä½ çœ‹ä¸åˆ°ï¼‰ï¼Œä»–è½¬èº«å°±æƒ³è·‘ï¼Œç»“æœæ…Œä¹±ä¸­åˆæ’äº†ä¸€ä¸‹è‚©è†€ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸŸ¢ [KÃ¶nig] éæ‹çˆ±åå·®ï¼šæš—å··é‡Œçš„æ­»ç¥
        {
            text: "ä½ å»åå··å€’åƒåœ¾ï¼Œå¬åˆ°é˜´å½±é‡Œä¼ æ¥ä¸€å£°é—·å“ã€‚\nå€Ÿç€å¾®å¼±çš„æœˆå…‰ï¼Œä½ çœ‹åˆ° KÃ¶nig å•æ‰‹æç€ä¸€ä¸ªå¼ºå£®ä½£å…µçš„è„–å­ï¼Œå°†é‚£äººåƒæå°é¸¡ä¸€æ ·åŒè„šç¦»åœ°æåœ¨åŠç©ºã€‚\né‚£ä¸ªä½£å…µåœ¨æ‹¼å‘½æŒ£æ‰ï¼Œä½† KÃ¶nig çº¹ä¸ä¸åŠ¨ï¼Œé¢ç½©ä¸‹çš„é‚£åŒçœ¼ç›å†°å†·æ— æƒ…ã€‚\nä»–æ­£åœ¨ä¸€ç‚¹ç‚¹æ”¶ç´§æ‰‹æŒ‡ï¼Œåœ¨é‚£äººè€³è¾¹ä½è¯­ç€ä»€ä¹ˆï¼Œé‚£æ˜¯ä½ åœ¨åº—é‡Œä»æœªå¬è¿‡çš„ä»¤äººæ¯›éª¨æ‚šç„¶çš„å†·é™å£°çº¿ã€‚",
            speaker: "System",
            type: "alert",
            // ğŸ”’ æ¡ä»¶ï¼šæœªæ‹çˆ±
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "æ•…æ„å¼„å‡ºç‚¹å“å£°ï¼šâ€œå’³å’³ã€‚â€",
                    desc: "æ‰“æ–­ä»–çš„å¤„å†³",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig æµ‘èº«ä¸€éœ‡ï¼Œé‚£è‚¡æ€ç¥èˆ¬çš„æ°”åœºç¬é—´å´©å¡Œã€‚\nä»–æ…Œä¹±åœ°æ¾å¼€æ‰‹ï¼Œä»»ç”±é‚£ä¸ªä½£å…µæ‘”åœ¨åœ°ä¸Šå¤§å£å–˜æ°”ï¼Œç„¶ååƒä¸ªåšé”™äº‹çš„å­©å­ä¸€æ ·æŠŠæ‰‹èƒŒåˆ°èº«åã€‚\nâ€œå•Šï¼{PLAYER}ï¼ä½ ã€ä½ çœ‹åˆ°äº†ï¼Ÿä¸ã€ä¸æ˜¯é‚£æ ·ï¼ä»–... ä»–åªæ˜¯... æ‘”å€’äº†ï¼å¯¹ï¼æ‘”å€’äº†ï¼â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "çœ‹ç€è¿™ä¸ªä»–åœ¨ä½ é¢å‰æ‰‹è¶³æ— æªåœ°ç¼–çè¯ï¼Œä½ å¾ˆéš¾æŠŠä»–å’Œåˆšæ‰é‚£ä¸ªæ­»ç¥è”ç³»åœ¨ä¸€èµ·ã€‚"
                },
                {
                    text: "èº²åœ¨æš—å¤„é™é™è§‚å¯Ÿ",
                    desc: "ç›®ç¹å…¨è¿‡ç¨‹",
                    effect: s => {
                        s.rep_kortac += 2; // è§è¯†åˆ°äº† KorTac çš„å®åŠ›
                        printMsg("KÃ¶nig åˆ©è½åœ°å¤„ç†äº†é‚£ä¸ªäººï¼ˆå¤§æ¦‚æ˜¯æ™•äº†ï¼‰ï¼Œç„¶åç†Ÿç»ƒåœ°æŠŠâ€œåƒåœ¾â€è¸¢åˆ°è§’è½ã€‚\nåšå®Œè¿™ä¸€åˆ‡ï¼Œä»–æ‹äº†æ‹æ‰‹å¥—ä¸Šçš„ç°ï¼Œæ¢å¤äº†å¹³æ—¶çš„ç«™å§¿ï¼Œä»¿ä½›åˆšæ‰åªæ˜¯å¹»è§‰ã€‚", 'event');
                    },
                    result: "ä½ é‡æ–°è®¤è¯†äº†è¿™ä¸ªå®³ç¾çš„å¤§ä¸ªå­ï¼šä»–ä¸ä»…ä¼šè„¸çº¢ï¼Œæ›´ä¼šæ€äººã€‚"
                }
            ]
        },

        // ğŸŸ¢ [KÃ¶nig] éæ‹çˆ±åå·®ï¼šåº”æ¿€ååº”
        {
            text: "åº—é‡Œå‘ç”Ÿäº†ä¸€ç‚¹å°éªšä¹±ï¼Œä¸€ä¸ªå–é†‰çš„æš´å¾’çªç„¶æ‹”åˆ€åˆºå‘æ—è¾¹çš„äººã€‚\nå°±åœ¨ä½ å‡†å¤‡æŒ‰è­¦æŠ¥çš„ç¬é—´ï¼Œä¸€ç›´ç¼©åœ¨è§’è½é‡Œå°½é‡é™ä½å­˜åœ¨æ„Ÿçš„ KÃ¶nig ç¬é—´å‡ºç°åœ¨æš´å¾’èº«åï¼Œè¿™å®Œå…¨ä¸æ˜¯å¹³æ—¶é‚£ä¸ªç¬¨æ‰‹ç¬¨è„šçš„æ ·å­ã€‚\nåªå¬â€œå’”åš“â€ä¸€å£°è„†å“ï¼Œä»–æå…¶ç²¾å‡†åœ°å¸æ‰äº†æš´å¾’çš„èƒ³è†Šå…³èŠ‚ï¼ŒåŠ¨ä½œè¡Œäº‘æµæ°´ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            // ğŸ”’ æ¡ä»¶ï¼šæœªæ‹çˆ±
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€å¼ æ¹¿å·¾ï¼šâ€œæ“¦æ“¦æ‰‹ã€‚â€",
                    desc: "è®©ä»–â€œå›æ¥â€",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("KÃ¶nig æ„£äº†ä¸€ä¸‹ï¼Œçœ‹ç€é€’è¿‡æ¥çš„æ¹¿å·¾åçœ¼ç¥é‡Œçš„æ€æ°”é€æ¸è¤ªå»ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç†Ÿæ‚‰çš„æ…Œä¹±ã€‚\nâ€œå™¢... è°¢ã€è°¢è°¢ã€‚å¯¹ä¸èµ·... æˆ‘æ˜¯ä¸æ˜¯å¤ªç”¨åŠ›äº†ï¼Ÿå“åˆ°å®¢äººäº†å—ï¼Ÿâ€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æ¥è¿‡æ¹¿å·¾ç–¯ç‹‚æ“¦æ‰‹ï¼Œåˆå˜å›äº†é‚£ä¸ªå®³æ€•ç»™ä½ æƒ¹éº»çƒ¦çš„ç¤¾æã€‚"
                },
                {
                    text: "èµå¹ï¼šâ€œèº«æ‰‹ä¸é”™ã€‚â€",
                    desc: "è®¤å¯ä»–çš„å®åŠ›",
                    effect: s => {
                        s.chars.konig.aff += 5;
                    },
                    result: "KÃ¶nig æ‹‰äº†æ‹‰é¢ç½©è¯•å›¾é®ä½è„¸ï¼šâ€œè¿™... è¿™æ˜¯æœ¬èƒ½ï¼Œå…¶å®æˆ‘å¾ˆä¸æƒ³åŠ¨æ‰‹çš„... çœŸçš„å¾ˆæŠ±æ­‰å¼„è„äº†ä½ çš„åœ°æ¿ã€‚â€"
                }
            ]
        },

// [KÃ¶nig] çº¯çˆ±é™å®šï¼šè†ä¸Šçš„é£æ™¯
        {
            text: "åˆåçš„é˜³å…‰å¾ˆå¥½ï¼ŒKÃ¶nig æŠŠä½ æŠ±åœ¨ä»–çš„è…¿ä¹‹é—´ååœ¨åœ°æ¯¯ä¸Šï¼Œè®©ä½ é åœ¨ä»–å®½é˜”çš„èƒ¸è†›ä¸Šçœ‹ä¹¦ã€‚\nä»–çš„ä¸‹å·´æŠµåœ¨ä½ çš„å¤´é¡¶ï¼Œå·¨å¤§çš„èº«èº¯åƒæ˜¯ä¸€ä¸ªæ¸©æš–çš„å·¢ç©´ï¼ŒæŠŠä½ å®Œå…¨åŒ…è£¹åœ¨é‡Œé¢ã€‚\nè¿‡äº†ä¸€ä¼šå„¿ï¼Œå‘¼å¸å£°å˜å¾—ç»µé•¿...ä»–ç¡ç€äº†ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s) && s.chars.konig.aff > 800,
            options: [
                {
                    text: "è½¬èº«æ‘¸æ‘¸ä»–çš„è„¸",
                    desc: "è¶ä»–ç¡ç€æ‘˜ä¸‹é¢ç½©",
                    effect: s => {
                        s.chars.konig.aff += 10;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // æ²»æ„ˆæ—¶åˆ»
                        printMsg("ä½ è½»è½»æ€èµ·ä»–çš„é¢ç½©ï¼Œä»–åœ¨ç¡æ¢¦ä¸­çš±äº†çš±çœ‰ï¼Œä½†æ„Ÿå—åˆ°ä½ çš„ä½“æ¸©åä¸‹æ„è¯†åœ°åœ¨ä½ æŒå¿ƒé‡Œè¹­äº†è¹­ã€‚\nä»–å˜Ÿå›”ç€ï¼šâ€œ...åˆ«èµ°..{PLAYER} ...â€", 'event');
                    },
                    result: "ä½ é™ªä»–ç¡äº†ä¸€ä¸ªå®‰ç¨³çš„åˆè§‰ã€‚ä»–é†’æ¥æ—¶å‘ç°æ²¡æˆ´é¢ç½©ï¼Œè„¸çº¢é€äº†ï¼Œä½†ç¬‘å¾—å¾ˆå¼€å¿ƒã€‚"
                },
                {
                    text: "ç»§ç»­çœ‹ä¹¦",
                    desc: "äº«å—å®é™",
                    result: "ä»–çš„å¿ƒè·³å£°æ˜¯ä½ æœ€å¥½çš„èƒŒæ™¯éŸ³ä¹ï¼Œè¿™ç§è¢«å®Œå…¨ä¿æŠ¤çš„æ„Ÿè§‰è®©ä½ æ— æ¯”å®‰å¿ƒã€‚"
                }
            ]
        },

        // [KÃ¶nig] çº¯çˆ±é™å®šï¼šé‡èŠ±ç‹å† 
        {
            text: "KÃ¶nig ä»å¤–é¢å›æ¥äº†ï¼Œä»–å°å¿ƒç¿¼ç¿¼åœ°æ§ç€ä¸€å¤§æŠŠäº”é¢œå…­è‰²çš„é‡èŠ±ï¼ˆæœ‰äº›è¿æ ¹éƒ½æ‹”èµ·æ¥äº†ï¼‰ã€‚\nâ€œæˆ‘åœ¨å·¡é€»æ—¶çœ‹åˆ°çš„... è§‰å¾—å¾ˆåƒä½ ã€‚â€\nä»–ç¬¨æ‰‹ç¬¨è„šåœ°è¯•å›¾æŠŠé‚£äº›èŠ±ç¼–åœ¨ä¸€èµ·ï¼Œä½†æ‰‹æŒ‡å¤ªç²—ï¼Œæ€»æ˜¯å¼„æ–­èŠ±èŒã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s) && s.chars.konig.aff > 900,
            options: [
                {
                    text: "æ•™ä»–ç¼–èŠ±ç¯",
                    desc: "æ‰‹æŠŠæ‰‹æ•™å­¦",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        printMsg("ä½ ä»¬å¤´æŠµç€å¤´å‡‘åœ¨ä¸€èµ·ï¼Œæœ€ç»ˆï¼Œä¸€ä¸ªæ­ªæ­ªæ‰­æ‰­ä½†å……æ»¡çˆ±æ„çš„èŠ±ç¯å®Œæˆäº†ã€‚\nä»–éƒ‘é‡å…¶äº‹åœ°æŠŠå®ƒæˆ´åœ¨ä½ çš„å¤´ä¸Šï¼šâ€œä½ æ˜¯æˆ‘çš„å¥³ç‹... ä¸ï¼Œä½ æ˜¯æˆ‘çš„å¥³ç¥ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–çœ‹ç€ä½ çš„çœ¼ç¥å¾ˆè™”è¯šã€‚"
                },
                {
                    text: "æŠŠèŠ±æ’åœ¨ä»–çš„æˆ˜æœ¯èƒŒå¿ƒä¸Š",
                    desc: "è£…æ‰®ä»–",
                    result: "KÃ¶nig å˜æˆäº†ä¸€ä¸ªæ’æ»¡é²œèŠ±çš„ç§»åŠ¨å°å±±ï¼Œâ€œå˜¿å˜¿... å¥½çœ‹å—ï¼Ÿâ€ ä»–å®Œå…¨ä¸åœ¨æ„é˜Ÿå‹ä¼šæ€ä¹ˆçœ‹ä»–ã€‚"
                }
            ]
        },

// [KÃ¶nig] çº¯çˆ±æ—¥å¸¸ï¼šæ±‚ç”Ÿä¹‹è·¯ (FPS)
        {
            text: "ä½ æ‹‰ç€ KÃ¶nig ä¸€èµ·ç©æ‰“åƒµå°¸çš„æ¸¸æˆï¼Œä½†æ˜¯æ¯æ¬¡æœ‰åƒµå°¸ä»è§’è½å†²å‡ºæ¥ï¼Œä»–éƒ½ä¼šåœ¨ç°å®ä¸­æµ‘èº«ä¸€æŠ–ã€‚\nâ€œ {PLAYER}å°å¿ƒåé¢ï¼æˆ‘ã€æˆ‘æ¥æŒ¡ä½å®ƒä»¬ï¼â€\nä»–æ¡ç€æ‰‹æŸ„çš„æ‰‹æŒ‡å› ä¸ºç”¨åŠ›è¿‡åº¦è€Œå‘ç™½ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s),
            options: [
                {
                    text: "å¤¸å¥–ä»–ï¼šâ€œå“‡ï¼ä½ æ•‘äº†æˆ‘ï¼â€",
                    desc: "æä¾›æƒ…ç»ªä»·å€¼",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("KÃ¶nig çš„è„¸çº¢çº¢çš„ï¼Œè™½ç„¶åªæ˜¯æ¸¸æˆï¼Œä½†ä»–çœ‹èµ·æ¥çœŸçš„å¾ˆè‡ªè±ªã€‚\nâ€œåªè¦æˆ‘åœ¨... æ²¡ä»€ä¹ˆèƒ½ä¼¤åˆ°ä½ ã€‚å“ªæ€•æ˜¯åƒµå°¸ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä¸ºäº†ä½ ï¼Œä»–æˆäº†æœ€å¼ºçš„è‚‰ç›¾ã€‚"
                },
                {
                    text: "åå¿ƒçœ¼åœ°å¼•çˆ†ä»–æ—è¾¹çš„æ²¹æ¡¶",
                    desc: "å‘é˜Ÿå‹",
                    result: "â€œå•Šï¼ {PLAYER} ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼â€ å±å¹•ç°äº†ï¼ŒKÃ¶nig å§”å±ˆåœ°çœ‹ç€ä½ ï¼Œä½ å“„äº†ä»–å¾ˆä¹…ã€‚"
                }
            ]
        },

        // [KÃ¶nig] çº¯çˆ±æ—¥å¸¸ï¼šä¸æ˜¯å®³æ€•ï¼Œæ˜¯æˆ˜æœ¯æ’¤é€€ (ææ€–ç‰‡)
        {
            text: "ææ€–ç”µå½±çš„é«˜æ½®éƒ¨åˆ†ï¼Œå¥³é¬¼çªç„¶ç¬ç§»è´´è„¸ã€‚\nâ€œå‘œï¼â€ KÃ¶nig å‘å‡ºä¸€å£°çŸ­ä¿ƒçš„æ‚²é¸£ï¼ŒæŠ“èµ·æ²™å‘ä¸Šçš„æŠ±æ•æŒ¡åœ¨è„¸å‰ï¼Œæ•´ä¸ªäººç¼©æˆä¸€å›¢æŒ¤åœ¨ä½ èº«è¾¹ã€‚\nä»–é€è¿‡æŠ±æ•çš„ç¼éš™å·çœ‹ï¼šâ€œè¿™ã€è¿™ä¸ç§‘å­¦... ç‰©ç†æ”»å‡»å¯¹å¥¹æ— æ•ˆå—ï¼Ÿâ€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s),
            options: [
                {
                    text: "å–‚ä»–åƒçˆ†ç±³èŠ±å‹å‹æƒŠ",
                    desc: "å® æººä»–",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        s.food = Math.max(0, s.food - 1);
                        printMsg("ä»–åƒä»“é¼ ä¸€æ ·åš¼ç€çˆ†ç±³èŠ±ï¼Œå¿˜è®°äº†ææƒ§ï¼ŒçœŸå¥½å“„", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ç®€ç›´å®Œå…¨æ¿€å‘äº†ä½ çš„ä¿æŠ¤æ¬²ã€‚"
                },
                {
                    text: "æŠ±ä½ä»–çš„å¤´ï¼šâ€œåˆ«çœ‹ï¼Œæˆ‘åœ¨å‘¢ã€‚â€",
                    desc: "æ­¤æ—¶æ”»å®ˆé€†è½¬",
                    effect: s => { s.chars.konig.aff += 5; },
                    result: "KÃ¶nig æŠŠè„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œï¼Œç›´åˆ°ç”µå½±ç»“æŸéƒ½ä¸è‚¯å‡ºæ¥ï¼Œä½†æ˜¯ä»–çš„å‘¼å¸çƒ­çƒ­çš„å¼„å¾—ä½ å¾ˆç—’ï¼Œä»–æ•…æ„çš„å§ï¼Ÿ"
                }
            ]
        },

// [KÃ¶nig] åˆ†æ‰‹åï¼šé—¨å£çš„è¡¥ç»™
        {
            text: "ä½ æ‰“å¼€åº—é—¨å‘ç°é—¨å£æ”¾ç€ä¸€å¤§ç®±æå…¶çè´µçš„åŒ»ç–—ç‰©èµ„å’Œé£Ÿç‰©ï¼Œç®±å­ä¸Šæ²¡æœ‰ç½²åï¼Œä¸è¿‡é€šè¿‡è¢«é›¨æ°´æ™•å¼€çš„æ¹¿ç—•æ¥çœ‹ï¼Œåº”è¯¥æ”¾äº†æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚\nä½ æŠ¬èµ·å¤´ï¼Œåˆšå¥½çœ‹åˆ°è¡—è§’æœ‰ä¸ªå·¨å¤§çš„èº«å½±æ…Œä¹±åœ°ç¼©å›äº†åºŸå¢Ÿåé¢ã€‚\nKÃ¶nig åœ¨èº²ç€ä½ ï¼Œä½†ä»–è¿˜åœ¨ç¬¨æ‹™åœ°è¯•å›¾ç…§é¡¾ä½ ã€‚",
            speaker: "System",
            type: "event",
            // ğŸ’” åˆ¤å®šï¼šæœªæ‹çˆ± + æ›¾åˆ†æ‰‹/æ‹’ç»è¿‡
// ğŸŸ¢ ä¿®æ”¹æ¡ä»¶
            condition: s => !s.chars.konig.dating && s.chars.konig.is_ex,
            options: [
                {
                    text: "æ”¶ä¸‹ç‰©èµ„ï¼Œå¯¹ç€è¡—è§’è¯´å£°è°¢è°¢",
                    desc: "æ¥å—ä»–çš„å¥½æ„ (+ç‰©èµ„)",
                    effect: s => {
                        s.medkit += 2;
                        s.food += 5;
                        printMsg("è¡—è§’é‚£è¾¹ä¼ æ¥ä¸€å£°å‹æŠ‘çš„å¸æ°”å£°ï¼Œéšåæ²‰é‡çš„è„šæ­¥å£°æ¸æ¸è¿œå»ã€‚", 'event');
                    },
                    result: "ä»–ä¸æ•¢è§ä½ ï¼Œä½†ä»–æŠŠæœ€å¥½çš„ä¸œè¥¿éƒ½ç•™ç»™äº†ä½ ï¼Œåƒåªè¢«ä¸»äººè¸¢å¼€å´è¿˜å¼ç€çŒç‰©å›æ¥çš„ç‹—ã€‚"
                },
                {
                    text: "æŠŠä¸œè¥¿ç•™åœ¨åŸåœ°",
                    desc: "ä¸ç»™ä»–å¸Œæœ›",
                    result: "ç›´åˆ°ç¬¬äºŒå¤©é‚£ç®±ä¸œè¥¿è¿˜åœ¨é‚£é‡Œï¼ŒKÃ¶nig æ•´æ™šéƒ½å®ˆåœ¨è¿œå¤„ï¼Œçœ‹ç€å®ƒæ·‹é›¨ï¼Œå°±åƒçœ‹ç€ä»–è¢«é—å¼ƒçš„å¿ƒã€‚"
                }
            ]
        },

// [KÃ¶nig] è´Ÿå¥½æ„Ÿ 1ï¼šåº”æ¿€ååº”
        {
            text: "å¼€åº—æ²¡å¤šä¹…ï¼Œä½ å‘ç°KÃ¶nig ç«™åœ¨é—¨å£ï¼Œçœ¼ç¥é‡Œå……æ»¡äº†ä¸ä¿¡ä»»å’Œç„¦èºã€‚\nâ€œä»–ä»¬è¯´è¿™é‡Œä¸å®‰å…¨... ä½ ï¼Œä½ æ˜¯ä¸ªéª—å­...â€ ä»–å‘¼å¸æ€¥ä¿ƒï¼Œæ‰‹ç´§ç´§æŠ“ç€é—¨æ¡†ï¼Œæœ¨å±‘ç°Œç°Œè½ä¸‹ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.aff < 0,
            options: [
                {
                    text: "è¯•å›¾å®‰æŠšä»–",
                    desc: "å¯èƒ½ä¼šèµ·åæ•ˆæœ",
                    effect: s => {
                        s.chars.konig.aff -= 15;
                        printMsg("KÃ¶nig ä»¥ä¸ºä½ è¦ææ­¦å™¨ï¼Œæ„¤æ€’åœ°ä¸€æ‹³ç ¸åœ¨æŸœå°ä¸Šï¼Œéœ‡ç¿»äº†ä½ çš„è´§ç‰©ã€‚\nâ€œåˆ«åŠ¨ï¼åˆ«é è¿‘æˆ‘ï¼â€", 'alert');
                    },
                    result: "ä»–è½¬èº«é€ƒè·‘äº†ï¼Œåƒæ˜¯åœ¨é€ƒé¿ä»€ä¹ˆå¯æ€•çš„æ€ªç‰©ï¼Œç•™ä¸‹ä¸€åœ°ç‹¼è—‰ã€‚"
                },
                {
                    text: "ä¸¾èµ·åŒæ‰‹ç¤ºå¼±",
                    desc: "è¯æ˜æ— å®³",
                    result: "â€œå“¼... æœ€å¥½åˆ«è€èŠ±æ ·ã€‚â€ ä»–è­¦æƒ•åœ°åé€€ç€ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // [KÃ¶nig] è´Ÿå¥½æ„Ÿ 2ï¼šè‚®è„çš„äº¤æ˜“
        {
            text: "KÃ¶nig è¿›æ¥ä¹°æ€¥æ•‘åŒ…ï¼Œä½†ä»–æ‹’ç»æŠŠé’±é€’åˆ°ä½ æ‰‹ä¸Šï¼Œè€Œæ˜¯è¿œè¿œåœ°æŠŠé’ç¥¨æ‰”åœ¨åœ°ä¸Šã€‚\nâ€œå¿«ç‚¹ï¼ŒæŠŠä¸œè¥¿æ”¾åœ¨é‚£ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.aff < 0,
            options: [
                {
                    text: "å¿ç€æ€’æ°”äº¤æ˜“",
                    desc: "æ¡èµ·åœ°ä¸Šçš„é’±",
                    result: "äº¤æ˜“åœ¨ä»¤äººçª’æ¯çš„å°´å°¬å’Œæ•Œæ„ä¸­å®Œæˆäº†ï¼Œä»–æ‹¿äº†ä¸œè¥¿ç«‹åˆ»å°±ç”¨é…’ç²¾å–·é›¾æ¶ˆæ¯’ï¼Œè¿™å¯¹ä½ æ˜¯ä¸€ç§ä¾®è¾±ã€‚"
                }
            ]
        },

// [KÃ¶nig] éæ‹çˆ±æ—¥å¸¸ï¼šåºç„¶å¤§ç‰©
        {
            text: "KÃ¶nig è¯•å›¾è½¬èº«å»æ‹¿è´§æ¶ä¸‹å±‚çš„ç½å¤´ï¼Œä½†ä»–èƒŒåçš„æˆ˜æœ¯èƒŒåŒ…å†æ¬¡æ‰«è½äº†ä¸€æ’è¯ç“¶ã€‚\nâ€œScheiÃŸe (è¯¥æ­»)...â€ ä»–åƒµåœ¨åŸåœ°ä¸æ•¢åŠ¨å¼¹ï¼ŒåŒæ‰‹ä¸¾åœ¨åŠç©ºï¼Œçœ‹ä¸Šå»æœ‰ç‚¹æ— åŠ©ã€‚",
            speaker: "KÃ¶nig",
            type: "alert",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "å¹å£æ°”ï¼šâ€œåˆ«åŠ¨ï¼Œæˆ‘æ¥æ‹¿ã€‚â€",
                    desc: "æ›¿ä»–è§£å›´",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("KÃ¶nig åƒä¸ªçŠ¯é”™çš„å°å­¦ç”Ÿä¸€æ ·ç¼©åœ¨è§’è½ï¼Œç›´åˆ°ä½ æŠŠä¸œè¥¿é€’ç»™ä»–ã€‚\nâ€œå¯¹ä¸èµ·... æˆ‘çš„å­˜åœ¨æ€»æ˜¯é€ æˆéº»çƒ¦ã€‚â€ ä»–å°å£°å˜Ÿå›”ç€ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–å¤šä»˜äº† $50 ä½œä¸ºèµ”å¿ï¼Œå¹¶å°å¿ƒç¿¼ç¿¼åœ°ä¾§èº«æŒªå‡ºäº†åº—é—¨ã€‚"
                },
                {
                    text: "ä¸¥å‰æ–¥è´£ï¼šâ€œçœ‹ç€ç‚¹ä½ çš„å±è‚¡ï¼â€",
                    desc: "ç»´æŠ¤åº—é“ºç§©åº",
                    effect: s => {
                        s.chars.konig.aff -= 8;
                        s.money += 20; // èµ”å¿
                    },
                    result: "KÃ¶nig æ‰”ä¸‹èµ”å¿é‡‘å°±è·‘äº†ï¼Œç”šè‡³æ²¡æ‹¿ä»–è¦ä¹°çš„ç½å¤´ã€‚"
                }
            ]
        },

// [KÃ¶nig] æ—¥å¸¸ï¼šåƒæŠ¢åŠ«çš„è´­ç‰© (éæ‹çˆ±)
        {
            text: "KÃ¶nig å†²è¿›åº—é‡Œï¼Œå› ä¸ºå¤ªç´§å¼ ï¼Œä»–æŠŠä¸€å¼ å†™ç€è´­ç‰©æ¸…å•çš„çº¸æ¡ç‹ ç‹ æ‹åœ¨æŸœå°ä¸Šï¼Œå‘å‡ºä¸€å£°å·¨å“ã€‚\nç„¶åä»–æ­»æ­»ç›¯ç€ä½ ï¼Œå‘¼å¸æ€¥ä¿ƒï¼ˆå…¶å®æ˜¯è·‘ç´¯äº†ï¼‰ï¼Œä¸€è¨€ä¸å‘ï¼ˆå…¶å®æ˜¯å¿˜è¯äº†ï¼‰ã€‚\nè¿™ä¸€å¹•çœ‹èµ·æ¥åƒæäº†æŒæªæŠ¢åŠ«ã€‚",
            speaker: "KÃ¶nig",
            type: "alert",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "æ·¡å®šåœ°æ‹¿èµ·æ¸…å•é…è´§",
                    desc: "çœ‹ç©¿ä»–çš„æœ¬è´¨",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.money += 100;
                        printMsg("KÃ¶nig çœ‹ç€ä½ ç†Ÿç»ƒçš„åŠ¨ä½œï¼Œç´§ç»·çš„è‚©è†€ç»ˆäºæ”¾æ¾ä¸‹æ¥ã€‚\nâ€œè°¢ã€è°¢è°¢...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ä»˜äº†é’±ï¼ŒæŠ±ç€ä¸œè¥¿é€ƒä¹Ÿæ˜¯åœ°è·‘äº†ã€‚"
                },
                {
                    text: "ä¸¾èµ·åŒæ‰‹ï¼šâ€œé’±éƒ½åœ¨æ”¶é“¶æœºé‡Œï¼â€",
                    desc: "çœŸçš„è¢«å“åˆ°äº†",
                    effect: s => {
                        s.chars.konig.aff -= 8;
                    },
                    result: "â€œä¸ï¼æˆ‘ä¸æ˜¯... å”‰ã€‚â€ KÃ¶nig çœ‹èµ·æ¥æ¯”ä½ è¿˜æƒ³å“­ï¼Œä»–æŠ“å›çº¸æ¡ï¼Œè½¬èº«è·‘äº†ã€‚"
                }
            ]
        },

        // [KÃ¶nig] æ—¥å¸¸ï¼šå¡ä½äº† (éæ‹çˆ±)
        {
            text: "KÃ¶nig è¯•å›¾é’»è¿›ä½ çš„æŸœå°åé¢æ‹¿ä¸€ä¸ªæ‰è½çš„ç¡¬å¸ï¼Œç»“æœå› ä¸ºèƒŒä¸Šçš„æˆ˜æœ¯è£…å¤‡å¤ªåšï¼Œå¡åœ¨äº†æŸœå°å’Œå¢™å£ä¹‹é—´ã€‚\nä»–æŒ£æ‰äº†å‡ ä¸‹ï¼Œè´§æ¶å¼€å§‹æ‘‡æ™ƒï¼Œå‘å‡ºå±é™©çš„å±å‘€å£°ã€‚\nâ€œå‘ƒ... é‚£ä¸ª... æˆ‘å¥½åƒå‡ºä¸å»äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "å¸®ä»–è§£å¼€æˆ˜æœ¯èƒŒå¿ƒçš„å¡æ‰£",
                    desc: "è§£æ•‘ä»–",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("éšç€å’”å“’ä¸€å£°ï¼Œä»–ç»ˆäºæŠŠè‡ªå·±æ‹”äº†å‡ºæ¥ã€‚\nâ€œå¤ªä¸¢äººäº†...â€ ä»–æ‚ç€è„¸ï¼Œè€³æœµé€šçº¢ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ä¸ºäº†æ©é¥°å°´å°¬ï¼Œä¹°äº†ä¸€å †ä¸éœ€è¦çš„ä¸œè¥¿ã€‚"
                },
                {
                    text: "å¹æ°”ï¼šâ€œä½ èµ”æˆ‘è´§æ¶ã€‚â€",
                    desc: "å…¬äº‹å…¬åŠ",
                    effect: s => {
                        s.money += 50;
                    },
                    result: "KÃ¶nig å‚å¤´ä¸§æ°”åœ°èµ”äº†é’±ã€‚"
                }
            ]
        },

// [KÃ¶nig] éæ‹çˆ±ï¼šå·¨å¤§çš„é˜´å½±
        {
            text: "é—¨å£çš„å…‰çº¿çªç„¶æš—äº†ä¸‹æ¥ï¼ŒKÃ¶nig ç«™åœ¨é‚£é‡Œï¼Œå‡ ä¹å¡«æ»¡äº†æ•´ä¸ªé—¨æ¡†ï¼Œä»–å¹¶æ²¡æœ‰è¿›æ¥ï¼Œåªæ˜¯ç«™åœ¨é—¨å£å‘é‡Œå¼ æœ›ï¼Œæ²‰é‡çš„å‘¼å¸å£°é€è¿‡å¤´å¥—ä¼ å‡ºæ¥ï¼Œå“è·‘äº†ä¸¤ä¸ªæ­£åœ¨æŒ‘ä¸œè¥¿çš„å®¢äººã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "ä¸»åŠ¨æ‹›å‘¼ï¼šâ€œéœ€è¦å¸®å¿™å—ï¼Ÿâ€",
                    desc: "æ‰“ç ´åƒµå±€",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("KÃ¶nig æµ‘èº«éœ‡äº†ä¸€ä¸‹ï¼Œç¼©äº†ç¼©è‚©è†€ã€‚\nâ€œæˆ‘... æˆ‘åªæ˜¯æƒ³ä¹°ä¸ªç”µæ± ... æœ‰è´§å—...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä½ å¿«é€Ÿå–ç»™äº†ä»–ç”µæ± ï¼Œä»–æ‰”ä¸‹ä¸€æŠŠé›¶é’±å°±è·‘äº†ï¼Œç”šè‡³æ²¡æ•¢æ‹¿æ‰¾é›¶ã€‚"
                },
                {
                    text: "è­¦æƒ•åœ°æ¡ä½æŸœå°ä¸‹çš„æª",
                    desc: "ä»–çœ‹èµ·æ¥å¾ˆå±é™©",
                    effect: s => {
                        s.chars.konig.aff -= 10;
                    },
                    result: "KÃ¶nig æ³¨æ„åˆ°äº†ä½ çš„åŠ¨ä½œï¼Œä»–é»¯ç„¶åœ°ä½ä¸‹äº†å¤´ï¼Œé»˜é»˜åœ°é€€äº†å‡ºå»ï¼Œæ¶ˆå¤±åœ¨è¡—é“å°½å¤´ã€‚"
                }
            ]
        },
        // [KÃ¶nig] éæ‹çˆ±ï¼šæ„å¤–æŸå
        {
            text: "â€œå•Šï¼â€ åº—é‡Œä¼ æ¥ä¸€å£°è„†å“ï¼ŒKÃ¶nig ä¸å°å¿ƒç¢°æ‰äº†ä¸€ä¸ªé™ˆåˆ—æ¶ä¸Šçš„æ¯å­ã€‚\nä»–åƒµåœ¨åŸåœ°ï¼Œçœ‹èµ·æ¥æ¨ä¸å¾—æŠŠè‡ªå·±ç¼©è¿›åœ°ç¼é‡Œã€‚\nâ€œå¯¹ã€å¯¹ä¸èµ·ï¼... æˆ‘ä¼šèµ”å¿çš„ï¼â€",
            speaker: "KÃ¶nig",
            type: "alert",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "â€œæ²¡äº‹ï¼Œç¢ç¢å¹³å®‰ã€‚â€",
                    desc: "å®½å®¹",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.money += 20; // ä»–è¿˜æ˜¯åšæŒèµ”äº†é’±
                        printMsg("KÃ¶nig æ‰‹å¿™è„šä¹±åœ°æŠŠç¢ç‰‡æ¡äº†èµ·æ¥ã€‚\nâ€œä½ ... ä½ çœŸæ˜¯ä¸ªå¥½äººã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–çœ‹ä½ çš„çœ¼ç¥ä¸å†é‚£ä¹ˆææƒ§äº†ã€‚"
                },
                {
                    text: "å†·ç€è„¸è®©ä»–èµ”é’±",
                    desc: "å…¬äº‹å…¬åŠ",
                    effect: s => {
                        s.money += 500; // èµ”å¿é‡‘
                    },
                    result: "KÃ¶nig æå‡ºä¸€å¼ å¤§é¢é’ç¥¨æ”¾åœ¨æ¡Œä¸Šï¼Œè¿å¤´éƒ½ä¸æ•¢æŠ¬ï¼ŒåŒ†åŒ†ç¦»å¼€äº†ã€‚"
                }
            ]
        },

// [KÃ¶nig] çº¯çˆ±æ—¥å¸¸ï¼šå¸¦ç€ä½ æ°”å‘³çš„é¢ç½©
        {
            text: "KÃ¶nig ååœ¨åºŠè¾¹æ˜¾å¾—å¾ˆè‹¦æ¼ï¼Œä»–æ—§çš„å¤´ç½©ç”¨å®Œäº†ã€‚\nâ€œæ€ä¹ˆåŠ... æ²¡æœ‰å¸ƒæ–™äº†...â€ ä»–çœ‹ç€æ‰‹é‡Œé‚£å—ç ´å¸ƒï¼Œåˆçœ‹äº†çœ‹è¡£æŸœã€‚\nä½ éšæ‰‹ä»è¡£æŸœé‡Œæ‹¿å‡ºä¸€ä»¶ä½ ç©¿è¿‡çš„æ—§ T æ¤æ‰”ç»™ä»–ï¼šâ€œç”¨è¿™ä¸ªå§ã€‚â€\nKÃ¶nig æ¥ä½è¡£æœï¼Œæ„£äº†å‡ ç§’ï¼Œè„¸ç¬é—´çº¢å¾—åƒç…®ç†Ÿçš„è™¾å­ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s),
            options: [
                {
                    text: "è°ƒæˆä»–ï¼šâ€œæ€ä¹ˆï¼Ÿå«Œå¼ƒæˆ‘çš„å‘³é“ï¼Ÿâ€",
                    desc: "çœ‹ä»–å®³ç¾çš„æ ·å­",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("â€œä¸ã€ä¸æ˜¯ï¼æ˜¯å¤ª... å¤ªå¥½äº†...â€ KÃ¶nig ç»“ç»“å·´å·´åœ°æŠŠè„¸åŸ‹è¿›ä½ çš„è¡£æœé‡Œæ·±å¸äº†ä¸€å£ï¼Œâ€œæˆ‘æ€•æˆ‘åœ¨æˆ˜åœºä¸Šä¼šåˆ†å¿ƒ... æ»¡è„‘å­éƒ½æ˜¯ä½ ...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æœ€åè¿˜æ˜¯æŠŠé‚£ä»¶è¡£æœåšæˆäº†æ–°å¤´å¥—ï¼Œæ¯æ¬¡æˆ´ä¸Šå®ƒï¼Œå°±åƒä½ åœ¨äº²å»ä»–çš„è„¸ã€‚"
                },
                {
                    text: "å¸®ä»–å‰ªè£çœ¼æ´",
                    desc: "è´¤æƒ æ—¶åˆ»",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("ä½ æ‹¿ç€å‰ªåˆ€åœ¨ä»–è„¸ä¸Šæ¯”åˆ’ï¼ŒKÃ¶nig ä¹–ä¹–åœ°åç€ä¸€åŠ¨ä¸åŠ¨ï¼Œè¿å‘¼å¸éƒ½å±ä½äº†ã€‚", 'event');
                    },
                    result: "â€œå®Œç¾ã€‚â€ çœ‹ç€æˆ´ç€ä½ è¡£æœæ”¹åˆ¶é¢ç½©çš„ä»–ï¼Œä½ æ„Ÿåˆ°ä¸€ç§è«åçš„å æœ‰æ¬²æ»¡è¶³æ„Ÿã€‚"
                }
            ]
        },

        // [KÃ¶nig] ğŸ„ åœ£è¯èŠ‚ï¼šä¸¤ç±³é«˜çš„åœ£è¯æ ‘
        {
            text: "åœ£è¯èŠ‚åˆ°äº†ï¼Œå¯æƒœåº—é‡Œæ²¡æœ‰åœ£è¯æ ‘ã€‚\nå½“ä½ é—æ†¾åœ°å¹æ°”æ—¶ï¼ŒKÃ¶nig çªç„¶æŠŠä½ ä¸¾äº†èµ·æ¥ï¼Œè®©ä½ æŠŠä¸€é¢—æ˜Ÿæ˜Ÿè£…é¥°æŒ‚åœ¨ä»–çš„æˆ˜æœ¯å¤´ç›”é¡¶ä¸Šã€‚\nä»–æµ‘èº«æŒ‚æ»¡äº†å½©ç¯å¸¦ï¼Œåƒä¸ªä¸¤ç±³é«˜çš„å·¨å‹åœ£è¯æ ‘ï¼Œå§”å±ˆå·´å·´åˆä¸€è„¸æœŸå¾…åœ°çœ‹ç€ä½ ã€‚\nâ€œæˆ‘... æˆ‘å¯ä»¥å½“ä½ çš„æ ‘ï¼Œåªè¦ä½ å¼€å¿ƒã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s) && s.day % 30 === 0,
            options: [
                {
                    text: "æŠŠå½©ç¯ç¼ åœ¨ä»–èº«ä¸Šå¹¶äº²å»ä»–",
                    desc: "ç‚¹äº®ä½ çš„â€œåœ£è¯æ ‘â€",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.ap = CONFIG.max_ap;
                        printMsg("é€šç”µçš„ç¬é—´ï¼Œå½©ç¯é—ªçƒï¼ŒKÃ¶nig çš„çœ¼ç›äº®äº®çš„ã€‚\nâ€œè¿™æ˜¯æˆ‘è¿‡å¾—æœ€å¥½çš„åœ£è¯èŠ‚...â€ ä»–æŠŠä½ ç´§ç´§æŠ±åœ¨æ€€é‡Œã€‚", 'event');
                    },
                    result: "ä»–æœ¬äººå°±æ˜¯å±äºä½ ä¸€ä¸ªäººçš„èŠ‚æ—¥ç¤¼ç‰©ã€‚"
                },
                {
                    text: "é’»è¿›ä»–çš„æ€€é‡Œå–æš–",
                    desc: "è¿™é‡Œæœ€æš–å’Œ",
                    result: "â€œæˆ‘ä¼šä¸ºä½ æŒ¡é£çš„ï¼Œ{PLAYER} ã€‚â€ ä»–ç”¨å®½å¤§çš„èº«ä½“ä¸ºä½ ç­‘èµ·äº†ä¸€é“å¢™ã€‚"
                }
            ]
        },

        // [KÃ¶nig] æ—¥å¸¸ï¼šç¤¾æå‘ä½œ (éæ‹çˆ±)
        {
            text: "KÃ¶nig å·²ç»åœ¨è´§æ¶å‰ç«™äº†ååˆ†é’Ÿäº†ã€‚ä»–æ‰‹é‡Œæ‹¿ç€ä¸¤ä¸ªç½å¤´ï¼Œä¼¼ä¹é™·å…¥äº†æåº¦çš„çº ç»“ï¼Œä½†ä»–æ‰‹æŒ‡ç»åœ¨ä¸€èµ·ï¼Œæ˜¾ç„¶æ˜¯ä¸æ•¢å¼€å£é—®ä½ ä»·æ ¼ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "ä¸»åŠ¨è¯¢é—®ï¼šâ€œéœ€è¦å¸®å¿™å—ï¼Ÿâ€",
                    desc: "æ‰“ç ´åƒµå±€",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œå•Šï¼å¯¹ã€å¯¹ä¸èµ·ï¼æˆ‘åªæ˜¯... æƒ³è¦è¿™ä¸ª...â€ ä»–è¢«å“äº†ä¸€è·³ï¼Œç»“ç»“å·´å·´åœ°è¯´é“ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä½ å¸®ä»–ç»“äº†è´¦ã€‚ä»–æ¾äº†ä¸€å£æ°”ï¼Œé£å¿«åœ°é€ƒç¦»äº†ç°åœºã€‚"
                },
                {
                    text: "å°±ç›¯ç€ä»–çœ‹",
                    desc: "çœ‹ä»–ä»€ä¹ˆæ—¶å€™è¯´è¯",
                    result: "KÃ¶nig è¢«ä½ çœ‹å¾—è¶Šæ¥è¶Šç´§å¼ ï¼Œæœ€åå‘¼å¸æ€¥ä¿ƒï¼Œæ”¾ä¸‹äº†ç½å¤´ç©ºæ‰‹è·‘äº†ï¼ˆä¸è¦æ¬ºè´Ÿç¤¾æå•Šå–‚ï¼ï¼‰ã€‚"
                }
            ]
        }, // <--- é€—å·

        // [KÃ¶nig] æ—¥å¸¸ï¼šå°èœ˜è›› (éæ‹çˆ±)
        {
            text: "â€œå•Šâ€”â€”ï¼â€ æŸœå°è§’è½ä¼ æ¥ä¸€å£°çŸ­ä¿ƒçš„æƒ¨å«ã€‚\nä½ è·‘è¿‡å»ä¸€çœ‹ï¼Œå‘ç° KÃ¶nig ç¼©åœ¨å¢™è§’ï¼ŒæŒ‡ç€åœ°ä¸Šä¸€åªåªæœ‰æŒ‡ç”²ç›–å¤§å°çš„èœ˜è››ï¼Œæµ‘èº«å‘æŠ–ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => !s.chars.konig.dating,
            options: [
                {
                    text: "æŠŠèœ˜è››æ‰”å‡ºå»",
                    desc: "ä¸¾æ‰‹ä¹‹åŠ³",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œè°¢ã€è°¢è°¢... å®ƒæœ‰å¥½å¤šè…¿... å¤ªå¯æ€•äº†ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä¸¤ç±³é«˜çš„ç‰¹ç§å…µæ€•èœ˜è››ï¼Œè¿™ä¸ªåå·®è®©ä½ å°è±¡æ·±åˆ»ã€‚"
                }
            ]
        }, // <--- é€—å·

// [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šäººå½¢æŒ‚ä»¶
        {
            text: "ä½ æ­£åœ¨æ¸…ç‚¹è´§æ¶ä¸Šçš„ç½å¤´ï¼Œçªç„¶æ„Ÿè§‰èƒŒä¸Šä¸€æ²‰ã€‚\nKÃ¶nig æ‚„æ— å£°æ¯åœ°èµ°åˆ°ä½ èº«åï¼ŒæŠŠä¸‹å·´æŠµåœ¨ä½ çš„å¤´é¡¶ä¸Šï¼Œç²—å£®çš„åŒè‡‚æ¾æ¾åœ°ç¯ä½ä½ çš„è…°ã€‚\nâ€œç´¯äº†...â€ ä»–é—·å£°é—·æ°”åœ°è¯´é“ï¼Œåƒæ˜¯åœ¨å¯»æ±‚å®‰æ…°ï¼Œâ€œ...è®©æˆ‘å……ä¼šå„¿ç”µã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating,
            options: [
                {
                    text: "æ‹æ‹ä»–çš„æ‰‹è‡‚ï¼Œå¸¦ç€ä»–ç»§ç»­å·¥ä½œ",
                    desc: "èƒŒç€ä¸€åª 100kg çš„å¤§ç†Š",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œå˜¿å˜¿...â€ KÃ¶nig å‘å‡ºæ»¡è¶³çš„ç¬‘å£°ï¼Œéšç€ä½ çš„æ­¥ä¼ä¸€èµ·æŒªåŠ¨ï¼Œâ€œä½ æ˜¯æˆ‘çš„ç”µæ± ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "è™½ç„¶è¡ŒåŠ¨ä¸ä¾¿ï¼Œä½†èƒŒåçš„æ¸©åº¦è®©äººå¾ˆå®‰å¿ƒã€‚"
                },
                {
                    text: "è½¬èº«å›æŠ±ä»–",
                    desc: "ç»™ä»–ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "KÃ¶nig æŠŠä½ æ•´ä¸ªäººåµŒè¿›æ€€é‡Œï¼Œç”¨åŠ›å¸äº†ä¸€å£ä½ é¢ˆé—´çš„æ°”æ¯ï¼Œèˆ’æœåœ°å¹äº†å£æ°”ã€‚"
                }
            ]
        },

// --- æ‹çˆ±åä¸“å±äº‹ä»¶ (éœ€ dating: true) ---

            // æ‹çˆ±äº‹ä»¶ 1ï¼šç ´é—¨æ‰‹çš„æœ¬èƒ½ (æˆ˜æ–—/åå·®)
            {
                text: "ä¸€ç¾¤ä¸çŸ¥æ­»æ´»çš„æš´å¾’è¯•å›¾æ‰“åŠ«ä½ çš„åº—é“ºï¼Œä»–ä»¬ç”šè‡³é”æ­»äº†é˜²çˆ†é—¨ï¼Œä¼å›¾æŠŠä½ å›°åœ¨é‡Œé¢è°ˆåˆ¤ã€‚\nKÃ¶nig æ­£åœ¨é‡Œå±‹ä¼‘æ¯ï¼Œå¬åˆ°åŠ¨é™åèµ°äº†å‡ºæ¥ï¼Œé¢å¯¹ç´§é”çš„é‡å‹é’¢é—¨ï¼Œä»–æ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯é»˜é»˜æ•´ç†å¥½äº†å¤´å¥—ã€‚\nâ€œé€€åï¼ŒHasi (å°å…”å­)ã€‚æ‚ä½è€³æœµã€‚â€",
                speaker: "KÃ¶nig",
                type: "event",
                condition: s => s.chars.konig.dating,
                options: [
                    {
                        text: "ç…§ä»–è¯´çš„åš",
                        desc: "è§è¯ 120kg çš„åŠ¨èƒ½å†²å‡»",
                        effect: s => {
                            s.chars.konig.aff += 5;
                            s.rep_kortac += 10;
                            printMsg("KÃ¶nig åŠ©è·‘äº†ä¸¤æ­¥ï¼Œç‹ ç‹ æ’å¼€äº†é‚£æ‰‡å‡ ç™¾æ–¤é‡çš„é’¢é—¨ï¼\néšç€å·¨å¤§çš„è½°é¸£å£°ï¼Œé—¨æ¿ç›´æ¥é£äº†å‡ºå»ï¼Œå‹å€’äº†ä¸€ç‰‡æš´å¾’ï¼Œä»–åœ¨å°˜åœŸä¸­ç«™ç›´èº«ä½“ï¼Œæ‰‹ä¸­å†²é”‹æªç²¾å‡†ç‚¹å°„ï¼Œæ²¡å¤šä¹…å°±æ¸…ç†å®Œæ¯•ã€‚", 'event');
                        },
                        result: "æˆ˜æ–—ç»“æŸå¾—å¤ªå¿«äº†ï¼Œä»–è½¬è¿‡èº«çœ‹ä½ æ—¶ï¼Œçœ¼ç¥åˆå˜å›äº†é‚£åªå—æƒŠçš„æ¨¡æ ·ï¼šâ€œæ²¡ã€æ²¡å“åˆ°ä½ å§ï¼Ÿâ€"
                    },
                    {
                        text: "ä¸Šå‰æ”¯æ´ä»–",
                        desc: "ä¸ä»–å¹¶è‚©ä½œæˆ˜",
                        effect: s => {
                            s.chars.konig.aff += 5;
                            s.ap = Math.max(0, s.ap - 1);
                        },
                        result: "è™½ç„¶ä½ ä¹Ÿå¾ˆå¼ºï¼Œä½†æ ¹æœ¬ä¸éœ€è¦ä½ å‡ºæ‰‹ï¼ŒKÃ¶nig è¿™ç§ç²—æš´ç›´æ¥çš„æˆ˜æ–—é£æ ¼è®©ä½ é‡æ–°è®¤è¯†äº†ä»€ä¹ˆæ˜¯â€œKorTac çš„ç‹ç‰Œâ€ã€‚"
                    }
                ]
            },
// [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæ‰‹æŒå¯¹æ¯”
        {
            text: "KÃ¶nig ååœ¨æŸœå°å¯¹é¢å‘å‘†ï¼Œæ‰‹æŒæ‘Šå¼€æ”¾åœ¨æ¡Œé¢ä¸Šâ€”â€”é‚£åªæ‰‹å¤§å¾—æƒŠäººï¼Œæ»¡æ˜¯è€èŒ§å’Œä¼¤ç—•ã€‚\nä»–æ³¨æ„åˆ°ä½ çš„è§†çº¿ï¼Œåˆšæƒ³ç¼©å›å»ï¼Œä½ å´ä¼¸å‡ºè‡ªå·±çš„æ‰‹è¦†ç›–åœ¨äº†ä»–çš„æ‰‹æŒä¸Šã€‚\nä¸¤åªæ‰‹çš„å¤§å°å·®è·å¤§å¾—æœ‰äº›æ»‘ç¨½ï¼Œåƒæ˜¯ä¸ªå¤§äººå’Œå°å­©ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating,
            options: [
                {
                    text: "å’Œä»–åæŒ‡ç›¸æ‰£",
                    desc: "å¡«æ»¡ä»–çš„æŒ‡ç¼",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig çš„è„¸ç¬é—´çº¢é€äº†ï¼Œä½†ä»–æ²¡æœ‰æŠ½å¼€æ‰‹ï¼Œè€Œæ˜¯å°å¿ƒç¿¼ç¿¼åœ°æ”¶æ‹¢æ‰‹æŒ‡ï¼Œå°†ä½ çš„æ‰‹å®Œå…¨åŒ…è£¹åœ¨æŒå¿ƒã€‚\nâ€œä½ çœ‹... æˆ‘èƒ½æŠŠä½ å®Œå…¨è—èµ·æ¥ï¼Œæˆ‘çœŸæƒ³æŠŠä½ è—èµ·æ¥...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ä¸€ç›´æ¡ç€ä½ çš„æ‰‹èˆä¸å¾—æ”¾å¼€ï¼Œç›´åˆ°æœ‰æ–°å®¢äººè¿›æ¥æ‰æ…Œä¹±åœ°æ¾å¼€ã€‚"
                },
                {
                    text: "ç”¨æ‰‹æŒ‡æˆ³æˆ³ä»–çš„æŒå¿ƒ",
                    desc: "è°ƒæˆä»–",
                    effect: s => {
                        s.chars.konig.aff += 5;
                    },
                    result: "â€œå¥½ç—’...â€ KÃ¶nig ç¼©äº†ç¼©æ‰‹ï¼Œå‘å‡ºä½ä½çš„ç¬‘å£°ã€‚â€œåˆ«é—¹äº†ï¼Œ {PLAYER} ...â€"
                }
            ]
        },

// [KÃ¶nig] ç”œèœœæ—¥å¸¸ï¼šè¯•åƒå‘˜
        {
            text: "KÃ¶nig åƒåšè´¼ä¸€æ ·æŠŠä½ æ‹‰åˆ°ä»“åº“è§’è½ï¼Œä»–é‚£åŒæˆ´ç€æˆ˜æœ¯æ‰‹å¥—çš„å¤§æ‰‹å°å¿ƒç¿¼ç¿¼åœ°æ§ç€ä¸€å°æŠŠçœ‹èµ·æ¥å¾ˆæ–°é²œçš„é‡è“ã€‚\nâ€œæˆ‘åœ¨å·¡é€»æ—¶å‘ç°çš„... å¾ˆç”œï¼Œæ²¡æ¯’ï¼Œæˆ‘è¯•è¿‡äº†ã€‚â€\nä»–æèµ·ä¸€é¢—å°å°çš„çº¢æœå­é€’åˆ°ä½ å˜´è¾¹ï¼Œæ‰‹æŒ‡å› ä¸ºç´§å¼ è€Œæœ‰äº›å¾®å¾®é¢¤æŠ–ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating,
            options: [
                {
                    text: "å«ä½ä»–çš„æ‰‹æŒ‡åƒæ‰æœå­",
                    desc: "æ•…æ„çš„ï¼",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        s.food += 1; // ä¹Ÿå°±åŠ ä¸€ç‚¹ç‚¹é¥±è…¹æ„Ÿ
                        printMsg("KÃ¶nig åƒè§¦ç”µä¸€æ ·ç¼©å›æ‰‹ï¼Œæ•´ä¸ªäººå¥½åƒéƒ½è¦å†’çƒŸäº†ã€‚\nâ€œå‘€ï¼ï¼ä½ ã€ä½ ... å¤ªçŠ¯è§„äº†ï¼Hasiï¼â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æ‚ç€è„¸è·‘æ‰äº†ï¼Œä½†æ²¡è¿‡å¤šä¹…åˆå·å·æºœå›æ¥ï¼Œæƒ³çœ‹çœ‹ä½ è¿˜è¦ä¸è¦åƒã€‚"
                },
                {
                    text: "å¼ å˜´è®©ä»–æŠ•å–‚",
                    desc: "ä¹–å·§æ¥å—",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("çœ‹ç€ä½ åƒä¸‹å»ï¼Œé¢ç½©ä¸‹ä¼ æ¥äº†ä»–å¼€å¿ƒçš„ç¬‘å£°ã€‚\nâ€œå¥½åƒå—ï¼Ÿä¸‹æ¬¡æˆ‘å†å»é‚£ä¸ªåœ°æ–¹æ‰¾æ‰¾ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ç®€å•çš„æœå­æ¯”ä»»ä½•å†›ç²®éƒ½ç¾å‘³ã€‚"
                }
            ]
        },

// ğŸŸ¢ [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæ•…éšœçš„é—¨é” (å›šç¦æœªé‚)
        {
            text: "ä½ æ­£å‡†å¤‡å‡ºé—¨è¿›è´§ï¼Œå‘ç°åº—é—¨è¢«äººä»é‡Œé¢åé”äº†ï¼Œè€Œä¸”è¿˜åŠ äº†ä¸¤é“é‡å‹æŒ‚é”ã€‚\nKÃ¶nig åƒåº§å±±ä¸€æ ·å µåœ¨é—¨å£ï¼ŒæŠ±ç€åŒè‡‚ï¼Œé¢ç½©ä¸‹çš„çœ¼ç¥é˜´æ²‰å¾—å¯æ€•ã€‚\nâ€œå¤–é¢å¾ˆå±é™©... æ­»äº†å¾ˆå¤šäººã€‚â€ ä»–çš„å£°éŸ³ä½æ²‰æ²™å“‘ï¼Œä½†å‹è¿«æ„Ÿåè¶³ï¼Œâ€œæ‰€ä»¥... åˆ«å‡ºå»äº†ï¼Œå°±å¾…åœ¨è¿™é‡Œï¼Œå¾…åœ¨æˆ‘çœ‹å¾—åˆ°çš„åœ°æ–¹ã€‚â€",
            speaker: "KÃ¶nig",
            type: "alert",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 600,
            options: [
                {
                    text: "æŒ‘çœ‰çœ‹ç€ä»–ï¼šâ€œKÃ¶nigï¼Œä½ åœ¨å›šç¦æˆ‘å—ï¼Ÿâ€",
                    desc: "ç›´æ¥æˆ³ç©¿ä»–çš„å°å¿ƒæ€",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig æµ‘èº«ä¸€éœ‡ï¼Œåˆšæ‰çš„éœ¸æ°”ç¬é—´å´©å¡Œã€‚\nâ€œä¸ã€ä¸æ˜¯ï¼æˆ‘æ²¡æœ‰ï¼æˆ‘åªæ˜¯...â€ ä»–æ…Œä¹±åœ°æå‡ºé’¥åŒ™è¯•å›¾å¼€é”ï¼Œæ‰‹æŠ–å¾—è¿é’¥åŒ™å­”éƒ½å¯¹ä¸å‡†ï¼Œâ€œæˆ‘åªæ˜¯æ‹…å¿ƒä½ ï¼åˆ«ç”Ÿæ°”ï¼æˆ‘ç°åœ¨å°±å¼€é—¨ï¼å‘œ... åˆ«ç”¨è¿™ç§çœ¼ç¥çœ‹æˆ‘...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "é‚£åªå±é™©çš„çŒ›å…½ç¬é—´å˜æˆäº†åšé”™äº‹å®³æ€•è¢«é—å¼ƒçš„å°ç‹—ã€‚"
                },
                {
                    text: "é åœ¨ä»–èƒ¸å£ï¼šâ€œé‚£å¥½ï¼Œæˆ‘ä¸èµ°äº†ã€‚â€",
                    desc: "é¡ºä»ä»–çš„å æœ‰æ¬²",
                    effect: s => {
                        s.chars.konig.aff += 10;
                        printMsg("KÃ¶nig æ„£ä½äº†ï¼Œéšå³æ­»æ­»æŠŠä½ å‹’è¿›æ€€é‡Œã€‚\nâ€œ...çœŸçš„å—ï¼Ÿä½ çœŸå¥½... ä½ æ˜¯æˆ‘çš„... åªèƒ½æ˜¯æˆ‘çš„ã€‚â€", 'event');
                    },
                    result: "è™½ç„¶ä»–å¾ˆå¼€å¿ƒï¼Œä½†ä½ å‘ç°ä»–è¿˜æ˜¯å·å·æŠŠé’¥åŒ™è—è¿›äº†è´´èº«å£è¢‹é‡Œã€‚"
                }
            ]
        },

        // ğŸŸ¢ [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæˆ˜æœ¯æ‰å¸¦ (æ‰‹æ»‘?)
        {
            text: "KÃ¶nig æ­£åœ¨æ•´ç†è£…å¤‡ï¼Œä½ ååœ¨æ—è¾¹é™ªä»–ã€‚\nä»–ä¸€è¾¹å’Œä½ èŠå¤©ï¼Œä¸€è¾¹æ— æ„è¯†åœ°æŠŠç©ç€ä¸€æ ¹é»„è‰²çš„æˆ˜æœ¯æ‰å¸¦ã€‚\nå½“ä½ å›è¿‡ç¥æ—¶ï¼Œå‘ç°ä»–å·²ç»æŠŠæ‰å¸¦å¥—åœ¨äº†ä½ çš„æ‰‹è…•ä¸Šï¼Œå¹¶æ­£åœ¨ç¼“ç¼“æ”¶ç´§ã€‚\nâ€œæŠ“ä½ä½ äº†...â€ ä»–å–ƒå–ƒè‡ªè¯­ï¼Œçœ¼ç¥ç©ºæ´åˆç‹‚çƒ­ï¼Œä»¿ä½›é™·å…¥äº†æŸç§æ•çŒçš„æœ¬èƒ½ï¼Œâ€œè¿™æ ·ä½ å°±è·‘ä¸æ‰äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 800,
            options: [
                {
                    text: "æ™ƒæ™ƒæ‰‹è…•ï¼šâ€œç´§äº†ï¼ŒKÃ¶nigã€‚â€",
                    desc: "å”¤é†’ä»–",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œå•Šï¼ï¼â€ KÃ¶nig åƒè¢«çƒ«åˆ°ä¸€æ ·çŒ›åœ°æ¾æ‰‹ï¼Œç”šè‡³æå‡ºåŒ•é¦–ä»¥æ­¤ç”Ÿæœ€å¿«çš„é€Ÿåº¦å‰²æ–­äº†æ‰å¸¦ã€‚\nâ€œå¯¹ä¸èµ·å¯¹ä¸èµ·ï¼æˆ‘ä¸æ˜¯æ•…æ„çš„ï¼è¿™æ˜¯è‚Œè‚‰è®°å¿†ï¼æˆ‘ã€æˆ‘æ²¡æƒ³æŠŠä½ ç»‘èµ·æ¥ï¼è™½ç„¶... è™½ç„¶æœ‰æ—¶å€™æƒ³è¿‡... ä¸å¯¹ï¼æˆ‘æ²¡æƒ³è¿‡ï¼å¿˜æ‰å®ƒï¼â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æ€¥å¾—å¿«å“­äº†ï¼Œæ§ç€ä½ çš„æ‰‹è…•å¹äº†åŠå¤©ï¼Œç”Ÿæ€•ç•™ä¸‹ä¸€ç‚¹çº¢å°ã€‚"
                },
                {
                    text: "ä¼¸å‡ºåŒæ‰‹ï¼šâ€œè¦æŠŠå¦ä¸€åªä¹Ÿç»‘ä¸Šå—ï¼Ÿâ€",
                    desc: "è°ƒæˆä»–",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "KÃ¶nig çš„è„¸ç¬é—´çˆ†çº¢ï¼Œè’¸æ±½éƒ½è¦ä»å¤´å¥—é‡Œå†’å‡ºæ¥äº†ã€‚\nâ€œä½ ã€ä½ ... åˆ«å¼€è¿™ç§ç©ç¬‘ï¼å¿ƒè„... å¿ƒè„å—ä¸äº†äº†ï¼â€ ä»–æ‚ç€èƒ¸å£å€’åœ¨æ²™å‘ä¸Šè£…æ­»ã€‚"
                }
            ]
        },

// [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæµ´å®¤é—¨å£çš„å µæˆª
        {
            text: "æµ´å®¤é—¨å¼€äº†ï¼ŒKÃ¶nig åœ¨è’¸æ±½ç¼­ç»•ä¸­èµ°äº†å‡ºæ¥ï¼Œä»–åªåœ¨è…°é—´å›´äº†ä¸€æ¡æµ´å·¾ï¼Œå®½é˜”çš„è‚©è†€å’Œèƒ¸è‚Œä¸Šè¿˜æŒ‚ç€æ™¶è¹çš„æ°´ç ã€‚\nçœ‹åˆ°ä½ æ­£ç›¯ç€ä»–çœ‹ï¼Œä»–çš„è„¸ç¬é—´çº¢åˆ°äº†è€³æ ¹ï¼Œä½†ä»–æ²¡æœ‰èº²ï¼Œåè€ŒæŠŠä½ æŠ±èµ·æ¥æ”¾åœ¨äº†æ´—æ‰‹å°ä¸Šï¼ŒHasiï¼ˆå°å…”å­ï¼‰...â€ ä»–çš„çœ¼ç¥é€æ¸ä»å®³ç¾å˜å¾—æ»šçƒ«ã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 150,
            options: [
                {
                    text: "ä¼¸æ‰‹å¸®ä»–æ“¦èº«ä¸Šçš„æ°´ç ",
                    desc: "æŒ‡å°–åˆ’è¿‡ä»–çš„è…¹è‚Œ",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig å‘å‡ºä¸€å£°é—·å“¼ï¼ŒæŠ“ä½ä½ çš„æ‰‹æŒ‰åœ¨ä»–èƒ¸å£ï¼Œå¿ƒè„è·³å¾—å¿«è¦æ’å‡ºèƒ¸è…”ã€‚â€", 'event');
                    },
                    result: "ä»–å®Œå…¨è‡£æœåœ¨ä½ çš„æ‰‹æŒå¿ƒä¸‹ï¼Œä»»ä½ ä¸ºæ‰€æ¬²ä¸ºã€‚"
                },
                {
                    text: "å‹¾ä½ä»–çš„è„–å­",
                    desc: "ä¸»åŠ¨é‚€è¯·",
                    effect: s => {
                        s.ap = 0; // æ¶ˆè€—ç²¾åŠ›
                        s.chars.konig.aff += 10;
                    },
                    result: "ç†æ™ºæ–­å¼¦ï¼Œä»–ä¸å†å¿è€ï¼Œä½å¤´å‡¶ç‹ åœ°å»ä½äº†ä½ ï¼Œæµ´å®¤çš„é›¾æ°”åˆå˜é‡äº†ã€‚"
                }
            ]
        },

// [KÃ¶nig] ç»ˆæå‰§æƒ… 2ï¼šæººæ°´è€… (å”¯ä¸€)
        {
            text: "KÃ¶nig æµ‘èº«æ¹¿é€åœ°é—¯è¿›ä½ çš„æˆ¿é—´ï¼Œä»–ç”šè‡³æ²¡è„±è£…å¤‡ï¼Œç›´æ¥è·ªåœ¨åœ°æ¿ä¸ŠæŠ±ä½äº†ä½ çš„è…°ï¼Œè„¸åŸ‹è¿›ä½ çš„å°è…¹ï¼Œå‘¼å¸æ€¥ä¿ƒã€‚\nâ€œæˆ‘æ¢¦è§ä½ ä¸è§äº†... åˆ°å¤„éƒ½æ˜¯è¡€...â€\nä»–æŠ¬èµ·å¤´ï¼Œçœ¼çœ¶çº¢çº¢çš„ï¼šâ€œè®©æˆ‘æ„Ÿè§‰ä½ æ˜¯çœŸçš„... æ±‚ä½ ...â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 500 && !s.flags.konig_high_event_2,
            options: [
                {
                    text: "æŠ±ä½ä»–",
                    desc: "ç”¨ä½“æ¸©æ‹¯æ•‘ä»–",
                    effect: s => {
                        s.flags.konig_high_event_2 = true;
                        s.chars.konig.aff += 50;
                        s.ap = 0;
                        printMsg("ä½ çš„ä¸»åŠ¨æˆäº†å‹å®ä»–ç†æ™ºçš„æœ€åä¸€æ ¹ç¨»è‰ã€‚â€", 'event');
                    },
                    result: "ä¸€å¤œæ— çœ ã€‚"
                }
            ]
        },

// [KÃ¶nig] ç»ˆæå‰§æƒ…ï¼šå·¨å…½çš„å·¢ç©´ (å”¯ä¸€)
        {
            text: "KÃ¶nig ä¼¼ä¹è¦æŠŠä½ è—èµ·æ¥,ä»–ç”¨åšé‡çš„å†›ç”¨æ¯›æ¯¯æŠŠä½ è£¹äº†å¥½å‡ å±‚ï¼Œç„¶ååƒæŠ±ç©å¶ä¸€æ ·æŠŠä½ å®Œå…¨åœˆåœ¨æ€€é‡Œã€‚\nä»–å·¨å¤§çš„èº«èº¯è¦†ç›–åœ¨ä½ ä¸Šæ–¹ï¼Œéš”ç»äº†æ‰€æœ‰çš„å…‰çº¿å’Œå£°éŸ³ã€‚\nâ€œå¥½å°... å¥½è½¯...â€ ä»–æ‘˜ä¸‹å¤´å¥—ï¼Œå°†æ»šçƒ«çš„è„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œæ·±æ·±å¸æ°”ï¼Œâ€œæˆ‘æƒ³æŠŠä½ èè¿›æˆ‘çš„éª¨è¡€é‡Œ... è¿™æ ·ä½ å°±æ°¸è¿œè·‘ä¸æ‰äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 1000 && !s.flags.konig_high_event,
            options: [
                {
                    text: "ä¼¸æ‰‹æŠ±ä½ä»–çš„è„–å­",
                    desc: "æ¥çº³ä»–çš„å…¨éƒ¨é‡é‡",
                    effect: s => {
                        s.flags.konig_high_event = true;
                        s.chars.konig.aff += 20;
                        s.ap = 0;
                        printMsg("ä½ çš„ä¸»åŠ¨è§¦ç¢°è®©ä»–å‘å‡ºäº†ä¸€å£°æ»¡è¶³çš„å–Ÿå¹ã€‚\nä»–å°å¿ƒç¿¼ç¿¼åœ°æ§åˆ¶ç€åŠ›é“ï¼Œå´åˆè´ªå©ªåœ°åœ¨ä½ èº«ä¸Šç•™ä¸‹å±äºä»–çš„å°è®°ã€‚\nâ€œMein Schatz (æˆ‘çš„çå®)...â€", 'event');
                    },
                    result: "ä½ åœ¨ä»–çš„æ€€æŠ±ä¸­å‡ ä¹æ— æ³•åŠ¨å¼¹ï¼Œè¿™ç§è¢«å®Œå…¨å æœ‰çš„æ„Ÿè§‰è®©ä½ æˆ˜æ —ã€‚"
                }
            ]
        },

// [KÃ¶nig] çº¯çˆ±é™å®šï¼šå¾·è¯­çš„å æœ‰æ¬² (æ¿€çƒˆ)
        {
            text: "KÃ¶nig ä¼¼ä¹åšäº†ä¸€ä¸ªå™©æ¢¦ï¼Œé†’æ¥åæƒ…ç»ªæåº¦ä¸ç¨³å®šï¼Œä»–æŠŠä½ æ­»æ­»æŒ‰åœ¨æ€€é‡Œï¼ŒåŠ›é“å¤§å¾—è®©ä½ ç”šè‡³æœ‰ç‚¹ç—›ã€‚\nä»–åŸ‹é¦–åœ¨ä½ çš„é¢ˆçªï¼Œæ€¥ä¿ƒåœ°å–˜æ¯ç€ï¼Œå˜´é‡Œè¯­æ— ä¼¦æ¬¡åœ°å†’å‡ºä¸€è¿ä¸²å¾·è¯­ï¼š\nâ€œDu gehÃ¶rst mir... nur mir! Ich lasse dich nie wieder gehen, mein Herz!â€\nä»–çš„å»ç»†å¯†è€Œæ…Œä¹±åœ°è½åœ¨ä½ çš„è‚©è†€å’Œé”éª¨ä¸Šã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s) && s.chars.konig.aff > 600,
            options: [
                {
                    text: "å›æŠ±ä»–ï¼Œå®‰æŠšä»–",
                    desc: "è™½ç„¶å¬ä¸æ‡‚ï¼Œä½†æ„Ÿå—åˆ°äº†ä»–çš„ä¸å®‰",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig çš„é¢¤æŠ–é€æ¸å¹³æ¯ï¼Œä»–æŠ¬èµ·å¤´ï¼Œçœ¼è§’è¿˜å‘çº¢ï¼Œæœ‰äº›ç¾æ„§åœ°çœ‹ç€ä½ ã€‚\nâ€œæŠ±æ­‰... æˆ‘è¯´æˆ‘ä¸èƒ½å¤±å»ä½ ... ä½ æ˜¯æˆ‘çš„å¿ƒè„ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "é‚£å¤©æ™šä¸Šä»–åƒä¸ªç²˜äººçš„è€ƒæ‹‰ä¸€æ ·ï¼Œä¸€åˆ»ä¹Ÿä¸æ„¿æ„æ¾å¼€ä½ ã€‚"
                },
                {
                    text: "è½»å»ä»–çš„é¢å¤´ï¼šâ€œIch bin hier. (æˆ‘å°±åœ¨è¿™é‡Œ)â€",
                    desc: "ç”¨å¾·è¯­å›åº”ä»–",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        printMsg("å¬åˆ°æ¯è¯­çš„ç¬é—´ï¼ŒKÃ¶nig æ„£ä½äº†ï¼Œç„¶åä»–æ›´ç”¨åŠ›çš„æŠ±ä½äº†ä½ ï¼Œä½ ä¼¼ä¹èƒ½æ„Ÿå—åˆ°è‚©è†€æ¹¿æ¶¦äº†ã€‚", 'event');
                    },
                    result: "ä½ çš„ä¸€å¥è¯æ¯”ä»»ä½•é•‡å®šå‰‚éƒ½ç®¡ç”¨ã€‚"
                }
            ]
        },

        // [KÃ¶nig] å¼‚åœ°æ‹ï¼šåŒ¿ååŒ…è£¹
        {
            text: "ä½ åœ¨é—¨å£å‘ç°äº†ä¸€ä¸ªè„å…®å…®çš„åŒ…è£¹ï¼Œæ²¡æœ‰å¯„ä»¶äººï¼Œåªæœ‰ä¸€åªç”»å¾—å¾ˆä¸‘çš„å°å…”å­æ¶‚é¸¦ã€‚\næ‰“å¼€ä¸€çœ‹ï¼Œé‡Œé¢æ˜¯ä¸€å—åœ¨æ­¤åœ°æä¸ºç½•è§çš„ã€è¿˜æ²¡æœ‰è¿‡æœŸçš„å·§å…‹åŠ›ï¼Œä»¥åŠä¸€å¼ æ‰çš±çš„çº¸æ¡ï¼š\nâ€˜å³ä½¿åœ¨æœ€å†·çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿæƒ³åˆ°äº†ä½ ã€‚â€™",
            speaker: "System",
            type: "event",
            condition: s => s.chars.konig.dating && !s.flags.harem_queen && checkExclusivity('konig', s) && chance(20),
            options: [
                {
                    text: "åƒæ‰å·§å…‹åŠ›ï¼ŒæŠŠçº¸æ¡å¤¹è¿›ä¹¦é‡Œ",
                    desc: "æ„Ÿå—ä»–çš„å¿ƒæ„ (Food +1)",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        s.food += 1;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("å·§å…‹åŠ›å¾ˆç”œï¼Œä½ ä»¿ä½›èƒ½çœ‹åˆ°é‚£ä¸ªå¤§ä¸ªå­åœ¨åºŸå¢Ÿé‡Œå°å¿ƒç¿¼ç¿¼ä¿æŠ¤è¿™å—ç³–çš„æ ·å­ã€‚", 'gain');
                    },
                    result: "è¿™ä»½è¿œæ–¹çš„ç”œèœœè®©ä½ ä»Šå¤©çš„å¿ƒæƒ…æ ¼å¤–å¥½ã€‚"
                },
                {
                    text: "æŠŠæ•´ä¸ªåŒ…è£¹çè—èµ·æ¥",
                    desc: "èˆä¸å¾—åƒ",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("ä½ æŠŠå®ƒæ”¾è¿›äº†ä½ æœ€éšç§˜çš„æŠ½å±‰é‡Œï¼Œè°èƒ½æƒ³åˆ°åºŸåœŸå†›éœ€åº—è€æ¿ä¿é™©æŸœé‡Œæ”¾çš„æ˜¯è¿™äº›ç©æ„å„¿ï¼Ÿã€‚", 'event');
                    },
                    result: "ç­‰ä½ ä¸‹æ¬¡è§åˆ°ä»–ï¼Œä¸€å®šè¦ç»™ä»–ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±ã€‚"
                }
            ]
        },

     // [KÃ¶nig] è¯¯ä¼šåˆ†æ‰‹å±æœº
        {
            text: "KÃ¶nig ç¼©åœ¨è§’è½é‡Œï¼Œæ‰‹é‡Œç´§ç´§æ”¥ç€ä½ å‡†å¤‡é€€è¿˜ç»™é‚£ä¸ªæŒ‡æŒ¥å®˜çš„æ˜‚è´µç å®ç›’ï¼Œä»–æµ‘èº«éƒ½åœ¨å‘æŠ–ï¼Œé¢ç½©è¢«çœ¼æ³ªæµ¸æ¹¿äº†ä¸€å—ã€‚\nâ€œä»–æ¯”æˆ‘æœ‰é’±... æ¯”æˆ‘æ­£å¸¸... æ¯”æˆ‘å¥½...â€\nä»–æŠ¬èµ·å¤´ï¼Œå£°éŸ³ç ´ç¢ä¸å ªï¼šâ€œæˆ‘ä¸è¯¥æ‹–ç´¯ä½ çš„ï¼Œä½ åº”è¯¥å’Œä»–åœ¨ä¸€èµ·... æˆ‘è¿™å°±èµ°ï¼Œæˆ‘ä¸ä¼šå†çƒ¦ä½ äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
// âœ… ä¿®æ”¹åï¼šæ‹çˆ±ä¸­ ä¸” åªæœ‰ 5% çš„æ¦‚ç‡è§¦å‘
// âœ… ä¿®æ”¹åï¼šåªæœ‰åœ¨æ‹çˆ± ä¸” æ²¡æˆä¸ºå¥³ç‹ æ—¶æ‰ä¼šåƒé†‹
           condition: s => s.chars.konig.dating && chance(15) && !s.flags.harem_queen,

            options: [
                {
                    text: "å†²è¿‡å»æŠ±ç´§ä»–ï¼šâ€œç¬¨è›‹ï¼æˆ‘æ˜¯è¦å»é€€è´§çš„ï¼â€",
                    desc: "å¼ºåŠ›æŒ½å›",
                    effect: s => {
                        s.chars.konig.aff += 10;
                        printMsg("KÃ¶nig æ„£ä½äº†ï¼Œå·¨å¤§çš„èº«ä½“åœ¨ä½ æ€€é‡Œåƒµç¡¬äº†ä¸€ç¬ï¼Œéšå³çˆ†å‘å‡ºæ›´å¤§å£°çš„å“­æ³£ã€‚\nâ€œçœŸçš„å—ï¼Ÿ...å‘œå‘œ... æˆ‘ä»¥ä¸ºä½ ä¸è¦æˆ‘äº†... åˆ«ä¸¢ä¸‹æˆ‘ï¼Œæ±‚ä½ äº†...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æŠ˜è…¾äº†ä½ ä¸€æ™šä¸Šï¼Œä¸‹æ¬¡è¿˜æ˜¯åˆ«è¿™æ ·äº†ã€‚"
                },
                {
                    text: "é¡ºç€ä»–çš„è¯è¯´ï¼šâ€œæ—¢ç„¶ä½ è¿™ä¹ˆæƒ³ï¼Œé‚£å°±è¿™æ ·å§ã€‚â€ (åˆ†æ‰‹)",
                    desc: "è®©ä»–ç¦»å¼€",
                    effect: s => {
                        s.chars.konig.dating = false; // ğŸ’” åˆ†æ‰‹
                        s.chars.konig.aff -= 100;      // ä»–ä¼šå¾ˆä¼¤å¿ƒï¼Œä½†ä¸ä¼šæ¨ä½ 
                        s.chars.konig.confessed = false;
// ğŸŸ¢ æ–°å¢ï¼šå¼€å¯ 30 å¤©å†·å´CD
                        s.chars.konig.last_reject_day = s.day;
// ğŸŸ¢ æ–°å¢ï¼šæ ‡è®°ä¸ºå‰ä»»
                                  s.chars.konig.is_ex = true;
                        printMsg("â€œç¥... ç¥ä½ å¹¸ç¦ã€‚â€ ä»–çš„å£°éŸ³å¾ˆè½»ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ã€å…³ç³»ç»“æŸã€‘KÃ¶nig è¸‰è·„ç€è·‘å‡ºäº†åº—é—¨ï¼Œä¹‹åä½ å¾ˆå°‘å†è§åˆ°ä»–ã€‚"
                }
            ]
        },
    // [KÃ¶nig] æ™´å¤©æ—¥å…‰æµ´ï¼šå·¨äººçš„é˜´å½±
        {
            text: "ä»Šå¤©çš„é˜³å…‰æ¯’è¾£å¾—æœ‰äº›åˆºçœ¼ï¼Œä½ åˆšæ¬æŠŠæ¤…å­ååˆ°å¤–é¢ï¼Œå°±æ„Ÿè§‰åˆ°ä¸€ç‰‡å·¨å¤§çš„é˜´å½±ç¬¼ç½©äº†ä½ ã€‚\nKÃ¶nig ç«™åœ¨ä½ èº«åï¼Œç”¨ä»–å®½é˜”çš„èƒŒè„Šä¸ºä½ æŒ¡ä½äº†ç›´å°„çš„é˜³å…‰ï¼Œä»–ç©¿ç€åšé‡çš„è£…å¤‡ï¼Œæ±—æ°´æ­£é¡ºç€ä»–çš„è„–é¢ˆæµè¿›è¡£é¢†é‡Œã€‚",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating && s.weather.name === 'æ™´æœ—',
            options: [
                {
                    text: "æ‹‰ä»–åä¸‹ï¼šâ€œåˆ«æŒ¡ç€ï¼Œä¸€èµ·æ™’ï¼â€",
                    desc: "å¸®ä»–è„±æ‰åšé‡çš„å¤–å¥—",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig æ…Œä¹±åœ°è¢«ä½ æ‹‰ç€åä¸‹ï¼Œå½“ä½ å¸®ä»–è§£å¼€æˆ˜æœ¯èƒŒå¿ƒé€æ°”æ—¶ï¼Œä»–å®³ç¾å¾—æµ‘èº«éƒ½åœ¨å†’çƒ­æ°”ã€‚\nâ€œæˆ‘ã€æˆ‘å‡ºæ±—äº†... ä¼šæœ‰å‘³é“çš„... åˆ«é å¤ªè¿‘...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä½†ä»–è¿˜æ˜¯ä¹–ä¹–åœ°ååœ¨ä½ èº«è¾¹ï¼Œåƒåªè¢«å¤ªé˜³æ™’å¾—è¿·è¿·ç³Šç³Šçš„å¤§ç†Šã€‚"
                },
                {
                    text: "äº«å—ä»–çš„åº‡æŠ¤",
                    desc: "ä»–å°±æ˜¯æœ€å¥½çš„é®é˜³ä¼",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("â€œæˆ‘ä¼šæŒ¡ä½ç´«å¤–çº¿çš„... åˆ«æ‹…å¿ƒã€‚â€ ä»–çš„å£°éŸ³é—·é—·çš„ï¼Œä½†æ˜¯çŸ¥é“ä½ éœ€è¦ä»–ï¼Œè¿™è®©ä»–å¾ˆå¼€å¿ƒã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "è™½ç„¶ä»–çƒ­å¾—å¤Ÿå‘›ï¼Œä½†çœ‹åˆ°ä½ æƒ¬æ„çš„æ ·å­ï¼Œä»–è§‰å¾—ä¸€åˆ‡éƒ½å€¼äº†ã€‚"
                }
            ]
        },

            // æ‹çˆ±äº‹ä»¶ 2ï¼šåˆ†ç¦»ç„¦è™‘ (é»‘åŒ–é¢„è­¦)
            {
                text: "ä½ åªæ˜¯å»éš”å£è¡—åŒºè°ˆäº†ä¸€ç¬”ç”Ÿæ„ï¼Œå›æ¥æ™šäº†åŠå°æ—¶ã€‚\nåˆšè¿›åº—é—¨ï¼Œä½ å°±æ„Ÿåˆ°æ°”æ°›ä¸å¯¹ã€‚KÃ¶nig ç‹¬è‡ªååœ¨é»‘æš—çš„è§’è½é‡Œï¼Œæ‰‹é‡Œæ­»æ­»æ”¥ç€ä¸€ä¸ªè¢«æå˜å½¢çš„æ¯å­ã€‚\nå¬åˆ°ä½ çš„è„šæ­¥å£°ï¼Œä»–çŒ›åœ°æŠ¬å¤´ï¼Œé¢ç½©ä¸‹çš„å‘¼å¸å£°ç²—é‡ä¸”æ€¥ä¿ƒï¼Œçœ¼ç¥é‡Œæ˜¯è®©ä½ å¿ƒæƒŠçš„æš—è‰²ã€‚\nâ€œä½ å»äº†å“ªé‡Œ...ï¼Ÿä¸ºä»€ä¹ˆä¸å¸¦æˆ‘...ï¼Ÿä½ æ˜¯ä¸æ˜¯... ä¹Ÿæƒ³ä¸¢ä¸‹æˆ‘ï¼Ÿâ€",
                speaker: "KÃ¶nig",
                type: "alert",
                condition: s => s.chars.konig.dating,
                options: [
                    {
                        text: "ç«‹åˆ»æŠ±ä½ä»–å®‰æŠš",
                        desc: "é«˜æƒ…å•†ï¼šç»™äºˆç»å¯¹çš„å®‰å…¨æ„Ÿ",
                        effect: s => {
                            s.chars.konig.aff += 8;
                            printMsg("KÃ¶nig åƒµç¡¬çš„èº«ä½“åœ¨ä½ æ€€é‡Œå‰§çƒˆé¢¤æŠ–ï¼Œä»–åæ‰‹æŠŠä½ å‹’å¾—å‡ ä¹çª’æ¯ï¼Œå¤´åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œå‘å‡ºå‘œå’½å£°ã€‚\nâ€œåˆ«ç¦»å¼€æˆ‘... æ±‚ä½ äº†... æˆ‘ä¼šæŠŠé‚£äº›é è¿‘ä½ çš„äººéƒ½... åˆ«ä¸è¦æˆ‘...â€", 'dialogue', 'KÃ¶nig');
                        },
                        result: "è™½ç„¶ä»–å†·é™ä¸‹æ¥äº†ï¼Œä½†ä½ æ„è¯†åˆ°è¿™åªå·¨å…½çš„é“¾å­å¿…é¡»ç´§ç´§æ¡åœ¨ä½ æ‰‹é‡Œï¼Œå¦åˆ™åæœä¸å ªè®¾æƒ³ã€‚"
                    },
                    {
                        text: "è§£é‡Šå¹¶è´£å¤‡ä»–çš„å¤šç–‘",
                        desc: "ä½æƒ…å•†ï¼šå¯èƒ½ä¼šæ¿€æ€’ä»–",
                        effect: s => {
                            s.chars.konig.aff -= 30;
                            printMsg("â€œå¤šç–‘...ï¼Ÿå¯¹... æ˜¯æˆ‘æœ‰ç—…...â€ KÃ¶nig å‘å‡ºä¸€å£°ä»¤äººæ¯›éª¨æ‚šç„¶çš„ä½ç¬‘ï¼Œæ¯å­è½»è€Œæ˜“ä¸¾çš„è¢«ä»–ææ‰ã€‚\nä»–æ²¡æœ‰å†è¯´è¯ï¼Œè¿™å¤©æ™šä¸Šï¼Œä½ å‡ ä¹éš¾ä»¥å…¥ç¡ã€‚", 'alert');
                        },
                        result: "ä½ æ„Ÿåˆ°äº†ä¸€é˜µå¯’æ„ï¼Œå¦‚æœæ²¡æœ‰å®‰æŠšå¥½ä»–ï¼Œä¸‹ä¸€æ¬¡ç ´ç¢çš„å¯èƒ½å°±ä¸æ˜¯æ¯å­äº†ã€‚"
                    }
                ]
            },
// --- æ–°å¢ KÃ¶nig éšæœºäº‹ä»¶ ---

            // äº‹ä»¶ 1ï¼šå·¨äººçš„é’ˆçº¿æ´» (åå·®èŒ)
            {
                text: "ä½ æ­£å¯¹ç€ä¸€ä»¶ç ´æŸçš„æˆ˜æœ¯èƒŒå¿ƒå‘æ„ï¼Œæ‰“ç®—æŠŠå®ƒæ‰”äº†ã€‚KÃ¶nig é»˜é»˜èµ°äº†è¿‡æ¥ï¼Œæœ‰äº›å±€ä¿ƒåœ°ä»å£è¢‹é‡Œæå‡ºäº†ä¸€ä¸ª... é’ˆçº¿åŒ…ï¼Ÿ\nâ€œé‚£ä¸ª... å¦‚æœä½ ä¸ä»‹æ„çš„è¯ï¼Œæˆ‘å¯ä»¥è¯•è¯•ï¼Œæˆ‘ç»å¸¸è¡¥è‡ªå·±çš„å¤´å¥—ï¼Œæ‰€ä»¥...â€",
                speaker: "KÃ¶nig",
                type: "dialogue",
                options: [
                    {
                        text: "äº¤ç»™ä»–ä¿®è¡¥",
                        desc: "è§è¯†ä¸€ä¸‹ä»–çš„æ‰‹è‰º",
                        effect: s => {
                            s.chars.konig.aff += 3;
                            printMsg("ä½ æƒŠè®¶åœ°çœ‹ç€ä»–çš„å¤§æ‰‹æ­¤åˆ»å´æç€ç»†å°çš„é’ˆçº¿è¿é’ˆå¦‚é£ï¼Œå‡ åˆ†é’Ÿåï¼ŒèƒŒå¿ƒè¢«å®Œç¾ä¿®å¤äº†ã€‚", 'event');
                        },
                        result: "â€œä¿®å¥½äº†ã€‚â€ ä»–æŠŠèƒŒå¿ƒé€’ç»™ä½ ï¼Œé¢ç½©ä¸‹çš„çœ¼ç›äº®æ™¶æ™¶çš„ï¼Œä¼¼ä¹åœ¨æœŸå¾…ä½ çš„å¤¸å¥–ã€‚"
                    },
                    {
                        text: "å¤¸ä»–è´¤æƒ ",
                        desc: "è™½ç„¶è¿™ä¸ªè¯æ€ªæ€ªçš„",
                        effect: s => {
                            s.chars.konig.aff += 5;
                        },
                        result: "KÃ¶nig çš„è€³æœµç¬é—´çº¢äº†ï¼šâ€œä¸ã€ä¸æ˜¯è´¤æƒ ï¼è¿™æ˜¯...æˆ‘ä»¥å‰ç¼çš„æ¯”è¾ƒå¤šæ‰€ä»¥ï¼â€ ä»–æ…Œä¹±åœ°è§£é‡Šç€ã€‚"
                    }
                ]
            },
            // äº‹ä»¶ 2ï¼šæ¶æ„çš„æµè¨€ (æŠ¤çŸ­æ—¶åˆ»)
            {
                text: "å‡ ä¸ªè·¯è¿‡çš„ä½£å…µå¯¹ç€ååœ¨è§’è½çš„ KÃ¶nig æŒ‡æŒ‡ç‚¹ç‚¹ï¼Œæ•…æ„å¤§å£°è¯´é“ï¼š\nâ€œçœ‹é‚£ä¸ªæˆ´å¤´å¥—çš„æ€ªèƒï¼Œå¬è¯´ä»–æ¯å®¹äº†æ‰ä¸æ•¢è§äººã€‚â€\nKÃ¶nig æ˜¾ç„¶å¬åˆ°äº†ï¼Œä»–çš„èƒŒå½±åƒµç¡¬äº†ä¸€ä¸‹ã€‚",
                speaker: "Mercenary",
                type: "alert",
                options: [
                    {
                        text: "å¤§å£°å‘µæ–¥å¹¶èµ¶èµ°ä½£å…µ",
                        desc: "ç»´æŠ¤ä»–çš„å°Šä¸¥ (-$50 æ½œåœ¨ç”Ÿæ„)",
                        effect: s => {
                            s.money -= 50;
                            s.chars.konig.aff += 8; // å¤§å¹…æå‡å¥½æ„Ÿ
                            printMsg("ä½ ç›´æ¥æŠŠé‚£å‡ ä¸ªå˜´ç¢çš„å®¶ä¼™è½°äº†å‡ºå»ã€‚KÃ¶nig æŠ¬èµ·å¤´çœ‹ç€ä½ ï¼Œçœ¼é‡Œæœ‰äº›éš¾ä»¥ç½®ä¿¡ã€‚", 'event');
                        },
                        result: "â€œä»æ¥æ²¡æœ‰äºº... ä¸ºæˆ‘è¿™æ ·åšè¿‡ï¼Œè°¢è°¢ä½ ï¼Œ{PLAYER}ã€‚â€ ä»–çš„å£°éŸ³æœ‰äº›å“½å’½ã€‚"
                    },
                    {
                        text: "ååˆ°ä»–èº«è¾¹ï¼Œæ¡ä½ä»–çš„æ‰‹",
                        desc: "æ— å£°çš„å®‰æ…°",
                        effect: s => {
                            s.chars.konig.aff += 3;
                        },
                        result: "ä»–åæ‰‹ç´§ç´§æ¡ä½äº†ä½ çš„æ‰‹ï¼ŒåŠ›é“å¤§å¾—è®©ä½ æœ‰ç‚¹ç–¼ï¼Œä½†ä»–æ˜¾ç„¶æ˜¯åœ¨ä»ä½ è¿™é‡Œæ±²å–å‹‡æ°”ã€‚"
                    }
                ]
            },

            // äº‹ä»¶ 3ï¼šé›¨ä¸­çš„å®ˆæœ› (ç¤¾æå±æ€§)
            {
                text: "å¤–é¢ä¸‹ç€æš´é›¨ï¼Œä½ å‘ç° KÃ¶nig åƒå°Šé›•åƒä¸€æ ·ç«™åœ¨åº—é—¨å£çš„å±‹æªä¸‹ï¼Œæµ‘èº«éƒ½è¢«é£˜è¿›æ¥çš„é›¨æ°´æ‰“æ¹¿äº†ã€‚\nâ€œKÃ¶nigï¼Ÿä¸ºä»€ä¹ˆä¸è¿›æ¥ï¼Ÿâ€ ä½ é—®é“ã€‚\nâ€œé‡Œé¢... äººå¤ªå¤šäº†ã€‚æˆ‘æ€•æˆ‘ä¸å°å¿ƒç¢°åˆ°è°... æˆ–è€…æŒ¡è·¯ï¼Œæˆ‘åœ¨è¿™é‡Œå°±å¥½ã€‚â€",
                speaker: "KÃ¶nig",
                type: "event",
                options: [
                    {
                        text: "å¼ºè¡ŒæŠŠä»–æ‹‰è¿›æ¥",
                        desc: "åˆ«è®©ä»–æ„Ÿå†’äº†",
                        effect: s => {
                            s.chars.konig.aff += 5;
                            printMsg("KÃ¶nig è¸‰è·„ç€è¢«ä½ æ‹‰è¿›å±‹é‡Œï¼Œè™½ç„¶ä»–ä¸€ç›´åœ¨é“æ­‰è¯´æ€•å¼„æ¹¿åœ°æ¿ï¼Œä½†è¿˜æ˜¯ä¹–ä¹–ç«™åœ¨äº†ä½ æŒ‡å®šçš„è§’è½ã€‚", 'dialogue', 'KÃ¶nig');
                        },
                        result: "ä½ ç»™äº†ä»–ä¸€æ¡æ¯›å·¾ã€‚ä»–ä¸€è¾¹æ“¦ç€å¤´å¥—ä¸Šçš„æ°´ï¼Œä¸€è¾¹å·å·çœ‹ç€ä½ å¿™ç¢Œçš„èƒŒå½±ã€‚"
                    },
                    {
                        text: "é™ªä»–ä¸€èµ·ç«™ä¸€ä¼šå„¿ï¼ˆAPï¼1ï¼‰",
                        desc: "äº«å—é›¨å£°",
                        condition: s => s.ap > 0,
                        effect: s => {
                            s.ap--;
                            s.chars.konig.aff += 5;
                        },
                        result: "ä½ é™ªä»–ç«™åœ¨å±‹æªä¸‹ï¼Œä»–çœ‹èµ·æ¥æ”¾æ¾å¤šäº†ï¼Œæ‚„æ‚„å¾€ä½ è¿™è¾¹æŒªäº†ä¸€å°æ­¥ï¼Œä¸ºä½ æŒ¡ä½äº†ä¾§é¢çš„é£é›¨ã€‚"
                    }
                ]
            },

   // æ‹çˆ±äº‹ä»¶ 3ï¼šäººå½¢èµ·é‡æœº (æ—¥å¸¸/ç”œ)
            {
                text: "ä»“åº“çš„è´§æ¶å¤ªé«˜äº†ï¼Œä½ è¸®èµ·è„šå°–ä¹Ÿå¤Ÿä¸åˆ°æœ€ä¸Šé¢çš„åŒ»ç–—ç®±ã€‚\nKÃ¶nig é»˜é»˜åœ°èµ°åˆ°äº†ä½ èº«åã€‚ä»–æ²¡æœ‰å¸®ä½ æ‹¿ç®±å­ï¼Œè€Œæ˜¯ä¼¸å‡ºé‚£åŒå¤§æ‰‹ï¼Œæç€ä½ çš„è…°ï¼Œæ¯«ä¸è´¹åŠ›åœ°æŠŠä½ æ•´ä¸ªäººä¸¾äº†èµ·æ¥ã€‚\nâ€œè¿™æ ·... å°±å¤Ÿå¾—ç€äº†å§ï¼Ÿâ€ ä»–çš„å£°éŸ³åœ¨é¢ç½©ä¸‹å¬èµ·æ¥é—·é—·çš„ï¼Œå¸¦ç€ä¸€ä¸ç¾æ¶©çš„ç¬‘æ„ã€‚",
                speaker: "KÃ¶nig",
                type: "dialogue",
                condition: s => s.chars.konig.dating,
                options: [
                    {
                        text: "äº«å—è¿™ä¸ªé«˜åº¦",
                        desc: "æ‹¿å®Œä¸œè¥¿æ‘¸æ‘¸ä»–çš„å¤´ç›”",
                        effect: s => {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                            s.chars.konig.aff += 5;
                            printMsg("KÃ¶nig çš„è€³æ ¹è‚‰çœ¼å¯è§åœ°çº¢äº†ï¼Œä»–ä¼¼ä¹å¾ˆäº«å—è¢«ä½ â€œåˆ©ç”¨â€èº«é«˜ä¼˜åŠ¿ã€‚", 'event');
                        },
                        result: "æŠŠä½ æ”¾ä¸‹åï¼Œä»–åƒåªè¢«å¤¸å¥–çš„å¤§ç‹—ä¸€æ ·ï¼Œå¿«ä¹åœ°å»æ—è¾¹æ¬é‚£å‡ å¨é‡çš„å¼¹è¯ç®±äº†ã€‚"
                    },
                    {
                        text: "éª‘åœ¨ä»–è‚©è†€ä¸Š",
                        desc: "æ›´è¿›ä¸€æ­¥ï¼",
                        condition: s => s.chars.konig.aff > 80,
                        effect: s => {
                            s.chars.konig.aff += 8
                        },
                        result: "KÃ¶nig æ…Œä¹±äº†ä¸€ç¬æ€•ä½ æ‘”ä¸‹æ¥ï¼Œä½†äº‹å®ä¸Šä»–ç¨³ç¨³åœ°æ‰˜ç€ä½ ï¼Œè®©ä½ éª‘åœ¨ä»–ä¸¤ç±³é«˜çš„è‚©è†€ä¸Šå·¡è§†äº†æ•´ä¸ªåº—é“ºã€‚"
                    }
                ]
            }
        ],         

// æ³¨æ„ï¼šè¿™æ®µä»£ç åº”è¯¥æ”¾åœ¨ Characters å¯¹è±¡é‡Œï¼Œæ¯”å¦‚ krueger: [...], ä¹‹å
    keegan: [
        // [Keegan] æ—¥å¸¸ 1ï¼šæ— å£°çš„ä¿®ç¼®
        {
            text: "ä½ å‘ç°åº—é‡Œé‚£æ‰‡æ€»æ˜¯å…³ä¸ä¸¥çš„çª—æˆ·è¢«ä¿®å¥½äº†ï¼Œçª—æ¡†ä¸Šè¿˜åŠ å›ºäº†ä¸€å±‚é˜²é£èƒ¶æ¡ã€‚\nKeegan æ­£ååœ¨è§’è½é‡Œæ“¦æ‹­ä»–çš„å¤œè§†ä»ªï¼Œä»¿ä½›ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€æ¯çƒ­å’–å•¡",
                    desc: "æ„Ÿè°¢ä»–çš„é»˜é»˜ä»˜å‡º",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        printMsg("Keegan æ¥è¿‡å’–å•¡ï¼Œè™½ç„¶æ²¡æœ‰æŠ¬å¤´ä½†å˜´è§’å¾®å¾®ä¸Šæ‰¬ã€‚\nâ€œé¡ºæ‰‹è€Œå·²ï¼Œé£å£°å½±å“å¬åŠ›ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "å…¸å‹çš„ Keegan é£æ ¼ï¼Œåšå¾—å¤šè¯´å¾—å°‘ã€‚"
                }
            ]
        },

// [Keegan] æ—¥å¸¸ 7ï¼šé”‹åˆ©åº¦ (èŒä¸šç—…)
        {
            text: "ä½ æ­£æ‹¿ç€ä¸€æŠŠé’äº†çš„è£çº¸åˆ€è´¹åŠ›åœ°åˆ‡å‰²åˆšåˆ°çš„è´§ç‰©åŒ…è£…ç®±ã€‚\nä¸€åªæˆ´ç€æˆ˜æœ¯æ‰‹å¥—çš„æ‰‹ä¼¸è¿‡æ¥æ‹¿èµ°äº†ä½ çš„åˆ€ï¼ŒKeegan æå‡ºä¸€å—éšèº«æºå¸¦çš„å°ç£¨åˆ€çŸ³ï¼Œä¼´éšç€å‡ æ¬¡ä»¤äººç‰™é…¸çš„æ‘©æ“¦å£°ï¼Œä»–æŠŠåˆ€åˆé€’äº†å›æ¥ã€‚\nâ€œåˆ€åˆƒå¿…é¡»æ—¶åˆ»ä¿æŒé”‹åˆ©ï¼Œè¿™ä¹Ÿæ˜¯ç”Ÿå­˜çš„ä¸€éƒ¨åˆ†ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "è¯•ç”¨ä¸€ä¸‹",
                    desc: "ä¸èˆ¬é¡ºæ»‘",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // çœåŠ›äº†
                        printMsg("æ­¤æ—¶çš„è£çº¸åˆ€é”‹åˆ©æ— æ¯”ï¼ŒKeeganæ»¡æ„åœ°ç‚¹äº†ç‚¹å¤´ã€‚", 'gain');
                    },
                    result: "â€œå¥½åˆ€å·¥ã€‚â€ ä»–éš¾å¾—å¤¸äº†ä¸€å¥ï¼ˆè™½ç„¶æ˜¯åœ¨å¤¸ä»–è‡ªå·±ç£¨çš„åˆ€ï¼‰ã€‚"
                },
                {
                    text: "â€œä½ éšèº«å¸¦ç£¨åˆ€çŸ³ï¼Ÿâ€",
                    desc: "å¥½å¥‡",
                    result: "â€œæ—¶åˆ»å‡†å¤‡ç€ã€‚â€ ä»–æ”¶èµ·å·¥å…·ï¼Œè½¬èº«å»æ£€æŸ¥è´§æ¶äº†ã€‚"
                }
            ]
        },

        // [Keegan] æ—¥å¸¸ 9ï¼šç›²åŒºä¼‘æ†© (ä¿¡ä»»)
        {
            text: "ä½ å‘ç° Keegan æ­£ç«™åœ¨åº—é“ºæœ€é‡Œé¢çš„æ­»è§’ï¼ŒèƒŒé ç€å¢™å£é—­ç›®å…»ç¥ï¼Œä»–æŠ±ç€åŒè‡‚ï¼Œæ‰‹æŒ‡æ¼«ä¸ç»å¿ƒçš„æ— å£°æ•²å‡»ç€æ­¦å™¨ã€‚\nå½“ä½ èµ°è¿‘æ—¶ï¼Œä»–æ²¡æœ‰ççœ¼ï¼Œåªæ˜¯åŠ¨äº†åŠ¨å˜´å”‡ï¼šâ€œåˆ«ç®¡æˆ‘... è¿™æ˜¯æ•´ä¸ªè¡—åŒºå”¯ä¸€ç‹™å‡»æ‰‹æ‰“ä¸åˆ°çš„æ­»è§’ï¼Œè®©æˆ‘å¾…ååˆ†é’Ÿã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "é»˜é»˜å¸®ä»–æŒ¡ä½å…¶ä»–äººçš„è§†çº¿",
                    desc: "ç»™ä»–ååˆ†é’Ÿçš„å®‰å®",
                    effect: s => {
                        s.chars.keegan.aff += 3; // ä»–æ„Ÿå—åˆ°äº†ä½ çš„ä¿æŠ¤
                        s.ap = Math.max(0, s.ap - 1); // è€—è´¹ç‚¹æ—¶é—´
                    },
                    result: "ååˆ†é’Ÿåï¼Œä»–å‡†æ—¶çå¼€çœ¼ï¼Œçœ¼åº•çš„ç–²æƒ«æ¶ˆæ•£äº†ã€‚\nâ€œå¤šè°¢æ©æŠ¤ã€‚â€ ä»–å‘ä½ å¾®å¾®é¢”é¦–ï¼Œå†æ¬¡æ•´ç†å¥½é¢ç½©åæŠ•å…¥äº†å¤œè‰²ã€‚"
                },
                {
                    text: "â€œè¿™é‡Œä¸æ˜¯æ—…é¦†ã€‚â€",
                    desc: "æ— æƒ…èµ¶äºº",
                    result: "Keegan æ²¡æœ‰ä»»ä½•æŠ±æ€¨çš„ç«‹åˆ»èµ·èº«ç¦»å¼€ï¼Œä½†ä½ çŸ¥é“ä»–ä»¥åå¯èƒ½ä¸ä¼šå†æ¥è¿™é‡Œä¼‘æ¯äº†ã€‚"
                }
            ]
        },

        // [Keegan] æ—¥å¸¸ 8ï¼šè±åˆ©çš„è¡¥ç»™ (Riley)
        {
            text: "Keegan å¸¦ç€é‚£åªè‘—åçš„å†›çŠ¬ Riley èµ°äº†è¿›æ¥ã€‚ä½†ä»–å¹¶æ²¡æœ‰èµ°å‘æŸœå°ï¼Œè€Œæ˜¯å…ˆè¹²ä¸‹èº«æ£€æŸ¥ Riley çš„çˆªå­ã€‚\nâ€œæ°´æ³¥åœ°å¤ªçƒ«äº†ã€‚â€ ä»–æŠ¬å¤´çœ‹å‘ä½ ï¼Œâ€œå¯ä»¥ç»™å®ƒå¼„ç‚¹å‡‰æ°´å—ï¼Ÿè¦å¹²å‡€çš„ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "ç«¯æ¥ä¸€ç›†åŠ äº†å†°å—çš„çº¯å‡€æ°´",
                    desc: "ä¼˜å¾…åŠŸå‹‹çŠ¬ (-1 Food)",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--; // æ¶ˆè€—ä¸€ç‚¹åº“å­˜æ¨¡æ‹Ÿå†°å—/æ°´èµ„æº
                        s.chars.keegan.aff += 3;
                        s.rep_ghosts += 5;
                        printMsg("Riley å¼€å¿ƒåœ°å¤§å£å–æ°´ï¼ŒKeegan çœ‹ç€ç‹—ï¼Œçœ¼ç¥æŸ”å’Œä¸‹æ¥ã€‚â€œå¥½å­©å­... è°¢äº†ï¼Œè€æ¿ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä»–å¯¹ç‹—æ¯”å¯¹äººå¥½ï¼Œè¿™å¤§æ¦‚æ˜¯ Ghosts çš„é€šç—…ã€‚"
                },
                {
                    text: "æŒ‡æŒ‡é—¨å£çš„è‡ªæ¥æ°´ç®¡",
                    desc: "â€œè‡ªåŠ©æœåŠ¡â€",
                    result: "Keegan çš±äº†çš±çœ‰ï¼Œè‡ªå·±æ‹¿å‡ºæ°´å£¶å–‚äº† Rileyï¼Œç„¶åä¸€è¨€ä¸å‘åœ°èµ°äº†ã€‚"
                }
            ]
        },

        
        // [Keegan] æ—¥å¸¸ 2ï¼šé›¨å¤œè®¿å®¢
        {
            text: "æš´é›¨å¤œï¼ŒKeegan æ¨é—¨è€Œå…¥ï¼Œè™½ç„¶ä»–æµ‘èº«æ¹¿é€ä½†èµ°è·¯ä»ç„¶æ‚„æ— å£°æ¯ï¼Œç”šè‡³æ²¡æœ‰åœ¨åœ°æ¿ä¸Šç•™ä¸‹å¤ªå¤šæ°´æ¸ã€‚\nâ€œè·¯è¿‡ï¼Œå€Ÿä¸ªåœ°æ–¹èº²é›¨ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            options: [
                {
                    text: "ç»™ä»–æ‹¿æ¡å¹²æ¯›å·¾",
                    desc: "ç…§é¡¾ä»–",
                    effect: s => {
                        s.chars.keegan.aff += 1;
                        printMsg("â€œè°¢äº†ã€‚â€ ä»–æ¥è¿‡æ¯›å·¾æ“¦äº†æ“¦å¤´å‘ï¼Œæ²¡ä»€ä¹ˆè¡¨æƒ…ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "ä»–å®‰é™åœ°å¾…åœ¨è§’è½ï¼Œåƒä¸ªéšå½¢çš„å®ˆæŠ¤è€…ã€‚"
                }
            ]
        },

// [Keegan] æ—¥å¸¸ï¼šæˆ˜æœ¯åœ°å›¾æ ¡å‡†
        {
            text: "Keegan å°†ä¸€å¼ æˆ˜åŒºåœ°å›¾æ‘Šåœ¨æŸœå°ä¸Šï¼Œæ‰‹é‡Œæ‹¿ç€çº¢ç¬”åœ¨ä½ å”®å–çš„åœ°å›¾ä¸ŠæŒ‡å‡ºä¸€ä¸ªä½ç½®ã€‚\nâ€œè¿™ä¸€å¸¦çš„åœ°å½¢å˜äº†ï¼Œå‰é¢çš„åºŸå¼ƒå·¥å‚ä¸Šä¸ªæœˆè¢«ç©ºè¢­å¤·å¹³äº†ï¼Œä½ çš„åœ°å›¾æ•°æ®æ˜¯æ—§çš„ã€‚â€\nä»–åˆ©è½åœ°åœ¨ä½ çš„åœ°å›¾ä¸Šç”»äº†ä¸ªå·¨å¤§çš„â€˜Xâ€™ï¼Œç„¶åæ”¶èµ·ç¬”ã€‚\nâ€œæ›´æ–°ä¸€ä¸‹ä½ çš„æƒ…æŠ¥ï¼Œåˆ«è¯¯å¯¼äº†å‹å†›ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            // ğŸ”’ æœªæ‹çˆ±è§¦å‘
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "ç‚¹å¤´è‡´è°¢ï¼šâ€œå¤šè°¢æé†’ã€‚â€",
                    desc: "ä¸“ä¸šçš„äº¤æµ",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                        s.rep_ghosts += 2;
                    },
                    result: "â€œå—¯ã€‚â€ ä»–å·èµ·è‡ªå·±çš„åœ°å›¾ï¼Œå‹ä½å¸½æªï¼Œâ€œæƒ…æŠ¥å°±æ˜¯ç”Ÿå‘½ã€‚â€"
                },
                {
                    text: "é€’ç»™ä»–ä¸€ç“¶æ°´ä½œä¸ºäº¤æ¢",
                    desc: "è¯•å›¾å®¢å¥—",
                    result: "Keegan æ‘†æ‘†æ‰‹æ‹’ç»äº†ï¼šâ€œä¸éœ€è¦ï¼Œæˆ‘ä¸å–æ¥æºä¸æ˜çš„æ°´ã€‚â€"
                }
            ]
        },

        // [Keegan] æ—¥å¸¸ï¼šç”µç£å¹²æ‰°
        {
            text: "Keegan èµ°è¿›åº—é‡Œï¼Œä½†ä»–æ²¡æœ‰çœ‹è´§æ¶ï¼Œè€Œæ˜¯ç›¯ç€ä½ å¤´é¡¶æ»‹æ»‹ä½œå“çš„éœ“è™¹ç¯æ‹›ç‰Œçœ‰å¤´ç´§é”ã€‚\nâ€œè¯·æš‚æ—¶æŠŠå®ƒå…³æ‰ï¼Œå®ƒçš„é•‡æµå™¨å‘å‡ºçš„é¢‘ç‡åœ¨å¹²æ‰°æˆ‘çš„çŸ­æ³¢é€šè®¯ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "ç«‹åˆ»å…³ç¯",
                    desc: "é…åˆè¡ŒåŠ¨ (æ¶ˆè€— 1 AP æ‘¸é»‘)",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.chars.keegan.aff += 3; // ä»–å¾ˆæ¬£èµé…åˆåº¦é«˜çš„äºº
                        printMsg("åº—é‡Œé™·å…¥é»‘æš—ï¼ŒKeegan åœ¨é»‘æš—ä¸­æ“ä½œç€é€šè®¯å™¨ï¼Œå‡ åˆ†é’Ÿåï¼Œä»–é‡æ–°ç«™ç›´èº«ä½“ã€‚\nâ€œé€šè®¯å®Œæˆï¼Œè°¢äº†ã€‚â€", 'event');
                    },
                    result: "ä»–ç•™ä¸‹äº†ä¸€æšé«˜çˆ†æ‰‹é›·ä½œä¸ºè¡¥å¿ï¼Œç„¶åæ¶ˆå¤±åœ¨é»‘æš—ä¸­ã€‚"
                },
                {
                    text: "â€œé‚£æ˜¯æˆ‘çš„æ‹›ç‰Œï¼Œå…³äº†æ€ä¹ˆåšç”Ÿæ„ï¼Ÿâ€",
                    desc: "æ‹’ç»",
                    effect: s => {
                        s.chars.keegan.aff -= 10;
                    },
                    result: "Keegan æ²¡æœ‰å†è¯´ä»€ä¹ˆï¼Œä¸è¿‡åœ¨é—¨å£æ—¶ï¼Œä»–è¿˜æ˜¯åœä¸‹äº†ï¼šâ€œå¦‚æœä½ å› ä¸ºè¿™ä¸ªæš´éœ²äº†ä½ç½®è¢«ç‚®å‡»ï¼Œåˆ«æ€ªæˆ‘æ²¡æé†’ä½ ã€‚â€"
                }
            ]
        },

// [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæˆ˜æœ¯æŒ‡å¯¼ (å…¼å®¹å¤šçº¿)
        {
            text: "Keegan æ­£åœ¨ç»™ä»–çš„æ­¦å™¨åšä¿å…»ï¼Œçœ‹åˆ°ä½ é—²ç€ï¼Œä¾¿æ‹›æ‰‹è®©ä½ è¿‡å»ã€‚\nâ€œä½œä¸ºå®¶å±ï¼Œè‡³å°‘è¯¥å­¦ä¼šæ€ä¹ˆç”¨è¿™ä¸ªã€‚â€ ä»–æŠŠä¸€æŠŠå¤‡ç”¨æ‰‹æªå¡è¿›ä½ æ‰‹é‡Œï¼Œç«™åœ¨ä½ èº«åè°ƒæ•´ä½ çš„å§¿åŠ¿ã€‚\nä»–çš„èƒ¸è†›è´´ç€ä½ çš„åèƒŒï¼Œè¿™å§¿åŠ¿å¾ˆæš§æ˜§ï¼Œä½†ä»–çš„è¯­æ°”å´æ˜¯ä¸€æœ¬æ­£ç»çš„æ•™å­¦ã€‚",
            speaker: "Keegan",
            type: "event",
            // ğŸ”“ æ¡ä»¶å®½æ³›ï¼šåªè¦æ‹çˆ±ä¸­å°±èƒ½è§¦å‘ (ä¸ç®¡æ˜¯å¦ä¸“ä¸€)
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "è®¤çœŸå­¦ä¹ ",
                    desc: "è·å¾—æˆ˜æ–—ç»éªŒ",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                        printMsg("â€œæ‰‹è…•æ‰£ç´§ï¼Œå‘¼å¸æ”¾ç¼“ã€‚â€ ä»–åœ¨ä½ è€³è¾¹ä½è¯­ï¼Œâ€œå¾ˆå¥½ï¼Œè¿™æ ·è‡³å°‘æˆ‘ä¸åœ¨çš„æ—¶å€™ä½ èƒ½ä¿æŠ¤è‡ªå·±ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è™½ç„¶æ˜¯ä¸ºäº†å®‰å…¨ï¼Œä½†ä½ æ€»è§‰å¾—ä»–åªæ˜¯æƒ³å€ŸæœºæŠ±ä½ ...ä¸å¯èƒ½å§ï¼Ÿ"
                },
                {
                    text: "å·æ‡’ï¼šâ€œæœ‰ä½ åœ¨ä¸å°±è¡Œäº†å—ï¼Ÿâ€",
                    desc: "ä¾èµ–ä»–",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                    },
                    result: "Keegan æ„£äº†ä¸€ä¸‹ï¼Œéšå³æ— å¥ˆåœ°å¹äº†å£æ°”ã€‚\nâ€œ...æ˜¯ï¼Œæˆ‘ä¼šçœ‹ç€ä½ çš„ï¼Œä½†æˆ‘ä¹Ÿå¸Œæœ›ä½ èƒ½å­¦ä¼šè‡ªä¿ã€‚â€"
                }
            ]
        },

// [Keegan] çº¯çˆ±æ—¥å¸¸ï¼šå¹½çµæ¨¡å¼ (FPS)
        {
            text: "å’Œ Keegan ä¸€èµ·æ‰“æ¸¸æˆçš„ä½“éªŒå¾ˆå¥‡å¦™ï¼Œè™½ç„¶ä»–è¯å¾ˆå°‘ï¼Œä½†æ¯æ¬¡æŠ¥ç‚¹éƒ½ç²¾å‡†å¾—ç¦»è°±ã€‚\nâ€œä¸‰ç‚¹é’Ÿæ–¹å‘ï¼ŒäºŒæ¥¼çª—å£ï¼Œä»»åŠ¡è§£å†³ã€‚â€\nå½“ä½ ä»¥ä¸ºè‡ªå·±å‘æŒ¥ç¥å‹‡æ—¶ï¼Œæ— æ„ä¸­ç¥è§ä»–æ­£é€šè¿‡ä½ èº«åçš„é•œå­åå…‰è§‚å¯Ÿä½ çš„å±å¹•ä½ç½®ã€‚\nè¢«ä½ å‘ç°åï¼Œä»–é¢ä¸æ”¹è‰²ï¼šâ€œè¿™å«åˆ©ç”¨ç¯å¢ƒä¼˜åŠ¿ï¼ŒCariÃ±oã€‚æˆ˜åœºä¸Šä¸è®²æ­¦å¾·ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s),
            options: [
                {
                    text: "â€œè¿™æ˜¯ä½œå¼Šï¼ç½šä½ ä»Šæ™šç¡æ²™å‘ï¼â€",
                    desc: "å‡è£…ç”Ÿæ°”",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan æ”¾ä¸‹æ‰‹æŸ„ï¼Œä»èƒŒåæŠ±ä½ä½ ï¼ŒæŠŠå¤´æåœ¨ä½ è‚©è†€ä¸Šè€èµ–ã€‚\nâ€œæƒ…æŠ¥æˆ˜ä¹Ÿæ˜¯å®åŠ›çš„ä¸€éƒ¨åˆ†... åˆ«è®©æˆ‘ç¡æ²™å‘ï¼Œæˆ‘ä¼šå†·çš„ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "å¯æ¶...è¿˜æ²¡è§è¿‡Keeganè¿™æ ·çš„ä¸€é¢ï¼Œæ‰€ä»¥ä½ å¾ˆå¿«å°±å¦¥åäº†ã€‚"
                },
                {
                    text: "å­¦ä¹ ä»–çš„æˆ˜æœ¯ï¼šâ€œé‚£ä½ æ•™æˆ‘æ€ä¹ˆçœ‹åå…‰ã€‚â€",
                    desc: "è™šå¿ƒæ±‚æ•™",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "Keegan ç¬‘äº†ï¼Œè®¤çœŸåœ°æ•™äº†ä½ å‡ ä¸ªé˜´é™©çš„ä¾¦å¯ŸæŠ€å·§ï¼Œè¿™å¤§æ¦‚å°±æ˜¯å¤«å”±å¦‡éšå§ã€‚"
                }
            ]
        },

  
// [Keegan] çº¯çˆ±é™å®šï¼šæˆ˜æœ¯æ‰‹è¯­ (æˆ‘çˆ±ä½ )
        {
            text: "ä½ å’Œ Keegan èµ°åœ¨å–§é—¹çš„é›†å¸‚ä¸Šï¼Œè¡—ä¸Šäººå¤ªå¤šäº†ï¼Œä½ ä»¬æ ¹æœ¬å¬ä¸æ¸…å¯¹æ–¹è¯´è¯ã€‚\nKeegan åªå¥½æ— å¥ˆçš„åœä¸‹è„šæ­¥è½¬å¤´çœ‹å‘ä½ ï¼Œä»–æ²¡æœ‰å¤§å–Šï¼Œè€Œæ˜¯ç”¨æˆ˜æœ¯æ‰‹è¯­å‘ä½ æ¯”åˆ’äº†ä¸€ä¸²åŠ¨ä½œï¼šè·Ÿç€æˆ‘...ä¿æŠ¤ä½ ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 800,
            options: [
                {
                    text: "æ¯”åˆ’å›å»ï¼šæ”¶åˆ°ï¼Œå®Œæ¯•ã€‚",
                    desc: "é»˜å¥‘çš„å›åº”",
                    effect: s => {
                        s.chars.keegan.aff += 10;
                        printMsg("Keegan çš„é¢ç½©ä¸‹ä¼ æ¥ä¸€å£°ä½ç¬‘ï¼Œä»–ä¼¸æ‰‹æŠŠä½ æ‹‰åˆ°èº«ä¾§ä¿æŠ¤åœˆå†…ã€‚\nâ€œé€šè®¯ç»“æŸï¼Œç°åœ¨æ‰§è¡ŒæŠ¤é€ä»»åŠ¡ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "åœ¨å˜ˆæ‚çš„äººç¾¤ä¸­ï¼Œè¿™æ˜¯åªå±äºä½ ä»¬ä¸¤ä¸ªäººçš„é™éŸ³é¢‘é“ã€‚"
                },
                {
                    text: "å¤§å£°å–Šï¼šâ€œæˆ‘ä¹Ÿçˆ±ä½ ï¼â€",
                    desc: "ç¤¾æ­»ç°åœº",
                    result: "å‘¨å›´çš„äººéƒ½çœ‹äº†è¿‡æ¥ï¼ŒKeegan è€³æ ¹çº¢é€äº†ï¼Œä½†ä»–æ²¡æœ‰æ¾å¼€ä½ çš„æ‰‹ï¼Œåè€Œæ¡å¾—æ›´ç´§äº†ã€‚"
                }
            ]
        },

        // [Keegan] çº¯çˆ±é™å®šï¼šå±‹é¡¶çš„é»æ˜
        {
            text: "Keegan æ‰§è¡Œå®Œå¤œé—´ä»»åŠ¡å›æ¥åå¹¶æ²¡æœ‰å»ç¡è§‰ï¼Œè€Œæ˜¯æ‹‰ç€ä½ çˆ¬ä¸Šäº†å±‹é¡¶ã€‚\nâ€œçœ‹ã€‚â€ ä»–æŒ‡ç€ä¸œæ–¹çš„åœ°å¹³çº¿ã€‚\nç¬¬ä¸€ç¼•é˜³å…‰åˆºç ´äº†åºŸåœŸç°æš—çš„äº‘å±‚ï¼Œé‡‘è‰²çš„å…‰èŠ’æ´’åœ¨ä»–æ‘˜ä¸‹é¢ç½©çš„ä¾§è„¸ä¸Šï¼Œé‚£åŒè“è‰²çš„çœ¼ç›æ¯”å¤©ç©ºè¿˜è¦æ¸…æ¾ˆã€‚\nâ€œæˆ‘ä»¥å‰åªè§‰å¾—é»æ˜æ„å‘³ç€æ’¤ç¦»... ä½†ç°åœ¨ï¼Œå®ƒæ„å‘³ç€æˆ‘å¯ä»¥å›æ¥è§ä½ äº†ã€‚â€",
            speaker: "Keegan P. Russ",
            type: "dialogue",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 900,
            options: [
                {
                    text: "é åœ¨ä»–è‚©ä¸Šä¸€èµ·çœ‹æ—¥å‡º",
                    desc: "å²æœˆé™å¥½ (APå›æ»¡)",
                    effect: s => {
                        s.ap = CONFIG.max_ap;
                        s.chars.keegan.aff += 12;
                        printMsg("ä»–ä¾§è¿‡å¤´å»äº†å»ä½ çš„å‘é¡¶ã€‚\nâ€œæ–°çš„ä¸€å¤©å¼€å§‹äº†ï¼ŒCariÃ±oï¼Œåªè¦æœ‰ä½ åœ¨...â€", 'dialogue', 'Keegan');
                    },
                    result: "ä½ ä»¬åœ¨å±‹é¡¶åäº†å¾ˆä¹…ï¼Œç›´åˆ°é˜³å…‰å®Œå…¨ç…§äº®äº†å¤§åœ°ã€‚"
                },
                {
                    text: "æ‹ç…§è®°å½•è¿™ä¸€åˆ»",
                    desc: "çè—å›å¿†",
                    result: "ç…§ç‰‡é‡Œçš„Keegan è½¬è¿‡å¤´çœ‹ç€ä½ ï¼Œçœ¼ç¥é‡Œçš„æ¸©æŸ”æ¯”èº«åçš„æ—¥å‡ºè¿˜è¦è€€çœ¼ã€‚"
                }
            ]
        },

      // [Keegan] çº¯çˆ±æ—¥å¸¸ï¼šé«˜èƒ½é¢„è­¦ (ææ€–ç‰‡)
        {
            text: "ææ€–ç‰‡çš„èƒŒæ™¯éŸ³ä¹å˜å¾—å°–é”åˆºè€³ï¼Œä¸»è§’æ­£æ…¢æ…¢æ¨å¼€é‚£æ‰‡å±å‘€ä½œå“çš„é—¨ã€‚\nä½ ç´§å¼ å¾—å±ä½å‘¼å¸ï¼Œç´§ç´§æŠ“ç€ Keegan çš„æ‰‹è‡‚ã€‚\nKeegan ä¾ç„¶ä¸€è„¸å¹³é™çš„çœ‹äº†ä¸€çœ¼è¿›åº¦æ¡ï¼Œåˆçœ‹äº†çœ‹ç”»é¢ï¼Œç”šè‡³è¿˜æœ‰ç©ºå–å£æ°´ã€‚\nä»–çªç„¶ä¼¸æ‰‹æ‚ä½äº†ä½ çš„çœ¼ç›ï¼Œåœ¨ä½ è€³è¾¹å€’æ•°ï¼šâ€œ3... 2... 1...â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s),
            options: [
                {
                    text: "ç›¸ä¿¡ä»–ï¼Œç¼©åœ¨ä»–æ€€é‡Œ",
                    desc: "èº²é¿æƒŠå“",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        // æ­¤æ—¶éŸ³ç®±é‡Œä¼ æ¥äº†å·¨å¤§çš„å°–å«å£°
                        printMsg("éŸ³ç®±é‡Œä¼ æ¥æƒ¨å«å£°ï¼ŒKeegan çš„æ‰‹æŒæ¸©æš–åˆæœ‰åŠ›ï¼Œä¸ºä½ æŒ¡ä½äº†æ‰€æœ‰çš„ææƒ§ã€‚\nâ€œå¥½äº†ï¼Œ{PLAYER} ï¼Œæ€ªç‰©èµ°äº†ã€‚â€ ä»–æ¾å¼€æ‰‹ï¼Œåƒå“„å­©å­ä¸€æ ·æ‹ç€ä½ çš„èƒŒã€‚", 'event');
                    },
                    result: "åªè¦æœ‰ä»–åœ¨ï¼Œå°±æ²¡æœ‰ä»€ä¹ˆèƒ½å“åˆ°ä½ ã€‚"
                },
                {
                    text: "æ‹‰å¼€ä»–çš„æ‰‹ï¼šâ€œæˆ‘è¦çœ‹ï¼â€",
                    desc: "äººèœç˜¾å¤§",
                    result: "ä½ çœ‹åˆ°äº†é‚£ä¸ªææ€–çš„é¬¼è„¸åå“å¾—ç›´æ¥é’»è¿›äº† Keegan çš„è¡£æœé‡Œï¼Œä»–é—·ç¬‘å‡ºå£°ï¼šâ€œæˆ‘è­¦å‘Šè¿‡ä½ äº†ã€‚â€"
                }
            ]
        },

// [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šå½±å­é‡Œçš„æ‹¥æŠ± (å…¼å®¹å¤šçº¿)
        {
            text: "ä½ èµ°è¿›æ˜æš—çš„å‚¨è—å®¤æ‰¾ä¸œè¥¿ï¼Œé—¨åˆšå…³ä¸Šï¼Œä¸€åªæ‰‹å°±æ½ä½äº†ä½ çš„è…°æŠŠä½ æ‹‰è¿›äº†ä¸€ä¸ªå……æ»¡ç¡çƒŸå‘³å’Œå†·å†½æ°”æ¯çš„æ€€æŠ±ã€‚\nKeegan æŠŠä¸‹å·´æŠµåœ¨ä½ çš„è‚©çªå¤„ï¼Œæ·±å¸äº†ä¸€å£æ°”ã€‚\nâ€œ...å˜˜ï¼Œæˆ‘å°±å……ä¸€ä¼šå„¿ç”µï¼Œåˆ«åŠ¨ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "åæ‰‹æ‘¸æ‘¸ä»–çš„å¤´å‘",
                    desc: "å®‰æŠšå¹½çµ",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("ä»–åœ¨é»‘æš—ä¸­å‘å‡ºäº†ä¸€å£°æ»¡è¶³çš„å¹æ¯ï¼Œæ‰‹è‡‚æ”¶å¾—æ›´ç´§äº†ã€‚\nâ€œå¥½äº†ï¼Œå……ç”µæˆåŠŸã€‚â€", 'event');
                    },
                    result: "çŸ­æš‚çš„æ¸©å­˜åï¼Œä»–æ¾å¼€äº†ä½ ï¼Œä½†æŒ‡å°–ç•™æ‹åœ°åˆ’è¿‡ä½ çš„æ‰‹èƒŒã€‚"
                },
                {
                    text: "å®‰é™åœ°ä»»ä»–æŠ±ç€",
                    desc: "é»˜å¥‘çš„é™ªä¼´",
                    result: "å‡ åˆ†é’Ÿåï¼Œä»–æ— å£°æ— æ¯åœ°æ”¾å¼€äº†ä½ ï¼Œé¡ºæ‰‹å¸®ä½ æ‹¿åˆ°äº†æ¶å­æœ€é«˜å¤„ä½ è¦æ‰¾çš„ä¸œè¥¿ï¼Œä»¿ä½›åˆšæ‰çš„è„†å¼±ä»æœªå­˜åœ¨è¿‡ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæ— å£°çš„æƒ…ä¹¦ (å…¼å®¹å¤šçº¿)
        {
            text: "ä½ åœ¨æŸœå°çš„æ”¶æ®å †é‡Œå‘ç°äº†ä¸€å¼ æŠ˜å æ•´é½çš„çº¸æ¡ï¼Œä¸Šé¢ç”»ç€ç®€ç•¥çš„æˆ˜æœ¯åœ°å›¾ï¼Œä½†åœ¨åº—é“ºçš„ä½ç½®ç”»äº†ä¸€ä¸ªæ­ªæ­ªæ‰­æ‰­çš„çˆ±å¿ƒï¼Œæ—è¾¹å†™ç€ä¸€è¡Œæ½¦è‰çš„å°å­—ï¼š\n'Este es mi hogar.'",
            speaker: "System",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "æŠŠçº¸æ¡æ”¶è¿›è´´èº«å£è¢‹",
                    desc: "çè—ä»–çš„æµªæ¼«",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        printMsg("ä½ æŠ¬å¤´çœ‹å‘è§’è½ï¼ŒKeegan æ­£èƒŒå¯¹ç€ä½ å‘¢ï¼Œä½†ä½ èƒ½çœ‹åˆ°ä»–è€³æ ¹å¾®å¾®å‘çº¢ã€‚", 'event');
                    },
                    result: "Keeganæµªæ¼«èµ·æ¥ä¹Ÿå¾ˆæµªæ¼«å‘¢ã€‚"
                },
                {
                    text: "å¯¹ç€è§’è½åšä¸ªé£å»",
                    desc: "å›åº”ä»–",
                    effect: s => {
                         s.chars.keegan.aff += 3;
                    },
                    result: "Keegan çš„åŠ¨ä½œé¡¿äº†ä¸€ä¸‹ï¼Œæ‹‰ä½äº†å¸½æªé®ä½è„¸ï¼Œä½†è‚©è†€åœ¨å¾®å¾®é¢¤æŠ–ï¼ˆä»–åœ¨ç¬‘ï¼‰ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæ¡ä»¶åå°„ (å…¼å®¹å¤šçº¿)
        {
            text: "Keegan åœ¨ä¼‘æ¯å®¤çš„æ²™å‘ä¸Šå°æ†©ï¼Œä½ æƒ³å¸®ä»–ç›–æ¡æ¯¯å­ï¼Œä½†åˆšé è¿‘ä»–çš„æ‰‹å°±çŒ›åœ°æŠ“ä½äº†ä½ çš„æ‰‹è…•ï¼ŒåŠ›é“å¤§å¾—æƒŠäººï¼Œè¿™æ˜¯ä»–å¤šå¹´æˆ˜æ–—å…»æˆçš„æœ¬èƒ½é˜²å«ã€‚\nçœ‹æ¸…æ˜¯ä½ åï¼Œä»–çœ¼é‡Œçš„æ€æ°”ç¬é—´æ¶ˆæ•£ï¼Œå˜æˆäº†æ‡Šæ¼ã€‚",
            speaker: "Keegan",
            type: "alert",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "â€œå¼„ç–¼æˆ‘äº†ï¼ŒKeeganã€‚â€",
                    desc: "æ’’å¨‡è®©ä»–å†…ç–š",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        printMsg("Keegan çœ¼é‡Œé—ªè¿‡ä¸€ä¸æ…Œä¹±ï¼Œæ§ç€ä½ çš„æ‰‹è…•åå¤æ£€æŸ¥ï¼Œç”šè‡³ä½ä¸‹å¤´è½»è½»å¹æ°”ã€‚\nâ€œå¯¹ä¸èµ·...{PLAYER} ï¼Œæˆ‘æ²¡æ§åˆ¶ä½ï¼Œä¸‹æ¬¡... å«é†’æˆ‘å‰å…ˆå‡ºå£°ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä»–ä¸ºäº†èµ”ç½ªï¼Œè¿™ä¸€æ•´å¤©éƒ½å¯¹ä½ å”¯å‘½æ˜¯ä»ã€‚"
                },
                {
                    text: "æ‘¸æ‘¸ä»–çš„è„¸ï¼šâ€œè­¦æƒ•æ€§ä¸é”™ã€‚â€",
                    desc: "è¡¨ç¤ºå®½å®¹",
                    effect: s => {
                         s.chars.keegan.aff += 2;
                    },
                    result: "ä»–å¹äº†å£æ°”ï¼ŒæŠŠè„¸åŸ‹åœ¨ä½ çš„æŒå¿ƒé‡Œè¹­äº†è¹­ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæ— å£°çš„é™ªä¼´ (å…¼å®¹å¤šçº¿)
        {
            text: "ä»Šå¤©ç”Ÿæ„å†·æ¸…ï¼ŒKeegan ååœ¨è§’è½çš„é˜´å½±é‡Œçœ‹ä¹¦ï¼ˆæˆ–è€…æ˜¯åœ¨å‘å‘†ï¼Ÿï¼‰ï¼Œä»–å®‰é™å¾—è®©ä½ å‡ ä¹å¿˜è®°äº†ä»–çš„å­˜åœ¨ã€‚\nç›´åˆ°ä½ èµ·èº«å€’æ°´æ—¶ï¼Œå‘ç°æ¯å­å·²ç»è¢«åŠ æ»¡äº†æ¸©æ°´ï¼Œè€Œä»–ä¾ç„¶ä¿æŒç€åŸæ¥çš„å§¿åŠ¿ï¼Œä»¿ä½›ä»æœªåŠ¨è¿‡ã€‚",
            speaker: "System",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "èµ°è¿‡å»äº²ä»–ä¸€ä¸‹",
                    desc: "æ‰“ç ´è¿™ä»½å®é™",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Keegan æ”¾ä¸‹ä¹¦ï¼Œçœ¼åº•æµ®ç°å‡ºä¸€ä¸ç¬‘æ„ã€‚\nâ€œè¡¥ç»™æ”¶åˆ°äº†ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "å³ä½¿æ˜¯å†·é™å¦‚Keeganä¹Ÿæ˜¯æœ‰æ¸©åº¦å‘€ã€‚"
                },
                {
                    text: "å¯¹ä»–å¾®ç¬‘è‡´è°¢",
                    desc: "é»˜å¥‘",
                    result: "ä»–å¾®å¾®é¢”é¦–ï¼Œç»§ç»­åšä½ çš„éšå½¢å®ˆæŠ¤è€…ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šå¤œå·¡å½’æ¥ (å…¼å®¹å¤šçº¿)
        {
            text: "æ·±å¤œï¼ŒKeegan å¸¦ç€ä¸€èº«å¯’æ°”ä»å¤–é¢å›æ¥ï¼Œä»–ä¼¼ä¹åˆšè§£å†³äº†ä¸€äº›éº»çƒ¦ï¼Œèº«ä¸Šæœ‰ä¸€è‚¡æ·¡æ·¡çš„é“é”ˆå‘³ã€‚\nçœ‹åˆ°ä½ è¿˜æ²¡ç¡ï¼Œä»–çš±äº†çš±çœ‰ï¼Œç«™åœ¨é—¨å£æ²¡æœ‰è¿›æ¥ã€‚\nâ€œè¿˜æ²¡ç¡ï¼Ÿæˆ‘èº«ä¸Šè„ï¼Œåˆ«è¿‡æ¥ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "ä¸ç®¡ä¸é¡¾åœ°æ‰‘ä¸Šå»æŠ±ä½ä»–",
                    desc: "æˆ‘ä¸å«Œå¼ƒï¼",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan åƒµç¡¬åœ°ä¸¾ç€åŒæ‰‹ä¸æ•¢ç¢°ä½ ï¼Œæ€•å¼„è„ä½ çš„è¡£æœï¼Œä½†ä½ ç´§ç´§æŠ±ä½äº†ä»–çš„è…°ã€‚\nâ€œ...çœŸæ‹¿ä½ æ²¡åŠæ³•ã€‚â€ ä»–æœ€ç»ˆè¿˜æ˜¯è½»è½»æŠŠä¸‹å·´æŠµåœ¨äº†ä½ çš„å¤´é¡¶ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "æ²¡æœ‰ä»€ä¹ˆæ¯”å¹³å®‰å½’æ¥æ›´é‡è¦ã€‚"
                },
                {
                    text: "å¸®ä»–æ”¾æ´—æ¾¡æ°´",
                    desc: "ä½“è´´",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                    },
                    result: "â€œè°¢è°¢ã€‚â€ ä»–æ¾äº†ä¸€å£æ°”ï¼Œè¿…é€Ÿé’»è¿›äº†æµ´å®¤ã€‚"
                }
            ]
        },

// [Keegan] çº¯çˆ±æ—¥å¸¸ï¼šGhosts å°é˜Ÿèšä¼š
        {
            text: "ä»Šå¤©åº—é‡Œæ¥äº†å‡ ä½ç‰¹æ®Šçš„å®¢äººï¼ŒMerrick æ­£åœ¨æš´èºåœ°æŒ‡æŒ¥ Hesh æ¬ä¸œè¥¿ï¼ŒKick åœ¨æ£€æŸ¥é€šè®¯è®¾å¤‡ã€‚\nKeegan é¢†ç€ä¸€ä¸ªæˆ´ç€é»‘ç™½é¢ç½©ã€ä¸€è¨€ä¸å‘çš„ç”·äººèµ°åˆ°ä½ é¢å‰ã€‚\nâ€œè¿™æ˜¯ Loganï¼ŒEliaså®¶çš„å°ä¼™å­ã€‚â€ Keegan æ½ä½ä½ çš„è…°ï¼Œéš¾å¾—åœ°å¼€èµ·äº†ç©ç¬‘ï¼Œâ€œåˆ«æ‹…å¿ƒä»–çœ‹èµ·æ¥å¾ˆå‡¶ï¼Œäº‹å®ä¸Š... ä»–æ¯”æˆ‘è¿˜ä¸æƒ³è¯´è¯ï¼Œçœ‹æ¥æˆ‘ä»¬ Ghosts éƒ½æ˜¯è¿™å‰¯å¾·è¡Œã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s),
            options: [
                {
                    text: "ç¬‘ç€æ‰“æ‹›å‘¼ï¼šâ€œæ¬¢è¿ï¼Œè™½ç„¶ä½ ä»¬éƒ½å¾ˆé—·ï¼Œä½†æˆ‘å–œæ¬¢ã€‚â€",
                    desc: "çˆ±å±‹åŠä¹Œ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.rep_ghosts += 10;
                        printMsg("Logan é»˜é»˜åœ°ç‚¹äº†ç‚¹å¤´ç®—æ˜¯å›åº”ï¼ŒMerrick å¤§ç¬‘ï¼šâ€œKeeganï¼Œä½ æ¡åˆ°å®äº†ï¼Œè¿™å§‘å¨˜èƒ†å­çœŸå¤§ã€‚â€", 'dialogue', 'Merrick');
                    },
                    result: "Keegan çœ‹èµ·æ¥å¾ˆéª„å‚²ï¼Œä»–åœ¨æ¡Œä¸‹ç´§ç´§æ¡ä½äº†ä½ çš„æ‰‹ã€‚"
                },
                {
                    text: "èº²åœ¨ Keegan èº«å",
                    desc: "è¡¨ç°å‡ºä¾èµ–",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        printMsg("Keegan ç«‹åˆ»ä¾§èº«æŒ¡ä½ä½ ï¼Œå¯¹é˜Ÿå‹ä»¬æ‘†æ‘†æ‰‹ï¼šâ€œè¡Œäº†ï¼Œåˆ«å“ç€å¥¹ï¼Œæ‹¿å®Œä¸œè¥¿èµ¶ç´§æ»šã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "Ghosts å°é˜Ÿèµ·å“„ç€ç¦»å¼€äº†ï¼ŒKeegan å¾ˆå–œæ¬¢è¿™ç§ä¿æŠ¤ä½ çš„æ„Ÿè§‰ã€‚"
                }
            ]
        },

        // [Keegan] ğŸ„ åœ£è¯èŠ‚ï¼šé»‘æš—ä¸­çš„å…‰
        {
            text: "ä¸ºäº†èº²é¿å·¡é€»é˜Ÿï¼Œè¿™ä¸ªåœ£è¯å¤œä½ ä»¬åªèƒ½åœ¨å…³äº†ç¯çš„åº—é‡Œåº¦è¿‡ã€‚\nä¸€ç‰‡æ¼†é»‘ä¸­ï¼ŒKeegan è®©ä½ æˆ´ä¸Šäº†ä»–æ˜‚è´µçš„å¤œè§†ä»ªï¼Œè§†é‡äº®èµ·çš„ç¬é—´ï¼Œä½ çœ‹åˆ°äº†æ»¡å±‹å­ç”¨çº¢å¤–çº¿è§å…‰æ£’æ‘†æˆçš„åœ£è¯æ ‘å›¾æ¡ˆï¼Œåªæœ‰æˆ´ç€å¤œè§†ä»ªæ‰èƒ½çœ‹åˆ°è¿™ç»ç¾çš„æ™¯è±¡ã€‚\nâ€œMerry Christmas.â€ ä»–åœ¨ä½ è€³è¾¹ä½è¯­ï¼Œâ€œè¿™æ˜¯åªå±äºæˆ‘ä»¬ä¸¤ä¸ªäººçš„å…‰ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.day % 30 === 0,
            options: [
                {
                    text: "æ„ŸåŠ¨æ‹¥å»",
                    desc: "æµªæ¼«è‡³æ­»ä¸æ¸",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.ap = CONFIG.max_ap;
                        printMsg("ä½ åœ¨ç»¿è‰²çš„è§å…‰è§†é‡ä¸­å»ä¸Šäº†ä»–ï¼Œè™½ç„¶å¤–é¢æ˜¯å†°å†·çš„åºŸåœŸï¼Œä½†æ­¤åˆ»è¿™é‡Œæ˜¯æœ€æ¸©æš–çš„åœ°æ–¹ã€‚", 'event');
                    },
                    result: "Keegan æ¸©æŸ”åœ°æ‘˜ä¸‹ä½ çš„å¤œè§†ä»ªï¼Œåœ¨é»‘æš—ä¸­å‡­ç€æ„Ÿè§‰ä¸€ééæç»˜ä½ çš„è½®å»“ã€‚"
                },
                {
                    text: "æ‹ç…§ç•™å¿µï¼ˆå³ä½¿æ‹ä¸åˆ°ï¼‰",
                    desc: "è®°å½•è¿™ä¸€åˆ»",
                    result: "è™½ç„¶ç›¸æœºæ‹å‡ºæ¥æ˜¯ä¸€ç‰‡æ¼†é»‘ï¼Œä½†è¿™å¹…ç”»é¢æ°¸è¿œå°åœ¨äº†ä½ çš„è„‘æµ·é‡Œã€‚"
                }
            ]
        },

// [Keegan] çº¯çˆ±é™å®šï¼šæš—å¤œæƒ…è¯
        {
            text: "ä¸­ç«‹åŒºä»Šæ™šç«Ÿç„¶åœç”µäº†ï¼Œé»‘æš—ä¸­ï¼Œä½ æ„Ÿè§‰åˆ°Keeganåœ¨ä½ èº«åæ‹¥ä½äº†ä½ ï¼Œé‚£åŒæƒ¯ç”¨æªèŒ§çš„æ‰‹è½»è½»æ‘©æŒ²ç€ä½ çš„è…°ã€‚\nâ€œåœ¨å—ç¾æ‰§è¡Œæ½œå…¥ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬è¦å­¦ä¼šç”¨å½“åœ°è¯­è¨€èå…¥é»‘å¤œã€‚â€\nä»–çš„å˜´å”‡è´´ç€ä½ çš„åé¢ˆï¼Œåå‡ºçš„è¥¿è¯­åƒä¸ç»¸ä¸€æ ·æ»‘è¿‡ä½ çš„çš®è‚¤ï¼š\nâ€œBÃ©same, hasta que pierda la razÃ³n... QuÃ©date conmigo esta noche.â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 600,
            options: [
                {
                    text: "è½¬èº«å»ä»–",
                    desc: "æ²‰æººåœ¨ä»–çš„å£°éŸ³é‡Œ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Keegan åœ¨é»‘æš—ä¸­ç²¾å‡†åœ°æ‰£ä½äº†ä½ çš„åè„‘å‹ºï¼Œå›åº”äº†ä½ çš„å»ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "ä»–çš„å£°éŸ³æœ¬èº«å°±æ˜¯ä¸€ç§å‚¬æƒ…å‰‚ã€‚"
                },
                {
                    text: "æ¡ä½ä»–çš„æ‰‹ï¼šâ€œæ°¸è¿œéƒ½åœ¨ã€‚â€",
                    desc: "ç»™ä»–æ‰¿è¯º",
                    effect: s => {
                        s.chars.keegan.aff += 10;
                        printMsg("Keegan å°†è„¸åŸ‹åœ¨ä½ çš„é¢ˆçªï¼Œæ·±å¸äº†ä¸€å£æ°”ã€‚\nâ€œ... è¿™å°±è¶³å¤Ÿè®©æˆ‘åœ¨ä»»ä½•é»‘æš—ä¸­æ‰¾åˆ°å›æ¥çš„è·¯ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è¿™æ˜¯ä¸€ä¸ªå®é™è€Œæ¸©æƒ…çš„å¤œæ™šã€‚"
                }
            ]
        },

        // [Keegan] å¼‚åœ°æ‹ï¼šè“è‰²è§å…‰æ£’
        {
            text: "ä½ å¬è¯´ Ghosts å°é˜Ÿæ­£åœ¨é™„è¿‘æ‰§è¡Œç»å¯†ä»»åŠ¡ï¼Œä½†æ‰€æœ‰äººéƒ½ä»¥ä¸ºä»–ä»¬ä¸å­˜åœ¨ã€‚\nå½“ä½ æ™šä¸Šå‡†å¤‡å…³åº—æ—¶ï¼Œç•™æ„åˆ°åå··æœ€éšè”½çš„ç –ç¼é‡Œæœ‰ä¸€æ ¹äº®ç€çš„è“è‰²è§å…‰æ£’ï¼Œä¸‹é¢å‹ç€ä¸€æœµåœ¨æ­¤åœ°ç»è¿¹çš„æ–°é²œç™½ç«ç‘°ã€‚\nè¿™æ˜¯ Keegan çš„ä¿¡å·ï¼šâ€˜æˆ‘åœ¨é™„è¿‘ä½†æˆ‘ä¸èƒ½ç°èº«ï¼Œæˆ‘çˆ±ä½ ã€‚â€™",
            speaker: "System",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && chance(20),
            options: [
                {
                    text: "æ‹¿èµ·ç«ç‘°ï¼Œç†„ç­è§å…‰æ£’",
                    desc: "ä¸è®ºä»–åœ¨å“ªï¼Œä½ éƒ½æ”¶åˆ°äº†",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("ä½ å°†ç«ç‘°æ’åœ¨åºŠå¤´çš„ç“¶å­é‡Œï¼Œè™½ç„¶è§ä¸åˆ°é¢ï¼Œä½†ä½ çŸ¥é“æœ‰ä¸€åŒè“è‰²çš„çœ¼ç›æ­£åœ¨é»‘æš—ä¸­å®ˆæŠ¤ç€ä½ ã€‚", 'gain');
                    },
                    result: "æ— å£°çš„æµªæ¼«æœ€æ˜¯è‡´å‘½ã€‚"
                },
                {
                    text: "åœ¨åŸå¤„ç•™ä¸‹ä¸€å—å·§å…‹åŠ›",
                    desc: "å›ç¤¼",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.food = Math.max(0, s.food - 1);
                        printMsg("ç¬¬äºŒå¤©æ—©ä¸Šä½ é†’æ¥æ—¶å‘ç°å·§å…‹åŠ›ä¸è§äº†ï¼Œä½†ä½ çŸ¥é“ä»–æ¥è¿‡ã€‚", 'event');
                    },
                    result: "è¿™ç‚¹ç”œå‘³è¶³å¤Ÿæ”¯æ’‘ä»–å®Œæˆæ¥ä¸‹æ¥çš„ä»»åŠ¡ã€‚"
                }
            ]
        },

// [Keegan] è´Ÿå¥½æ„Ÿ 1ï¼šæ­»äº¡é¢„å‘Š
        {
            text: "Keegan æˆ´ç€å¤œè§†ä»ªç«™åœ¨é»‘æš—è§’è½ï¼Œä½ çœ‹ä¸æ¸…ä»–çš„è¡¨æƒ…ã€‚\nâ€œä½ çš„é˜²å«ç³»ç»Ÿå……æ»¡äº†æ¼æ´ï¼Œåƒä¸ªæ¼é£çš„ç­›å­ã€‚â€ ä»–å†·å†·åœ°è¯´é“ï¼Œâ€œå¦‚æœæˆ‘æ˜¯æ•Œäººï¼Œä½ åˆšæ‰å·²ç»æ­»äº†ä¸‰æ¬¡äº†ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.aff < 0,
            options: [
                {
                    text: "è¯·æ•™å¦‚ä½•æ”¹è¿›",
                    desc: "è¯•å›¾æŒ½å›",
                    result: "â€œæ— å¯å¥‰å‘Šã€‚â€ ä»–è½¬èº«å°±èµ°ï¼Œâ€œä½ å¥½è‡ªä¸ºä¹‹ã€‚â€"
                },
                {
                    text: "â€œé‚£ä½ ä¸ºä»€ä¹ˆä¸åŠ¨æ‰‹ï¼Ÿâ€",
                    result: "â€œå› ä¸ºä½ ä¸å†æ˜¯æˆ‘çš„é‡ç‚¹äº‹é¡¹äº†ï¼Œ{PLAYER} ã€‚â€ ä»–çš„è¯çœŸæ˜¯æ¯”å­å¼¹è¿˜ä¼¤äººã€‚"
                }
            ]
        },

        // [Keegan] è´Ÿå¥½æ„Ÿ 2ï¼šæ‹’ç»äº¤æ˜“
        {
            text: "å½“ä½ è¯•å›¾å–ç»™ Keegan ä¸€æ‰¹åˆšåˆ°çš„è¡¥ç»™ï¼Œä»–åªæ˜¯ç”¨å¸¦ç€æˆ˜æœ¯æ‰‹å¥—çš„æ‰‹æŒ‡ç¿»å¼„äº†ä¸€ä¸‹ï¼Œå°±å…¨éƒ¨æ¨äº†å›æ¥ã€‚\nâ€œè´¨é‡ä¸è¾¾æ ‡ï¼Œæ¥æºå¯ç–‘ã€‚â€ ä»–è“è‰²çš„çœ¼é‡Œæ¯«æ— æ„Ÿæƒ…ï¼Œâ€œæˆ‘ä¸ä¿¡ä»»ä½ çš„è´§æºã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.aff < 0,
            options: [
                {
                    text: "è¾©è§£ï¼šâ€œè¿™å¯æ˜¯æ­£è§„è´§ï¼â€",
                    desc: "å¾’åŠ³çš„å°è¯•",
                    effect: s => {
                         s.chars.keegan.aff -= 10;
                    },
                    result: "Keegan æ²¡æœ‰å¬ä½ çš„è§£é‡Šè€Œæ˜¯é€‰æ‹©ç›´æ¥æ— è§†äº†ä½ ï¼Œè½¬èº«æ¶ˆå¤±åœ¨é›¨å¤œä¸­ï¼Œè¢« Ghosts æ‹‰é»‘æ„å‘³ç€ä½ å¤±å»äº†ä¸€ä¸ªé«˜ç«¯å®¢æˆ·ç¾¤ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [Keegan] çº¯çˆ±ä¸“å±ï¼šç–¤ç—•çš„åœ°å›¾ (æ¸©å­˜ + æ²»æ„ˆ)
        {
            text: "Keegan åˆšæ´—å®Œæ¾¡ï¼Œæ­£ååœ¨åºŠè¾¹æ“¦å¤´å‘ã€‚\nçƒ›å…‰ä¸‹ï¼Œä»–èº«ä¸Šé‚£äº›é”™ç»¼å¤æ‚çš„ä¼¤ç–¤ä»¿ä½›ä¸€å¼ å¼ æ—§åœ°å›¾ï¼Œè®°å½•ç€ä»–ä¹æ­»ä¸€ç”Ÿçš„è¿‡å¾€ã€‚\nä½ èµ°è¿‡å»ï¼ŒæŒ‡å°–è½»è½»åˆ’è¿‡ä»–èƒŒè„Šä¸Šä¸€é“æœ€æ·±çš„é•¿ç–¤ï¼Œæ„Ÿè§‰åˆ°ä»–çš„è‚Œè‚‰åœ¨ä½ æ‰‹ä¸‹ç¬é—´ç´§ç»·ï¼Œç„¶ååˆæ…¢æ…¢æ”¾æ¾ä¸‹æ¥ã€‚",
            speaker: "Keegan",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + éå¥³ç‹ + å¥½æ„Ÿ>600
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && s.chars.keegan.aff > 600,
            options: [
                {
                    text: "å»ä¸Šé‚£é“ä¼¤ç–¤",
                    desc: "å¿ƒç–¼ä»–çš„è¿‡å»",
                    effect: s => {
                        s.chars.keegan.aff += 10; // å·¨é¢å¥½æ„Ÿ
                        s.ap = CONFIG.max_ap;     // ç²¾ç¥æ¢å¤
                        printMsg("Keegan è½¬è¿‡èº«æ¡ä½ä½ çš„æ‰‹ï¼Œè´´åœ¨è‡ªå·±èƒ¸å£çš„å¿ƒè„ä½ç½®ã€‚\nâ€œéƒ½è¿‡å»äº†ã€‚â€ ä»–çš„å£°éŸ³ä½æ²‰æ²™å“‘ï¼Œâ€œè¿™äº›ä¼¤ç–¤è®©æˆ‘æ´»åˆ°äº†é‡è§ä½ çš„è¿™ä¸€å¤©... æ‰€ä»¥å®ƒä»¬æ˜¯å€¼å¾—çš„ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è¿™ä¸€å¤œä»–ç¡å¾—å¾ˆæ²‰ï¼Œä¸å†æœ‰æˆ˜åœºçš„å™©æ¢¦ï¼Œå› ä¸ºä½ åœ¨ä»–èº«è¾¹ã€‚"
                },
                {
                    text: "ä»èƒŒåç¯æŠ±ä½ä»–",
                    desc: "æ— å£°çš„ä¾é ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                    },
                    result: "â€œæ€ä¹ˆäº†ï¼Ÿâ€ ä»–æœ‰äº›ç²—ç³™çš„æ‹‡æŒ‡æ‘©æŒ²ç€ä½ çš„æ‰‹èƒŒï¼Œâ€œåˆ«æ‹…å¿ƒï¼Œæˆ‘ç°åœ¨å¾ˆå®Œæ•´ï¼Œè€Œä¸”å±äºä½ ã€‚â€"
                }
            ]
        },

// [Keegan] åˆ†æ‰‹åï¼šä»»åŠ¡ç®€æŠ¥
        {
            text: "Keegan æ¥å–é¢„å®šçš„æƒ…æŠ¥äº†ï¼Œä»–å…¨å‰¯æ­¦è£…ï¼Œé¢ç½©æˆ´å¾—ä¸¥ä¸¥å®å®ï¼Œè¿ä¸€ä¸çš®è‚¤éƒ½æ²¡éœ²å‡ºæ¥ã€‚\nâ€œä»»åŠ¡ç‰©å“ã€‚â€ ä»–çš„å£°éŸ³å¹³é™æ— æ³¢ï¼Œä½ è¿˜è®°å¾—ä»–ä»¥å‰æ¸©æŸ”åœ°å“„ä½ ï¼Œå«ä½ CariÃ±oçš„æ—¶å€™ã€‚\næ­¤åˆ»ä»–çš„çœ¼ç¥æ¸…æ¾ˆè€Œå†°å†·ï¼Œä»¿ä½›ä½ ä»¬ä¹‹é—´é‚£äº›æ¸©å­˜çš„å¤œæ™šåªæ˜¯ä½ çš„å¹»è§‰ã€‚",
            speaker: "Keegan",
            type: "dialogue",
            // ğŸ’” åˆ¤å®šï¼šæœªæ‹çˆ± + æ›¾åˆ†æ‰‹/æ‹’ç»è¿‡
                condition: s => !s.chars.keegan.dating && s.chars.keegan.is_ex,
            options: [
                {
                    text: "é€’ç»™ä»–æƒ…æŠ¥ï¼šâ€œæ³¨æ„å®‰å…¨ã€‚â€",
                    desc: "è¯•å›¾å…³å¿ƒ",
                    effect: s => {
                        // ä»–ä¸å†æ¥å—å¥½æ„Ÿåº¦å˜åŒ–
                        printMsg("â€œæ”¶åˆ°ã€‚â€ ä»–æ¥è¿‡ä¸œè¥¿ï¼Œå…¬äº‹å…¬åŠåœ°ç‚¹ç‚¹å¤´å°±è½¬èº«ç¦»å¼€ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "æ²¡æœ‰å›åº”ï¼Œæ²¡æœ‰å›å¤´ï¼Œä»–é‡æ–°å˜å›äº†é‚£ä¸ªæ²¡æœ‰æ„Ÿæƒ…çš„å¹½çµï¼Œè€Œä½ æ˜¯äº²æ‰‹æŠŠä»–æ¨å›å»çš„äººã€‚"
                },
                {
                    text: "ä»æŠ½å±‰é‡Œæ‹¿å‡ºé‚£ä¸ªé›ªè±¹å¸½å­",
                    desc: "è¯•å›¾å”¤èµ·å›å¿†",
                    effect: s => {
                         printMsg("Keegan çš„è§†çº¿åœ¨é‚£ä¸ªå¸½å­ä¸Šåœç•™äº†ä¸€ç§’å°±ç§»å¼€ã€‚\nâ€œæ‰”äº†å§ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä»–ç«Ÿç„¶æ‹’ç»äº†å›å¿†ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [Keegan] çº¯çˆ±ä¸“å±ï¼šæ™®é€šäººçš„å¹¸ç¦ (æ—¥å¸¸ + æ‰¿è¯º)
        {
            text: "éš¾å¾—çš„ä¼‘æ¯æ—¥ï¼ŒKeegan æ²¡æœ‰åœ¨ä¿å…»è‡ªå·±çš„çˆ±æªï¼Œè€Œæ˜¯å’Œä½ æŒ¤åœ¨ç‹­å°çš„å¨æˆ¿é‡Œ... å°è¯•åšé¥­ã€‚\nçœ‹ç€è¿™ä¸ªèƒ½åœ¨ä¸€å…¬é‡Œå¤–ç²¾å‡†ç‹™æ€ç›®æ ‡çš„ç”·äººæ­¤åˆ»å´å¯¹ç€ä¸€ç½ç•ªèŒ„é…±çš±çœ‰ï¼Œæ˜¾å¾—ç¬¨æ‹™åˆæœ‰äº›å¯çˆ±ã€‚\n ä»–æŠŠåˆ‡å¾—æ­ªæ­ªæ‰­æ‰­çš„åœŸè±†ä¸‹é”…ï¼Œâ€œå¦‚æœæœ‰ä¸€å¤©æˆ˜äº‰ç»“æŸäº†ï¼Œæˆ–è€…æˆ‘ä»¬ç´¯äº†... æˆ‘æƒ³ç»™ä½ ä¸€ä¸ªå®¶ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + éå¥³ç‹ + å¥½æ„Ÿ>500
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && s.chars.keegan.aff > 500,
            options: [
                {
                    text: "ä»èƒŒåæŠ±ä½ä»–çš„è…°ï¼šâ€œç°åœ¨è¿™å°±å·²ç»æ˜¯ä¸ªå®¶äº†ã€‚â€",
                    desc: "ç»™äºˆè‚¯å®š",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.food += 2; // å±…ç„¶çœŸçš„åšå‡ºäº†èƒ½åƒçš„ä¸œè¥¿
                        printMsg("Keegan æ”¾ä¸‹å‹ºå­ï¼Œè½¬èº«å°†ä½ åœˆåœ¨æµç†å°å’Œä»–ä¹‹é—´ï¼Œçœ¼åº•æ˜¯åŒ–ä¸å¼€çš„æŸ”æƒ…ã€‚\nâ€œä½ æ˜¯å¯¹çš„ï¼Œåªè¦ä½ åœ¨å“ªï¼Œå“ªé‡Œå°±æ˜¯å®‰å…¨å±‹ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è™½ç„¶å‘³é“ä¸€èˆ¬ï¼Œä½†å´æ¯”ä»»ä½•é¡¶çº§é¤å…çš„ä½³è‚´éƒ½è®©äººæš–å¿ƒã€‚"
                },
                {
                    text: "æ¥è¿‡é”…é“²ï¼šâ€œè¿˜æ˜¯æˆ‘æ¥å§ï¼Œä½ å»æ‘†ç›˜å­ã€‚â€",
                    desc: "é»˜å¥‘åˆ†å·¥",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                    },
                    result: "ä»–ä¹–ä¹–å¬è¯å»æ‘†ç›˜å­äº†ï¼Œè®¤çœŸçš„æŠŠç›˜å­å’Œç¢—ç­·åˆ€å‰æ”¾å¥½ã€‚"
                }
            ]
        },

// [Keegan] çº¯çˆ±é™å®šï¼šé›ªè±¹çš„é©¯æœ (é«˜ç”œ/åå·®)
        {
            text: "ä½ ä¸çŸ¥ä»å“ªæ·˜æ¥äº†ä¸€é¡¶æ¯›èŒ¸èŒ¸çš„å¸½å­ï¼Œä¸Šé¢å±…ç„¶è¿˜å¸¦ç€ä¸€å¯¹åœ†åœ†çš„é›ªè±¹è€³æœµã€‚\nKeegan æ­£ååœ¨æ²™å‘ä¸Šä¿å…»ä»–çš„æ­¦å™¨ï¼Œçœ‹åˆ°ä½ æ‰‹é‡Œçš„ä¸œè¥¿ï¼Œä»–æŒ‘äº†æŒ‘çœ‰ï¼Œæœ¬èƒ½åœ°æƒ³è¦æˆ˜æœ¯åä»°ï¼Œä½†çœ‹åˆ°ä½ æœŸå¾…çš„çœ¼ç¥ï¼Œä»–åˆç¡¬ç”Ÿç”Ÿåœä½äº†åŠ¨ä½œã€‚\nâ€œ...ä½ è®¤çœŸçš„ï¼Ÿè¿™ä¸ç¬¦åˆæˆ˜æœ¯ä¼ªè£…æ ‡å‡†ã€‚â€",
            speaker: "Keegan",
            type: "event",
            // ğŸ”’ è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + ä¸“ä¸€ + é«˜å¥½æ„Ÿ
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && s.chars.keegan.aff > 800,
            options: [
                {
                    text: "ä¸ç®¡ï¼Œç›´æ¥ç»™ä»–æˆ´ä¸Š",
                    desc: "â€œæˆ‘æƒ³çœ‹ï¼æ±‚ä½ äº†~â€",
                    effect: s => {
                        s.chars.keegan.aff += 10;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // æåº¦æ²»æ„ˆ
                        printMsg("Keegan å¹äº†å£æ°”ï¼Œä»–åªæœ‰åœ¨ä½ é¢å‰æ‰ä¼šè¿™æ ·å¦¥åï¼Œä»–å¾®å¾®ä½ä¸‹å¤´ï¼Œä»»ç”±ä½ æŠŠé‚£é¡¶ç•¥æ˜¾æ»‘ç¨½çš„å¸½å­æˆ´åœ¨ä»–å¤´ä¸Šï¼Œç”šè‡³è¿˜å¾—ç¨å¾®è°ƒæ•´ä¸€ä¸‹ä½ç½®ä¸æŒ¡ä½ä»–çš„æˆ˜æœ¯è€³æœºã€‚\nçœ‹ç€é•œå­é‡Œé‚£ä¸ªé¡¶ç€é›ªè±¹è€³æœµã€ä¸€è„¸æ— å¥ˆå´çœ¼ç¥å® æººçš„ç‰¹ç§å…µï¼Œä½ å¿ä¸ä½ç¬‘äº†ã€‚", 'event');
                    },
                    result: "â€œç¬‘å¤Ÿäº†å—ï¼Ÿâ€ ä»–æ”¾ä¸‹æ‰‹é‡Œçš„æªï¼Œçªç„¶ä¼¸æ‰‹æŠŠä½ æ‹‰è¿›æ€€é‡Œï¼Œé¼»å°–è¹­è¿‡ä½ çš„è„¸é¢Šï¼Œå£°éŸ³ä½æ²‰åˆå±é™©ï¼Œâ€œé›ªè±¹å¯æ˜¯é¡¶çº§æ é£Ÿè€…... æŒ‘è¡…æ é£Ÿè€…çš„åæœï¼Œä½ å‡†å¤‡å¥½æ‰¿æ‹…äº†å—ï¼Ÿâ€\nä»–åœ¨ä½ è„–é¢ˆä¸Šè½»å’¬äº†ä¸€å£"
                }
            ]
        },

        // [Keegan] çº¯çˆ±é™å®šï¼šå‘¼å¸çš„é¢‘ç‡ (æŒ‘é€—/æé™æ‹‰æ‰¯)
        {
            text: "Keegan æ­£åœ¨è°ƒè¯•ä¸€å°ç²¾å¯†çš„ä¿¡å·æ‹¦æˆªå™¨ï¼Œä»–æˆ´ç€è€³æœºï¼Œç¥æƒ…ä¸“æ³¨ï¼Œä¿®é•¿çš„æ‰‹æŒ‡åœ¨é”®ç›˜ä¸Šé£å¿«æ•²å‡»ã€‚\nä½ æ‚„æ‚„èµ°åˆ°ä»–èº«åï¼Œå¹¶æ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯ä¼¸å‡ºæ‰‹ï¼ŒæŒ‡å°–æ²¿ç€ä»–æˆ˜æœ¯èƒŒå¿ƒçš„è¾¹ç¼˜ï¼Œæ…¢æ…¢æ»‘å…¥å†…ä¾§ï¼Œéš”ç€ç´§èº«çš„ä½œæˆ˜æœï¼Œåœ¨ä»–è…¹è‚Œçš„è½®å»“ä¸Šè½»è½»ç”»åœˆã€‚\nä»–çš„åŠ¨ä½œç¬é—´åœæ»äº†ï¼Œå±å¹•ä¸Šå¤šæ‰“äº†ä¸€ä¸²ä¹±ç ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && s.chars.keegan.aff > 900,
            options: [
                {
                    text: "è´´åœ¨ä»–è€³è¾¹å¹æ°”ï¼šâ€œä¸ä¸“å¿ƒå“¦ï¼ŒKeeganã€‚â€",
                    desc: "æŒ‘æˆ˜ä»–çš„å®šåŠ›",
                    effect: s => {
                        s.chars.keegan.aff += 10;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Keegan çŒ›åœ°æ‘˜ä¸‹è€³æœºæ‰”åœ¨æ¡Œä¸Šï¼Œè½¬èº«æŠ“ä½äº†ä½ ä½œä¹±çš„æ‰‹ã€‚\nä»–çš„å‘¼å¸ä¹±äº†ï¼Œæ€»æ˜¯å†·é™å¦‚å†°çš„è“çœ¼ç›é‡Œæ­¤åˆ»ä¹Ÿç¿»æ¶Œç€æš—ç«ã€‚\nâ€œä»»åŠ¡æš‚åœã€‚â€ ä»–æŠŠä½ æŠ±èµ·æ¥æ”¾åœ¨æ¡Œå­ä¸Šï¼Œæ¨å¼€äº†é‚£äº›æ˜‚è´µçš„è®¾å¤‡ï¼Œâ€œç°åœ¨çš„ä¼˜å…ˆç›®æ ‡... æ˜¯å¤„ç†è¿™é‡Œçš„å¹²æ‰°æºã€‚â€", 'event');
                    },
                    result: "äº‹å®è¯æ˜ï¼Œæƒ¹ç«ä»–æ˜¯éå¸¸å±é™©ï¼ˆä¸”æ„‰å¿«ï¼‰çš„å†³å®šï¼Œä»–è®©ä½ æ·±åˆ»ä½“ä¼šåˆ°äº†ä»€ä¹ˆå«â€œç¨³ã€å‡†ã€ç‹ â€ã€‚"
                }
            ]
        },

        // [Keegan] çº¯çˆ±é™å®šï¼šé¢ç½©ä¸‹çš„ä½™ç”Ÿ (æ‰¿è¯º/æ¸©é¦¨)
        {
            text: "æ·±å¤œï¼Œä»»åŠ¡å½’æ¥çš„Keegan æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·å»æ´—æ‰èº«ä¸Šçš„ç¡çƒŸå‘³ï¼Œè€Œæ˜¯å°±è¿™æ ·ååœ¨åºŠè¾¹é™é™åœ°çœ‹ç€ç†Ÿç¡çš„ä½ ã€‚\nå½“ä½ é†’æ¥æ—¶ï¼Œæ­£å¥½æ’è¿›ä»–æ¸©æŸ”å¾—ä¸å¯æ€è®®çš„ç›®å…‰é‡Œã€‚",
            speaker: "Keegan P. Russ",
            type: "dialogue",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && s.chars.keegan.aff > 1000,
            options: [
                {
                    text: "æŠšæ‘¸ä»–çš„è„¸åº",
                    desc: "åœ¨è¿™ä¸ªä¸–ç•Œï¼Œä½ æ˜¯ä»–çš„å”¯ä¸€",
                    effect: s => {
                        s.chars.keegan.aff += 15;
                        // è¿™é‡Œå¯ä»¥åŠ ä¸€ä¸ª flagï¼Œè¡¨ç¤ºè¾¾æˆçœŸçˆ±ç»“å±€çš„å‰ç½®
                        printMsg("ä»–åè¿‡å¤´äº²å»ä½ çš„æŒå¿ƒï¼Œèƒ¡èŒ¬å¸¦æ¥å¾®å¾®çš„åˆºç—›æ„Ÿã€‚\nâ€œå¤–é¢æ˜¯æˆ˜åœºï¼Œæ˜¯è°è¨€ï¼Œæ˜¯å¿…é¡»è¦æˆ´ä¸Šé¢å…·æ‰èƒ½ç”Ÿå­˜çš„åœ°ç‹±...â€\nä»–æ¡ä½ä½ çš„æ‰‹æŒ‰åœ¨ä»–çš„èƒ¸å£ï¼šâ€œä½†åœ¨è¿™é‡Œï¼Œåœ¨ä½ é¢å‰... æˆ‘åªæ˜¯ Keeganï¼Œåªè¦ä½ è¿˜éœ€è¦æˆ‘ï¼Œæˆ‘å°±å“ªä¹Ÿä¸å»ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è¿™ä¸æ˜¯ä»€ä¹ˆæƒŠå¤©åŠ¨åœ°çš„èª“è¨€ï¼Œä½†ä½ çŸ¥é“ï¼Œè¿™æ˜¯ä»–èƒ½ç»™å‡ºçš„æ¯”ç”Ÿå‘½æ›´æ²‰é‡çš„æ‰¿è¯ºã€‚"
                }
            ]
        },

Â  Â  Â  Â  // [Keegan] æ—¥å¸¸ 3ï¼šå®‰ä¿æ¼æ´ (ä¸“ä¸šå»ºè®®)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  text: "Keegan å¹¶æ²¡æœ‰ä¹°ä¸œè¥¿ï¼Œè€Œæ˜¯ç«™åœ¨ä½ åº—é“ºçš„åé—¨å¤„ï¼ŒæŠ±ç€åŒè‡‚çœ‹ç€é‚£ä¸ªç”Ÿé”ˆçš„é—¨é”ã€‚\nâ€œå¦‚æœä½ ä¸æƒ³åœ¨ç¡æ¢¦ä¸­è¢« Federation çš„äººå‰²å–‰ï¼Œæœ€å¥½æŠŠè¿™ä¸ªæ¢æ‰ã€‚â€\nä»–æŒ‡äº†æŒ‡é—¨æ¡†ä¸Šæ–¹ï¼šâ€œè¿™é‡Œæ˜¯è§†çº¿æ­»è§’ï¼Œåªéœ€è¦ 3 ç§’å°±èƒ½æ’¬å¼€ã€‚â€",
Â  Â  Â  Â  Â  Â  speaker: "Keegan",
Â  Â  Â  Â  Â  Â  type: "dialogue",
Â  Â  Â  Â  Â  Â  condition: s => !s.chars.keegan.dating,
Â  Â  Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "è™šå¿ƒè¯·æ•™ï¼šâ€œé‚£æˆ‘è¯¥æ€ä¹ˆåšï¼Ÿâ€",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "å¬å–ä¸“å®¶çš„æ„è§",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  effect: s => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.chars.keegan.aff += 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.money -= 50; // è´­ä¹°ææ–™åŠ å›º
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  printMsg("Keegan å±…ç„¶ä»è…¿è¢‹é‡Œæå‡ºå·¥å…·ï¼Œé¡ºæ‰‹å¸®ä½ è°ƒæ•´äº†é—¨é”ç»“æ„ã€‚\nâ€œç°åœ¨ç ´é”éœ€è¦ 30 ç§’ï¼Œè¶³å¤Ÿä½ æ‹”æªäº†ã€‚â€", 'dialogue', 'Keegan');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "è™½ç„¶èŠ±äº†ç‚¹é’±ä¹°ææ–™ï¼Œä½†å®‰å…¨æ„Ÿå€å¢ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "â€œæˆ‘æœ‰æˆ‘çš„åŠæ³•ã€‚â€",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "è™½ç„¶å…¶å®æ²¡æœ‰",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "Keegan è€¸äº†è€¸è‚©ï¼šâ€œç¥ä½ å¥½è¿ã€‚â€ ç„¶åæ‚„æ— å£°æ¯åœ°ç¦»å¼€äº†ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  },

Â  Â  Â  Â  // 1. ã€æ— å£°æ½œå…¥ã€‘ä½“ç°ä»–çš„éšèº«èƒ½åŠ›å’Œä¸“ä¸šåº¦
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  text: "ä½ æ­£åœ¨ä½å¤´æ•´ç†è´¦æœ¬ï¼Œå®Œå…¨æ²¡å¬åˆ°é—¨å£çš„é£é“ƒå“ã€‚\nå½“ä½ æŠ¬èµ·å¤´æ—¶ï¼ŒKeegan å·²ç»é™é™åœ°ç«™åœ¨æŸœå°å‰äº†ï¼Œä»–æ‰‹é‡Œæ‹¿ç€ä¸€å¼ ç‰©èµ„æ¸…å•ï¼Œé‚£æ˜¯ç»™ Hesh å’Œ Logan å‡†å¤‡çš„ã€‚\nâ€œæŠ±æ­‰ï¼Œå“åˆ°ä½ äº†ï¼Ÿæˆ‘ä¹ æƒ¯äº†è½»å£°èµ°è·¯ã€‚â€",
Â  Â  Â  Â  Â  Â  speaker: "Keegan",
Â  Â  Â  Â  Â  Â  type: "event",
Â  Â  Â  Â  Â  Â  condition: s => !s.chars.keegan.dating,
Â  Â  Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "â€œä¸‹æ¬¡è¯·å¼„å‡ºç‚¹åŠ¨é™ï¼ŒKeeganã€‚â€",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "å¿ƒè„éƒ½è¦åœäº†",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  effect: s => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.chars.keegan.aff += 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  printMsg("Keegan çš„çœ¼è§’å¾®å¾®å¼¯äº†ä¸€ä¸‹ï¼Œä¼¼ä¹è§‰å¾—ä½ çš„ååº”å¾ˆæœ‰è¶£ã€‚\nâ€œæˆ‘ä¼šè¯•ç€è®°å¾—ï¼Œä½†æˆ‘ä¸èƒ½ä¿è¯...è¿™æ˜¯æˆ‘çš„èŒä¸šä¹ æƒ¯ã€‚â€", 'dialogue', 'Keegan');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "ä»–æ”¾ä¸‹æ¸…å•ï¼Œä»˜äº†å…¨æ¬¾ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "è¿…é€Ÿè¿›å…¥å·¥ä½œçŠ¶æ€",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "å±•ç°ä½ çš„ä¸“ä¸šç´ å…»",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  effect: s => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.chars.keegan.aff += 2; // ä»–å–œæ¬¢ä¸“ä¸šçš„äºº
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.rep_ghosts += 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "â€œå¾ˆå¥½ï¼ŒMerrick éœ€è¦è¿™äº›è£…å¤‡å°½å¿«åˆ°ä½ã€‚â€ ä»–å¯¹ä½ çš„æ•ˆç‡è¡¨ç¤ºèµèµï¼Œç”šè‡³å¤šç•™äº†ä¸€ç‚¹å°è´¹ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  },

Â  Â  Â  Â  // 2. ã€å°é˜Ÿåå‹¤ã€‘ä½“ç°ä»–å¯¹é˜Ÿå‹çš„ç…§é¡¾
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  text: "Keegan åœ¨åŒ»ç–—è´§æ¶å‰å¾˜å¾Šï¼Œæ‹¿ç€ä¸¤ç“¶ä¸åŒç‰Œå­çš„æ­¢ç—›è¯ä»”ç»†æ¯”å¯¹æˆåˆ†ã€‚\nâ€œLogan ä¸Šæ¬¡ä»»åŠ¡æ‰­ä¼¤äº†è‚©è†€ï¼ŒHesh çš„æ—§ä¼¤ä¹ŸçŠ¯äº†ã€‚â€ ä»–è‡ªè¨€è‡ªè¯­é“ï¼ŒæŠ¬å¤´çœ‹å‘ä½ ï¼Œâ€œå“ªä¸€ç§å‰¯ä½œç”¨æ›´å°ï¼Ÿâ€",
Â  Â  Â  Â  Â  Â  speaker: "Keegan",
Â  Â  Â  Â  Â  Â  type: "dialogue",
Â  Â  Â  Â  Â  Â  condition: s => !s.chars.keegan.dating,
Â  Â  Â  Â  Â  Â  options: [
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "æ¨èç‰¹æ•ˆè¯ (-1 Medkit)",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "æ•ˆæœå¥½ä½†ä»·æ ¼è´µ",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  condition: s => s.medkit >= 1,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  effect: s => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.medkit--;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.money += 150; // ä»–ä¸å·®é’±
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s.chars.keegan.aff += 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  printMsg("â€œè°¢äº†ï¼Œè¿™æ­£æ˜¯ä»–ä»¬éœ€è¦çš„ã€‚â€ Keegan æ¯«ä¸çŠ¹è±«åœ°ä»˜äº†é’±ã€‚", 'dialogue', 'Keegan');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "ä»–å°å¿ƒç¿¼ç¿¼åœ°æŠŠè¯æ”¶è¿›æˆ˜æœ¯èƒŒå¿ƒçš„å†…è¢‹é‡Œï¼Œé‚£æ˜¯ç¦»å¿ƒè„æœ€è¿‘çš„ä½ç½®ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: "æ¨èæ™®é€šç»·å¸¦",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: "ä¿å®ˆæ²»ç–—",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result: "Keegan çš±äº†çš±çœ‰ï¼šâ€œè¿™ä¸å¤Ÿ...ç®—äº†ï¼Œæˆ‘å»åˆ«å¤„çœ‹çœ‹ã€‚â€ ä»–ä¸ºäº†é˜Ÿå‹ä»ä¸å°†å°±ã€‚"
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  },


        // [Keegan] æ—¥å¸¸ 4ï¼šç²¾å‡†æ ¡å‡†
        {
            text: "Keegan å€Ÿç”¨äº†ä½ åº—é‡Œçš„å·¥å…·å°ã€‚ä»–æ­£åœ¨æ‹†è§£ä¸€æŠŠè¿œç¨‹ç‹™å‡»æ­¥æªï¼ŒåŠ¨ä½œè¡Œäº‘æµæ°´ï¼Œæ¯ä¸€ä¸ªé›¶ä»¶éƒ½è¢«æ•´é½åœ°ç æ”¾åœ¨ç»’å¸ƒä¸Šã€‚\nè™½ç„¶ä»–ä¸€è¨€ä¸å‘ï¼Œä½†é‚£ç§ä¸“æ³¨çš„æ°”åœºè®©å‘¨å›´çš„é¡¾å®¢å¤§æ°”éƒ½ä¸æ•¢å‡ºã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€ç“¶æªæ²¹ (-1 Ammo)",
                    desc: "é»˜é»˜æ”¯æŒ",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        s.chars.keegan.aff += 2;
                        printMsg("ä»–æ¥è¿‡æªæ²¹ï¼Œç”±äºæˆ´ç€æ‰‹å¥—ï¼ŒæŒ‡å°–æ²¡æœ‰ç›´æ¥è§¦ç¢°ï¼Œä½†ä»–ç‚¹äº†ç‚¹å¤´è‡´æ„ã€‚\nâ€œè°¢è°¢ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ååˆ†é’Ÿåï¼Œä»–ç»„è£…å¥½äº†æ­¦å™¨ï¼Œè½¬èº«ç¦»å¼€ã€‚"
                },
                {
                    text: "è¯¢é—®ä»–åœ¨æ‰§è¡Œä»€ä¹ˆä»»åŠ¡",
                    desc: "åˆºæ¢æƒ…æŠ¥",
                    effect: s => {
                        s.chars.keegan.aff -= 10;
                        printMsg("Keegan çš„æ‰‹åœä½äº†ã€‚\nâ€œåˆ«é—®ï¼Œè¿™å¯¹ä½ æ²¡å¥½å¤„ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä»–è¿…é€Ÿæ”¶èµ·è£…å¤‡ç¦»å¼€äº†ï¼Œä½ æ„Ÿè§‰èƒŒè„Šå‘å‡‰ã€‚"
                }
            ]
        },

        // [Keegan] æ—¥å¸¸ 5ï¼šåœ¨æ­¤å®ˆå€™
        {
            text: "â€œMerrick å’Œå…¶ä»–äººæ­£åœ¨æ’¤ç¦»ï¼Œè¿™é‡Œæ˜¯æ±‡åˆç‚¹ã€‚â€\nKeegan ç«™åœ¨çª—è¾¹ï¼Œå°†ç™¾å¶çª—æ‹‰å¼€ä¸€æ¡ç¼éš™ï¼Œè­¦æƒ•åœ°è§‚å¯Ÿç€è¡—é“ã€‚\nä»–æ²¡æœ‰ä¹°ä¸œè¥¿ï¼Œä½†ä»–ä¾ç„¶åƒä¸€åº§é›•åƒä¸€æ ·å®ˆåœ¨é‚£é‡Œï¼Œé‚£æ˜¯ç»å¯¹çš„å®‰å…¨æ„Ÿã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "â€œéœ€è¦æˆ‘å…³ç¯é…åˆå—ï¼Ÿâ€",
                    desc: "æˆ˜æœ¯é…åˆ",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                        s.rep_ghosts += 5;
                        printMsg("â€œèªæ˜ã€‚â€ ä»–ç®€çŸ­åœ°è¯„ä»·é“ï¼Œâ€œä¿æŒéšè”½ï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆéƒ½åˆ«å‡ºå£°ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "å‡ åˆ†é’Ÿåï¼Œä¸€é˜Ÿé»‘å½±å¿«é€Ÿé—ªè¿‡ï¼Œç¬¬äºŒå¤©ä½ å‘ç°é—¨å£æ”¾ç€ä¸€ç®±ä½œä¸ºè°¢ç¤¼çš„å†›ç²® (+3 Food)ã€‚"
                },
                {
                    text: "è‡ªé¡¾è‡ªåœ°åšç”Ÿæ„",
                    desc: "äº’ä¸å¹²æ‰°",
                    result: "Keegan å¯¹æ­¤æ²¡æœ‰å¼‚è®®ï¼Œåªè¦ä½ ä¸å¦¨ç¢ä»»åŠ¡å°±è¡Œï¼Œä»»åŠ¡å®Œæˆåä»–æ— å£°æ— æ¯åœ°ç¦»å¼€äº†ã€‚"
                }
            ]
        },

// [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæ— å£°çš„æ—©å®‰
        {
            text: "ä½ é†’æ¥æ—¶ï¼Œå‘ç°åºŠå¤´æŸœä¸Šæ”¾ç€ä¸€æ¯æ¸©åº¦åˆšå¥½çš„æ¸©æ°´å’Œå‡ é¢—ç»´ç”Ÿç´ ã€‚\nKeegan å·²ç»å…¨å‰¯æ­¦è£…ååœ¨çª—è¾¹è­¦æˆ’äº†ï¼Œçœ‹åˆ°ä½ é†’æ¥åä»–æ”¾ä¸‹æœ›è¿œé•œï¼Œè“è‰²çš„çœ¼ç›å€’å½±é‡Œåªæœ‰ä½ ã€‚\nâ€œæ—©ï¼Œæ˜¨æ™šç¡å¾—å¥½å—ï¼Ÿå‘¨å›´å¾ˆå®‰å…¨ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "ç´¢è¦æ—©å®‰å»",
                    desc: "æ‹‰ä¸‹ä»–çš„é¢ç½©",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        s.chars.keegan.aff += 5;
                        printMsg("ä»–é¡ºä»åœ°ä½ä¸‹å¤´ï¼Œè®©ä½ æ‹‰ä¸‹ä»–çš„é¢ç½©ã€‚\nè¿™æ˜¯ä¸€ä¸ªå¸¦ç€è–„è·ç‰™è†å‘³å’Œèƒ¡èŒ¬è§¦æ„Ÿçš„å»ï¼ŒçŸ­æš‚å´ä»¤äººå®‰å¿ƒã€‚", 'event');
                    },
                    result: "â€œå»æ´—æ¼±å§ï¼Œæˆ‘ç»§ç»­ç›¯ç€å¤–é¢ã€‚â€ ä»–çš„å£°éŸ³æ¯”å¹³å¸¸æ›´è½»æŸ”ã€‚"
                },
                {
                    text: "æŠŠå¤´é åœ¨ä»–è†ç›–ä¸Šèµ–åºŠ",
                    desc: "å†çœ¯ä¸€ä¼šå„¿",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                    },
                    result: "Keegan è…¾å‡ºä¸€åªæ‰‹è½»è½»æŠšæ‘¸ä½ çš„å¤´å‘ï¼Œåƒæ˜¯åœ¨å®‰æŠšä¸€åªçŒ«ï¼Œä»–å¾ˆäº«å—è¿™ç§è¢«ä¾èµ–çš„æ„Ÿè§‰ã€‚"
                }
            ]
        },

// [Keegan] è¯¯ä¼šåˆ†æ‰‹å±æœºï¼šè¢«ç›‘å¬çš„ä¿¡ä»»
        {
            text: "Keegan å°†ä¸€æšæ‹†å¼€çš„å¾®å‹ç›‘å¬å™¨æ‘†åœ¨ä½ é¢å‰ã€‚\nâ€œæˆ‘åœ¨ä½ çš„é€šè®¯å™¨é‡Œå‘ç°äº†è¿™ä¸ªï¼Œé¢‘æ®µæŒ‡å‘ Federation (è”é‚¦å†›)ã€‚â€\nä»–é‚£åŒæ€»æ˜¯æ¸©æŸ”æ³¨è§†ä½ çš„è“çœ¼ç›æ­¤åˆ»å¤šäº†å‡ åˆ†å®¡è§†æ•Œäººçš„é”åˆ©ã€‚\nâ€œè§£é‡Šä¸€ä¸‹ï¼Œä½ æ˜¯è¢«åˆ©ç”¨äº†... è¿˜æ˜¯è¯´è¿™ä¸€åˆ‡ä»å¤´åˆ°å°¾éƒ½æ˜¯ä¼ªè£…ï¼Ÿâ€",
            speaker: "Keegan P. Russ",
            type: "alert",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + æ¦‚ç‡ + éå¥³ç‹
            condition: s => s.chars.keegan.dating && chance(15) && !s.flags.harem_queen,
            options: [
                {
                    text: "ç«‹åˆ»è§£é‡Šï¼šâ€œé‚£æ˜¯ä»é»‘å¸‚ä¹°çš„æˆ˜åˆ©å“ï¼æˆ‘æ ¹æœ¬ä¸çŸ¥é“æœ‰å¤¹å±‚â€",
                    desc: "è§£é™¤è¯¯ä¼š",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan ç´§ç»·çš„èº«ä½“æ…¢æ…¢æ”¾æ¾ä¸‹æ¥ï¼Œçœ¼åº•çš„åšå†°èåŒ–äº†ã€‚\nâ€œ...æˆ‘ç›¸ä¿¡ä½ ï¼ŒæŠ±æ­‰ï¼Œä½†æˆ‘å¿…é¡»ç¡®è®¤ï¼Œå› ä¸ºè¿™ä¸ä»…å½±å“çš„æ˜¯æˆ‘ä¸€ä¸ªäººï¼Œè¿˜æœ‰Merrickï¼ŒHesh....ç®—äº†ã€‚â€ ä»–ç»•è¿‡æŸœå°ï¼Œç”¨åŠ›å°†ä½ æ‹¥å…¥æ€€ä¸­ï¼Œâ€œä»¥åæˆ‘ä¼šäº²è‡ªæ£€æŸ¥ä½ çš„è®¾å¤‡ï¼Œä¸ä¼šå†è®©è¿™ç§äº‹å‘ç”Ÿã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "å±æœºè§£é™¤äº†ï¼Œå¯¹äº Ghosts æ¥è¯´ï¼Œä¿¡ä»»æ˜¯æ¯”ç”Ÿå‘½æ›´å¥¢ä¾ˆçš„ä¸œè¥¿ï¼Œä½†ä»–å†æ¬¡é€‰æ‹©äº†ä¿¡ä½ ã€‚"
                },
                {
                    text: "â€œæ—¢ç„¶ä½ è¿™ä¹ˆæ€€ç–‘æˆ‘ï¼Œé‚£å°±æ²¡å¿…è¦ç»§ç»­äº†ã€‚â€ (åˆ†æ‰‹)",
                    desc: "å†·æˆ˜å¹¶ç»“æŸå…³ç³»",
                    effect: s => {
                        s.chars.keegan.dating = false;    // ğŸ’” åˆ†æ‰‹
                        s.chars.keegan.aff -= 100;         // å¤±æœ›å¤šäºæ¨
                        s.chars.keegan.confessed = false; // é‡ç½®è¡¨ç™½çŠ¶æ€
                        
                        // ğŸŸ¢ æ ¸å¿ƒï¼šå¼€å¯ 30 å¤©å†·å´CD
                        s.chars.keegan.last_reject_day = s.day;
// ğŸŸ¢ æ–°å¢ï¼šæ ‡è®°ä¸ºå‰ä»»
                                  s.chars.Keegan.is_ex = true;
                        printMsg("Keegan æ²‰é»˜äº†è®¸ä¹…ï¼Œä»–é‡æ–°æˆ´ä¸Šé¢ç½©ï¼Œé®ä½äº†æ‰€æœ‰çš„æƒ…ç»ªï¼Œæ¢å¤æˆäº†é‚£ä¸ªæ²¡æœ‰æ„Ÿæƒ…çš„å¹½çµã€‚\nâ€œæ˜ç™½äº†ï¼Œæˆ‘ä¸ä¼šå†æ¥æ‰“æ‰°ä½ ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ã€å…³ç³»ç»“æŸã€‘ä»–è½¬èº«èå…¥äº†é»‘æš—ï¼Œå°±åƒä»–ä»æœªå‡ºç°è¿‡ä¸€æ ·ï¼Œä½ çŸ¥é“ä»–åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½ä¸ä¼šå†å›æ¥äº†ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæˆ˜æœ¯åèƒŒ
        {
            text: "åº—é‡Œäººå¾ˆå¤šï¼Œä½ å¿™å¾—ä¸å¯å¼€äº¤ã€‚å½“ä½ è½¬èº«å»æ‹¿é«˜å¤„çš„è´§ç®±æ—¶ï¼ŒåèƒŒæ’ä¸Šäº†ä¸€å µåšå®çš„â€œå¢™â€ã€‚\næ˜¯ Keeganã€‚ä»–ä¸€ç›´é»˜é»˜ç«™åœ¨ä½ èº«åå¸®ä½ æŒ¡å¼€äº†æ‹¥æŒ¤çš„äººç¾¤ï¼Œä¸ºä½ åœˆå‡ºäº†ä¸€å—ç»å¯¹å®‰å…¨çš„é¢†åŸŸã€‚\nâ€œæ…¢ç‚¹ã€‚â€ ä»–å•æ‰‹å¸®ä½ ç¨³ä½äº†ç®±å­ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "å‘åé è¿›ä»–æ€€é‡Œ",
                    desc: "è¶æœºå·æ‡’ä¸€ç§’é’Ÿ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan çš„èº«ä½“åƒµäº†ä¸€ä¸‹ï¼Œéšå³æ”¾æ¾ä¸‹æ¥ç”¨èƒ¸è†›æ”¯æ’‘ç€ä½ çš„é‡é‡ã€‚\nâ€œç´¯äº†ï¼Ÿå†åšæŒä¸€ä¸‹ï¼Œæ™šä¸Šæˆ‘å¸®ä½ æŒ‰æ‘©ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "æœ‰ä»–åœ¨èº«åï¼Œå°±ç®—æ˜¯åºŸåœŸä¹Ÿè§‰å¾—å¾ˆå¹¸ç¦ã€‚"
                },
                {
                    text: "å¯¹ä»–çœ¨çœ¨çœ¼è¡¨ç¤ºæ„Ÿè°¢",
                    desc: "é»˜å¥‘æ»¡åˆ†",
                    result: "ä»–æ¸©æŸ”çš„ç¬‘äº†ï¼Œç»§ç»­å®ˆæŠ¤ç€ä½ çš„åèƒŒã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šé¢ç½©ä¹‹å»
        {
            text: "Keegan åˆšæ‰§è¡Œå®Œä¾¦å¯Ÿä»»åŠ¡å›æ¥ï¼Œèº«ä¸Šè¿˜æœ‰äº›è®¸å¤œæ™šçš„å¯’æ°”å’Œç¡çƒŸå‘³ã€‚\nä»–æ²¡æœ‰æ‘˜ä¸‹é¢ç½©ï¼Œåªæ˜¯ç–²æƒ«åœ°æŠ±ä½ä½ ï¼ŒæŠŠé¢å¤´æŠµåœ¨ä½ çš„é¢å¤´ä¸Šã€‚\néš”ç€é‚£å±‚å°ç€ç‰¹æ®Šå›¾æ¡ˆçš„ç»‡ç‰©ï¼Œä½ èƒ½æ„Ÿå—åˆ°ä»–æ²‰é‡çš„å‘¼å¸ã€‚",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "éš”ç€é¢ç½©å»ä»–çš„å˜´å”‡",
                    desc: "ç‹¬ç‰¹çš„è§¦æ„Ÿ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // ç²¾ç¥æ¢å¤
                        printMsg("Keegan çš„æ‰‹æ”¶ç´§äº†ï¼Œä»–æ²¡æƒ³åˆ°ä½ ä¼šè¿™ä¹ˆåšã€‚\nâ€œ...ä¸è„å—ï¼Ÿâ€ ä»–ä½å£°é—®ï¼Œå£°éŸ³æœ‰äº›æ²™å“‘ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "â€œä½ æ˜¯æˆ‘ç‹¬ä¸€æ— äºŒçš„Keeganã€‚â€ ä½ å›ç­”é“ï¼Œä»–æŠŠä½ æŠ±å¾—æ›´ç´§äº†ã€‚"
                },
                {
                    text: "å¸®ä»–å¸ä¸‹è£…å¤‡",
                    desc: "åå‹¤å°èƒ½æ‰‹",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                    },
                    result: "ä½ å¸®ä»–è§£å¼€äº†æ²‰é‡çš„æˆ˜æœ¯èƒŒå¿ƒï¼Œä»–é•¿èˆ’ä¸€å£æ°”ï¼Œæ”¾æ¾çš„èˆ’å±•äº†è‚Œè‚‰ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šä¸“å±é¢‘é“
        {
            text: "Keegan æŠŠä¸€ä¸ªæ”¹è£…è¿‡çš„å†›ç”¨è€³éº¦æŒ‚åœ¨ä½ çš„è„–å­ä¸Šã€‚\nâ€œæˆ‘é»‘è¿›äº†ä¸€é¢—æ—§å«æ˜Ÿï¼Œæåˆ°äº†ä¸€ä¸ªåŠ å¯†é¢‘é“ã€‚â€\nä»–è°ƒè¯•äº†ä¸€ä¸‹ï¼Œè€³æœºé‡Œä¼ æ¥äº†æ¸…æ™°çš„å¤å…¸éŸ³ä¹ï¼Œå®Œå…¨æ²¡æœ‰åºŸåœŸå¹¿æ’­çš„æ‚éŸ³ã€‚\nâ€œåªå±äºæˆ‘ä»¬ä¸¤ä¸ªçš„é¢‘é“...æ— è®ºæˆ‘åœ¨å“ªï¼Œåªè¦ä½ è¯´è¯ï¼Œæˆ‘å°±èƒ½å¬è§ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "æˆ´ä¸Šè€³æœºå¬éŸ³ä¹",
                    desc: "äº«å—äºŒäººä¸–ç•Œ",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        addShopRating(5.0, true); // å¿ƒæƒ…å¥½ï¼Œè¯„åˆ†ä¸Šå‡
                        printMsg("åœ¨è¿™ä¸ªå˜ˆæ‚çš„ä¸–ç•Œé‡Œï¼Œè¿™ä»½å®é™æ˜¯æ— ä»·ä¹‹å®ã€‚", 'gain');
                    },
                    result: "Keegan çœ‹ç€ä½ æ²‰æµ¸åœ¨éŸ³ä¹é‡Œçš„æ ·å­ï¼Œéœ²å‡ºäº†æ»¡æ„çš„ç¥è‰²ã€‚"
                },
                {
                    text: "å¯¹ç€éº¦å…‹é£è¯´æƒ…è¯",
                    desc: "â€œæˆ‘çˆ±ä½ ï¼ŒKeeganâ€",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                    },
                    result: "Keegan çŒ›åœ°æ‚ä½è€³æœµï¼Œé¢ç½©ä¸‹çš„è„¸ç¬é—´çº¢é€äº†ï¼šâ€œ...å’³ï¼ŒRogerï¼Œæˆ‘ä¹Ÿ... ä¸€æ ·ã€‚â€"
                }
            ]
        },

// [Keegan] ç»ˆæå‰§æƒ… 1ï¼šå‘¼å¸çš„é¢ç½© (å”¯ä¸€)
        // è®¾å®šï¼šæ‰“ç ´ç‰©ç†éš”é˜‚ï¼Œä»–å¼•å¯¼ä½ æ„Ÿå—ä»–çš„å‘¼å¸
        {
            text: "Keegan åˆšç»“æŸä¸€åœºé«˜å¼ºåº¦çš„æ½œå…¥ä»»åŠ¡å›æ¥ï¼Œè‚¾ä¸Šè…ºç´ è¿˜æ²¡é€€å»ã€‚\nä»–æŠŠä½ æ‹‰è¿›æ²¡æœ‰å¼€ç¯çš„ä»“åº“ï¼Œå°†ä½ çš„æ‰‹æŒ‰åœ¨ä»–èµ·ä¼å‰§çƒˆçš„èƒ¸å£ï¼Œéš”ç€æˆ˜æœ¯èƒŒå¿ƒï¼Œä½ èƒ½æ„Ÿåˆ°é‚£é‡Œç‹‚ä¹±çš„å¿ƒè·³ã€‚\nâ€œå¤ªåµäº†...â€ ä»–ä½å¤´æŠµç€ä½ çš„é¢å¤´ï¼Œæ‘˜ä¸‹äº†é¢ç½©ï¼ŒæŠ“ç€ä½ çš„æ‰‹è¦†ç›–åœ¨ä»–æ»šçƒ«çš„å£é¼»ä¸Šï¼Œâ€œåªæœ‰ä½ èƒ½è®©å®ƒå¹³é™ä¸‹æ¥ã€‚â€",
            speaker: "Keegan P. Russ",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + ä¸“ä¸€ + å¥½æ„Ÿ>800 + æœªè§¦å‘è¿‡
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 800 && !s.flags.keegan_high_event_1,
            options: [
                {
                    text: "å»ä»–æŒå¿ƒä¸‹çš„å”‡",
                    desc: "å®‰æŠšå¹½çµ",
                    effect: s => {
                        s.flags.keegan_high_event_1 = true; // ğŸ”’ é”æ­»æ ‡è®°
                        s.chars.keegan.aff += 20;
                        s.ap = 0; // æ¶ˆè€—ç²¾åŠ›
                        printMsg("Keegan çš„çœ¼ç¥ç¬é—´æš—äº†ä¸‹æ¥ï¼Œä»–åæ‰‹æ‰£ä½ä½ çš„æ‰‹è…•ï¼Œå°†ä½ å‹åœ¨è´§æ¶ä¸ŠåŠ æ·±äº†è¿™ä¸ªå»ã€‚\nâ€œé‚£å°±åˆ«åœ...â€", 'event');
                    },
                    result: "ä½ æ˜¯ä»–çš„å”¯ä¸€ã€‚"
                }
            ]
        },

        // [Keegan] ç»ˆæå‰§æƒ… 2ï¼šç‹™å‡»æ‰‹çš„è§†é‡ (å”¯ä¸€)
        // è®¾å®šï¼šå…±äº«è§†é‡ï¼Œææè‡´çš„ä¿¡ä»»ï¼Œèº«ä½“æ¥è§¦
        {
            text: "Keegan å¸¦ä½ æ¥åˆ°äº†å°é•‡æœ€é«˜çš„é’Ÿæ¥¼åºŸå¢Ÿï¼Œä»–ä»èº«åç¯æŠ±ç€ä½ ï¼Œå¼•å¯¼ä½ çœ‹å‘é‚£æ¶é«˜ç²¾ç‹™å‡»æ­¥æªçš„ç„å‡†é•œã€‚\nâ€œè¿™é€šå¸¸æ˜¯æˆ‘çœ‹ä¸–ç•Œçš„æ–¹å¼... å†·é…·ã€å‚æ•°åŒ–ã€åªæœ‰ç›®æ ‡ã€‚â€\nä»–çš„èƒ¸è†›ç´§è´´ç€ä½ çš„åèƒŒï¼Œæ¸©çƒ­çš„æ°”æ¯å–·æ´’åœ¨è€³ä¾§ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ è°ƒæ•´ç„¦è·ã€‚\nâ€œä½†ç°åœ¨ï¼Œä½ æ˜¯æˆ‘çš„è§‚å¯Ÿæ‰‹ï¼Œæˆ‘çš„å‘½åœ¨ä½ æ‰‹é‡Œã€‚â€",
            speaker: "Keegan P. Russ",
            type: "dialogue",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 1000 && !s.flags.keegan_high_event_2,
            options: [
                {
                    text: "å‘åé è¿›ä»–æ€€é‡Œï¼šâ€œæˆ‘ä¼šçœ‹å¥½ä½ çš„èƒŒåã€‚â€",
                    desc: "æˆä¸ºä»–çš„ä¾é ",
                    effect: s => {
                        s.flags.keegan_high_event_2 = true;
                        s.chars.keegan.aff += 20;
                        printMsg("Keegan å‘å‡ºä¸€å£°æ»¡è¶³çš„ä½ç¬‘ï¼Œå°†è„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œè¹­äº†è¹­ã€‚\nâ€œRoger that. ç›®æ ‡å·²é”å®š... å°±æ˜¯ä½ ã€‚â€", 'event');
                    },
                    result: "ä½ ä»¬åœ¨åºŸå¢Ÿé¡¶ç«¯ç›¸æ‹¥ï¼Œæ­¤åˆ»ä¸éœ€è¦å¯»æ‰¾æ•Œäººï¼Œåªéœ€è¦æ„Ÿå—å½¼æ­¤çš„å¿ƒè·³ã€‚"
                }
            ]
        },

// ğŸŸ¢ [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šäººå½¢æŒ‚ä»¶ (èƒŒåæŠ±)
        {
            text: "ä½ æ­£åœ¨æ ¸å¯¹è´¦ç›®ï¼Œçªç„¶æ„Ÿè§‰èƒŒä¸Šä¸€æ²‰ï¼Œä¸€åŒæœ‰åŠ›çš„æ‰‹è‡‚æ— å£°æ— æ¯åœ°ç¯ä½äº†ä½ çš„è…°ã€‚\nKeegan æŠŠä¸‹å·´æŠµåœ¨ä½ çš„è‚©çªé‡Œï¼Œâ€œ...åˆ«åŠ¨ã€‚â€ ä»–çš„å£°éŸ³é—·é—·çš„ï¼Œå¸¦ç€ä¸€ä¸ç–²æƒ«çš„æ²™å“‘ï¼Œâ€œè®©æˆ‘è¿™æ ·å‘†ä¸€ä¼šå„¿...â€",
            speaker: "Keegan",
            type: "event",
            // åªè¦æ‹çˆ±å°±è§¦å‘ï¼Œä¸ç®¡æœ‰æ²¡æœ‰åˆ«äºº
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "ä¾§è¿‡å¤´è¹­è¹­ä»–çš„é¢ç½©",
                    desc: "å®‰æŠšè¿™åªç²˜äººçš„å¹½çµ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // è¢«ä»–çš„ä½“æ¸©æ²»æ„ˆäº†
                        printMsg("Keegan å‘å‡ºä¸€å£°æ»¡è¶³çš„å–Ÿå¹ï¼Œæ‰‹è‡‚æ”¶å¾—æ›´ç´§äº†ï¼Œå‡ ä¹æŠŠä½ åµŒè¿›ä»–çš„æ€€é‡Œã€‚\nâ€œ...è¿™æ¯”ä»»ä½•æˆ˜æœ¯è¡¥ç»™éƒ½ç®¡ç”¨ã€‚â€", 'event');
                    },
                    result: "ä»–å°±è¿™æ ·æŒ‚åœ¨ä½ èº«ä¸Šå¥½å‡ åˆ†é’Ÿï¼Œå³ä½¿ä½ æ‹–ç€ä»–èµ°æ¥èµ°å»ï¼Œä»–ä¹Ÿå®Œå…¨ä¸æƒ³æ’’æ‰‹ã€‚"
                },
                {
                    text: "â€œKeeganï¼Œä½ å¥½é‡...â€",
                    desc: "ç”œèœœçš„æŠ±æ€¨",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                    },
                    result: "â€œå¿ç€ã€‚â€ ä»–è™½ç„¶è¿™ä¹ˆè¯´ï¼Œä½†è¿˜æ˜¯ç¨å¾®è°ƒæ•´äº†å§¿åŠ¿ï¼Œå¸®ä½ åˆ†æ‹…äº†ä¸€éƒ¨åˆ†é‡é‡ï¼Œå˜æˆäº†æ›´æœ‰æ”¯æ’‘æ„Ÿçš„æ‹¥æŠ±ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šè†ä¸Šçš„é™·é˜± (è…¿éƒ¨æŒ‚ä»¶)
        {
            text: "Keegan ååœ¨æ²™å‘ä¸Šæ“¦æ‹­é‚£æŠŠæ˜‚è´µçš„ç‹™å‡»æ­¥æªï¼Œå½“ä½ è·¯è¿‡ä»–é¢å‰æ—¶ï¼Œä»–çªç„¶ä¼¸è…¿å‹¾ä½äº†ä½ çš„è„šè¸ï¼Œè½»è½»ä¸€æ‹‰ã€‚\nä½ é‡å¿ƒä¸ç¨³ï¼Œç›´æ¥è·Œåè¿›äº†ä»–ä¸¤è…¿ä¹‹é—´ã€‚\nä»–æå…¶è‡ªç„¶åœ°æŠŠä½ åœˆåœ¨æ€€é‡Œï¼Œä¸‹å·´æåœ¨ä½ å¤´é¡¶ï¼Œç»§ç»­æ‰‹é‡Œçš„æ“¦æªåŠ¨ä½œï¼Œä»¿ä½›ä½ å°±æ˜¯ä»–èº«ä½“çš„ä¸€éƒ¨åˆ†ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "æ‰¾ä¸ªèˆ’æœçš„å§¿åŠ¿çªç€",
                    desc: "æˆä¸ºä»–çš„â€œäººè‚‰æ©ä½“â€",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan ä½ç¬‘ä¸€å£°ï¼ŒæŠŠä½ æŠ±å¾—æ›´ç´§äº†äº›ã€‚\nâ€œä½ç½®ä¸é”™ï¼Œè§†é‡è‰¯å¥½ï¼Œç›®æ ‡... åœ¨æ€€é‡Œã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä¼´éšç€æªæ²¹çš„å‘³é“å’Œä»–æ²‰ç¨³çš„å¿ƒè·³å£°ï¼Œä½ ç«Ÿç„¶è§‰å¾—æ— æ¯”å®‰å¿ƒã€‚"
                },
                {
                    text: "ç©å¼„ä»–æˆ˜æœ¯èƒŒå¿ƒä¸Šçš„æ‰£å­",
                    desc: "æ£ä¹±",
                    effect: s => {
                        s.chars.keegan.aff += 6;
                    },
                    result: "Keegan æ‰ä½ä½ ä¹±åŠ¨çš„æ‰‹ï¼Œæ”¾åœ¨å”‡è¾¹å»äº†ä¸€ä¸‹ï¼šâ€œåˆ«ç‚¹ç«ï¼ŒCariÃ±o... é™¤éä½ æƒ³è´Ÿè´£ç­ç«ã€‚â€"
                }
            ]
        },

        // ğŸŸ¢ [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæ— å£°çš„ç´¢æ±‚ (å–‚é£Ÿ)
        {
            text: "Keegan åˆšæ´—å®Œæ¾¡ï¼Œå¤´å‘æ¹¿æ¼‰æ¼‰åœ°æ­åœ¨é¢å‰ï¼Œé‚£åŒå¹³æ—¥é‡Œå†·é™é”åˆ©çš„è“çœ¼ç›æ­¤åˆ»çœ‹èµ·æ¥æœ‰äº›æ¹¿æ¶¦å’Œæ…µæ‡’ã€‚\nä»–æ²¡æœ‰æˆ´é¢ç½©ï¼Œå°±è¿™æ ·ååœ¨æ¡Œè¾¹çœ‹ç€ä½ åƒä¸œè¥¿ï¼Œè§†çº¿ç›´å‹¾å‹¾åœ°ç›¯ç€ä½ çš„å˜´å”‡ï¼Œå–‰ç»“ä¸Šä¸‹æ»šåŠ¨äº†ä¸€ä¸‹ã€‚",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "æŠŠå’¬äº†ä¸€åŠçš„é¥¼å¹²å–‚ç»™ä»–",
                    desc: "é—´æ¥æ¥å»",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.keegan.aff += 8;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Keegan å‡‘è¿‡æ¥ï¼Œå°±ç€ä½ çš„æ‰‹å’¬ä½äº†é¥¼å¹²ï¼ŒèˆŒå°–è‰²æ°”åœ°å·è¿‡ä½ çš„æŒ‡å°–ã€‚\nâ€œç”œçš„ã€‚â€ ä»–çœ‹ç€ä½ çš„çœ¼ç›è¯´é“ï¼Œæ„æœ‰æ‰€æŒ‡ã€‚", 'event');
                    },
                    result: "ä»–åƒæ‰äº†é¥¼å¹²ï¼Œé¡ºä¾¿æŠŠä½ æ‰‹æŒ‡ä¸Šçš„ç¢å±‘ä¹Ÿå»å¹²å‡€äº†ã€‚"
                },
                {
                    text: "â€œä½ ä¹Ÿé¥¿äº†å—ï¼Ÿâ€",
                    desc: "å»ç»™ä»–æ‹¿ä»½æ–°çš„",
                    result: "Keegan æ‘‡äº†æ‘‡å¤´ï¼ŒæŠŠä½ æ‹‰è¿‡æ¥ç»™äº†ä¸€ä¸ªæ·±å»ï¼šâ€œç°åœ¨é¥±äº†ã€‚â€"
                }
            ]
        },

        // [Keegan] ç»ˆæå‰§æƒ… 3ï¼šå¹½çµçš„å®ä½“ (å”¯ä¸€)
        // è®¾å®šï¼šå…³äºæœªæ¥çš„æ‰¿è¯ºï¼Œå½»åº•çš„æƒ…æ„Ÿçˆ†å‘
        {
            text: "æœ€è¿‘Keegan çœ‹èµ·æ¥æœ‰äº›åå¸¸ï¼Œä»–ä¸€ç›´ç›¯ç€ä½ çœ‹ï¼Œä»¿ä½›è¦æŠŠä½ çš„æ ·å­åˆ»è¿›çµé­‚é‡Œã€‚\nåœ¨ä½ çš„åå¤æ‹·é—®ä¸‹ï¼Œä»–å¹äº†å£æ°”ï¼šâ€œGhosts ä¸åº”è¯¥æœ‰ç‰µæŒ‚ï¼Œç‰µæŒ‚ä¼šè®©äººå˜æ…¢ï¼Œå˜å¼±...â€\nâ€œå¦‚æœæœ‰ä¸€å¤©æˆ‘å˜æˆäº†...è¿™é‡Œ... æ˜¯æˆ‘å”¯ä¸€çš„å½’å®¿ã€‚â€",
            speaker: "Keegan P. Russ",
            type: "event",
            condition: s => s.chars.keegan.dating && !s.flags.harem_queen && checkExclusivity('keegan', s) && s.chars.keegan.aff > 1200 && !s.flags.keegan_high_event_3,
            options: [
                {
                    text: "ç´§ç´§æŠ±ä½ä»–ï¼šâ€œä½ å¿…é¡»æ´»ç€å›æ¥è§æˆ‘ã€‚â€",
                    desc: "è®¸ä¸‹ç”Ÿæ­»çš„èª“è¨€",
                    effect: s => {
                        s.flags.keegan_high_event_3 = true;
                        s.chars.keegan.aff += 30;
                        // é€ä½ ä¸€ä¸ªå®šæƒ…ä¿¡ç‰©
                        s.gacha_coins += 20; 
                        printMsg("Keegan é—­çœ¼å›æŠ±ä½ä½ ï¼ŒåŠ›é“å¤§å¾—ä»¿ä½›è¦å°†ä½ æ‰è¿›èº«ä½“é‡Œã€‚\nâ€œæˆ‘...Keegan P. Russ å‘èª“ï¼Œå“ªæ€•ä»åœ°ç‹±çˆ¬å›æ¥ï¼Œæˆ‘ä¹Ÿè¦å›åˆ°ä½ èº«è¾¹ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä½ çŸ¥é“Keegan P. Russ å°±åœ¨è¿™é‡Œï¼Œåªå±äºä½ ã€‚"
                }
            ]
        },


        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šä¼¤ç—•
        {
            text: "ä½ å‘ç° Keegan æ­£åœ¨å¤„ç†æ‰‹è‡‚ä¸Šçš„ä¸€é“æ–°ä¼¤å£ï¼ŒåŠ¨ä½œç†Ÿç»ƒå¾—è®©äººå¿ƒç–¼ï¼Œç”šè‡³è¿çœ‰å¤´éƒ½æ²¡çš±ä¸€ä¸‹ã€‚\nçœ‹åˆ°ä½ è¿›æ¥ï¼Œä»–ä¸‹æ„è¯†æƒ³æ‹‰ä¸‹è¢–å­é®æŒ¡ã€‚\nâ€œå°ä¼¤æ²¡äº‹ï¼Œåˆ«çœ‹ï¼Œä¸å¥½çœ‹ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "å¼ºè¡Œæ‹‰è¿‡ä»–çš„æ‰‹ï¼Œäº²è‡ªåŒ…æ‰",
                    desc: "å¿ƒç–¼ä»– (-1 Medkit)",
                    condition: s => s.medkit >= 1,
                    effect: s => {
                        s.medkit--;
                        s.chars.keegan.aff += 10;
                        printMsg("Keegan æ‹—ä¸è¿‡ä½ ï¼Œåªèƒ½ä»»ç”±ä½ å¤„ç†ã€‚\nçœ‹ç€ä½ è®¤çœŸçš„æ ·å­ï¼Œä»–ï¼šâ€œæœ‰ä½ åœ¨...è¿™ç‚¹ä¼¤å¥½åƒä¹Ÿä¸ç®—ä»€ä¹ˆäº†ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "åŒ…æ‰å®Œåï¼Œä»–äº²å»äº†ä½ çš„æŒ‡å°–ã€‚"
                },
                {
                    text: "ååœ¨ä»–èº«è¾¹é™ªç€ä»–",
                    desc: "æ— å£°çš„é™ªä¼´",
                    result: "ä½ æ¡ç€ä»–æ²¡å—ä¼¤çš„é‚£åªæ‰‹ï¼ŒKeegan ä¹Ÿåæ¡ä½ä½ ï¼ŒåæŒ‡ç´§æ‰£ï¼Œç›´åˆ°ä¼¤å£å¤„ç†å®Œæ¯•ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šæš´é›¨å¤œçš„ä½“æ¸©
        {
            text: "æœ€è¿‘æ€»æ˜¯ç‹‚é£æš´é›¨ï¼Œæ°”æ¸©éª¤é™ï¼ŒKeegan æŠŠä½ è£¹è¿›äº†ä»–é‚£ä»¶å®½å¤§çš„æˆ˜æœ¯é˜²å¯’æœé‡Œã€‚\nä¸¤ä¸ªäººæŒ¤åœ¨ç‹­å°çš„æ²™å‘ä¸Šï¼Œä»–çš„ä½“æ¸©åƒä¸ªç«ç‚‰ä¸€æ ·è®©ä½ è§‰å¾—å¾ˆèˆ’æœã€‚\nâ€œå†·å—ï¼Ÿâ€ ä»–çš„ä¸‹å·´æŠµåœ¨ä½ çš„å¤´é¡¶ï¼Œæ‰‹è‡‚æŠŠä½ åœˆå¾—å¯†ä¸é€é£ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "å¾€ä»–æ€€é‡Œé’»å¾—æ›´æ·±ä¸€ç‚¹",
                    desc: "åƒåªå†¬çœ çš„æ¾é¼ ",
                    effect: s => {
                        s.ap = CONFIG.max_ap;
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan ä½ä½åœ°ç¬‘äº†ï¼Œæ”¶ç´§äº†æ‰‹è‡‚ã€‚\nâ€œç¡å§ï¼Œæˆ‘å°±åœ¨è¿™é‡Œå“ªä¹Ÿä¸å»ã€‚â€", 'event');
                    },
                    result: "è¿™ä¸€æ™šä½ ç¡å¾—æ ¼å¤–é¦™ç”œï¼Œè¿å™©æ¢¦éƒ½éš”ç»åœ¨äº†ä½ ä»¬è¿™ä¸ªæ¸©æš–çš„åº‡æŠ¤æ‰€ä¹‹å¤–ã€‚"
                },
                {
                    text: "ç©ä»–é˜²å¯’æœä¸Šçš„æ‹‰é“¾",
                    desc: "è°ƒçš®ä¸€ä¸‹",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                    },
                    result: "Keegan æŠ“ä½ä½ çš„æ‰‹ï¼šâ€œåˆ«é—¹...æ¼é£äº†ã€‚â€ ç„¶åæŠŠä½ ä¸¤åªæ‰‹éƒ½å¡è¿›äº†ä»–æ¸©æš–çš„å£è¢‹é‡Œã€‚"
                }
            ]
        },

        // [Keegan] æ—¥å¸¸ 6ï¼šæ— å£°å¤„å†³
        {
            text: "ä¸€åæš´èºçš„ä½£å…µå› ä¸ºä»·æ ¼é—®é¢˜æƒ³è¦æ‹”æªå¨èƒä½ ï¼Œä½ çš„æ‰‹åˆšæ‘¸å‘æŸœå°ä¸‹çš„è­¦æŠ¥å™¨ï¼Œå°±å¬åˆ°ä¸€å£°æ¸…è„†çš„éª¨è£‚å£°ã€‚\né‚£åä½£å…µå·²ç»ç˜«è½¯åœ¨åœ°ï¼ŒKeegan ç«™åœ¨ä»–èº«åï¼Œç”šè‡³æ²¡äººçœ‹æ¸…ä»–æ˜¯æ€ä¹ˆå‡ºæ‰‹çš„ã€‚\nâ€œä¸å¥½æ„æ€ã€‚â€ Keegan è·¨è¿‡é‚£ä¸ªæ˜è¿·çš„å€’éœ‰è›‹ï¼ŒæŠŠä¸¤ç›’ç½å¤´æ”¾åœ¨æŸœå°ä¸Šï¼Œâ€œç»“è´¦ã€‚â€",
            speaker: "Keegan",
            type: "event",
            condition: s => !s.chars.keegan.dating,
            options: [
                {
                    text: "æ·¡å®šç»“è´¦ï¼Œå…å•",
                    desc: "æ„Ÿè°¢ä»–çš„å‡ºæ‰‹",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                        s.food -= 2;
                        printMsg("Keegan çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ²¡æœ‰æ¨è¾ã€‚", 'dialogue', 'Keegan');
                    },
                    result: "ä»–æç€ç½å¤´èµ°äº†ï¼Œé¡ºä¾¿æŠŠé‚£ä¸ªæ˜è¿·çš„ä½£å…µè¸¢åˆ°äº†é—¨å¤–ã€‚"
                },
                {
                    text: "æ­£å¸¸ç»“è´¦",
                    desc: "ä¿æŒä¸“ä¸š",
                    effect: s => {
                        s.money += 30;
                        s.food -= 2;
                    },
                    result: "Keegan æ”¾ä¸‹é’±ï¼Œå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡ä¸€æ ·ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // [Keegan] æ‹çˆ±æ—¥å¸¸ï¼šå¤œè§†ä»ªä¸‹çš„ä½ 
        {
            text: "åœç”µäº†...å‘¨å›´ä¸€ç‰‡æ¼†é»‘ï¼Œä½ æ­£æ‘¸ç´¢ç€æ‰¾èœ¡çƒ›ï¼Œçªç„¶æ„Ÿè§‰æœ‰äººç¯ä½äº†ä½ çš„è…°ã€‚\nâ€œåˆ«æ€•...â€ Keegan çš„å£°éŸ³åœ¨è€³è¾¹å“èµ·ï¼Œâ€œæˆ´ä¸Šè¿™ä¸ªã€‚â€\nä»–æŠŠé‚£å‰¯å®è´µçš„å››çœ¼å¤œè§†ä»ªæˆ´åœ¨äº†ä½ å¤´ä¸Šã€‚ä¸–ç•Œç¬é—´å˜æˆäº†æ¸…æ™°çš„ç»¿è‰²è§å…‰ã€‚",
            speaker: "Keegan",
            type: "event",
            condition: s => s.chars.keegan.dating,
            options: [
                {
                    text: "è½¬å¤´çœ‹ä»–",
                    desc: "åœ¨å¤œè§†ä»ªé‡Œçœ‹ä»–çš„è„¸",
                    effect: s => {
                        s.chars.keegan.aff += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("åœ¨ç»¿è‰²çš„è§†é‡é‡Œï¼Œä½ æ¸…æ™°çš„çœ‹åˆ°äº†ä»–æ¸©æŸ”çš„ç¬‘æ„ã€‚\nâ€œè¿™å°±å¯¹äº†ï¼Œåœ¨æˆ‘èº«è¾¹ä½ ä¸éœ€è¦æ€•é»‘ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "è¿™æ˜¯ä¸€ç§ç‹¬ç‰¹çš„åªå±äºä½ ä»¬çš„æµªæ¼«ã€‚"
                }
            ]
        } // <--- è¿™é‡Œç»“æŸæœ€åä¸€ä¸ªäº‹ä»¶å¯¹è±¡
    ], // <--- è¿™é‡Œç»“æŸ keegan æ•°ç»„ï¼Œå¹¶ä¸”åŠ äº†é€—å·ï¼



        krueger: [
            // äº‹ä»¶ 1
            {
                text: "Krueger åƒæ˜¯é¬¼é­‚ä¸€æ ·å‡ºç°åœ¨è§’è½é‡Œã€‚ä»–çœ‹èµ·æ¥å¾ˆè™šå¼±ï¼Œä¼¼ä¹å·²ç»å‡ å¤©æ²¡åƒé¥­äº†ã€‚\nâ€œç»™æˆ‘åƒçš„... å¦åˆ™æˆ‘å°±è‡ªå·±æ‹¿ã€‚â€ ä»–æ¡ç€åˆ€çš„æ‰‹åœ¨å¾®å¾®é¢¤æŠ–ã€‚",
                speaker: "Krueger",
                type: "dialogue",
               // ã€æ–°å¢ã€‘åªæœ‰æ²¡æ‹çˆ±æ—¶ï¼Œä»–æ‰ä¼šå¨èƒä½ ã€‚æ‹çˆ±åä»–èˆä¸å¾—ã€‚
                condition: s => !s.chars.krueger.dating,
                options: [
                    {
                        text: "ç»™ 5 ä»½å†›ç²®",
                        desc: "-5 Food, ä¹Ÿæ˜¯ä¸ºäº†è‡ªå·±çš„å®‰å…¨",
                        condition: s => s.food >= 3,
                        effect: s => {
                            s.food -= 5;
                            s.chars.krueger.aff += 5;
                            s.rep_chimera += 5;
                        },
                        result: "Krueger ç‹¼åè™å’½åœ°åƒäº†ä¸€äº›ã€‚â€œæ¬ ä½ ä¸€æ¬¡ã€‚â€ ä»–çš„çœ¼ç¥æ¢å¤äº†å†·é™ã€‚"
                    },
                    {
                        text: "ä¸¾æªé©±é€",
                        desc: "è¿™å¯èƒ½ä¼šå¼•å‘å†²çª",
                        effect: s => {
                            s.chars.krueger.aff -= 20;
                            s.rep_chimera -= 20;
                            // æ¦‚ç‡å—ä¼¤
                            if(chance(30)) {
                                s.money = Math.max(0, s.money - 200);
                                log("åœ¨è¿™è¿‡ç¨‹ä¸­è¢«ç ´åäº†è®¾æ–½", 'loss');
                            }
                        },
                        result: "Krueger é˜´å†·åœ°çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ¶ˆå¤±åœ¨é˜´å½±ä¸­ã€‚â€œä½ ä¼šåæ‚”çš„ã€‚â€"
                    }
                ]
            },
// [Krueger] éæ‹çˆ±ï¼šç©åˆ€
        {
            text: "Krueger ååœ¨è§’è½çš„ç®±å­ä¸Šï¼Œæ‰‹é‡ŒæŠ›ç€ä¸€æŠŠåŒ•é¦–ï¼Œåˆ€å°–åœ¨ç©ºä¸­åˆ’è¿‡å¯’å…‰ï¼Œæ¯ä¸€æ¬¡éƒ½ç¨³ç¨³åœ°è½åœ¨ä»–æŒ‡å°–ã€‚\nå‘¨å›´çš„é¡¾å®¢å› ä¸ºä»–çš„å­˜åœ¨è€Œä¸æ•¢é è¿‘é‚£ä¸ªåŒºåŸŸï¼Œä»–ä¼¼ä¹å¾ˆäº«å—è¿™ç§æ„Ÿè§‰ã€‚",
            speaker: "Krueger",
            type: "event",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "è­¦å‘Šä»–ï¼šâ€œæ”¶èµ·ä½ çš„åŒ•é¦–ï¼Œè¿™é‡Œæ˜¯å®‰å…¨åŒºã€‚â€",
                    desc: "å±•ç¤ºä½ çš„åŸåˆ™",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                        printMsg("Krueger åœä¸‹äº†åŠ¨ä½œï¼Œå‘å‡ºä¸€å£°æ„å‘³ä¸æ˜çš„è½»å“¼ã€‚\nâ€œæœ‰èƒ†é‡ï¼Œæˆ‘å–œæ¬¢æœ‰çˆªå­çš„å°çŒ«ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–æ”¶èµ·äº†åˆ€ï¼Œä½†çœ¼ç¥ä¾ç„¶è‚†æ— å¿Œæƒ®åœ°åœ¨ä½ èº«ä¸Šæ‰“è½¬ã€‚"
                },
                {
                    text: "æ— è§†ä»–ï¼Œåªè¦ä¸æ€äººå°±è¡Œ",
                    desc: "é»˜è®¸",
                    result: "ä»–ç©äº†ä¸€ä¼šå„¿è§‰å¾—æ— èŠï¼Œè‡ªè¡Œç¦»å¼€äº†ã€‚"
                }
            ]
        },

// [Krueger] æ—¥å¸¸ï¼šèµé‡‘ç›®æ ‡ (éæ‹çˆ±)
        {
            text: "Krueger å°†ä¸€å¼ é€šç¼‰ä»¤æ‹åœ¨ä½ çš„æ”¶é“¶å°ä¸Šï¼Œä¸Šé¢æ˜¯ä¸€ä¸ªæ»¡è„¸æ¨ªè‚‰çš„ç”·äººã€‚\nâ€œè¿™ä¸ªäººï¼ŒåŠå°æ—¶å‰è¿˜åœ¨ä½ åº—é‡Œä¹°è¿‡æ°´ã€‚â€\nKrueger é è¿‘ä½ ï¼Œçœ¼ç¥åƒåˆ€å­ä¸€æ ·é”åˆ©ï¼šâ€œä»–å¾€å“ªä¸ªæ–¹å‘è·‘äº†ï¼ŸæŒ‡è·¯ï¼Œç»™ä½  $50ã€‚æˆ–è€…æˆ‘åˆ‡æ‰ä½ ä¸€æ ¹æ‰‹æŒ‡ï¼Œä½ è‡ªå·±é€‰ã€‚â€",
            speaker: "Krueger",
            type: "alert",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "æŒ‡æŒ‡åé—¨ï¼šâ€œä¸œè¾¹çš„åºŸå¢Ÿã€‚â€",
                    desc: "å‡ºå–é¡¾å®¢ä¿å¹³å®‰ ($50)",
                    effect: s => {
                        s.money += 50;
                        s.chars.krueger.aff += 2;
                        printMsg("â€œå¾ˆå¥½ã€‚è¿™å°±æ˜¯å’Œèªæ˜äººæ‰“äº¤é“çš„ä¹è¶£ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "Krueger æ‰”ä¸‹é’ç¥¨è¿½äº†å‡ºå»ï¼Œäº”åˆ†é’Ÿåï¼Œä½ å¬åˆ°äº†é‚£è¾¹ä¼ æ¥çš„æƒ¨å«å£°ã€‚"
                },
                {
                    text: "â€œæˆ‘æ˜¯ä¸­ç«‹çš„ï¼Œæ— å¯å¥‰å‘Šã€‚â€",
                    desc: "åšå®ˆåŸåˆ™ (å±é™©)",
                    effect: s => {
                        s.chars.krueger.aff -= 10;
                        printMsg("Krueger çš„åˆ€å°–åœ¨ä½ æ‰‹æŒ‡ç¼éš™é—´æ’äº†ä¸¤ä¸‹ï¼Œæœ€ç»ˆæ”¶äº†å›å»ã€‚\nâ€œä½ çš„åŸåˆ™ä¼šå®³æ­»ä½ çš„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–å†·å“¼ä¸€å£°ï¼Œè‡ªå·±å‡ºå»æ‰¾çº¿ç´¢äº†ã€‚"
                }
            ]
        },

        // [Krueger] æ—¥å¸¸ï¼šè¯•æ¯’ (éæ‹çˆ±)
        {
            text: "Krueger ä¹°äº†ä¸€ç“¶æœªå¼€å°çš„ä¼ç‰¹åŠ ï¼Œä½†ä»–å¹¶æ²¡æœ‰é©¬ä¸Šå–ï¼Œè€Œæ˜¯å…ˆå€’äº†ä¸€ç‚¹åœ¨æ¯å­é‡Œï¼Œæ¨åˆ°ä½ é¢å‰ã€‚\nâ€œå–äº†å®ƒã€‚â€ ä»–é¢æ— è¡¨æƒ…åœ°å‘½ä»¤é“ï¼Œâ€œæˆ‘ä¸ä¿¡ä»»è¿™é‡Œçš„ä¾›è´§å•†ï¼Œä¹Ÿä¸ä¿¡ä»»ä½ ã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "ä¸€é¥®è€Œå°½ï¼šâ€œæ²¡æ¯’ï¼Œè¿™å°±æ˜¯å…‘äº†æ°´çš„é…’ç²¾ã€‚â€",
                    desc: "è¯æ˜æ¸…ç™½",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // å–äº†é…’æœ‰ç‚¹æ™•
                        printMsg("Krueger ç›¯ç€ä½ çœ‹äº†å‡ ç§’ï¼Œç¡®ä¿¡ä½ æ²¡æ­»åï¼Œæ‹¿å›äº†é…’ç“¶ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–æ‹¿ç€é…’èµ°äº†ï¼ŒæŠŠä½ å½“æˆäº†å…è´¹çš„è¯•æ¯’å‘˜ã€‚"
                },
                {
                    text: "æ‹’ç»ï¼šâ€œæˆ‘ä¸æ˜¯ä½ çš„å°ç™½é¼ ã€‚â€",
                    desc: "ç¡¬åˆš",
                    result: "â€œé‚£å°±æ˜¯æœ‰æ¯’äº†ï¼Ÿâ€ Krueger ç›´æ¥æŠŠé…’ç“¶ç ¸ç¢åœ¨åœ°ä¸Šï¼Œâ€œåƒåœ¾ã€‚â€"
                }
            ]
        },

// [Krueger] åˆ†æ‰‹åï¼šé˜´å½±ä¸­çš„åˆ€é”‹
        {
            text: "ä¸€åç”·é¡¾å®¢æ­£å’Œä½ è°ˆç¬‘é£ç”Ÿï¼Œçªç„¶ï¼Œä¸€æŠŠé£åˆ€å¸¦ç€åŠ²é£æ“¦ç€ä»–çš„è€³æœµé’‰åœ¨äº†æŸœå°ä¸Šï¼\né¡¾å®¢å“å¾—å±æ»šå°¿æµåœ°è·‘äº†ã€‚\nKruegerçš„å£°éŸ³å‡‰å‡‰çš„ä»èº«åé£˜æ¥ï¼šâ€œè™½ç„¶æˆ‘ä¸å†æ‹¥æœ‰ä½ ï¼Œä½†è¿™ä¸ä»£è¡¨æˆ‘ä¼šå…è®¸è¿™ç§åƒåœ¾é è¿‘ä½ ã€‚â€",
            speaker: "Krueger",
            type: "alert",
            // ğŸ’” åˆ¤å®šï¼šæœªæ‹çˆ± + æ›¾åˆ†æ‰‹/æ‹’ç»è¿‡
          // ğŸŸ¢ ä¿®æ”¹æ¡ä»¶
            condition: s => !s.chars.krueger.dating && s.chars.krueger.is_ex,
            options: [
                {
                    text: "æ€’æ–¥ï¼šâ€œä½ èµ¶èµ°äº†æˆ‘çš„å®¢äººï¼â€",
                    desc: "ä»–ç°åœ¨æ˜¯ä¸ªå±é™©åˆ†å­",
                    effect: s => {
                        s.chars.krueger.aff += 2; // ä»–å–œæ¬¢ä½ ç”Ÿæ°”çš„æ ·å­
                        printMsg("Krueger å¹¶æ²¡æœ‰ç”Ÿæ°”ï¼Œåè€Œéœ²å‡ºäº†ä¸€ä¸ªå¥‡æ€ªçš„ç¬‘å®¹ã€‚\nâ€œç”Ÿæ„ï¼Ÿä½ æ˜¯é‚£ç§ç¼ºé’±çš„äººå—ï¼Ÿâ€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–ç°åœ¨çš„çŠ¶æ€éå¸¸ä¸ç¨³å®šã€‚"
                },
                {
                    text: "å†·æ¼ ï¼šâ€œæ»šå‡ºå»ã€‚â€",
                    desc: "åˆ’æ¸…ç•Œé™",
                    result: "â€œå°é‡çŒ«äº®çˆªå­äº†ï¼Ÿâ€ Krueger èˆ”äº†èˆ”å˜´å”‡ï¼Œâ€œå¯æƒœä½ æ‘†è„±ä¸äº†æˆ‘ã€‚â€"
                }
            ]
        },

// [Krueger] çº¯çˆ±é™å®šï¼šé•œå­é‡Œçš„ Sebastian
        {
            text: "Krueger ç«™åœ¨é•œå­å‰ï¼Œæ­£å‡†å¤‡æˆ´ä¸Šä»–çš„ä¼ªè£…ç½‘é¢ç½©ï¼Œä½ èµ°è¿‡å»ï¼Œä»èº«åæŠ±ä½äº†ä»–çš„è…°ã€‚\nä»–åŠ¨ä½œåœä½äº†ï¼Œçœ‹ç€é•œå­é‡Œé‚£ä¸ªçœ¼ç¥å‡¶ç‹ çš„ç”·äººï¼Œå’Œä¾ååœ¨ä»–èº«åæ¸©æŸ”çš„ä½ ã€‚\nâ€œä»¥å‰æˆ‘è§‰å¾—é•œå­é‡Œçš„äººæ˜¯ä¸ªæ€ªç‰©ã€‚â€ ä»–æ”¾ä¸‹ä¼ªè£…ç½‘ï¼Œçœ¼ç¥æŸ”å’Œä¸‹æ¥ï¼Œâ€œä½†ç°åœ¨... æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªæœ‰äº†å½’å®¿çš„ç”·äººã€‚â€",
            speaker: "Sebastian Krueger",
            type: "dialogue",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && s.chars.krueger.aff > 800,
            options: [
                {
                    text: "â€œä½ ä¹Ÿæ˜¯æˆ‘æœ€å¸…æ°”çš„éª‘å£«ã€‚â€",
                    desc: "èµç¾ä»–",
                    effect: s => {
                        s.chars.krueger.aff += 10;
                        printMsg("Krueger è½¬è¿‡èº«ï¼ŒæŠŠä½ æŠ±èµ·åˆ°æ´—æ‰‹å°ä¸Šï¼Œé¢å¤´æŠµç€é¢å¤´ã€‚\nâ€œéª‘å£«ï¼Ÿä¸... æˆ‘æ˜¯ä½ çš„æ¶é¾™ï¼Œä½†æˆ‘åªå®ˆæŠ¤ä½ è¿™ä¸€é¢—å®çŸ³ã€‚â€", 'event');
                    },
                    result: "ä»–åœ¨é•œå­å‰å»äº†ä½ ï¼Œä»¿ä½›åœ¨å‘å€’å½±å®£èª“ä¸»æƒã€‚"
                },
                {
                    text: "äº²å»ä»–èƒŒåçš„ä¼¤ç–¤",
                    desc: "å®‰æŠšè¿‡å»",
                    result: "ä»–é¢¤æŠ–äº†ä¸€ä¸‹ï¼Œåæ‰‹æ¡ä½ä½ çš„æ‰‹ï¼šâ€œåˆ«æ‹…å¿ƒï¼Œé‚£äº›éƒ½ä¸ç—›äº†ï¼Œç°åœ¨ä½ æ˜¯æˆ‘çš„æ­¢ç—›è¯ã€‚â€"
                }
            ]
        },

        // [Krueger] çº¯çˆ±é™å®šï¼šå±é™©çš„æ¸©æŸ” (æ¢³å¤´)
        {
            text: "ä½ åˆšæ´—å®Œå¤´ï¼Œå¤´å‘æ¹¿æ¼‰æ¼‰çš„ï¼ŒKrueger æ‹¿è¿‡æ¯›å·¾å’Œæ¢³å­ï¼Œè®©ä½ ååœ¨ä»–ä¸¤è…¿ä¹‹é—´ã€‚\nè¿™ä¸ªå¹³æ—¥é‡Œç©å¼„åŒ•é¦–å¦‚åŒè‰ºæœ¯çš„ç”·äººï¼Œæ­¤åˆ»æ­£ç”¨é‚£åŒå¸ƒæ»¡è€èŒ§å’Œä¼¤ç—•çš„æ‰‹ï¼Œæåº¦è€å¿ƒåœ°ä¸ºä½ æ¢³ç†æ‰“ç»“çš„å‘ä¸ã€‚\nä»–çš„åŠ¨ä½œè½»å¾—ä¸å¯æ€è®®ï¼Œç”Ÿæ€•æ‰¯ç—›ä½ ä¸€ç‚¹ç‚¹ã€‚",
            speaker: "Sebastian Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && s.chars.krueger.aff > 900,
            options: [
                {
                    text: "å‘åä»°å¤´çœ‹ä»–",
                    desc: "æ’’å¨‡",
                    effect: s => {
                        s.chars.krueger.aff += 8;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("ä»–ä½å¤´åœ¨ä½ é¢å¤´ä¸Šå°ä¸‹ä¸€å»ã€‚\nâ€œåˆ«ä¹±åŠ¨ï¼ŒSchatzï¼Œè¿™ç§ç²¾ç»†æ´»æ¯”æ‹†å¼¹è¿˜éš¾ã€‚â€ è™½ç„¶åœ¨æŠ±æ€¨ï¼Œä½†ä»–å˜´è§’çš„ç¬‘æ„è—ä¸ä½ã€‚", 'dialogue', 'Krueger');
                    },
                    result: "è¢«ä¸€ä¸ªé¡¶çº§é›‡ä½£å…µå¦‚æ­¤æ¸©æŸ”åœ°å¯¹å¾…ï¼Œè¿™ç§åå·®æ„Ÿè®©äººæ²‰é†‰ã€‚"
                },
                {
                    text: "è¦æ±‚ç¼–ä¸ªè¾«å­",
                    desc: "ä¸ºéš¾ä»–",
                    result: "Krueger çš±ç€çœ‰ç ”ç©¶äº†åŠå¤©ï¼Œæœ€åç¼–å‡ºäº†ä¸€ä¸ªéå¸¸ç»“å®ï¼ˆåƒä¼ç»³ç»“ä¸€æ ·ï¼‰çš„è¾«å­ã€‚â€œ...å®ç”¨æ€§ç¬¬ä¸€ã€‚â€ ä»–å˜´ç¡¬é“ã€‚"
                }
            ]
        },

// [Krueger] è´Ÿå¥½æ„Ÿ 1ï¼šåˆ€å°–åˆ’ç—•
        {
            text: "è¿™æ¬¡Krueger å¹¶æ²¡æœ‰ä¹°ä¸œè¥¿ï¼Œè€Œæ˜¯æŠŠç©ç€æ‰‹é‡Œçš„åŒ•é¦–ï¼Œåˆ€å°–æ·±æ·±åœ°åˆºå…¥ä½ çš„æœ¨è´¨æŸœå°ï¼Œåˆ»ä¸‹äº†ä¸€é“åˆºè€³çš„é•¿ç—•ã€‚\nâ€œä½ çš„åº—è¿˜åœ¨å¼€ï¼ŸçœŸæ˜¯ä¸ªå¥‡è¿¹ã€‚â€ ä»–çš„å£°éŸ³è®©ä½ æœ‰äº›ä¸èˆ’æœï¼Œâ€œä¹Ÿè®¸æˆ‘è¯¥å¸®å®ƒæ—©æ—¥å€’é—­ï¼Œæˆ–è€…...ä½ ä»˜ç‚¹â€˜ä¿æŠ¤è´¹â€™ï¼Ÿâ€",
            speaker: "Krueger",
            type: "alert",
            condition: s => s.chars.krueger.aff < 0,
            options: [
                {
                    text: "è¢«è¿«ç»™é’±æ‰“å‘ä»– (-$200)",
                    desc: "è¢«å‹’ç´¢",
                    condition: s => s.money >= 200,
                    effect: s => {
                        s.chars.krueger.aff -= 10; // ä»–ä¼šè§‰å¾—ä½ è½¯å¼±å¯æ¬º
                        s.money -= 200;
                        printMsg("Krueger ç¬‘äº†ï¼Œåªä¸è¿‡è¿™ä¸ªç¬‘æœ‰ç‚¹è®©äººæ¯›éª¨æ‚šç„¶ï¼Œä»–æ”¶èµ·é’±ï¼Œé¡ºæ‰‹æ‹¿èµ°äº†ä¸€ç›’é›ªèŒ„ã€‚\nâ€œç®—ä½ è¯†ç›¸ã€‚â€", 'loss');
                    },
                    result: "ä½ ç ´è´¢æ¶ˆç¾ï¼Œä½†ä»–è‚¯å®šè¿˜ä¼šå†æ¥ã€‚"
                },
                {
                    text: "å¼ºç¡¬é©±é€",
                    desc: "å¯èƒ½ä¼šå—ä¼¤",
                    effect: s => {
                        s.medkit = Math.max(0, s.medkit - 1);
                        printMsg("ä»–çªç„¶å‡ºæ‰‹åˆ’ä¼¤äº†ä½ çš„æ‰‹è‡‚ï¼Œç„¶åå¤§ç¬‘ç€è·³å‡ºçª—å¤–ã€‚\nâ€œä¸‹æ¬¡å°±æ˜¯è„–å­äº†ã€‚â€", 'alert');
                    },
                    result: "ä½ éœ€è¦æ²»ç–—ä¼¤å£ (-1 Medkit)ã€‚"
                }
            ]
        },

        // [Krueger] è´Ÿå¥½æ„Ÿ 2ï¼šæ— å£°ç›—çªƒ
        {
            text: "ä½ åœ¨æ¸…ç‚¹è´§ç‰©æ—¶å‘ç°å°‘äº†ä¸€ç®±çè´µçš„å¼¹è¯ï¼ŒçŒ›ä¸€æŠ¬å¤´ï¼Œæ­£å¥½çœ‹åˆ° Krueger è¹²åœ¨çª—å¤–çš„é˜´å½±é‡Œï¼Œæ‰‹é‡ŒæŠ›ç€å­å¼¹å¤¹æŒ‘è¡…åœ°çœ‹ç€ä½ ã€‚\nâ€œçœ‹ç®¡å¥½ä½ çš„è´¢ç‰©ï¼Œæˆ–è€…ä½ çš„å‘½ã€‚â€",
            speaker: "Krueger",
            type: "alert",
            condition: s => s.chars.krueger.aff < 0,
            options: [
                {
                    text: "è¿½å‡ºå»è´¨é—®",
                    effect: s => { 
                        s.ammo = Math.max(0, s.ammo - 5); 
                        s.chars.krueger.aff -= 5;
                    }, 
                    result: "ä»–ç•™ä¸‹ä¸€ä¸²å˜²è®½çš„ç¬‘å£°å°±æ¶ˆå¤±äº†ï¼Œä½ ç¡®å®æŸå¤±äº† 5 ä»½å¼¹è¯ã€‚"
                }
            ]
        },

        // [Krueger] éæ‹çˆ±ï¼šè¿™ç±»è´§è‰²
        {
            text: "Krueger æ‹¿èµ·è´§æ¶ä¸Šçš„ä¸€åŒ…å‹ç¼©é¥¼å¹²ï¼Œå«Œå¼ƒåœ°æäº†æã€‚\nâ€œè¿™å°±æ˜¯ä½ å–çš„ä¸œè¥¿ï¼Ÿè¿™ç§åƒåœ¾åœ¨å¥¥åœ°åˆ©è¿ç‹—éƒ½ä¸åƒã€‚â€ ä»–çš„è¯­æ°”å……æ»¡äº†æŒ‘è¡…ï¼Œâ€œä½ æ˜¯æ€ä¹ˆæ´»åˆ°ç°åœ¨çš„ï¼Ÿâ€",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "â€œå› ä¸ºæˆ‘å–ç»™äº†è¯†è´§çš„äººï¼Œè€Œä¸æ˜¯åªä¼šæŠ±æ€¨çš„äººã€‚â€",
                    desc: "å›æ€¼ä»–",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger æ„£äº†ä¸€ä¸‹ï¼Œéšå³å¤§ç¬‘èµ·æ¥ã€‚\nâ€œå“ˆå“ˆå“ˆå“ˆï¼å˜´å·´å¾ˆæ¯’å˜›ï¼Œå¾ˆå¥½ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–åè€Œä¹°ä¸‹äº†é‚£åŒ…é¥¼å¹²ï¼Œä¼¼ä¹åªæ˜¯ä¸ºäº†çœ‹ä½ çš„ååº”ã€‚"
                },
                {
                    text: "â€œçˆ±ä¹°ä¸ä¹°ã€‚â€",
                    desc: "å†·æ¼ ",
                    result: "â€œæ— è¶£ã€‚â€ Krueger æŠŠé¥¼å¹²æ‰”å›è´§æ¶ï¼Œè½¬èº«èµ°äº†ã€‚"
                }
            ]
        },
// [Krueger] ç»ˆæå‰§æƒ… 2ï¼šå±é™©çš„èˆ”èˆ (å”¯ä¸€)
        {
            text: "ä½ åˆšè¿åŠ¨å®Œï¼Œèº«ä¸Šå¸¦ç€ä¸€å±‚è–„æ±—ã€‚Krueger ä»èƒŒåé è¿‘ï¼Œä½†ä»–æ²¡æœ‰æ‹¥æŠ±ï¼Œè€Œæ˜¯ä¿¯ä¸‹èº«ï¼ŒèˆŒå°–æ²¿ç€ä½ åé¢ˆçš„è„Šæ¤çº¿ä¸€è·¯å‘ä¸Šèˆ”èˆã€‚\nè¿™ç§ç²—ç³™åˆæ¹¿æ¶¦çš„è§¦æ„Ÿè®©ä½ å¤´çš®å‘éº»ã€‚\nâ€œå’¸çš„...â€ ä»–å«ç³Šä¸æ¸…åœ°ä½è¯­ï¼Œç‰™é½¿è½»è½»å•ƒå’¬ç€ä½ é¢ˆä¾§çš„è½¯è‚‰ï¼Œâ€œè¿™æ˜¯ä½ æœ€çœŸå®çš„å‘³é“... æ¯”ä»»ä½•é¦™æ°´éƒ½è®©æˆ‘å‘ç–¯ã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && s.chars.krueger.aff > 500 && !s.flags.krueger_high_event_2,
            options: [
                {
                    text: "ä¾§è¿‡å¤´æ–¹ä¾¿ä»–åŠ¨ä½œ",
                    desc: "å‘æ•é£Ÿè€…éœ²å‡ºè„–é¢ˆ",
                    effect: s => {
                        s.flags.krueger_high_event_2 = true;
                        s.chars.krueger.aff += 20;
                        s.ap = 0;
                        printMsg("Krueger çš„çœ¼ç¥ç¬é—´æš—æ²‰ï¼Œâ€œé‚£æˆ‘å°±ä¸å®¢æ°”äº†ã€‚â€", 'event');
                    },
                    result: "ä¸€å¤œæ— çœ ã€‚"
                }
            ]
        },

// [Krueger] çº¯çˆ±æ—¥å¸¸ï¼šå¤„å†³æŠ€ (FPS)
        {
            text: "Krueger ç©æ¸¸æˆçš„æ–¹å¼æå…¶æ¶åŠ£ï¼Œå› ä¸ºä»–æ€»æ˜¯ä¸“æ³¨äºç»•åç”¨è¿‘æˆ˜æ­¦å™¨å¤„å†³å¯¹æ‰‹ï¼Œè€Œä¸”æ¯æ€ä¸€ä¸ªå°±åœ¨è¯­éŸ³é¢‘é“ç”¨å¾·è¯­å˜²è®½ä¸€å¥ã€‚\nâ€œå¤ªæ…¢äº†ã€‚â€ã€ â€œä½ æ˜¯çå­å—ï¼Ÿâ€ã€â€œèœç‹—â€\nçœ‹ç€å±å¹•ä¸Šè¢«ä»–æ€ç©¿çš„æˆ˜ç»©è¡¨ï¼Œä»–è½¬å¤´çœ‹å‘ä½ ï¼Œå˜´è§’æŒ‚ç€æ…µæ‡’çš„ç¬‘ï¼šâ€œè¿™å¤ªç®€å•äº†ï¼Œæ²¡æ„æ€ï¼Œä¸å¦‚æˆ‘ä»¬æ¥ç©ç‚¹æ›´åˆºæ¿€çš„ï¼Ÿâ€",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s),
            options: [
                {
                    text: "æŒ‘æˆ˜ä»–ï¼šâ€œé‚£æ˜¯ä½ æ²¡é‡åˆ°æˆ‘ã€‚â€",
                    desc: "å’Œä»– 1v1",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                        printMsg("ä»–çš„çœ¼ç¥äº®äº†ã€‚\nåŠå°æ—¶åï¼Œä½ åœ¨æ¸¸æˆä¸­è¢«ä»–æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ï¼Œä½†ä»–èµ¢äº†ä¹‹åï¼Œå´å¥–åŠ±äº†ä½ ä¸€ä¸ªå»ã€‚", 'event');
                    },
                    result: "â€œè¾“ç»™æˆ‘ä¸ä¸¢äººï¼ŒSchatzã€‚æˆ‘æ˜¯ä½ çš„ã€‚â€"
                },
                {
                    text: "æä»–çš„è„¸ï¼šâ€œç¦æ­¢è™èœï¼Œå¥½å¥½æ‰“ã€‚â€",
                    desc: "ç®¡æ•™ç–¯ç‹—",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                    },
                    result: "Krueger å•§äº†ä¸€å£°ï¼Œä½†è¿˜æ˜¯ä¹–ä¹–æ‹¿èµ·äº†çªå‡»æ­¥æªï¼šâ€œéµå‘½ï¼Œ{PLAYER} ã€‚â€"
                }
            ]
        },


        // ğŸŸ¢ [Krueger] æ‹çˆ±æ—¥å¸¸ï¼šæ²‰é‡çš„æ·é” (è†æ•)
        {
            text: "ä½ åˆšåœ¨æ²™å‘ä¸Šåä¸‹ä¼‘æ¯ï¼ŒKrueger å°±èµ°äº†è¿‡æ¥,ä»–äºŒè¯ä¸è¯´ï¼Œç›´æ¥æ¨ªèººä¸‹æ¥æŠŠå¤´æ•åœ¨äº†ä½ çš„å¤§è…¿ä¸Šã€‚\nè¿™ä¸ªå¥¥åœ°åˆ©å£®æ±‰åŠ ä¸Šé‚£ä¸€èº«é‡å‹è£…å¤‡ï¼Œå‹å¾—ä½ æ ¹æœ¬åŠ¨å¼¹ä¸å¾—ã€‚\nä»–çœ¼ç¥æ…µæ‡’åœ°ç›¯ç€ä½ ï¼šâ€œæˆ‘ç´¯äº†ï¼Œå€Ÿç”¨ä¸€ä¸‹æ•å¤´ï¼Œä¸è®¸è·‘ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => s.chars.krueger.dating,
            options: [
                {
                    text: "ç©å¼„ä»–çš„ä¼ªè£…ç½‘",
                    desc: "äº«å—è¿™æ®µæ—¶å…‰",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger èˆ’æœåœ°çœ¯èµ·äº†çœ¼ç›ï¼Œåƒä¸€åªè¢«é¡ºæ¯›çš„å¤§çŒ«ã€‚\nâ€œæ‰‹è‰ºä¸é”™... å†å¾€ä¸‹ä¸€ç‚¹ã€‚â€ ä»–æŠ“ç€ä½ çš„æ‰‹æŒ‰åœ¨ä»–çš„åé¢ˆä¸Šã€‚", 'dialogue', 'Krueger');
                    },
                    result: "ä»–åœ¨ä½ è…¿ä¸Šèººäº†æ•´æ•´ä¸€ä¸ªå°æ—¶ï¼ŒæœŸé—´å“ªæ€•ä½ åªæ˜¯ç¨å¾®åŠ¨ä¸€ä¸‹ï¼Œä»–éƒ½ä¼šå‘å‡ºä¸æ»¡çš„å’•å“å£°ã€‚"
                },
                {
                    text: "â€œä½ å¤ªé‡äº†ï¼Œè…¿éº»äº†ï¼â€",
                    desc: "æŠ—è®®",
                    effect: s => {
                        s.chars.krueger.aff += 2; // ä»–è§‰å¾—ä½ æŒ£æ‰å¾ˆæœ‰è¶£
                    },
                    result: "â€œé‚£ä¹Ÿæ˜¯ä½ è‡ªæ‰¾çš„ã€‚â€ Krueger ä¸ä½†æ²¡èµ·æ¥ï¼Œåè€Œæ¶æ„åœ°è°ƒæ•´äº†ä¸€ä¸‹å§¿åŠ¿ï¼ŒæŠŠä½ å‹å¾—æ›´å®äº†ã€‚"
                }
            ]
        },

        // [Krueger] çº¯çˆ±æ—¥å¸¸ï¼šè¡€æµ†ç¾å­¦ (ææ€–ç‰‡)
        {
            text: "å±å¹•ä¸Šï¼Œå—å®³è€…æ­£è¢«ç”µé”¯åˆ†å°¸ï¼Œè¡€æµ†å››æº…è®©ä½ ç¨å¾®æœ‰ç‚¹ä¸é€‚ï¼Œä½† Krueger å´çœ‹å¾—æ´¥æ´¥æœ‰å‘³ï¼Œç”šè‡³è¿˜åœ¨åƒæ·‹æ»¡ç•ªèŒ„é…±çš„è–¯æ¡ã€‚\nâ€œé“å…·åšå¾—å¤ªå‡äº†ã€‚â€ ä»–æŒ‡ç€å±å¹•ç‚¹è¯„é“ï¼Œâ€œåŠ¨è„‰è¡€å–·å°„çš„é«˜åº¦ä¸å¯¹ï¼Œè€Œä¸”è¿™ä¸ªè§’åº¦åˆ‡ä¸‹å»...â€\nä»–çªç„¶åœä½ï¼Œå‡‘è¿‘ä½ çš„è€³è¾¹ä½è¯­ï¼šâ€œä½ æƒ³çŸ¥é“çœŸæ­£çš„åˆ‡å‰²æ˜¯ä»€ä¹ˆå£°éŸ³å—ï¼Ÿâ€",
            speaker: "Krueger",
            type: "alert",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s),
            options: [
                {
                    text: "æŠŠçˆ†ç±³èŠ±å¡è¿›ä»–å˜´é‡Œï¼šâ€œä¸æƒ³ï¼â€",
                    desc: "è®©ä»–é—­å˜´",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger å’¬ä½ä½ çš„æ‰‹æŒ‡ï¼Œçœ¼ç¥æ™¦æš—ä¸æ˜ã€‚\nâ€œå¥½å§... æ—¢ç„¶ä½ ä¸å–œæ¬¢é‚£ç§çº¢è‰²ï¼Œé‚£æˆ‘ä»¬æ¥åˆ¶é€ ç‚¹åˆ«çš„é¢œè‰²ï¼Ÿâ€", 'dialogue', 'Krueger');
                    },
                    result: "ææ€–ç‰‡ä¹‹å¤œæœ€ç»ˆæ¼”å˜æˆäº†å¦ä¸€ç§å°‘å„¿ä¸å®œçš„å‰§æƒ…ã€‚"
                },
                {
                    text: "æ·¡å®šå›åº”ï¼šâ€œé‚£ä½ æ¼”ç¤ºç»™æˆ‘çœ‹ï¼Ÿâ€",
                    desc: "åå‘è°ƒæˆ",
                    result: "Krueger æ„£äº†ä¸€ä¸‹ï¼Œéšå³å¤§ç¬‘èµ·æ¥ï¼šâ€œæˆ‘å°±çŸ¥é“ä½ å’Œæˆ‘æ˜¯ä¸€ç±»äººã€‚â€"
                }
            ]
        },


// [Krueger] ç»ˆæå‰§æƒ… 3ï¼šçœŸåå¡å·´æ–¯è’‚å®‰ (å”¯ä¸€)
        // è®¾å®šï¼šJosef ä¹Ÿè®¸æ˜¯çˆ¶å/ä¸­é—´åï¼ŒSebastian æ‰æ˜¯ä»–ä½œä¸ºæ™®é€šäººçš„è‡ªæˆ‘
        {
            text: "Krueger èººåœ¨ä½ çš„è…¿ä¸Šè®©ä½ å¸®ä»–ä¿®å‰ªå¤´å‘ï¼Œç©ºæ°”å®‰é™åˆæ¸©é¦¨ã€‚\nçªç„¶ä»–æŠ“ä½ä½ çš„æ‰‹è…•ï¼Œçœ¼ç¥å˜å¾—å¼‚å¸¸æ¸…æ¾ˆå’Œè®¤çœŸã€‚\nâ€œæˆ‘...æˆ‘æœ‰ä¸€ä»¶äº‹æƒ³å‘Šè¯‰ä½ ï¼ŒJosef Doss...å…¶å®æ˜¯æˆ‘çš„å‡åã€‚â€\nä»–æ‹‰ç€ä½ çš„æ‰‹æŒ‰åœ¨è‡ªå·±çš„é¢ˆä¾§åŠ¨è„‰ä¸Šï¼šâ€œæŠŠé‚£ä¸ªåå­—å¿˜äº†å§ã€‚â€\nâ€œSebastian... è¿™æ‰æ˜¯æˆ‘ã€‚å½“ä½ å«è¿™ä¸ªåå­—çš„æ—¶å€™ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªçˆ±ä½ çš„å¥¥åœ°åˆ©ç”·äººï¼Œä¸æ˜¯ä»€ä¹ˆä½£å…µã€‚â€",
            speaker: "Sebastian Krueger",
            type: "dialogue",
            // è§¦å‘æ¡ä»¶ï¼šæ‹çˆ± + æé«˜å¥½æ„Ÿ + æœªè§¦å‘è¿‡
// ğŸŸ¢ ä¿®å¤ï¼šåŠ å…¥çº¯çˆ±é” (éå¥³ç‹ + ä¸“ä¸€)
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && s.chars.krueger.aff > 1000 && !s.flags.krueger_high_event_3,
            options: [
                {
                    text: "è½»å£°å‘¼å”¤ï¼šâ€œSebastianã€‚â€",
                    desc: "å‘¼å”¤ä»–çš„çœŸå",
                    effect: s => {
                        s.flags.krueger_high_event_3 = true; // ğŸ”’ é”æ­»
                        s.chars.krueger.aff += 30;
                        s.ap = 0; // æ—¢ç„¶éƒ½è¿™ç§æ°›å›´äº†ï¼Œè‚¯å®šè¦åšç‚¹ä»€ä¹ˆ
                        printMsg("å¬åˆ°è¿™ä¸ªåå­—çš„ç¬é—´ï¼Œè¿™ä¸ªæ€äººä¸çœ¨çœ¼çš„ç”·äººé¢¤æŠ–äº†ä¸€ç¬ã€‚\nâ€œæˆ‘åœ¨ï¼ŒSchatz (å®è´)... æˆ‘ä¸€ç›´éƒ½åœ¨ã€‚â€\nä»–ç¿»èº«å°†ä½ å‹åœ¨èº«ä¸‹ï¼Œå»å¾—æ¸©æŸ”è€Œè™”è¯šï¼Œä»¿ä½›åœ¨å¯¹å¾…ä¸€ä»¶æ˜“ç¢çš„ç¨€ä¸–çå®ã€‚", 'event');
                    },
                    result: "ä»ä»Šä»¥åï¼ŒKrueger æ˜¯ç»™æ•Œäººçœ‹çš„ï¼ŒSebastian æ˜¯åªå±äºä½ çš„ã€‚"
                }
            ]
        },

// [Krueger] çº¯çˆ±æ—¥å¸¸ï¼šGolem çš„æ‹œè®¿
        {
            text: "Golem å±…ç„¶æ‰¾åˆ°äº†è¿™é‡Œï¼Œçœ‹ç€å›´ç€å›´è£™æ­£åœ¨å¸®ä½ æ¬è´§çš„ Kruegerï¼ŒGolem ç¬‘å¾—ç›´ä¸èµ·è…°ã€‚\nâ€œä¸Šå¸å•Šï¼Œç–¯ç‹—å±…ç„¶è¢«é©¯åŒ–æˆäº†å®¶çŠ¬ï¼Ÿâ€ Golem æ‹ç€æ¡Œå­å¤§ç¬‘ã€‚\nKrueger æ²¡æœ‰ç”Ÿæ°”ï¼Œåªæ˜¯é»˜é»˜ç¿»äº†ä¸ªç™½çœ¼ï¼Œçœ¼ç¥å´ä¸€ç›´ç²˜åœ¨ä½ èº«ä¸Šã€‚",
            speaker: "Golem",
            type: "dialogue",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s),
            options: [
                {
                    text: "ç»´æŠ¤ Kruegerï¼šâ€œä»–æ˜¯æˆ‘æœ€å¯é çš„ç”·äººã€‚â€",
                    desc: "ç»™è¶³é¢å­",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger å˜´è§’å‹¾èµ·ä¸€æŠ¹å¾—æ„çš„ç¬‘ï¼šâ€œå¬åˆ°äº†å—ï¼Ÿæ»šå§ï¼Œè¿™é‡Œä¸ç¼ºä½ è¿™å£é¥­ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "Golem è€¸è€¸è‚©èµ°äº†ï¼ŒKrueger å½“æ™šæ ¼å¤–çƒ­æƒ…ï¼ŒæŠŠä½ æŠ˜è…¾å¾—å¤Ÿå‘›ã€‚"
                },
                {
                    text: "ç¬‘ç€é™„å’Œï¼šâ€œæ˜¯å•Šï¼Œä»–å¾ˆå¬è¯ã€‚â€",
                    desc: "é¡ºç€ç©ç¬‘è¯´",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger çœ¯èµ·çœ¼ç›ï¼Œä»èƒŒåå’¬ä½äº†ä½ çš„è€³æœµï¼šâ€œå¬è¯ï¼Ÿä»Šæ™šæˆ‘ä¼šè®©ä½ æ”¶å›è¿™å¥è¯çš„ï¼ŒSchatzã€‚â€", 'event');
                    },
                    result: "Golem è¯†è¶£åœ°æºœäº†ï¼Œå› ä¸ºè¿™é‡Œçš„ç©ºæ°”å·²ç»å……æ»¡äº†æ‹çˆ±çš„é…¸è‡­å‘³ã€‚"
                }
            ]
        },

        // [Krueger] ğŸ„ åœ£è¯èŠ‚ï¼šåæ™®æ–¯çš„ç¤¼ç‰©
        {
            text: "å¥¥åœ°åˆ©çš„åœ£è¯èŠ‚ä¸ä»…æœ‰åœ£å°¼å¤æ‹‰æ–¯ï¼Œè¿˜æœ‰åæ™®æ–¯ï¼ˆKrampusï¼‰ã€‚\nKrueger ä¾æ—§æ˜¯æˆ´ç€ç»¿è‰²çš„ä¼ªè£…ç½‘ä»é£é›ªä¸­å½’æ¥ï¼Œæ‰‹é‡Œæç€ä¸€ä¸ªæ²‰é‡çš„è¢‹å­ã€‚\nâ€œä½ æ˜¯ä¹–å­©å­ï¼Œè¿˜æ˜¯åå­©å­ï¼Ÿâ€ ä»–æŠŠä½ é€¼åˆ°å¢™è§’ï¼Œå£°éŸ³æ²™å“‘ä½æ²‰ï¼Œâ€œåå­©å­... å¯æ˜¯è¦è¢«æŠ“èµ°æƒ©ç½šçš„ã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && s.day % 30 === 0,
            options: [
                {
                    text: "æŒ‘è¡…ï¼šâ€œæˆ‘æ˜¯åå­©å­ï¼Œä½ æƒ³æ€æ ·ï¼Ÿâ€",
                    desc: "æ¥å—â€œæƒ©ç½šâ€",
                    effect: s => {
                        s.chars.krueger.aff += 10;
                        s.ap = 0; // æ¶ˆè€—ç²¾åŠ›
                        printMsg("â€œæ­£å¦‚æˆ‘æ‰€æ„¿ã€‚â€ Krueger æ‰”æ‰è¢‹å­ï¼ˆé‡Œé¢å…¶å®å…¨æ˜¯æ˜‚è´µçš„ç‰©èµ„ï¼‰ï¼Œå°†ä½ æ‰›å‘å§å®¤ã€‚\nâ€œä»Šæ™šå¾ˆé•¿ï¼Œä½ å¯ä»¥æ…¢æ…¢å¿æ‚”ã€‚â€", 'event');
                    },
                    result: "è¿™æ˜¯ä¸€ä¸ªå……æ»¡é‡æ€§å’Œæ¿€æƒ…çš„åœ£è¯å¤œã€‚"
                },
                {
                    text: "ä¼¸æ‰‹è¦ç¤¼ç‰©ï¼šâ€œæˆ‘æ˜¯ä¹–å­©å­ï¼â€",
                    desc: "æ’’å¨‡",
                    result: "Krueger å•§äº†ä¸€å£°ï¼Œè™½ç„¶æ²¡èƒ½å®æ–½æƒ©ç½šï¼Œä½†ä»–è¿˜æ˜¯æŠŠè¢‹å­é‡ŒæŠ¢æ¥çš„ç å®éƒ½å€’åœ¨äº†ä½ é¢å‰ã€‚â€œæ‹¿å»ç©å§ã€‚â€"
                }
            ]
        },

// [Krueger] æ—¥å¸¸ï¼šæš—ä¸­è§‚å¯Ÿ (éæ‹çˆ±)
        {
            text: "ä½ æ€»è§‰å¾—æœ‰äººåœ¨ç›¯ç€ä½ ï¼ŒçŒ›ä¸€å›å¤´ï¼Œå‘ç° Krueger æ­£è¹²åœ¨çª—å¤–çš„åºŸå¢Ÿé¡¶ä¸Šï¼Œåƒåªç§ƒé¹«ä¸€æ ·å®¡è§†ç€ä½ çš„åº—é“ºé˜²å«ï¼Œçœ¼ç¥è®©äººä¸å¯’è€Œæ —ã€‚",
            speaker: "System",
            type: "event",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "å‘ä»–æŒ¥æ‰‹ç¤ºæ„",
                    desc: "è¡¨ç¤ºå‹å¥½",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                    },
                    result: "Krueger æ²¡æœ‰ä»»ä½•ååº”ï¼Œåªæ˜¯æ‹‰ä½äº†ä¼ªè£…ç½‘ï¼Œèº«å½±èå…¥äº†é»‘æš—ã€‚"
                },
                {
                    text: "å¯¹ä»–æ¯”ä¸­æŒ‡",
                    desc: "â€œçœ‹ä»€ä¹ˆçœ‹ï¼â€",
                    effect: s => {
                        s.chars.krueger.aff += 3; // ä»–åè€Œè§‰å¾—ä½ æœ‰æ€§æ ¼
                        printMsg("è¿œå¤„ä¼ æ¥ä¸€å£°éš¾ä»¥å¯Ÿè§‰çš„è½»ç¬‘ã€‚", 'event');
                    },
                    result: "ä»–ä¼¼ä¹å¾ˆæ¬£èµä½ çš„èƒ†é‡ã€‚"
                }
            ]
        }, // <--- é€—å·

// [Krueger] çº¯çˆ±é™å®šï¼šé¤æ¡Œä¸Šçš„ä½è¯­ (æŒ‘é€—)
        {
            text: "æ™šé¤æ—¶ï¼ŒKrueger å¹¶æ²¡æœ‰ä¸“å¿ƒåƒé¥­ï¼Œä»–çš„è§†çº¿ä¸€ç›´ç²˜åœ¨ä½ éœ²å‡ºçš„é”éª¨å’Œå˜´å”‡ä¸Šã€‚\nä»–åˆ‡å¼€ä¸€å—ç‰›æ’ï¼Œç”¨é¤åˆ€æ²¾äº†ä¸€ç‚¹é…±æ±æŠ¹åœ¨ä½ çš„å”‡ç ä¸Šï¼Œçœ¼ç¥å¹½æš—ã€‚\nâ€œ**Lass mich kosten, mein Schatz...**â€\nä»–å‡‘è¿‡æ¥ï¼ŒèˆŒå°–å·èµ°äº†é‚£ç‚¹é…±æ±ï¼Œé¡ºä¾¿åŠ æ·±äº†è¿™ä¸ªå»ï¼Œçœ¼ç¥é‡Œæ»¡æ˜¯ä¾µç•¥æ€§ã€‚\nâ€œ**SÃ¼ÃŸ.**â€",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && s.chars.krueger.aff > 600,
            options: [
                {
                    text: "èˆ”èˆ”å˜´å”‡ï¼ŒæŒ‘è¡…åœ°çœ‹ç€ä»–",
                    desc: "å›åº”ä»–çš„é‚€è¯·",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        s.ap = 0; // æ¶ˆè€—ç²¾åŠ›
                        printMsg("Krueger æ‰”ä¸‹é¤å…·ï¼Œç›´æ¥æŠŠä½ æŠ±åˆ°äº†é¤æ¡Œä¸Šã€‚\nâ€œè¿™æ˜¯ä½ è‡ªæ‰¾çš„... â€", 'event');
                    },
                    result: "æ™šé¤å˜æˆäº†å®µå¤œï¼Œè€Œä½ æ˜¯ä¸»èœã€‚"
                },
                {
                    text: "å–‚ä»–ä¸€å£ç‰›æ’ï¼šâ€œå¥½å¥½åƒé¥­ã€‚â€",
                    desc: "è¯•å›¾æŒæ§èŠ‚å¥",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                        printMsg("Krueger å¼ç€å‰å­ç›¯ç€ä½ ï¼Œä»¿ä½›åœ¨åƒçš„ä¸æ˜¯çœ¼ä¸‹çš„é£Ÿç‰©ã€‚\nâ€œéµå‘½... ä½†åƒå®Œé¥­åï¼Œæˆ‘å°±è¦åƒç”œç‚¹äº†ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä½ å¹¶æ²¡æœ‰é€ƒè„±ï¼Œåªæ˜¯ç¨å¾®å»¶åäº†è¢«åƒçš„æ—¶é—´ã€‚"
                }
            ]
        },

        // [Krueger] å¼‚åœ°æ‹ï¼šæˆ˜åˆ©å“
        {
            text: "ä¸€åªå—è¿‡è®­ç»ƒçš„çŒé¹°è½åœ¨äº†ä½ çš„çª—å°ä¸Šï¼Œè„šä¸Šç»‘ç€ä¸€ä¸ªå°ä¿¡ç­’ã€‚\né‡Œé¢æ²¡æœ‰ä¿¡ï¼Œåªæœ‰ä¸€æšæ²¾ç€è¡€è¿¹çš„æ•Œå¯¹é«˜å®˜ç™½é‡‘å¾½ç« ã€‚\nå…¸å‹çš„ Krueger çš„é£æ ¼ï¼Œä»–åœ¨å‘ä½ ç‚«è€€ä»–çš„ç‹©çŒæˆæœï¼Œä¹Ÿæ˜¯åœ¨å‘ä½ æŠ¥å¹³å®‰ã€‚",
            speaker: "System",
            type: "event",
            condition: s => s.chars.krueger.dating && !s.flags.harem_queen && checkExclusivity('krueger', s) && chance(20),
            options: [
                {
                    text: "æ”¶ä¸‹å¾½ç« ï¼Œç»™çŒé¹°å–‚ç‚¹è‚‰",
                    desc: "æ¥å—ä»–çš„è´¡å“ (è·å¾— $300)",
                    effect: s => {
                        s.chars.krueger.aff +=3;
                        s.money += 300; // å¾½ç« å€¼é’±
                        printMsg("ä½ æ”¶ä¸‹äº†è¿™æšå¸¦è¡€çš„å‹‹ç« ï¼ŒKruegerè¿™ä¸ªäººæœ‰æ—¶å€™è¿˜æœ‰ç‚¹è‡­å±å‘¢ã€‚", 'gain');
                    },
                    result: "çŒé¹°è¹­äº†è¹­ä½ çš„æ‰‹æŒ‡ç„¶åå±•ç¿…é£èµ°äº†ï¼Œå¸¦å»äº†ä½ çš„æ€å¿µã€‚"
                },
                {
                    text: "å›ä¿¡ä¸€å¼ çº¸æ¡ï¼šâ€œæ´»ç€å›æ¥ã€‚â€",
                    desc: "è®©ä»–çŸ¥é“ä½ åœ¨ä¹çš„ä¸æ˜¯æˆ˜åˆ©å“",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("çŒé¹°å¸¦ç€ä½ çš„å­—æ¡é£èµ°äº†ï¼ŒKrueger æ”¶åˆ°åï¼Œå¯èƒ½ä¼šæŠŠå®ƒè´´åœ¨å¿ƒå£çš„ä½ç½®ã€‚", 'event');
                    },
                    result: "å¯¹äºä¸€ä¸ªé›‡ä½£å…µæ¥è¯´ï¼Œæœ‰äººåœ¨ç­‰ä»–å›å®¶æ˜¯æœ€å¤§çš„å¥¢ä¾ˆã€‚"
                }
            ]
        },

        // [Krueger] æ—¥å¸¸ï¼šç£¨åˆ€å£° (éæ‹çˆ±)
        {
            text: "Krueger ååœ¨åº—é‡Œå”¯ä¸€çš„æ¤…å­ä¸Šï¼Œæ—è‹¥æ— äººåœ°ç”¨ç£¨åˆ€çŸ³æ‰“ç£¨ç€ä»–çš„åº“å…‹é‡Œå¼¯åˆ€ã€‚\n*æ»‹â€”â€”æ»‹â€”â€”* \nåˆºè€³çš„é‡‘å±æ‘©æ“¦å£°è®©å…¶ä»–é¡¾å®¢éƒ½ä¸æ•¢é è¿‘ã€‚",
            speaker: "Krueger",
            type: "event",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "æé†’ä»–ï¼šâ€œåˆ«å“ç€å®¢äººâ€",
                    desc: "ç»´æŒç§©åº",
                    effect: s => {
                        s.chars.krueger.aff += 0;
                        printMsg("ä»–æŠ¬èµ·çœ¼çš®çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ”¶èµ·äº†ç£¨åˆ€çŸ³ã€‚â€œèƒ†å°é¬¼ä¸é…åœ¨åºŸåœŸç”Ÿå­˜ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "è™½ç„¶å˜´æ¯’ï¼Œä½†ä»–è¿˜æ˜¯åœæ­¢äº†åˆ¶é€ å™ªéŸ³ã€‚"
                },
                {
                    text: "èµèµä»–çš„åˆ€",
                    desc: "æ‡‚è¡Œçš„å¯¹è¯",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                        printMsg("â€œå¥¥åœ°åˆ©é’¢æï¼Œå®ƒé¥®è¿‡å¾ˆå¤šè¡€ã€‚â€ ä»–æŠŠåˆ€åˆƒå¯¹ç€å…‰çœ‹äº†çœ‹ã€‚", 'dialogue', 'Krueger');
                    },
                    result: "ä»–å¯¹ä½ çš„çœ¼å…‰è¡¨ç¤ºæ»¡æ„ã€‚"
                }
            ]
        }, // <--- é€—å·

// [Krueger] éæ‹çˆ±æ—¥å¸¸ï¼šæˆ˜åˆ©å“æŠ˜ç°
        {
            text: "Krueger èµ°è¿›åº—é‡Œï¼Œä»å…œé‡Œæå‡ºä¸€å—æ˜‚è´µçš„é‡‘è¡¨ï¼Œä½†è¿™å—è¡¨ä¸Šè¿˜æ²¾ç€æœªå¹²çš„è¡€è¿¹ã€‚\nâ€œåˆšæ¡çš„ã€‚â€ ä»–æŠŠè¡¨æ‰”åœ¨æŸœå°ä¸Šï¼Œè¯­æ°”è½»ææ·¡å†™ï¼Œâ€œæ¢ä¸¤ä¸ªæ€¥æ•‘åŒ…ã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "åªçœ‹è´§ï¼Œä¸çœ‹äºº (-2 Medkit)",
                    desc: "æ”¶ä¸‹é‡‘è¡¨ï¼Œä¸è®ºå‡ºå¤„",
                    condition: s => s.medkit >= 2,
                    effect: s => {
                        s.medkit -= 2;
                        s.money += 400; // é‡‘è¡¨è½¬æ‰‹å¾ˆå€¼é’±
                        s.chars.krueger.aff += 4; // ä»–å–œæ¬¢æ‡‚è§„çŸ©çš„äºº
                        printMsg("Krueger å˜´è§’å‹¾èµ·ä¸€ä¸å†·ç¬‘ï¼šâ€œèªæ˜äººï¼Œè¿™å°±å¯¹äº†ï¼Œåˆ«å¤šç®¡é—²äº‹ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä½ ç”¨æŠ¹å¸ƒæ“¦æ‰äº†è¡¨ä¸Šçš„è¡€è¿¹ï¼Œåªè¦èƒ½èµšé’±ï¼Œä»€ä¹ˆéƒ½å¥½è¯´ã€‚"
                },
                {
                    text: "æ‹’ç»ï¼šâ€œæˆ‘å«Œè„ã€‚â€",
                    desc: "å³ä½¿æ˜¯é»‘å¸‚ä¹Ÿæœ‰åº•çº¿",
                    effect: s => {
                        s.chars.krueger.aff -= 10;
                        printMsg("Krueger çœ¯èµ·çœ¼ç›æ‰“é‡äº†ä½ ä¸€ç•ªï¼Œæ”¶å›äº†é‡‘è¡¨ã€‚\nâ€œåœ¨è¿™ä¸ªåœ°æ–¹è®²ç©¶å¹²å‡€ï¼Ÿä½ ä¼šé¥¿æ­»çš„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–è½¬èº«ç¦»å¼€äº†ï¼Œæ²¡æœ‰å†å¤šè¯´ä¸€å¥è¯ã€‚"
                }
            ]
        },

        // [Krueger] æ—¥å¸¸ï¼šé¡ºæ‰‹ç‰µç¾Šï¼Ÿ (éæ‹çˆ±)
        {
            text: "Krueger ç»“è´¦æ—¶ï¼Œä½ æ³¨æ„åˆ°ä»–çš„è¢–å£é‡Œä¼¼ä¹å¤šäº†ä¸€å·ç»·å¸¦ï¼Œä»–é¢æ— è¡¨æƒ…åœ°çœ‹ç€ä½ ï¼Œå®Œå…¨æ²¡æœ‰è¢«æŠ“åŒ…çš„æ…Œå¼ ï¼Œä»¿ä½›åœ¨æŒ‘æˆ˜ä½ æ˜¯å¦æ•¢è¯´å‡ºæ¥ã€‚",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => !s.chars.krueger.dating,
            options: [
                {
                    text: "æŒ‡å‡ºæ¥ï¼šâ€œé‚£ä¸ªä¹Ÿè¦ä»˜é’±â€",
                    desc: "å…¬äº‹å…¬åŠ",
                    effect: s => {
                        s.money += 10;
                        s.chars.krueger.aff += 2; // ä»–å°Šé‡ç²¾æ˜çš„å•†äºº
                        printMsg("â€œ...å•§ï¼Œè§†åŠ›ä¸é”™ã€‚â€ ä»–æ‰”ä¸‹ä¸€å¼ çš±å·´å·´çš„é’ç¥¨ã€‚", 'dialogue', 'Krueger');
                    },
                    result: "ä»–ä»˜äº†é’±ï¼Œå¹¶æ²¡æœ‰ç”Ÿæ°”ï¼Œåè€Œå¤šçœ‹äº†ä½ ä¸¤çœ¼ã€‚"
                },
                {
                    text: "å½“ä½œæ²¡çœ‹è§",
                    desc: "ä¸æƒ³æƒ¹éº»çƒ¦ (-1 Medkit)",
                    effect: s => {
                        s.medkit = Math.max(0, s.medkit - 1);
                        s.chars.krueger.aff -= 5; // ä»–è§‰å¾—ä½ è½¯å¼±
                    },
                    result: "Krueger è½¬èº«ç¦»å¼€ï¼Œå˜´è§’å¸¦ç€ä¸€ä¸å˜²è®½çš„ç¬‘æ„ã€‚"
                }
            ]
        }, // <--- é€—å·

        // [Krueger] æ™´å¤©æ—¥å…‰æµ´ï¼šæ¶‚æŠ¹é˜²æ™’æ²¹
        {
            text: "ä½ æ¥åˆ°åé™¢ï¼Œå‘ç° Krueger æ­£èµ¤è£¸ç€ä¸Šèº«è¶´åœ¨æ»šçƒ«çš„çŸ³æ¿ä¸Šï¼Œåƒä¸€åªæ…µæ‡’çš„èœ¥èœ´åœ¨æ±²å–çƒ­é‡ã€‚\né˜³å…‰åœ¨ä»–æ»¡æ˜¯ä¼¤ç–¤çš„èƒŒä¸Šè·³è·ƒï¼Œæ±—ç é¡ºç€è‚Œè‚‰çº¿æ¡æ»‘è½ï¼Œä»–å¬åˆ°ä½ çš„è„šæ­¥å£°ï¼Œå¹¶æ²¡æœ‰å›å¤´ã€‚\nâ€œè¿™é‡Œçš„å¤ªé˜³... æ¯”å¥¥åœ°åˆ©çƒˆå¾—å¤šã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && s.weather.name === 'æ™´æœ—',
            options: [
                {
                    text: "å¸®ä»–æ¶‚é˜²æ™’æ²¹å’Œæ¶¦è‚¤æ²¹",
                    desc: "è¶æœºæŠšæ‘¸ä»–çš„ä¼¤ç–¤",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("ä½ çš„æ‰‹æŒ‡è§¦ç¢°åˆ°ä»–èƒŒä¸Šçš„æ—§ä¼¤æ—¶ï¼Œä»–çš„è‚Œè‚‰ç´§ç»·äº†ä¸€ç¬ï¼Œéšå³å½»åº•æ”¾æ¾ä¸‹æ¥ã€‚\nâ€œå·¦è¾¹ä¸€ç‚¹... å¯¹ï¼Œå°±æ˜¯é‚£é‡Œï¼Œç»§ç»­ï¼Œåˆ«åœã€‚â€ ä»–çš„å£°éŸ³ä½æ²‰æ²™å“‘ã€‚", 'dialogue', 'Krueger');
                    },
                    result: "è¿™æ˜¯ä¸€åœºå±é™©åˆè¿·äººçš„è§¦ç¢°æ¸¸æˆï¼Œç©ºæ°”ä¸­å¼¥æ¼«ç€è·å°”è’™çš„å‘³é“ã€‚"
                },
                {
                    text: "èººåœ¨ä»–æ—è¾¹åˆç¡",
                    desc: "ç®€å•çš„é™ªä¼´",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                    },
                    result: "Krueger æŒªäº†æŒªä½ç½®ï¼Œè®©ä½ æ•åœ¨ä»–çš„æ‰‹è‡‚ä¸Šï¼Œè™½ç„¶ä»–çœ‹èµ·æ¥åœ¨ç¡è§‰ï¼Œä½†ä»–çš„ä¸€åªæ‰‹å§‹ç»ˆæ­åœ¨æ­¦å™¨ä¸Šï¼ŒæŠ¤å«ç€ä½ çš„æ¢¦å¢ƒã€‚"
                }
            ]
        },
         
// [Krueger] æ‹çˆ±æ—¥å¸¸ï¼šé¤æ¡Œä¸‹çš„ç§˜å¯†
        {
            text: "ä½ æ­£ååœ¨é…’æ¡Œä¸Šå’Œåˆ«äººè°ˆç”Ÿæ„ï¼ŒKrueger ååœ¨ä½ å¯¹é¢ï¼Œçœ‹èµ·æ¥æ­£åœ¨ä¸“å¿ƒå¬ä½ ä»¬çš„è°ˆè¯ã€‚\nçªç„¶ï¼Œä½ æ„Ÿè§‰ä¸€åªè„šé¡ºç€ä½ çš„å°è…¿è‚šæ…¢æ…¢å‘ä¸Šè¹­ï¼Œé‚£æ˜¯ Krueger çš„å†›é´ï¼Œä»–é¢ä¸æ”¹è‰²åœ°çœ‹ç€ä½ ï¼Œçœ¼ç¥é‡Œå´æ»¡æ˜¯æˆè°‘å’ŒæŒ‘é€—ï¼Œä¼¼ä¹åœ¨èµŒä½ ä¼šä¸ä¼šå«å‡ºå£°ã€‚",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating && s.chars.krueger.aff > 150,
            options: [
                {
                    text: "åœ¨æ¡Œä¸‹è¸©å›å»",
                    desc: "éšç§˜çš„åå‡»",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger æŒ‘äº†æŒ‘çœ‰ï¼Œæ”¾ä¸‹äº†åŒ•é¦–ã€‚ä»–ä¸ä½†æ²¡æœ‰æ”¶æ•›ï¼Œåè€Œç›´æ¥ä¼¸æ‰‹åˆ°äº†æ¡Œä¸‹æ¡ä½äº†ä½ çš„è„šè¸ï¼ŒæŒ‡è…¹æ‘©æŒ²ç€ä½ çš„çš®è‚¤ã€‚\nâ€œæŠ“åˆ°ä½ äº†ã€‚â€ ä»–ç”¨å£å‹æ— å£°åœ°è¯´é“ã€‚", 'dialogue', 'Krueger');
                    },
                    result: "è¿™é¡¿é¥­åƒå¾—ä½ é¢çº¢è€³èµ¤ã€‚"
                },
                {
                    text: "çªä»–ä¸€çœ¼ï¼šâ€œä¸“å¿ƒåƒé¥­ã€‚â€",
                    desc: "è¯•å›¾ç»´æŒæ­£ç»",
                    result: "â€œè¿™å°±é¥±äº†ï¼Ÿâ€ Krueger èˆ”äº†èˆ”å˜´å”‡ï¼Œæ„å‘³æ·±é•¿åœ°çœ‹ç€ä½ ï¼Œâ€œä½†æˆ‘è¿˜é¥¿ç€å‘¢... â€"
                }
            ]
        },

// [Krueger] å±é™©è­¦å‘Šï¼šåˆ«æŠŠæˆ‘å½“ç‹—
            {
                text: "ä½ æ— æ„ä¸­åƒå¯¹å¾…å® ç‰©ä¸€æ ·æ‹äº†æ‹ Krueger çš„å¤´ã€‚\næ°”æ°›ç¬é—´å˜äº†ï¼ŒKrueger çŒ›åœ°æ‰£ä½ä½ çš„æ‰‹è…•ï¼ŒåŠ›é“å¤§å¾—å‡ ä¹è¦æç¢ä½ çš„éª¨å¤´ã€‚\nä»–å‡‘è¿‘ä½ ï¼Œçœ¼ç¥é‡Œé—ªçƒç€è¢«å†’çŠ¯çš„ä¸è€çƒ¦ï¼šâ€œå¬ç€... æˆ‘ä¸ºä½ æ€äººï¼Œæˆ‘ç¡ä½ çš„åºŠï¼Œä½†è¿™ä¸ä»£è¡¨æˆ‘çœŸçš„æ˜¯ä½ å…»çš„ä¸€æ¡ç‹—ï¼Œåˆ«æé”™äº†ä¸»æ¬¡ã€‚â€",
                speaker: "Krueger",
                type: "alert",
                // åªæœ‰æ‹çˆ±åæ‰ä¼šå› ä¸ºè¿‡åº¦äº²å¯†è€Œäº§ç”Ÿè¿™ç§è¾¹ç•Œæ„Ÿæ‘©æ“¦
                condition: s => s.chars.krueger.dating,
                options: [
                    {
                        text: "ç›´è§†ä»–çš„çœ¼ç›ï¼šâ€œå¼„ç–¼æˆ‘äº†ï¼Œæ¾æ‰‹ã€‚â€",
                        desc: "ä¸å‘ä¸äº¢ï¼Œå±•ç¤ºå¥³ç‹æ°”åœº",
                        effect: s => {
                            s.chars.krueger.aff += 5;
                            printMsg("Krueger çœ¯èµ·çœ¼ç›å¯¹è§†äº†ä½ å‡ ç§’ï¼Œæ…¢æ…¢æ¾å¼€äº†æ‰‹ï¼Œæ‹‡æŒ‡åœ¨ä½ æ‰‹è…•çš„çº¢ç—•ä¸Šæ‘©æŒ²äº†ä¸€ä¸‹ã€‚\nâ€œ...å¾ˆå¥½ã€‚â€", 'dialogue', 'Krueger');
                        },
                        result: "ä»–ä¼¼ä¹æ›´å…´å¥‹äº†ï¼ŒçœŸå¥‡æ€ªã€‚"
                    },
                    {
                        text: "æœè½¯é“æ­‰ï¼šâ€œæŠ±æ­‰ï¼Œæˆ‘æ²¡é‚£ä¸ªæ„æ€ã€‚â€",
                        desc: "å®‰æŠšä»–çš„è‡ªå°Š",
                        effect: s => {
                            s.chars.krueger.aff += 2;
                        },
                        result: "â€œè®°ä½è¿™ç§æ„Ÿè§‰ã€‚â€ ä»–ç”©å¼€ä½ çš„æ‰‹ï¼Œç©ºæ°”ä¾ç„¶å¾ˆå‹æŠ‘ã€‚"
                    }
                ]
            }, // <--- é€—å·

// [Krueger] æ‹çˆ±æ—¥å¸¸ï¼šé—ªäº®çš„çŸ³å¤´
        {
            text: "Krueger æ¨é—¨è€Œå…¥ï¼Œèº«ä¸Šè¿˜å¸¦ç€å¤–é¢çš„å¯’æ°”ï¼Œä»–å¾„ç›´èµ°åˆ°ä½ é¢å‰ä»å£è¢‹é‡Œæå‡ºä¸€ä¸ªç”¨å¸ƒåŒ…ç€çš„å°ä¸œè¥¿ï¼ŒæŠ›è¿›ä½ æ€€é‡Œã€‚\né‚£æ˜¯ä¸€å—æ‰“ç£¨å¾—éå¸¸å…‰æ»‘çš„æ£±é•œï¼Œæˆ–è€…æ˜¯æŸç§æ°´æ™¶åŠç¯çš„æ®‹ç‰‡ï¼Œåœ¨ç¯å…‰ä¸‹æŠ˜å°„å‡ºä¸ƒå½©çš„å…‰èŠ’ã€‚\nâ€œè·¯è¿‡çœ‹åˆ°çš„ï¼Œå¾ˆäº®... åƒä½ çš„çœ¼ç›ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => s.chars.krueger.dating,
            options: [
                {
                    text: "ä¸¾èµ·æ¥å¯¹ç€å…‰çœ‹",
                    desc: "æ¬£èµä»–çš„ç¤¼ç‰©",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("ä¸€é“å½©è™¹èˆ¬çš„å…‰æ–‘æ˜ åœ¨ä»–çš„è„¸ä¸Šï¼ŒKrueger çœ¯èµ·çœ¼ç›çœ‹ç€é‚£é“å…‰ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ã€‚\nâ€œä¸åã€‚â€", 'event');
                    },
                    result: "è¿™å—æ¯«æ— æˆ˜æœ¯ä»·å€¼çš„ç»ç’ƒï¼Œè¢«ä½ æ‘†åœ¨äº†æŸœå°æœ€æ˜¾çœ¼çš„ä½ç½®ã€‚"
                },
                {
                    text: "è°ƒä¾ƒä»–ï¼šâ€œä½ æ˜¯ä¹Œé¸¦å—ï¼Ÿâ€",
                    desc: "å–œæ¬¢äº®æ™¶æ™¶çš„ä¸œè¥¿",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                    },
                    result: "â€œä¹Ÿè®¸å§ã€‚â€ ä»–å‡‘è¿‡æ¥ï¼Œæå…¶è‡ªç„¶åœ°å»äº†ä½ ä¸€ä¸‹ï¼Œâ€œæ‰€ä»¥æˆ‘æ‰æ‰¾åˆ°äº†ä½ è¿™é¢—å®çŸ³ã€‚â€"
                }
            ]
        },
// [Krueger] æ‹çˆ±æ—¥å¸¸ï¼šå±é™©æŠ•å–‚
        {
            text: "ä½ æ­£ååœ¨æŸœå°ååƒç€ä¸€å—å‹ç¼©é¥¼å¹²ï¼ŒKrueger åƒä¸€åªæ— å£°çš„å¤§çŒ«ä¸€æ ·è¹²åœ¨æ—è¾¹çš„è´§æ¶é¡¶ç«¯ï¼Œç›´å‹¾å‹¾åœ°ç›¯ç€ä½ ... å‡†ç¡®åœ°è¯´æ˜¯ç›¯ç€ä½ å˜´è¾¹çš„é£Ÿç‰©ã€‚\nä»–çš„çœ¼ç¥ä¸“æ³¨ä¸”å±é™©ï¼Œä¼¼ä¹åœ¨è¯„ä¼°æ˜¯æŠ¢è¿‡æ¥æ¯”è¾ƒå¿«ï¼Œè¿˜æ˜¯ç­‰ä½ ç»™ä»–æ¯”è¾ƒå¿«ã€‚",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating,
            options: [
                {
                    text: "æ°ä¸€åŠå–‚ç»™ä»–",
                    desc: "åˆ†äº«é£Ÿç‰©",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        s.food = Math.max(0, s.food - 1); // ç¨å¾®æ¶ˆè€—ä¸€ç‚¹ç‚¹åº“å­˜è±¡å¾
                        printMsg("Krueger å‡‘è¿‡æ¥ï¼Œç›´æ¥å°±ç€ä½ çš„æ‰‹å’¬ä½äº†é‚£ä¸€åŠé£Ÿç‰©ï¼Œä»–çš„å˜´å”‡æ“¦è¿‡ä½ çš„æŒ‡å°–ï¼ŒèˆŒå°–ä¼¼æœ‰è‹¥æ— åœ°èˆ”äº†ä¸€ä¸‹ã€‚\nâ€œå‘³é“ä¸é”™ï¼Œä½†æˆ‘æ›´æƒ³å°å°åˆ«çš„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–è·³äº†ä¸‹æ¥å»ä½ ï¼Œç„¶åå¿ƒæ»¡æ„è¶³åœ°èˆ”äº†èˆ”å˜´è§’ã€‚"
                },
                {
                    text: "æ•…æ„é€—ä»–ä¸ç»™ä»–",
                    desc: "çœ‹ä»–ç€æ€¥",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                    },
                    result: "Krueger çœ¯èµ·çœ¼ç›ï¼Œçªç„¶ä¼¸æ‰‹æä½ä½ çš„ä¸‹å·´ï¼ŒæŠŠä½ åˆšè¦åƒè¿›å»çš„é¥¼å¹²æŠ¢èµ°äº†ã€‚â€œå¤ªæ…¢äº†ã€‚â€ ä»–å¾—æ„åœ°æŠŠæˆ˜åˆ©å“æ‰”è¿›å˜´é‡Œã€‚"
                }
            ]
        },

      // [Krueger] äº’åŠ¨æ—¥å¸¸ï¼šåˆ€æœ¯æ•™å­¦
        {
            text: "ä½ è¯·æ±‚ Krueger æ•™ä½ ä¸€äº›é˜²èº«æœ¯ï¼Œä»–æŒ‘äº†æŒ‘çœ‰ï¼Œèµ°åˆ°äº†ä½ çš„èº«åã€‚\nâ€œæ¡åˆ€çš„æ‰‹è¦ç¨³ã€‚â€ ä»–çš„èƒ¸è†›ç´§è´´ç€ä½ çš„åèƒŒï¼Œä¸€åªæ‰‹æ¡ä½ä½ æ‹¿ç€åŒ•é¦–çš„æ‰‹è…•ï¼Œå¦ä¸€åªæ‰‹æ‰¶ç€ä½ çš„è…°çº æ­£å§¿åŠ¿ã€‚\nè¿™ç§å§¿åŠ¿ä¸å…¶è¯´æ˜¯æ•™å­¦ï¼Œä¸å¦‚è¯´æ˜¯è¢«ä»–å®Œå…¨åœˆç¦åœ¨æ€€é‡Œã€‚",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating,
            options: [
                {
                    text: "ä¸“å¿ƒå­¦ä¹ ",
                    desc: "è¯•å›¾å¿½ç•¥èƒŒåçš„çƒ­åº¦",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        // å°æ¦‚ç‡è·å¾—æˆ˜æ–—åŠ›æå‡çš„Buff? è¿™é‡Œç®€å•å¤„ç†ä¸ºåŠ å¥½æ„Ÿ
                        printMsg("â€œå‘¼å¸ä¹±äº†ã€‚â€ ä»–åœ¨ä½ è€³è¾¹ä½è¯­ï¼Œæ¸©çƒ­çš„æ°”æ¯å–·æ´’åœ¨é¢ˆä¾§ï¼Œâ€œä¸“å¿ƒç‚¹ï¼Œæˆ˜åœºä¸Šèµ°ç¥ä¼šé€å‘½çš„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "è™½ç„¶ä»–æ•™å¾—å¾ˆè®¤çœŸï¼Œä½†ä½ å®Œå…¨æ²¡è®°ä½æ‹›å¼ï¼Œä»–æ˜¯æ•…æ„çš„å§ï¼Ÿ"
                },
                {
                    text: "å‘åé åœ¨ä»–æ€€é‡Œ",
                    desc: "ä¸å­¦äº†ï¼",
                    effect: s => {
                        s.chars.krueger.aff += 8;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Krueger ä½ç¬‘ä¸€å£°ï¼Œæ‰”æ‰äº†æ‰‹é‡Œçš„è®­ç»ƒåŒ•é¦–ï¼ŒåŒè‡‚æ”¶ç´§æŠŠä½ å½»åº•é”åœ¨æ€€ä¸­ã€‚\nâ€œåæ­£æœ‰æˆ‘åœ¨...â€", 'dialogue', 'Krueger');
                    },
                    result: "æ•™å­¦è¯¾å˜æˆäº†è´´è´´å‘¢ã€‚"
                }
            ]
        },

   // äº‹ä»¶ 2ï¼šæ“¦æ‹­æ­¦å™¨
            {
                text: "Krueger ååœ¨ä½ åº—é‡Œæœ€é˜´æš—çš„è§’è½ï¼Œæ­£ç”¨ä¸€å—æ²¾æ²¹çš„å¸ƒä»”ç»†æ“¦æ‹­ä»–çš„åº“å…‹é‡Œå¼¯åˆ€ã€‚ä»–çœ‹èµ·æ¥å¹¶ä¸æƒ³ä¹°ä¸œè¥¿ï¼Œåªæ˜¯æƒ³æ‰¾ä¸ªå®‰é™çš„åœ°æ–¹ã€‚",
                speaker: "Krueger",
                type: "dialogue",
                options: [
                    {
                        text: "ç»™ä»–å€’æ¯æ°´",
                        desc: "ç®€å•çš„å–„æ„",
                        effect: s => {
                            s.chars.krueger.aff += 2;
                        },
                        result: "ä»–æ²¡æœ‰æŠ¬å¤´ï¼Œåªæ˜¯æŠŠæ°´æ¯æ‹‰è¿‘äº†ä¸€äº›ã€‚â€œåˆ«æ¯äº†è¿™ä»½å®‰é™ã€‚â€"
                    },
                    {
                        text: "è¯¢é—®ä»–åœ¨èº²è°",
                        desc: "åˆºæ¢æƒ…æŠ¥",
                        effect: s => {
                            s.chars.krueger.aff -= 10;
                        },
                        result: "Krueger åœä¸‹äº†æ‰‹ä¸­çš„åŠ¨ä½œï¼Œå†·å†·åœ°ç¥äº†ä½ ä¸€çœ¼ã€‚â€œçŸ¥é“å¾—è¶Šå°‘ï¼Œæ´»å¾—è¶Šä¹…ã€‚â€"
                    }
                ]
            },
// --- æ‹çˆ±åä¸“å±äº‹ä»¶ (éœ€ dating: true) ---

            // æ‹çˆ±äº‹ä»¶ 1ï¼šæ€é¸¡ç„‰ç”¨ç‰›åˆ€ (å‰Šè‹¹æœ)
            {
                text: "åº—é‡Œéš¾å¾—æ¸…é—²ï¼ŒKrueger ååœ¨æŸœå°è¾¹ï¼Œæ‰‹é‡Œé‚£æŠŠä»¤æ•Œäººé—»é£ä¸§èƒ†çš„åº“å…‹é‡Œå¼¯åˆ€ï¼Œæ­¤åˆ»æ­£å°å¿ƒç¿¼ç¿¼åœ°â€¦â€¦åœ¨å‰Šä¸€ä¸ªè‹¹æœã€‚\nä»–çš„åŠ¨ä½œä¼˜é›…åˆé«˜æ•ˆï¼Œé•¿é•¿çš„æœçš®è¿æˆä¸€ä¸²æ‰ä¸‹æ¥ï¼Œç«Ÿç„¶æ²¡æœ‰æ–­ã€‚\nâ€œå¼ å˜´ã€‚â€ ä»–åˆ‡ä¸‹ä¸€å—æœè‚‰é€’åˆ°ä½ å˜´è¾¹ï¼Œä¸€è„¸è®¤çœŸã€‚",
                speaker: "Krueger",
                type: "dialogue",
                condition: s => s.chars.krueger.dating,
                options: [
                    {
                        text: "ä¹–ä¹–åƒæ‰",
                        desc: "è¡¥å……ç»´ç”Ÿç´ ",
                        effect: s => {
                            s.food = Math.min(s.food + 1, CONFIG.capacity_tiers[s.lvl_store-1]); // ä¹Ÿå°±æ˜¯åƒä¸ªé›¶é£Ÿ
                            s.chars.krueger.aff += 5;
                            printMsg("Krueger æ»¡æ„åœ°çœ‹ç€ä½ åƒä¸‹å»ï¼Œåˆåˆ‡äº†ä¸€å—ã€‚â€œè¿™åœ°æ–¹å…¨æ˜¯ç½å¤´é£Ÿå“ï¼Œä½ éœ€è¦æ–°é²œçš„ç»´ç”Ÿç´ ï¼Œåˆ«ç”Ÿç—…äº†ã€‚â€", 'dialogue', 'Krueger');
                        },
                        result: "å¾ˆéš¾æƒ³è±¡è¿™æŠŠåˆ€åˆšæ‰å¯èƒ½è¿˜åœ¨åˆ‡æ–­æ•Œäººçš„å–‰å’™ï¼Œç°åœ¨å´åœ¨ä¸ºä½ æœåŠ¡ã€‚"
                    },
                    {
                        text: "è°ƒä¾ƒä»–å¤§æå°ç”¨",
                        desc: "è¿™å¯æ˜¯æˆ˜æœ¯æ­¦å™¨å•Šï¼",
                        effect: s => {
                            s.chars.krueger.aff += 2;
                        },
                        result: "Krueger æŒ‘äº†æŒ‘çœ‰ï¼šâ€œåˆ€å°±æ˜¯åˆ€ï¼Œè‡³äºç”¨æ¥æ€äººè¿˜æ˜¯ç”¨æ¥ç…§é¡¾ä½ ...å–å†³äºæ¡åˆ€çš„äººæƒ³åšä»€ä¹ˆï¼Œè€Œæˆ‘ç°åœ¨åªæƒ³å–‚é¥±ä½ ã€‚â€"
                    }
                ]
            },

// [Krueger] è¯¯ä¼šåˆ†æ‰‹å±æœº
        {
            text: "Krueger ç²—æš´åœ°æŠŠä¸€ååªæ˜¯é—®è·¯çš„ç”·é¡¾å®¢èµ¶èµ°ï¼Œå¹¶é”ä¸Šäº†åº—é—¨ã€‚ä»–è½¬è¿‡èº«çœ¼ç¥ä¸å–„åœ°çœ‹ç€ä½ ã€‚\nâ€œæˆ‘è¯´è¿‡ï¼Œæˆ‘ä¸å–œæ¬¢åˆ«çš„é›„æ€§é è¿‘ä½ ï¼Œä½ æ˜¯å¬ä¸æ‡‚æˆ‘çš„è¯ï¼Œè¿˜æ˜¯æ•…æ„åœ¨æŒ‘è¡…æˆ‘çš„åº•çº¿ï¼Ÿâ€\nç©ºæ°”ä¸­å¼¥æ¼«ç€å±é™©çš„ç«è¯å‘³ï¼Œè¿™ç§ä»¤äººçª’æ¯çš„å æœ‰æ¬²è®©ä½ æ„Ÿåˆ°ä¸é€‚ã€‚",
            speaker: "Krueger",
            type: "alert",
// åªæœ‰åœ¨æ‹çˆ±ä¸­(dating) ä¸” éšæœºåˆ¤å®šé€šè¿‡(5%æ¦‚ç‡) æ—¶æ‰ä¼šè§¦å‘
            condition: s => s.chars.krueger.dating && chance(15) && !s.flags.harem_queen,
            options: [
                {
                    text: "è€å¿ƒå®‰æŠšï¼šâ€œæˆ‘æ˜¯å¼€åº—çš„ï¼Œä¸æ˜¯ä½ çš„ç§äººç‰©å“ã€‚â€",
                    desc: "è®²é“ç†ï¼Œå»ºç«‹è¾¹ç•Œ",
                    effect: s => {
                        s.chars.krueger.aff += 2;
// ğŸŸ¢ æ–°å¢ï¼šæ ‡è®°ä¸ºå‰ä»»
                                s.chars.krueger.is_ex = true;
                        printMsg("Krueger çœ¯èµ·çœ¼ç›å¯¹è§†äº†ä½ è®¸ä¹…ï¼Œæœ€ç»ˆå†·å“¼ä¸€å£°æ‰“å¼€äº†é—¨é”ã€‚\nâ€œ...ä¸‹ä¸ä¸ºä¾‹ï¼Œåˆ«è®©æˆ‘è§‰å¾—æˆ‘æŠ“ä¸ä½ä½ ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–å¦¥åäº†ï¼Œä½†ä¾ç„¶æš—å¤„è§‚å¯Ÿã€‚"
                },
                {
                    text: "çˆ†å‘ï¼šâ€œå—å¤Ÿäº†ï¼æˆ‘ä»¬ç»“æŸäº†ï¼æ»šå‡ºå»ï¼â€ (åˆ†æ‰‹)",
                    desc: "å½»åº•å†³è£‚",
                    effect: s => {
                        s.chars.krueger.dating = false; // ğŸ’” åˆ†æ‰‹
                        s.chars.krueger.aff -= 100;      // å¯èƒ½ä¼šå˜æˆä»‡äºº
                        s.chars.krueger.confessed = false;
                        s.rep_chimera -= 100;            // å¾—ç½ª Chimera
// ğŸŸ¢ æ–°å¢ï¼šå¼€å¯ 30 å¤©å†·å´CD
                        s.chars.krueger.last_reject_day = s.day;
                        printMsg("Kruegeræ­»æ­»ç›¯ç€ä½ ï¼Œä»¿ä½›è¦è®°ä½ä½ çš„æ ·å­ã€‚\nâ€œä½ ä¼šåæ‚”çš„ï¼Œåœ¨è¿™ä¸ªåºŸåœŸä¸Šï¼Œç¦»å¼€æˆ‘çš„åº‡æŠ¤ï¼Œä½ ä»€ä¹ˆéƒ½ä¸æ˜¯ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ã€å…³ç³»ç»“æŸã€‘ä»–æ‘”é—¨è€Œå»ï¼Œä½ æ„Ÿè§‰ä»¥åç¡è§‰éƒ½å¾—çç€ä¸€åªçœ¼äº†ã€‚"
                }
            ]
        },
            // æ‹çˆ±äº‹ä»¶ 2ï¼šæ²‰é»˜çš„ä¿®ç†å·¥ (ä¿®è´§æ¶)
            {
                text: "ä½ æ­£è¸©ç€æ‘‡æ‘‡æ™ƒæ™ƒçš„å‡³å­ï¼Œè¯•å›¾ä¿®ç†å¤©èŠ±æ¿ä¸Šæ¥è§¦ä¸è‰¯çš„ç¯ç®¡ã€‚çªç„¶ï¼Œä¸€åŒæœ‰åŠ›çš„å¤§æ‰‹æ‰¶ä½äº†ä½ çš„è…°ï¼ŒæŠŠä½ ç¨³ç¨³åœ°æŠ±äº†ä¸‹æ¥ã€‚\nKrueger äºŒè¯ä¸è¯´ï¼Œå¤ºè¿‡ä½ æ‰‹é‡Œçš„èºä¸åˆ€ï¼Œè‡ªå·±ç«™ä¸Šå»ä¸‰ä¸¤ä¸‹å°±ä¿®å¥½äº†ã€‚\nâ€œè¿™ç§é«˜å¤„çš„æ´»ä»¥åå–Šæˆ‘å§ã€‚â€ ä»–æ‹äº†æ‹æ‰‹ä¸Šçš„ç°ã€‚",
                speaker: "Krueger",
                type: "event",
                condition: s => s.chars.krueger.dating,
                options: [
                    {
                        text: "å¸®ä»–æ“¦æ±—",
                        desc: "ä½“è´´çš„å›åº”",
                        effect: s => {
                            s.chars.krueger.aff += 8;
                            printMsg("ä»–æœ‰äº›ä¸è‡ªåœ¨åœ°åè¿‡å¤´ï¼Œä½†æ²¡æœ‰èº²å¼€ä½ çš„æ‰‹ã€‚â€œ...åªæ˜¯ä¸¾æ‰‹ä¹‹åŠ³ï¼Œæˆ‘ä¸å¸Œæœ›ä½ ä¸ºäº†è¿™ç§å°äº‹æ‘”ä¼¤ã€‚â€", 'dialogue', 'Krueger');
                        },
                        result: "ä»–è™½ç„¶å˜´ä¸Šä¸è¯´ï¼Œä½†ä½ ä¼šå‘ç°åº—é‡Œåæ‰çš„é—¨é”ã€æ¼æ°´çš„æ°´ç®¡ï¼Œç¬¬äºŒå¤©éƒ½ä¼šå¥‡è¿¹èˆ¬åœ°ä¿®å¥½ã€‚"
                    },
                    {
                        text: "å¤¸èµä»–å¾ˆèƒ½å¹²",
                        desc: "å±…å®¶å¿…å¤‡å¥½ç”·äºº",
                        effect: s => {
                            s.chars.krueger.aff += 5;
                        },
                        result: "â€œæˆ‘ä»¥å‰ä¹Ÿæ˜¯è¿‡æ—¥å­çš„æ™®é€šäººã€‚â€ ä»–è½»å“¼äº†ä¸€å£°ï¼Œå˜´è§’å´å¾®å¾®ä¸Šæ‰¬ï¼Œâ€œè¿™æ‰æ˜¯æˆ‘åœ¨å®¶çš„æ ·å­ã€‚â€"
                    }
                ]
            },

            // æ‹çˆ±äº‹ä»¶ 3ï¼šé¡ºè·¯æ¥é€ (é›¨å¤©)
            {
                text: "å¤–é¢çš„é…¸é›¨è¶Šä¸‹è¶Šå¤§ï¼Œä½ çœ‹ç€çª—å¤–å‘æ„ï¼Œæ­£å‡†å¤‡å†’é›¨å»åå‹¤ç‚¹å–è´§ã€‚\né—¨é“ƒå“äº†ï¼ŒKrueger æµ‘èº«æ¹¿é€åœ°èµ°äº†è¿›æ¥ã€‚ä»–æŠŠä¸€ä»¶å¹²ç‡¥åšå®çš„é˜²æ°´æ–—ç¯·æ‰”ç»™ä½ ï¼Œè‡ªå·±å´åªæˆ´ç€é‚£å—æ¹¿æ¼‰æ¼‰çš„ä¼ªè£…ç½‘ã€‚\nâ€œç©¿ä¸Š,æˆ‘é¡ºè·¯é™ªä½ å»ã€‚â€ (ä»–çœŸçš„é¡ºè·¯å—ï¼Ÿ)",
                speaker: "Krueger",
                type: "dialogue",
                condition: s => s.chars.krueger.dating,
                options: [
                    {
                        text: "å’Œä»–å…±ç”¨æ–—ç¯·",
                        desc: "ç´§ç´§è´´åœ¨ä¸€èµ·",
                        effect: s => {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // çœåŠ›
                            s.chars.krueger.aff += 5;
                            printMsg("Krueger æ„£äº†ä¸€ä¸‹ï¼Œéšå³æŠŠä½ ç´§ç´§æ‚åœ¨æ€€é‡Œï¼Œç”¨èº«ä½“ä¸ºä½ æŒ¡ä½äº†ä¾§é¢çš„é£é›¨ã€‚\nâ€œæŠ“ç´§æˆ‘ï¼Œåˆ«èµ°ä¸¢äº†ã€‚â€", 'event');
                        },
                        result: "é›¨å¾ˆå¤§ï¼Œä½†ä»–çš„æ€€æŠ±åƒä¸€åº§ç§»åŠ¨çš„å ¡å’ï¼Œå¹²ç‡¥ã€æ¸©æš–ä¸”å®‰å…¨ã€‚"
                    },
                    {
                        text: "ç©¿ä¸Šæ–—ç¯·å‡ºå‘",
                        result: "ä»–èµ°åœ¨ä½ å¤–ä¾§ï¼Œé»˜é»˜ä¸ºä½ æŒ¡ä½äº†æº…èµ·æ¥çš„æ³¥æ°´ï¼Œä¸€è·¯ä¸Šä»–æ²¡è¯´ä»€ä¹ˆè¯ï¼Œä½†ä¸€ç›´ç´§ç´§æŠ¤ç€ä½ ã€‚"
                    }
                ]
            },
            // äº‹ä»¶ 3ï¼šæƒ…æŠ¥äº¤æ˜“
            {
                text: "Krueger å°†ä¸€å¼ æŠ˜å çš„åœ°å›¾æ‹åœ¨æŸœå°ä¸Šã€‚\nâ€œå‡ ä¸ªå·¡é€»é˜Ÿçš„è·¯çº¿å›¾ã€‚æˆ‘ä¸æ„Ÿå…´è¶£ï¼Œä½†ä¹Ÿè®¸ä½ ä¼šè§‰å¾—å®ƒå€¼ç‚¹é’±ã€‚â€",
                speaker: "Krueger",
                type: "dialogue",
                options: [
                    {
                        text: "æ”¶è´­æƒ…æŠ¥ ($100)",
                        desc: "è½¬æ‰‹å¯ä»¥å–ç»™å…¶ä»–é˜µè¥",
                        condition: s => s.money >= 100,
                        effect: s => {
                            s.money -= 100;
                            s.money += 250; // è‡ªåŠ¨è½¬æ‰‹
                            s.rep_chimera += 2;
                            log("å€’å–æƒ…æŠ¥è·åˆ© $150", 'gain');
                        },
                        result: "ä½ ä¹°ä¸‹äº†åœ°å›¾å¹¶è¿…é€Ÿè½¬å–ç»™äº†ä¸­é—´äººï¼ŒKrueger æ‹¿é’±åä¸€è¨€ä¸å‘åœ°ç¦»å¼€äº†ã€‚"
                    },
                    {
                        text: "ä¸éœ€è¦",
                        result: "â€œéšä½ ã€‚â€ ä»–æ”¶å›åœ°å›¾ï¼ŒåƒçƒŸé›¾ä¸€æ ·æ¶ˆå¤±äº†ã€‚"
                    }
                ]
            },
            // äº‹ä»¶ 4ï¼šè­¦å‘Š
            {
                text: "Krueger å¹¶æ²¡æœ‰èµ°è¿›æ¥ï¼Œä»–ç«™åœ¨çª—å¤–ï¼Œéš”ç€ç»ç’ƒæŒ‡äº†æŒ‡ä½ çš„èº«åï¼Œç„¶ååšäº†ä¸€ä¸ªâ€˜å‰²å–‰â€™çš„æ‰‹åŠ¿ï¼Œä¼¼ä¹åœ¨æç¤ºä½ æ³¨æ„æŸä¸ªä¸æ€€å¥½æ„çš„é¡¾å®¢ã€‚",
                speaker: "Krueger",
                type: "event",
                options: [
                    {
                        text: "å›å¤´æ£€æŸ¥",
                        desc: "æé«˜è­¦æƒ•",
                        effect: s => {
                            s.chars.krueger.aff += 5;
                            log("é¿å…äº†ä¸€æ¬¡å·çªƒ", 'info');
                        },
                        result: "ä½ å‘ç°ä¸€ä¸ªæ‰’æ‰‹æ­£å‡†å¤‡å¯¹ä½ çš„æ”¶é“¶æœºä¸‹æ‰‹ï¼Œè¢«å‘ç°åä»–ä»“çš‡é€ƒè·‘ï¼Œä½ å†å›å¤´çœ‹çª—å¤–å‘ç°Krueger å·²ç»ä¸è§äº†ã€‚"
                    }
                ]
            }
        ]
    },

    // ç‰¹æ®Š/å‰§æƒ…äº‹ä»¶
    Special: {
        ghost_repay: {
            text: "ä¸€åªæˆ˜æœ¯æ‰‹å¥—æ•²äº†æ•²æŸœå°ã€‚Ghost å›æ¥äº†ï¼Œçœ‹èµ·æ¥åˆšç»“æŸä¸€åœºæˆ˜æ–—ã€‚\nâ€œæˆ‘è¯´è¿‡æˆ‘ä¼šå›æ¥çš„ã€‚â€ ä»–å°†ä¸€åŒ…æˆ˜åˆ©å“æ”¾åœ¨æ¡Œä¸Šã€‚",
            speaker: "Ghost",
            type: "dialogue",
            options: [
                {
                    text: "æ”¶ä¸‹å›æŠ¥",
                    desc: "è·å¾— $600 å’Œé¢å¤–å¥½æ„Ÿ",
                    effect: s => {
                        s.money += 600;
                        s.chars.ghost.aff += 10;
                        log("æ”¶åˆ° Ghost çš„è¿˜æ¬¾", 'gain');
                    },
                    result: "Ghost: â€œè¿™ä¸‹æˆ‘ä»¬ä¸¤æ¸…äº†ï¼Œä½†å¦‚æœä½ æœ‰éº»çƒ¦ï¼Œå¯ä»¥å‘¼å«è¿™ä¸ªé¢‘é“ã€‚â€ (è§£é”ç‰¹æ®Šä¿æŠ¤)"
                }
            ]
        },
        
        // ğŸŸ¢ é»„é‡‘æªäº‹ä»¶2
        golden_ak_choice: {
            text: "ä½ ä¹‹å‰ä¹°çš„é»„é‡‘æªå¤ªæ˜¾çœ¼äº†ï¼Œä½ è¦æ€ä¹ˆå¤„ç†ï¼Ÿ",
            speaker: "System",
            type: "event",
            options: [
                {
                    text: "é€ç»™ Krueger",
                    desc: "ä»–è‚¯å®šå–œæ¬¢è¿™ç§â€œæˆ˜åˆ©å“â€ (å¥½æ„Ÿå¤§å¹…æå‡)",
                    effect: s => {
                        s.chars.krueger.aff += 15;
                        printMsg("ä½ æŠŠé»„é‡‘ AK é€ç»™äº† Kruegerã€‚ä»–è™½ç„¶è§‰å¾—è¿™æªèŠ±å“¨ï¼Œä½†å¯¹ä½ çš„â€˜è´¡å“â€™éå¸¸æ»¡æ„ï¼Œçˆ±ä¸é‡Šæ‰‹åœ°æ“¦æ‹­ç€ã€‚", 'gain');
                    },
                    result: "Krueger çœ‹ç€æªçš„çœ¼ç¥æ¯”çœ‹æƒ…äººè¿˜æ¸©æŸ”ã€‚"
                },
                {
                    text: "å–ç»™é»‘å¸‚æ”¶è—å®¶",
                    desc: "å€’æ‰‹èµšä¸€ç¬”",
                    effect: s => {
                        const profit = rng(700, 1000);
                        s.money += profit;
                        log(`å€’å–é»„é‡‘ AK è·åˆ© $${profit}`, 'gain');
                        printMsg(`æ”¶è—å®¶çˆ±æ­»è¿™ç©æ„å„¿äº†ï¼Œå½“åœºä»˜äº† $${profit} ç°é‡‘ã€‚`, 'gain');
                    },
                    result: "è™½ç„¶ä¿—æ°”ï¼Œä½†é’±æ˜¯é¦™çš„ã€‚"
                }
            ]
        },

        scavenger_revenge: {
            text: "é‚£ä¸ªè¢«ä½ éª—è¿‡çš„æ‹¾è’è€…å¸¦ç€å‡ ä¸ªæ¶æ£å›æ¥äº†ï¼\nâ€œå°±æ˜¯è¿™å®¶ä¼™å–ç»™æˆ‘å‡æƒ…æŠ¥ï¼ç»™æˆ‘ç ¸ï¼â€",
            speaker: "Thug",
            type: "alert",
            options: [
                {
                    text: "æˆ˜æ–—ï¼(æ¶ˆè€—å¼¹è¯)",
                    desc: "-5 Ammo, ä¿æŠ¤åº—é“º",
                    condition: s => s.ammo >= 5,
                    effect: s => {
                        s.ammo -= 5;
                        if(chance(80)) {
                            log("æˆåŠŸå‡»é€€æš´å¾’", 'gain');
                        } else {
                            s.money -= 300;
                            log("è™½ç„¶å‡»é€€äº†ï¼Œä½†æœ‰æŸå¤±", 'loss');
                        }
                    },
                    result: "ä¸€é˜µæ¿€çƒˆçš„äº¤ç«åï¼Œä»–ä»¬é€ƒè·‘äº†ã€‚"
                },
                {
                    text: "èµ”é’±äº†äº‹",
                    desc: "-$400",
                    effect: s => { s.money -= 400; },
                    result: "ä»–ä»¬æ‹¿é’±èµ°äº†ï¼Œä¸´èµ°å‰è¿˜åäº†å£ç—°ã€‚"
                }
            ]
        },
       // --- é›†é½å¥–åŠ±å‰§æƒ… ---
        ghost_set_complete: {
            text: "æ·±å¤œï¼ŒGhost ä¸»åŠ¨æ‰¾åˆ°äº†ä½ ã€‚ä»–çœ‹ç€ä½ æ”¶é›†çš„é‚£äº›ç§äººç‰©å“ï¼Œæ— å¥ˆåœ°å¹äº†å£æ°”ã€‚\nâ€œä½ å·²ç»çœ‹ç©¿äº†æˆ‘çš„ä¸€åˆ‡ï¼ŒSimon Riley åœ¨ä½ é¢å‰æ— å¤„éå½¢ã€‚â€\nä»–å½“ç€ä½ çš„é¢æ‘˜ä¸‹äº†é¢ç½©ï¼ŒæŠ“ç€ä½ çš„æ‰‹è´´åœ¨æ»¡æ˜¯èƒ¡èŒ¬çš„è„¸é¢Šä¸Šï¼Œéœ²å‡ºä¸€ä¸ªç–²æƒ«ä½†çœŸå®çš„å¾®ç¬‘ã€‚\nâ€œä»¥å... åœ¨ä½ é¢å‰ä¸éœ€è¦è¿™ä¸ªäº†ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            options: [{ text: "æ‹¥æŠ±ä»–", effect: s => { s.chars.ghost.aff += 50; s.set_rewards.ghost = true; }, result: "ã€è§£é”è¢«åŠ¨ï¼šGhost çš„ç»å¯¹å®ˆæŠ¤-æš‚æœªå®è£…ä½†æ˜¯çœ‹ç€å¾ˆé…·ã€‘" }]
        },
        konig_set_complete: {
            text: "KÃ¶nig å‘ç°ä½ æ”¶é›†äº†ä»–æ‰€æœ‰çš„ç§äººç‰©å“ï¼Œè„¸çº¢å¾—åƒä¸ªç†Ÿé€çš„ç•ªèŒ„ã€‚\nä»–æŠŠä½ æŠ±äº†èµ·æ¥ï¼ŒæŠŠè„¸åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œé—·å£°å“­æ³£ã€‚\nâ€œæˆ‘ä»¥ä¸ºæˆ‘... æ²¡äººä¼šæƒ³è¦æˆ‘çš„ä¸œè¥¿ï¼Œè°¢è°¢ä½ ...è¯·ä½ ç»å¯¹ï¼Œç»å¯¹ä¸è¦ç¦»å¼€æˆ‘ï¼Œä¸ç„¶...â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [{ text: "æ‘¸æ‘¸å¤´", effect: s => { s.chars.konig.aff += 50; s.set_rewards.konig = true; }, result: "ã€è§£é”è¢«åŠ¨ï¼šå·¨äººçš„ç§»åŠ¨ä»“åº“-æš‚æœªå®è£…ä½†æ˜¯çœ‹ç€å¾ˆé…·ã€‘" }]
        },

// ğŸŸ¢ Keegan å…¨æ”¶é›†å¥–åŠ±å‰§æƒ… (Ghosts çš„æƒ…æŠ¥ç½‘ç»œ)
        keegan_set_complete: {
            text: "Keegan æ¸©æŸ”çš„çœ‹ç€ä½ ã€‚\nâ€œ {PLAYER} ... ä½ ç°åœ¨å¯ä»¥æ¥å…¥ Ghosts çš„ä½çº§æƒ…æŠ¥ç½‘ç»œï¼Œå®ƒèƒ½è®©ä½ åœ¨æ¯ä¸€æ¬¡æ¢ç´¢åï¼Œè·å¾—é¢å¤–çš„æƒ…æŠ¥åˆ†çº¢ã€‚â€",
            speaker: "Keegan",
            type: "dialogue",
            options: [{ 
                text: "æ¥å—æƒ…æŠ¥ç½‘ç»œ", 
                effect: s => { 
                    s.chars.keegan.aff += 50;
                    s.set_rewards.keegan = true; // ğŸŸ¢ æ ‡è®°ä¸ºå·²è§£é”
                }, 
                result: "ã€è§£é”è¢«åŠ¨ï¼šGhosts çš„æƒ…æŠ¥ç½‘ç»œ - æ¢ç´¢åé¢å¤–è·åˆ©ã€‘" 
            }]
        },

        krueger_set_complete: {
            text: "Krueger æŠŠä½ å µåœ¨è§’è½ï¼Œå•è†è·ªä¸‹â€”â€”è¿™æ˜¯éª‘å£«æ•ˆå¿ çš„å§¿åŠ¿ã€‚\nä»–å»äº†å»ä½ çš„æ‰‹èƒŒï¼Œçœ¼ç¥æ²¡æœ‰å¾€æ—¥çš„æˆè°‘ï¼šâ€œä½ æ”¶é›†äº†æˆ‘çš„ä¼ªè£…ã€æˆ‘çš„è¿‡å»ï¼Œç°åœ¨ï¼Œæˆ‘æ˜¯ä½ çš„äº†ã€‚â€\nâ€œä½ æ˜¯æˆ‘å”¯ä¸€çš„ä¿¡ä»°ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            options: [{ text: "æ¥å—æ•ˆå¿ ", effect: s => { s.chars.krueger.aff += 50; s.set_rewards.krueger = true; }, result: "ã€è§£é”è¢«åŠ¨ï¼šé»‘å¸‚éœ¸ä¸» (è¿›è´§7æŠ˜-å·²å®è£…)ã€‘" }]
        },

        // === åƒé†‹/ä¸å®‰äº‹ä»¶ ===
        ghost_jealous: {
            text: "Ghost é åœ¨æŸœå°è¾¹ï¼Œçœ‹ä¼¼åœ¨æ“¦æªï¼Œä½†çœ¼ç¥ä¸€ç›´å†·å†·åœ°ç›¯ç€åˆšæ‰ç¦»å¼€çš„é‚£ä¸ªå¹´è½»ç”·é¡¾å®¢ã€‚\nâ€œé‚£ä¸ªæ–°å…µ... ä»–å’Œä½ èŠå¾—æŒºå¼€å¿ƒï¼Ÿâ€ ä»–æ²¡æœ‰çœ‹ä½ ï¼Œè¯­æ°”å¹³æ·¡å¾—åè€Œè®©äººç´§å¼ ã€‚",
            speaker: "Ghost",
            type: "dialogue",
            options: [
                {
                    text: "ä¸»åŠ¨è§£é‡Šå¹¶å®‰æŠšä»–",
                    desc: "æ¶ˆé™¤ä»–çš„ç–‘è™‘",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("Ghost åœä¸‹äº†æ‰‹é‡Œçš„åŠ¨ä½œï¼Œå¹äº†å£æ°”ã€‚â€œæŠ±æ­‰ã€‚æˆ‘åªæ˜¯... ä¸ä¹ æƒ¯è¿™ç§æ„Ÿè§‰ï¼Œæ²¡äº‹äº†ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–ç´§ç»·çš„è‚©è†€æ”¾æ¾äº†ä¸‹æ¥ï¼Œçœ¼ç¥é‡æ–°å˜å¾—æŸ”å’Œã€‚"
                },
                {
                    text: "è°ƒä¾ƒä»–æ˜¯ä¸æ˜¯åƒé†‹äº†",
                    desc: "å±é™©ä½†æœ‰è¶£çš„å°è¯•",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                    },
                    result: "Ghost æ²‰é»˜äº†ç‰‡åˆ»ï¼Œéš”ç€é¢ç½©é—·å“¼äº†ä¸€å£°ï¼Œâ€œé—­å˜´ã€‚â€ (ä½†ä»–è€³æ ¹çº¢äº†)"
                }
            ]
        },

// [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šé£æ™¯ç‹¬å  (åƒé†‹)
        ghost_jealous_rookie: {
            text: "çª—å¤–å‡ ä¸ªæ–°å…µæ­£åœ¨èµ¤è†Šè®­ç»ƒï¼ŒæŒ¥æ´’æ±—æ°´ï¼Œä½ å¿ä¸ä½å¤šçœ‹äº†ä¸¤çœ¼ï¼Œæ„Ÿå¹å¹´è½»çœŸå¥½ã€‚\nçªç„¶ï¼Œè§†é‡å˜é»‘äº†ï¼ŒGhost åƒå µå¢™ä¸€æ ·ç«™åœ¨äº†ä½ é¢å‰å®Œå…¨æŒ¡ä½äº†çª—æˆ·ã€‚\nâ€œæ²¡ä»€ä¹ˆå¥½çœ‹çš„ã€‚â€ ä»–å†·å†·åœ°è¯´é“ï¼ŒæŠ±ç€åŒè‡‚å±…é«˜ä¸´ä¸‹åœ°ç›¯ç€ä½ ï¼Œâ€œæ–°å…µè€Œå·²ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "event",
            condition: s => s.chars.ghost.dating,
            options: [
                {
                    text: "æˆ³ç©¿ä»–ï¼šâ€œä½ æŒ¡æˆ‘çœ‹å¸…å“¥äº†ã€‚â€",
                    desc: "è°ƒæˆä»–",
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        printMsg("Ghost çœ¯èµ·çœ¼ç›æ”¾ä¸‹çª—å¸˜ï¼Œçªç„¶ä¿¯èº«å‡‘è¿‘ä½ æ‘˜ä¸‹é¢ç½©ï¼Œç¡®ä¿åªæœ‰ä½ ä¸€ä¸ªäººèƒ½çœ‹åˆ°ã€‚\nâ€œçœ‹ã€‚ç€ã€‚æˆ‘ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "å•Šï¼Œè¿™èƒœè´Ÿæ¬²çœŸæ˜¯è¯¥æ­»çš„è¿·äººï¼ˆè¥¿è’™è±åˆ©å¹¼ç¨šé¬¼ï¼‰ã€‚"
                },
                {
                    text: "é¡ºæ¯›ï¼šâ€œéƒ½æ²¡ä½ å¥½çœ‹ã€‚â€",
                    desc: "æ±‚ç”Ÿæ¬²æå¼º",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "â€œå“¼ã€‚â€ ä»–è™½ç„¶è¿˜åœ¨å‚²å¨‡ï¼Œä½†æ˜æ˜¾å¾ˆå—ç”¨ï¼Œç”šè‡³ç‰¹æ„æ¢äº†ä¸ªæ›´å¸…çš„å§¿åŠ¿é åœ¨æŸœå°è¾¹è®©ä½ çœ‹ä¸ªå¤Ÿã€‚"
                }
            ]
        }, // <--- é€—å·

        // [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šä¸å¿…è¦çš„æ¥è§¦ (å æœ‰æ¬²)
        ghost_jealous_touch: {
            text: "ä¸€åç”·é¡¾å®¢åœ¨ä»˜æ¬¾æ—¶ï¼Œæ‰‹æŒ‡ä¸å°å¿ƒç¢°åˆ°äº†ä½ çš„æ‰‹èƒŒï¼Œè™½ç„¶è¿™æœ¬æ˜¯ä¸€ä¸ªæ— å¿ƒçš„ä¸¾åŠ¨ï¼Œä½†åº—é‡Œçš„æ°”å‹ç¬é—´ä½äº†å…«åº¦ã€‚\né¡¾å®¢ç¦»å¼€åï¼ŒGhost é»˜é»˜èµ°äº†è¿‡æ¥ï¼ŒæŠ“èµ·ä½ åˆšæ‰è¢«ç¢°è¿‡çš„é‚£åªæ‰‹ã€‚\nä»–æ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯æå‡ºä¸€å—é…’ç²¾æ¹¿å·¾ï¼Œä¸€éåˆä¸€éåœ°æ“¦æ‹­ä½ çš„æ‰‹èƒŒã€‚",
            speaker: "Ghost",
            type: "event",
            condition: s => s.chars.ghost.dating,
            options: [
                {
                    text: "ä»»ç”±ä»–æ“¦æ‹­",
                    desc: "å®‰æŠšä»–çš„æ´ç™–(å æœ‰æ¬²)",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("ç›´åˆ°æ“¦äº†æ•´æ•´ä¸‰éä»–æ‰åœæ‰‹ï¼Œä»–æŠŠä½ çš„æ‰‹æŒ‰åœ¨ä»–çš„é¢ç½©ä¸Šè¹­äº†è¹­ï¼Œé‡æ–°è¦†ç›–ä¸Šä»–çš„æ°”æ¯ã€‚\nâ€œå¹²å‡€äº†ã€‚â€", 'event');
                    },
                    result: "ä»–å¯¹å±äºä»–çš„ä¸œè¥¿æœ‰ç€è¿‘ä¹ç—…æ€çš„æ´ç™–ã€‚"
                },
                {
                    text: "æŠ½å›æ‰‹ï¼šâ€œé‚£åªæ˜¯ä¸ªæ„å¤–ï¼â€",
                    desc: "è§‰å¾—ä»–å¤§æƒŠå°æ€ª",
                    effect: s => {
                        s.chars.ghost.aff -= 5;
                    },
                    result: "Ghost ç›¯ç€ä½ çš„æ‰‹çœ‹äº†ä¸€ä¼šå„¿ï¼Œå†·å“¼ä¸€å£°è½¬èº«å»æ£€æŸ¥å¼¹è¯äº†ï¼Œé‚£å¤©æ™šä¸Šä»–æ•…æ„æ²¡ç†ä½ ã€‚"
                }
            ]
        }, // <--- é€—å·

        // [Ghost] æ‹çˆ±æ—¥å¸¸ï¼šå¤¸èµä»–äºº (é—·æ°”)
        ghost_jealous_sniper: {
            text: "ä½ æ­£åœ¨å¤¸èµä¸€å TF141 çš„æ–°ç‹™å‡»æ‰‹æªæ³•ç²¾å‡†ï¼ŒGhost ååœ¨æ—è¾¹ä¸€è¨€ä¸å‘ï¼Œä½†ä»–æ‰‹é‡Œçš„ä¸€æ”¯é’¢ç¬”å·²ç»è¢«æå¼¯äº†ã€‚\nâ€œç²¾å‡†ï¼Ÿâ€ Ghost çªç„¶æ‰“æ–­äº†ä½ ï¼Œè¯­æ°”é‡Œæ»¡æ˜¯å˜²è®½ï¼Œâ€œä»–åœ¨ 800 ç±³å¤–ä¿®æ­£é£åç”¨äº†æ•´æ•´ 3 ç§’ï¼Œå¦‚æœæ˜¯æˆ‘ï¼Œæ•Œäººæ—©å°±å‡‰é€äº†ï¼Œé¡ºä¾¿è¿˜èƒ½æ³¡æ¯çº¢èŒ¶ã€‚â€",
            speaker: "Simon 'Ghost' Riley",
            type: "dialogue",
            condition: s => s.chars.ghost.dating,
            options: [
                {
                    text: "ç¬‘ç€å“„ä»–ï¼šâ€œå½“ç„¶ï¼Œæ²¡äººæ¯”å¾—ä¸Šä½ ã€‚â€",
                    desc: "ç»™é¡ºæ¯›é¡ºæ¯›",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("Ghost çš„è„¸è‰²ç¼“å’Œäº†ä¸€äº›ï¼ŒæŠŠä½ æ‹‰è¿›æ€€é‡Œã€‚\nâ€œåˆ«æ‹¿é‚£äº›æ¬¡å“è·Ÿæˆ‘æ¯”ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–æ€ä¹ˆæœ‰æ—¶å€™å’ŒçŒ«ä¸€æ ·..."
                },
                {
                    text: "ç»§ç»­å¤¸åˆ«äººï¼šâ€œä½†ä»–è¿˜å¹´è½»å˜›ï¼Œå¾ˆæœ‰æ½œåŠ›ã€‚â€",
                    desc: "ç«ä¸Šæµ‡æ²¹",
                    effect: s => {
                        // å¹¶æ²¡æœ‰çœŸçš„æ‰£å¥½æ„Ÿï¼Œåªæ˜¯è§¦å‘ç‰¹æ®Šååº”
                        printMsg("Ghost ç«™èµ·èº«ï¼Œç›´æ¥æŠŠä½ æ‰›äº†èµ·æ¥èµ°å‘åå±‹ã€‚\nâ€œçœ‹æ¥æˆ‘éœ€è¦ç»™ä½ å±•ç¤ºä¸€ä¸‹ä»€ä¹ˆå«çœŸæ­£çš„æ½œåŠ›å’Œè€åŠ›ï¼ŒMa'amã€‚â€", 'event');
                        s.ap = Math.max(0, s.ap - 1);
                    },
                    result: "ä½ ä¸ºä½ çš„å˜´ç¡¬ä»˜å‡ºäº†è…°é…¸èƒŒç—›çš„ä»£ä»·ã€‚"
                }
            ]
        }, // <--- é€—å·


// 1. ä¸æ˜ç¤¼ç‰©
        ghost_jealous_gift: {
            text: "Ghost ç›¯ç€æŸœå°ä¸Šé‚£æŸä¸çŸ¥åé‡èŠ±çœ‹äº†å¾ˆä¹…ï¼Œé‚£æ˜¯åˆšæ‰ä¸€ä¸ªæµæµªå•†è´©ä¸ºäº†è®¨å¥½ä½ ç•™ä¸‹çš„ã€‚\nâ€œæ¥æºä¸æ˜çš„æ¤ç‰©ã€‚â€ Ghost çš„å£°éŸ³å¬ä¸å‡ºæƒ…ç»ªï¼Œä½†ä»–æˆ´ç€æ‰‹å¥—çš„æ‰‹æŒ‡ç²—æš´åœ°æ‹¨å¼„äº†ä¸€ä¸‹èŠ±ç“£ï¼Œâ€œå¯èƒ½å«æœ‰è¿‡æ•åŸï¼Œæˆ–è€…ç¥ç»æ¯’ç´ ã€‚å»ºè®®ç«‹å³é”€æ¯ã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            // åªæœ‰å¥½æ„Ÿåº¦é«˜äº†æ‰ä¼šç®¡è¿™äº›é—²äº‹
            condition: s => s.chars.ghost.aff > 60, 
            options: [
                {
                    text: "å¬å‡ºä»–çš„è¨€å¤–ä¹‹æ„ï¼ŒæŠŠèŠ±æ‰”äº†",
                    desc: "é¡ºç€ä»–çš„æ¯›æ‘¸",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        printMsg("Ghost çœ‹ç€èŠ±è¿›äº†åƒåœ¾æ¡¶ï¼Œç´§ç»·çš„è‚©è†€æ˜æ˜¾æ”¾æ¾äº†ã€‚\nâ€œæ˜æ™ºçš„é€‰æ‹©ã€‚å¦‚æœä½ å–œæ¬¢æ¤ç‰©... ä¸‹æ¬¡æˆ‘å»åŒ—åŒºå‡ºä»»åŠ¡ç»™ä½ å¸¦é‚£ç§æ— æ¯’çš„ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–æ‰€è°“çš„â€œæ— æ¯’æ¤ç‰©â€å¯èƒ½æ˜¯ä¸€æ ªä»™äººæŒï¼Œä½†é‚£æ˜¯ä»–é€çš„ã€‚"
                },
                {
                    text: "æ•…æ„é€—ä»–ï¼šâ€œå¯æ˜¯é‚£ä¸ªå•†è´©å¾ˆå¸…æ°”è¯¶â€",
                    desc: "è¯•å›¾è®©ä»–ç ´é˜²",
                    effect: s => {
                        s.chars.ghost.aff -= 2;
                        printMsg("Ghost é™·å…¥äº†è¯¡å¼‚çš„æ²‰é»˜ï¼Œä»–å†·å“¼ä¸€å£°ï¼Œè½¬èº«å»æ£€æŸ¥é—¨çª—é”æ‰£ã€‚\nâ€œè‚¤æµ…ï¼Œçœ‹æ¥ä½ éœ€è¦é‡æ–°è¿›è¡Œè§†åŠ›æµ‹è¯•ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ç©ºæ°”é‡Œå¼¥æ¼«ç€ä¸€è‚¡é™ˆå¹´è€é†‹çš„å‘³é“ã€‚"
                }
            ]
        },

// 2. æ­»äº¡å‡è§†
        ghost_jealous_stare: {
            text: "ä¸€åä½£å…µåœ¨ç»“è´¦æ—¶æŠ“ç€ä½ çš„æ‰‹ä¸æ”¾ï¼Œæ²¹å˜´æ»‘èˆŒåœ°æƒ³çº¦ä½ å–é…’ï¼Œä½ æ­£æƒ³æŠ½å›æ‰‹ï¼Œçªç„¶æ„Ÿè§‰èƒŒåçš„æ¸©åº¦é™åˆ°äº†å†°ç‚¹ã€‚\nGhost æ­£ååœ¨è§’è½çš„é˜´å½±é‡Œã€‚",
            speaker: "System",
            type: "event",
            condition: s => s.chars.ghost.dating, // æ‹çˆ±åè§¦å‘æ›´æœ‰å¼ åŠ›
            options: [
                {
                    text: "åæ¡ä½ä½£å…µçš„æ‰‹ï¼Œç¬‘ç€æ‹’ç»",
                    desc: "è‡ªå·±è§£å†³ï¼Œä¸è®©ä»–æ‹…å¿ƒ",
                    effect: s => {
                        s.chars.ghost.aff += 3; 
                        // è™½ç„¶ä½ è§£å†³äº†ï¼Œä½†ä»–è¿˜æ˜¯ä¸çˆ½é‚£ä¸ªç”·çš„ç¢°ä½ 
                    },
                    result: "ä½£å…µæ„Ÿè§‰åˆ°äº†æ€æ°”ï¼Œå›å¤´çœ‹äº†ä¸€çœ¼ Ghostï¼Œå“å¾—è„¸è‰²æƒ¨ç™½ï¼Œæ‰”ä¸‹é’±å°±è·‘äº†ã€‚\nGhost ï¼šâ€œè·‘å¾—æŒºå¿«ï¼Œç®—ä»–èµ°è¿ã€‚â€"
                },
                {
                    text: "çœ‹å‘ Ghost æ±‚åŠ©",
                    desc: "æ”¾ç‹—ï¼ˆåˆ’æ‰ï¼‰æ”¾å¹½çµï¼",
                    effect: s => {
                        s.chars.ghost.aff += 8;
                        printMsg("Ghost ç”šè‡³æ²¡æœ‰ç«™èµ·æ¥ï¼Œåªæ˜¯æŠ¬äº†æŠ¬çœ¼çš®ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "é‚£ä¸ªä½£å…µå·®ç‚¹å°¿è£¤å­ï¼Œå‘èª“å†ä¹Ÿä¸æ•¢æ¥äº†ã€‚"
                }
            ]
        },
      // 3. è‚¥çš‚çš„ç¬‘è¯
        ghost_jealous_soap: {
            text: "ä½ æ­£åœ¨æ— çº¿ç”µé¢‘é“é‡Œå’Œ Soap èŠå¤©ï¼Œè¢«ä»–è®²çš„è‹æ ¼å…°ç¬‘è¯é€—å¾—å“ˆå“ˆå¤§ç¬‘ã€‚\nGhost èµ°è¿›åº—é‡Œï¼Œå¬åˆ° Soap çš„å£°éŸ³ååŠ¨ä½œåœé¡¿äº†ä¸€ä¸‹ã€‚ä»–æŠŠè£…å¤‡é‡é‡åœ°æ‰”åœ¨æ¡Œä¸Šï¼Œå‘å‡ºçš„å·¨å“æ‰“æ–­äº†ä½ çš„ç¬‘å£°ã€‚\nâ€œæ— çº¿ç”µæ˜¯ç”¨æ¥äº¤æ¢æƒ…æŠ¥çš„ï¼Œä¸æ˜¯ç”¨æ¥å¬ Johnny è®²åºŸè¯çš„ã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            condition: s => s.chars.ghost.aff > 80,
            options: [
                {
                    text: "è¿˜åœ¨ç¬‘ï¼šâ€œä½†ä»–çœŸçš„å¾ˆå¹½é»˜å•Šâ€",
                    desc: "ä¸çŸ¥æ­»æ´»åœ°å¤¸åˆ«äºº",
                    effect: s => {
                        s.chars.ghost.aff -= 5;
                        printMsg("Ghost ç›´æ¥ä¼¸æ‰‹åˆ‡æ–­äº†ä½ çš„æ— çº¿ç”µç”µæºã€‚\nâ€œå¹½é»˜æ•‘ä¸äº†å‘½ï¼Œä¿æŒä¸“æ³¨ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–ä¸€æ•´æ™šéƒ½æ¿ç€è„¸ï¼Œç›´åˆ°ä½ ç»™ä»–å€’äº†ä¸€æ¯èŒ¶ã€‚"
                },
                {
                    text: "ç«‹åˆ»å…³æ‰æ— çº¿ç”µï¼Œä¸“æ³¨äºä»–",
                    desc: "â€œä½ æ‰æ˜¯æœ€é‡è¦çš„â€",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // å¿ƒæƒ…å¥½æ¢å¤ç²¾åŠ›
                        printMsg("Ghost é¢ç½©ä¸‹çš„ç¥æƒ…èˆ’å±•äº†ä¸€äº›ã€‚â€œæˆ‘ä¹Ÿæœ‰äº›... æƒ…æŠ¥ï¼Œå…³äºä½ çš„å®‰å…¨ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä»–å…¶å®æ²¡ä»€ä¹ˆæ­£ç»æƒ…æŠ¥ï¼Œåªæ˜¯æƒ³å’Œä½ ç‹¬å¤„ä¸€ä¼šå„¿ï¼Œä½†ä»–ç»ä¸ä¼šæ‰¿è®¤çš„ã€‚"
                }
            ]
        },

        konig_jealous: {
            text: "KÃ¶nig ååœ¨è§’è½é‡Œç¼©æˆä¸€å›¢ï¼Œæƒ…ç»ªæ˜æ˜¾å¾ˆä½è½ã€‚å½“ä½ èµ°è¿‘æ—¶ï¼Œä»–æŠŠå¤´åŸ‹å¾—æ›´ä½äº†ã€‚\nâ€œä½ ... ä½ æœ€è¿‘æ€»æ˜¯å¯¹é‚£äº› 141 çš„å®¶ä¼™ç¬‘... æˆ‘æ˜¯ä¸æ˜¯å¤ªæ— è¶£äº†ï¼Ÿæˆ‘å¯¹ä½ æ¥è¯´åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿâ€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "ç«‹åˆ»æŠ±ä½ä»–å®‰æ…°",
                    desc: "ä»–éœ€è¦å¤§é‡çš„è‚¯å®š",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        printMsg("KÃ¶nig çŒ›åœ°æŠ±ç´§ä½ ï¼ŒæŠŠå¤´åŸ‹åœ¨ä½ çš„é¢ˆçªã€‚â€œåˆ«ç¦»å¼€æˆ‘... æ±‚ä½ äº†ï¼Œåˆ«çœ‹åˆ«äººã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä½ èŠ±äº†åŠå°æ—¶æ‰è®©ä»–ç›¸ä¿¡ä»–æ˜¯ä½ æœ€å–œæ¬¢çš„ã€‚"
                },
                {
                    text: "ç†æ€§è§£é‡Šåªæ˜¯ç”Ÿæ„",
                    desc: "å¯èƒ½æ•ˆæœä¸€èˆ¬",
                    effect: s => {
                        s.chars.konig.aff -= 2;
                    },
                    result: "â€œâ€œå“¦... ç”Ÿæ„ï¼Œå¯¹ï¼Œç”Ÿæ„é‡è¦ã€‚â€ ä»–çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆéš¾è¿‡ï¼Œåƒåªè¢«é›¨æ·‹æ¹¿çš„å¤§ç‹—ã€‚"
                }
            ]
        },
// === ğŸŸ¢ æ–°å¢ KÃ¶nig åƒé†‹äº‹ä»¶ (å·²æ·»åŠ é”®å) ===

        // 1. ç¬¨æ‹™çš„ç«ä»·
        konig_jealous_gift: {
            text: "ä½ æ­£æ‹¿ç€åˆšæ‰ä¸€ä½è€é¡¾å®¢é€çš„é»„æ¡ƒç½å¤´ç«¯è¯¦ï¼ŒKÃ¶nig åƒå µå¢™ä¸€æ ·ç«™åœ¨ä½ èº«åï¼Œæ­»æ­»ç›¯ç€é‚£ä¸ªç½å¤´ï¼Œå‘¼å¸å£°é€è¿‡é¢ç½©å¬èµ·æ¥æœ‰äº›æ€¥ä¿ƒã€‚\nâ€œé‚£ä¸ª... å¾ˆç”œå—ï¼Ÿæ¯”æˆ‘ç»™ä½ çš„è¿˜å¥½å—ï¼Ÿâ€\nçªç„¶ï¼Œä»–æŠŠèƒŒåŒ…é‡Œçš„ä¸œè¥¿ä¸€è‚¡è„‘å…¨å€’åœ¨æŸœå°ä¸Šâ€”â€”æˆå †çš„å†›ç”¨å£ç²®ã€å·§å…‹åŠ›ï¼Œç”šè‡³è¿˜æœ‰å‡ ä¸ªä¸çŸ¥å“ªé‡Œæœåˆ®æ¥çš„é‡‘æˆ’æŒ‡ã€‚\nâ€œéƒ½ç»™ä½ ï¼åˆ«... åˆ«è¦ä»–çš„ä¸œè¥¿ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.aff > 60,
            options: [
                {
                    text: "æ‘¸æ‘¸ä»–çš„å¤´ï¼Œæ”¶ä¸‹å¿ƒæ„",
                    desc: "å®‰æŠšè¿™åªç„¦è™‘çš„å¤§ç‹—",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        s.food += 5; 
                        printMsg("KÃ¶nig çš„è‚©è†€å¡Œäº†ä¸‹æ¥ï¼Œä¼¼ä¹åˆšæ‰ç”¨å°½äº†å…¨èº«çš„å‹‡æ°”ã€‚\nâ€œåªè¦ä½ éœ€è¦... æˆ‘ä»€ä¹ˆéƒ½èƒ½å¼„æ¥ï¼Œæˆ‘æ˜¯æœ€æœ‰ç”¨çš„... å¯¹å§ï¼Ÿâ€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ä¸ä»…ç»™äº†ä½ ç‰©èµ„ï¼Œè¿˜æŠŠé‚£ä¸ªé»„æ¡ƒç½å¤´å·å·è—åˆ°äº†è´§æ¶æœ€é‡Œé¢ï¼Œä¸æƒ³è®©ä½ çœ‹è§ã€‚"
                },
                {
                    text: "æŠŠä¸œè¥¿æ¨å›å»ï¼šâ€œå¤ªå¤šäº†ï¼Œæˆ‘ä¸èƒ½æ”¶â€",
                    desc: "è¿™ä¼šè®©ä»–è§‰å¾—è‡ªå·±è¢«æ‹’ç»äº†",
                    effect: s => {
                        s.chars.konig.aff -= 5;
                        printMsg("KÃ¶nig çš„çœ¼ç¥ç¬é—´é»¯æ·¡äº†ï¼Œæ‰‹è¶³æ— æªåœ°ç«™åœ¨åŸåœ°ï¼Œåƒä¸ªåšé”™äº‹çš„å­©å­ã€‚\nâ€œå¯¹ã€å¯¹ä¸èµ·... æˆ‘åªæ˜¯...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–å¤±è½åœ°æŠŠä¸œè¥¿æ”¶å›å»ï¼Œä¸€æ•´å¤©éƒ½ç¼©åœ¨è§’è½é‡Œç”»åœˆåœˆã€‚"
                }
            ]
        }, // <--- è®°å¾—è¦æœ‰é€—å·

        // 2. ç‰©ç†å±éšœ
        konig_jealous_guard: {
            text: "ä»Šå¤©åº—é‡Œå¼‚å¸¸æ‹¥æŒ¤ï¼Œä¸€åç”·é¡¾å®¢ä¸ºäº†çœ‹æ¸…è´§æ¶ï¼Œèº«ä½“å‡ ä¹è´´åˆ°äº†ä½ çš„åèƒŒã€‚\nè¿˜æ²¡ç­‰ä½ æ„Ÿåˆ°ä¸é€‚ï¼Œä¸€åªå·¨å¤§çš„æ‰‹æŒçªç„¶ä¼¸è¿‡æ¥ï¼ŒæŠŠä½ è½»è½»æ‹‰åˆ°äº†åé¢ã€‚\nKÃ¶nig æŒ¤è¿›äº†ä½ å’Œé‚£ä¸ªé¡¾å®¢ä¹‹é—´ï¼Œå‡­å€Ÿä¸¤ç±³å¤šçš„èº«é«˜å’Œå…¨å‰¯æ­¦è£…çš„å®½åº¦ï¼Œä»–åƒåº§å±±ä¸€æ ·å½»åº•æŒ¡ä½äº†é‚£ä¸ªç”·äººçš„è§†çº¿ã€‚\nä¿æŒè·ç¦»ã€‚â€ ä»–ä½å¤´çœ‹ç€é‚£ä¸ªç”·äººï¼Œè¯­æ°”ç”Ÿç¡¬ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating, 
            options: [
                {
                    text: "èº²åœ¨ä»–èº«åæŠ“ç€ä»–çš„è¡£è§’",
                    desc: "ä¾èµ–ä»–",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("æ„Ÿè§‰åˆ°ä½ çš„åŠ¨ä½œï¼ŒKÃ¶nig çš„èƒŒè„Šåƒµç¡¬äº†ä¸€ä¸‹ç„¶åæŒºå¾—æ›´ç›´äº†ï¼Œä»–å¾ˆäº«å—è¿™ç§è¢«ä½ å½“ä½œâ€˜ä¿æŠ¤ä¼â€™çš„æ„Ÿè§‰ã€‚", 'event');
                    },
                    result: "é‚£ä¸ªé¡¾å®¢è¢«ä»–å“å¾—è¿è¿åé€€ï¼ŒKÃ¶nig è½¬è¿‡èº«ï¼Œå°å¿ƒç¿¼ç¿¼åœ°é—®ä½ ï¼šâ€œæ²¡è¢«ç¢°åˆ°å§ï¼Ÿâ€"
                },
                {
                    text: "æ‹æ‹ä»–çš„èƒŒç¤ºæ„æ²¡äº‹",
                    desc: "è®©ä»–æ”¾æ¾ç‚¹",
                    effect: s => {
                        s.chars.konig.aff += 2;
                    },
                    result: "â€œè¿™åœ°æ–¹åäººå¤ªå¤šäº†ã€‚â€ ä»–å˜Ÿå›”ç€ï¼Œè™½ç„¶è®©å¼€äº†è·¯ï¼Œä½†ä¾ç„¶åƒä¸ªé—¨ç¥ä¸€æ ·å®ˆåœ¨ä½ æ—è¾¹å¯¸æ­¥ä¸ç¦»ã€‚"
                }
            ]
        }, // <--- è®°å¾—è¦æœ‰é€—å·

// [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæ›´è¡£å®¤çš„é»˜è®¸
        konig_jealous_accept: {
            text: "ä½ æ¨å¼€åå±‹çš„é—¨ï¼Œæ­£å¥½æ’è§ KÃ¶nig åœ¨æ¢æˆ˜æœ¯å†…è¡¬ã€‚ä»–èµ¤è£¸ç€ä¸Šèº«ï¼Œå®½é˜”å¾—åƒå µå¢™ä¸€æ ·çš„åèƒŒä¸Šå¸ƒæ»¡äº†å„ç§é™ˆæ—§çš„ä¼¤ç–¤ã€‚\nå¬åˆ°å£°éŸ³ï¼Œä»–è½¬è¿‡èº«ã€‚è¿™æ¬¡ä»–æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·æƒŠæ…Œåœ°é®æŒ¡ï¼Œè€Œæ˜¯çœ¼ç¥å¹½æ·±åœ°çœ‹ç€ä½ ï¼Œç”šè‡³å‘ä½ èµ°è¿‘äº†ä¸€æ­¥ï¼Œå°†ä½ é€¼é€€åˆ°é—¨æ¿ä¸Šã€‚\nâ€œ...æˆ‘æ²¡é”é—¨ï¼Œå› ä¸ºæˆ‘çŸ¥é“æ˜¯ä½ ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating && s.chars.konig.aff > 100,
            options: [
                {
                    text: "æŒ‡å°–åˆ’è¿‡ä»–çš„è…¹è‚Œ",
                    desc: "æ„Ÿå—ä»–çš„ç´§ç»·",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("ä½ èƒ½æ„Ÿè§‰è‡ªå·±çš„æ‰‹æŒ‡æ‰€åˆ°ä¹‹å¤„ä»–çš„è‚Œè‚‰éƒ½åœ¨å‰§çƒˆæ”¶ç¼©ï¼ŒKÃ¶nig å‘¼å¸æœ‰äº›æ€¥ä¿ƒã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ç‹­å°çš„æ›´è¡£å®¤é‡Œï¼Œæ¸©åº¦å‡é«˜å¾—æœ‰ç‚¹è¿‡åˆ†äº†ã€‚"
                },
                {
                    text: "å¸®ä»–ç©¿ä¸Šè¡£æœ",
                    desc: "å•çº¯çš„æ•´ç†",
                    effect: s => {
                        s.chars.konig.aff += 2;
                    },
                    result: "ä»–çœ‹èµ·æ¥æœ‰ç‚¹å¤±æœ›ï¼Œä½†è¿˜æ˜¯ä¹–ä¹–ä»»ç”±ä½ æ‘†å¸ƒã€‚â€œ...å“¼ï¼Œä¸‹æ¬¡ã€‚â€"
                }
            ]
        }, // <--- é€—å·

        // [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæŸœå°ä¸Šçš„ä»°è§† (ä½“ä½å·®)
        konig_jealous_looking: {
            text: "KÃ¶nig ä¼¼ä¹åŒå€¦äº†æ€»æ˜¯ä½å¤´çœ‹ä½ ï¼Œä»–çªç„¶åŒæ‰‹æä½ä½ çš„è…°ï¼Œæ¯«ä¸è´¹åŠ›åœ°å°†ä½ ä¸¾èµ·æ¥æ”¾åœ¨äº†æ”¶é“¶å°ä¸Šã€‚\nä»–é«˜å¤§çš„èº«èº¯å¸¦æ¥äº†æå¼ºçš„å‹è¿«æ„Ÿï¼Œæ­¤åˆ»ä»–ç»ˆäºèƒ½å’Œä½ å¹³è§†ï¼Œç”šè‡³éœ€è¦å¾®å¾®ä»°å¤´ã€‚\nâ€œè¿™æ ·... æ›´å¥½ã€‚â€ ä»–éš”ç€é¢ç½©è¹­ç€ä½ çš„é¢ˆçªï¼Œâ€œç°åœ¨ï¼Œæˆ‘æ˜¯ä½ çš„ä¿˜è™äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            condition: s => s.chars.konig.dating,
            options: [
                {
                    text: "åŒè…¿å‹¾ä½ä»–çš„è…°",
                    desc: "æ‹‰è¿‘è·ç¦»",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        printMsg("KÃ¶nig å‘å‡ºä¸€å£°æ»¡è¶³çš„å¹æ¯ï¼ŒæŠŠå¤´åŸ‹è¿›ä½ çš„èƒ¸å£æ·±æ·±å¸æ°”ï¼Œé‚£æ˜¯å±äºä»–çš„å‘³é“ã€‚\nâ€œæˆ‘æƒ³æŠŠä½ è—è¿›æˆ‘çš„èº«ä½“é‡Œ... è¿™æ ·å°±æ²¡äººèƒ½æŠ¢èµ°ä½ äº†ã€‚â€", 'event');
                    },
                    result: "è¿™ä¸ªå§¿åŠ¿æå…¶æš§æ˜§ï¼Œåªè¦æœ‰å®¢äººè¿›æ¥å°±èƒ½çœ‹åˆ°è¿™ä¸€å¹•ï¼Œä½†è¿™åè€Œè®©ä»–æ›´å…´å¥‹ã€‚"
                },
                {
                    text: "æ§ç€ä»–çš„è„¸æ­å¼€é¢ç½©",
                    desc: "ç´¢å»",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.ap = 0; // äº²å¾—å¤ªä¹…è€—å°½ä½“åŠ›
                    },
                    result: "ä»–é¡ºä»ä¸”æ»¡æ„çš„å»äº†ä½ å¾ˆä¹…ã€‚"
                }
            ]
        }, // <--- é€—å·

        // [KÃ¶nig] æ‹çˆ±æ—¥å¸¸ï¼šæˆ˜æœ¯ä¼ªè£… (æ¶‚æŠ¹)
        konig_jealous_wape: {
            text: "KÃ¶nig æ­£åœ¨å¾€æ‰‹è‡‚ä¸Šæ¶‚æŠ¹æˆ˜æœ¯è¿·å½©æ²¹å½©ï¼Œçœ‹åˆ°ä½ ç›¯ç€ä»–æ—¶ï¼Œä»–çªç„¶åœä¸‹åŠ¨ä½œï¼Œç”¨æ²¾æ»¡æ²¹å½©çš„æ‹‡æŒ‡æŒ‰äº†æŒ‰ä½ çš„å˜´å”‡ã€‚\nâ€œä½ ä¹Ÿéœ€è¦ä¼ªè£…...â€ ä»–çš„å£°éŸ³æ²™å“‘ï¼Œçœ¼ç¥å˜å¾—ç²˜ç¨ ï¼Œâ€œè®©æˆ‘æŠŠä½ æŸ“æˆæˆ‘çš„é¢œè‰²ã€‚â€\nä»–ä¸¾èµ·æ‰‹ä¸­çš„æ²¹å½©ç›˜ï¼Œä½†è¿™æ˜¾ç„¶ä¸æ˜¯ä¸ºäº†æ­£ç»çš„æˆ˜æœ¯ç›®çš„ã€‚",
            speaker: "KÃ¶nig",
            type: "event",
            condition: s => s.chars.konig.dating,
            options: [
                {
                    text: "åŒæ„ï¼šâ€œæ¶‚åœ¨...â€",
                    desc: "ç§å¯†çš„æ ‡è®°",
                    effect: s => {
                        s.chars.konig.aff += 6;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("KÃ¶nig çš„æ‰‹æ¢å…¥äº†ä½ çš„è¡£é¢†ï¼Œå†°å‡‰çš„æ²¹å½©å’Œæ»šçƒ«çš„æŒ‡è…¹åœ¨é”éª¨å’Œæ›´æ·±å¤„ç•™ä¸‹äº†ç—•è¿¹ã€‚\nâ€œè¿™é‡Œ... è¿˜æœ‰è¿™é‡Œ... éƒ½æ˜¯æˆ‘çš„ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "å³ä½¿ç©¿å¥½è¡£æœï¼Œä½ ä¹Ÿèƒ½æ„Ÿè§‰åˆ°é‚£äº›æ²¹å½©è´´åœ¨çš®è‚¤ä¸Šçš„è§¦æ„Ÿåƒæ˜¯ä¸€ç§æ— å£°çš„å æœ‰ã€‚"
                },
                {
                    text: "æ‹’ç»ï¼šâ€œä¼šå¼„è„è¡£æœçš„ï¼â€",
                    desc: "è¯•å›¾é€ƒè·‘",
                    result: "KÃ¶nig å§”å±ˆåœ°å‚ä¸‹å¤´ï¼ŒæŠŠä½ å˜´å”‡ä¸Šé‚£ç‚¹æ²¹å½©å»å¹²å‡€äº†ã€‚â€œå°æ°”çš„ {PLAYER}  ã€‚â€"
                }
            ]
        }, // <--- é€—å·

        // 3. åˆ¶é€ å™ªéŸ³
        konig_jealous_noise: {
            text: "ä½ æ­£å’Œä¸€åé£è¶£çš„ TF141 é˜Ÿå‘˜èŠå¤©ï¼Œç¬‘å£°ä¸æ–­ã€‚KÃ¶nig ååœ¨è§’è½çš„å¼¹è¯ç®±ä¸Šï¼Œæ‰‹é‡Œæç€ä¸€ä¸ªç©ºçš„æ˜“æ‹‰ç½ã€‚\n*å’”å§â€”â€”* æ˜“æ‹‰ç½è¢«ææ‰äº†ã€‚\nè¿‡äº†ä¸€ä¼šï¼Œä»–åˆæ‹¿èµ·ä¸€ä¸ªï¼Œ*å’”å§â€”â€”* åˆææ‰äº†ã€‚\nå½“ä½ èŠå¾—æ­£å¼€å¿ƒæ—¶ï¼Œè§’è½é‡Œä¼ æ¥äº†å·¨å¤§çš„ã€ä¸”æå…¶åˆ»æ„çš„æ’å‡»å£°â€”â€”KÃ¶nig â€œä¸å°å¿ƒâ€ æŠŠä¸€æ•´ç®±ç©ºå¼¹å£³è¸¢ç¿»äº†ã€‚",
            speaker: "System",
            type: "event",
            condition: s => s.chars.konig.aff > 50,
            options: [
                {
                    text: "ç«‹åˆ»è¿‡å»æŸ¥çœ‹ï¼šâ€œKÃ¶nigï¼Œæ€ä¹ˆäº†ï¼Ÿâ€",
                    desc: "å“ªæ€•çŸ¥é“ä»–æ˜¯è£…çš„ä¹Ÿå»å…³å¿ƒ",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("KÃ¶nig æ…Œä¹±åœ°è¹²åœ¨åœ°ä¸Šæ¡å¼¹å£³ï¼Œé¢ç½©ä¸‹çš„è„¸æ¶¨å¾—é€šçº¢ã€‚\nâ€œæ²¡ã€æ²¡ä»€ä¹ˆï¼æ‰‹æ»‘äº†... ä½ ã€ä½ å¯ä»¥ç»§ç»­èŠ... ä¸ç”¨ç®¡æˆ‘... (å·çœ‹ä½ )â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–æ˜¾ç„¶æ˜¯æ•…æ„çš„ï¼Œå½“ä½ èµ°åˆ°ä»–èº«è¾¹æ—¶ï¼Œä»–å¼€å¿ƒåœ°è¹­äº†è¹­ä½ çš„æ‰‹èƒŒï¼Œé‚£ä¸ª TF141 é˜Ÿå‘˜è¯†è¶£åœ°èµ°äº†ã€‚"
                },
                {
                    text: "è´£å¤‡ä»–ï¼šâ€œå°å¿ƒç‚¹ï¼â€ç„¶åç»§ç»­èŠ",
                    desc: "è¿™ä¼šè®©ä»–å¿ƒç¢",
                    effect: s => {
                        s.chars.konig.aff -= 0;
                        printMsg("KÃ¶nig åƒµä½äº†ï¼Œä»–é»˜é»˜åœ°æ”¶æ‹¾å¥½åœ°ä¸Šçš„ä¸œè¥¿ï¼Œé‡æ–°ç¼©å›é˜´å½±é‡Œï¼Œåƒä¸€åªè¢«ä¸»äººè¸¢äº†ä¸€è„šçš„æµæµªç‹—ã€‚", 'system');
                    },
                    result: "å³ä½¿ä½ åæ¥æƒ³å’Œä»–è¯´è¯ï¼Œä»–ä¹Ÿåªæ˜¯ç‚¹å¤´æˆ–æ‘‡å¤´ï¼Œç”šè‡³ä¸æ•¢çœ‹ä½ çš„çœ¼ç›ã€‚"
                }
            ]
        }, // <--- æœ€åä¸€ä¸ªå¦‚æœåé¢è¿˜æœ‰ä»£ç ä¹Ÿè¦é€—å·

        krueger_jealous_knife: {
            text: "Krueger çªç„¶æŠ“ä½ä½ çš„æ‰‹è…•ï¼ŒæŠŠä½ æ‹‰åˆ°é¢å‰ï¼Œä»–çš„å¦ä¸€åªæ‰‹ç©å¼„ç€ä¸€æŠŠåŒ•é¦–ï¼Œç›®å…‰å†·å†·çš„çœ‹ç€ä½ ã€‚\nâ€œåˆšæ‰é‚£ä¸ªå¯¹ä½ å¹å£å“¨çš„æ··è›‹... ä½ æƒ³è¦ä»–çš„èˆŒå¤´ï¼Œè¿˜æ˜¯æ‰‹æŒ‡ï¼Ÿåšä¸ªé€‰æ‹©ï¼Œæˆ–è€…æˆ‘ä¸¤ä¸ªéƒ½å–æ¥ã€‚â€",
            speaker: "Krueger",
            type: "alert",
            options: [
                {
                    text: "ä¸¥è‚ƒåœ°åˆ¶æ­¢ä»–",
                    desc: "ä¸èƒ½è®©ä»–ä¹±æ¥",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                        printMsg("Krueger çœ¯èµ·çœ¼ç›ç›¯ç€ä½ çœ‹äº†å¾ˆä¹…ï¼Œæœ€ç»ˆæ”¶èµ·äº†åˆ€ã€‚â€œ...å“¼ï¼Œä¸‹æ¬¡æˆ‘ä¸ä¼šå†é—®ä½ ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "å±æœºè§£é™¤äº†ï¼Œä½†ä»–æå¼ºçš„å æœ‰æ¬²è®©ä½ æ—¢å¿ƒæƒŠåˆå¿ƒåŠ¨ã€‚"
                },
                {
                    text: "è¡¨ç¤ºä½ åªåœ¨ä¹ä»–",
                    desc: "ç”¨çˆ±å®‰æŠšé‡å…½",
                    effect: s => {
                        s.chars.krueger.aff += 8;
                    },
                    result: "â€œè¯æ˜ç»™æˆ‘çœ‹ã€‚â€ ä»–ç²—æš´åœ°å»äº†ä¸Šæ¥ï¼Œå®Œå…¨æ— è§†äº†å‘¨å›´çš„ç¯å¢ƒã€‚"
                }
            ]
        },
// === ğŸŸ¢ æ–°å¢ Krueger åƒé†‹äº‹ä»¶ (å·²æ·»åŠ é”®å) ===

        // 1. åˆ€é”‹è­¦å‘Š (ç‰©ç†éš”æ–­)
        krueger_jealous_knife2: {
            text: "ä¸€åæ²¹å¤´ç²‰é¢çš„é»‘å¸‚å•†è´©æ­£è¶´åœ¨æŸœå°ä¸Šï¼Œè¯•å›¾è¶Šè¿‡å®‰å…¨è·ç¦»å»æ‘¸ä½ çš„æ‰‹ï¼šâ€œæ¼‚äº®çš„å°å§ï¼Œè¿™åŒæ‰‹å¯ä¸è¯¥ç”¨æ¥æ¬ç®±å­...â€\nçªç„¶ï¼Œ*å“†ï¼* ä¸€å£°å·¨å“ã€‚\nä¸€æŠŠé”‹åˆ©çš„åº“å…‹é‡Œå¼¯åˆ€ç‹ ç‹ æ‰è¿›äº†å•†è´©æ‰‹æŒ‡ç¼éš™é—´çš„æœ¨æ¿é‡Œï¼Œåˆ€èº«è¿˜åœ¨å—¡å—¡éœ‡åŠ¨ã€‚\nKrueger åƒå¹½çµä¸€æ ·å‡ºç°åœ¨å•†è´©èº«åï¼Œå£°éŸ³å˜¶å“‘ä½æ²‰ï¼šâ€œå†å¾€å‰ä¸€å¯¸ï¼Œä½ çš„æ‰‹æŒ‡å°±å½’æˆ‘äº†ã€‚â€",
            speaker: "Krueger",
            type: "alert",
            condition: s => s.chars.krueger.aff > 60,
            options: [
                {
                    text: "æ·¡å®šåœ°æŠŠåˆ€æ‹”å‡ºæ¥è¿˜ç»™ä»–",
                    desc: "é»˜å¥‘é…åˆ",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("å•†è´©æƒ¨å«ç€é€ƒè·‘äº†ã€‚Krueger æ¥è¿‡åˆ€ï¼Œç”¨æ‹‡æŒ‡æ‘©æŒ²ç€åˆ€åˆƒï¼Œçœ¼ç¥é˜´å†·åœ°ç›¯ç€é‚£äººçš„èƒŒå½±ã€‚\nâ€œä¸‹æ¬¡åˆ«è®©è¿™ç§åƒåœ¾é è¿™ä¹ˆè¿‘ã€‚è„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–åˆšæ‰é‚£ä¸€åˆ€ç»å¯¹æ˜¯ç®—å‡†äº†è·ç¦»çš„ï¼Œç²¾å‡†ä¸”è‡´å‘½ã€‚"
                },
                {
                    text: "è´£æ€ªä»–å“è·‘äº†å®¢äºº",
                    desc: "è™½ç„¶é‚£å®¢äººç¡®å®å¾ˆè®¨åŒ",
                    effect: s => {
                        s.chars.krueger.aff -= 2;
                        printMsg("Krueger å†·å“¼ä¸€å£°ï¼Œæ”¶åˆ€å…¥é˜ã€‚\nâ€œæ­»äººæ²¡æ³•åšç”Ÿæ„ã€‚ä½ åº”è¯¥åº†å¹¸ä»–è¿˜æ´»ç€ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–é åœ¨å¢™è§’ï¼Œä¸€æ•´å¤©éƒ½åœ¨ç”¨é‚£ç§è¦æŠŠäººå‰¥çš®çš„çœ¼ç¥å®¡è§†æ¯ä¸€ä¸ªè¿›æ¥çš„ç”·é¡¾å®¢ã€‚"
                }
            ]
        }, // <--- é€—å·

        // 2. æ°”å‘³æ ‡è®° (åŠ¨ç‰©èˆ¬çš„ç›´è§‰)
        krueger_jealous_scent: {
            text: "ä½ åˆšç»“æŸå’Œä¸€é˜Ÿé›‡ä½£å…µçš„åº”é…¬å›æ¥ï¼Œèº«ä¸Šæ²¾æŸ“äº†ä¸€äº›å»‰ä»·çš„çƒŸè‰å’Œå¤é¾™æ°´å‘³ã€‚\nKrueger çªç„¶æŠŠä½ æ‹‰åˆ°æ— äººçš„å‚¨è—å®¤ï¼ŒæŠŠä½ é€¼åœ¨å¢™è§’ï¼Œä»–å‡‘è¿‘ä½ çš„è„–é¢ˆæ·±å¸äº†ä¸€å£æ°”ï¼Œç„¶ååŒæ¶åœ°çš±èµ·çœ‰å¤´ã€‚\nâ€œå…¨æ˜¯åˆ«äººçš„è‡­å‘³... ä»¤äººä½œå‘•ã€‚â€",
            speaker: "Krueger",
            type: "event",
            condition: s => s.chars.krueger.dating, // æ‹çˆ±é™å®š
            options: [
                {
                    text: "ä»»ç”±ä»–æŠŠä½ æŠ±åœ¨æ€€é‡Œâ€œè¦†ç›–â€å‘³é“",
                    desc: "æ»¡è¶³ä»–çš„å æœ‰æ¬²",
                    effect: s => {
                        s.chars.krueger.aff += 8;
                        printMsg("ä»–æŠŠå¤´åŸ‹åœ¨ä½ çš„é¢ˆçªé‡Œè¹­äº†å¾ˆä¹…ï¼Œç›´åˆ°ä½ èº«ä¸Šåªå‰©ä¸‹ä»–çš„å‘³é“æ‰æ»¡æ„ã€‚\nâ€œå¥½äº†ã€‚ç°åœ¨ä½ æ˜¯å¹²å‡€çš„ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "è¿™æ˜¯ä¸€ç§æåº¦åŸå§‹ä¸”éœ¸é“çš„å®£ç¤ºä¸»æƒæ–¹å¼ã€‚"
                },
                {
                    text: "æ¨å¼€ä»–å»æ´—æ¾¡",
                    desc: "æ‹’ç»ä»–çš„äº²å¯†",
                    effect: s => {
                        s.chars.krueger.aff -= 5;
                    },
                    result: "â€œæ´—æ‰å®ƒï¼Œåˆ«è®©æˆ‘å†é—»åˆ°ã€‚â€ ä»–çƒ¦èºåœ°è¸¢äº†ä¸€è„šæ—è¾¹çš„ç®±å­ã€‚"
                }
            ]
        }, // <--- é€—å·

        // 3. çŒæ‰‹çš„æè®® (å±é™©çš„è§£å†³æ–¹å¼)
        krueger_jealous_prey: {
            text: "ä½ æåˆ°æœ€è¿‘æœ‰ä¸ªç‹‚çƒ­çš„è¿½æ±‚è€…ä¸€ç›´åœ¨éªšæ‰°ä½ ï¼Œç”šè‡³è·Ÿè¸ªåˆ°äº†åº—é™„è¿‘ã€‚\nKrueger å¬å®Œæ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯é»˜é»˜åœ°ä»è…¿è¢‹é‡Œæå‡ºäº†ä¸€å·é»‘è‰²èƒ¶å¸¦ã€ä¸€æŠŠåŒ•é¦–å’Œä¸€åŒæ–°æ‰‹å¥—ã€‚\nâ€œåå­—ã€‚æˆ–è€…é•¿ç›¸ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            condition: s => s.chars.krueger.aff > 80,
            options: [
                {
                    text: "åˆ¶æ­¢ä»–ï¼šâ€œåªè¦è­¦å‘Šä¸€ä¸‹å°±å¥½ï¼â€",
                    desc: "åˆ«é—¹å‡ºäººå‘½ï¼",
                    effect: s => {
                        s.chars.krueger.aff += 2;
                        printMsg("Krueger ä¼¼ä¹æœ‰äº›å¤±æœ›ï¼ŒæŠŠåˆ€æ”¶äº†èµ·æ¥ã€‚\nâ€œä»æ…ˆæœ‰æ—¶å€™æ˜¯ç§å¼±ç‚¹ï¼Œä½†ä»–ä¼šæ”¶åˆ°è­¦å‘Šçš„ï¼Œæˆ‘ä¿è¯ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ç¬¬äºŒå¤©ï¼Œé‚£ä¸ªè¿½æ±‚è€…é¼»é’è„¸è‚¿åœ°æ¥è·Ÿä½ é“æ­‰ï¼Œå‘èª“å†ä¹Ÿä¸æ•¢æ¥äº†ã€‚"
                },
                {
                    text: "é»˜è®¸ä»–çš„è¡Œä¸º",
                    desc: "é»‘åŒ–çš„é€‰æ‹© (å£°æœ›å˜åŠ¨)",
                    effect: s => {
                        s.chars.krueger.aff += 10;
                        s.rep_141 -= 5; // æ­£è§„å†›ä¸å–œæ¬¢è¿™ç§æ‰‹æ®µ
                        printMsg("Krueger éœ²å‡ºäº†ä¸€ä¸ªè«åçš„å¾®ç¬‘ï¼Œæˆ´ä¸Šäº†æ‰‹å¥—ã€‚\nâ€œGood girl...ç­‰æˆ‘çš„å¥½æ¶ˆæ¯ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "é‚£ä¸ªè¿½æ±‚è€…äººé—´è’¸å‘äº†ï¼Œå†ä¹Ÿæ²¡æœ‰äººè§è¿‡ä»–ã€‚Krueger å›æ¥æ—¶å¿ƒæƒ…å¥½æäº†ã€‚"
                }
            ]
        }, // <--- æœ€åä¸€ä¸ªå¦‚æœæ˜¯æ”¾åœ¨åˆ—è¡¨æœ«å°¾ï¼Œé€—å·å¯æœ‰å¯æ— ï¼Œä½†ä¸ºäº†ä¿é™©å»ºè®®åŠ ä¸Š

// === ğŸ”¥ ä¿®ç½—åœºï¼šå‘½è¿çš„åˆ†æ­§ç‚¹ ===
// === ğŸ”¥ åŠ¨æ€ä¿®ç½—åœºï¼šé€»è¾‘ä¼˜åŒ–ç‰ˆ ===
        cheating_exposed: {
            // å ä½ç¬¦ï¼Œä¼šè¢« onTrigger æ›¿æ¢
            text: "...", 
            speaker: "System",
            type: "alert",
            
            // ğŸŸ¢ åŠ¨æ€åˆå§‹åŒ–ï¼šè®¡ç®—è°åœ¨åœº
            onTrigger: (evt, s) => {
                // 1. æ‰¾å‡ºå½“å‰æ­£åœ¨è°ˆæ‹çˆ±çš„è§’è‰²
                const activeLovers = ['ghost', 'konig', 'krueger', 'keegan'].filter(k => s.chars[k].dating);
                // 2. æŠŠåå­—å˜æˆå¤§å†™å¹¶æ‹¼æ¥ï¼Œä¾‹å¦‚ "Ghostã€KÃ¶nig"
                const names = activeLovers.map(k => k.charAt(0).toUpperCase() + k.slice(1)).join("ã€");
                
                // 3. ç”Ÿæˆåˆç†çš„æ–‡æ¡ˆ
                evt.text = `ã€âš ï¸ æåº¦å±é™©ï¼šä¿®ç½—åœºè§¦å‘ã€‘\nä½ æ­£åœ¨åº—é‡Œæ¸…ç‚¹è´¦ç›®ï¼Œ${names} å‡ ä¹åŒæ—¶å‡ºç°åœ¨åº—é‡Œã€‚\nåŸæœ¬åº”è¯¥æ˜¯æ¸©é¦¨çš„æ¢ç­ï¼Œä½†å½“ä»–ä»¬çœ‹åˆ°å½¼æ­¤æ‰‹ä¸­ä¸ºä½ å‡†å¤‡çš„ä¸“å±ç¤¼ç‰©æ—¶ï¼Œç©ºæ°”ç¬é—´å‡å›ºäº†ã€‚\næ²¡æœ‰ä»»ä½•äº‰åµï¼Œåªæœ‰ä»¤äººçª’æ¯çš„æ­»å¯‚å’Œå¼¥æ¼«çš„æ€æ„ã€‚ä»–ä»¬åœ¨ç­‰å¾…ä¸€ä¸ªè§£é‡Šã€‚`;
            },
            
            options: [
                {
                    text: "ã€çœŸçˆ±æŠ‰æ‹©ã€‘æˆ‘åªèƒ½é€‰æ‹©ä¸€ä¸ªäºº...",
                    desc: "é€‰æ‹©å”¯ä¸€ä¼´ä¾£ï¼Œå…¶ä»–äººæ–­ç»å…³ç³»",
                    action: () => {
                        // è·³è½¬åˆ°åŠ¨æ€é€‰æ‹©å­èœå•
                        triggerEvent(Events.Special.cheating_choose_one);
                    }
                },
                {
                    text: "ã€ç³Šå¼„ä¸€ä¸‹è’œäº†ã€‘â€œæˆ‘ä»¬åªæ˜¯ç”Ÿæ„ä¼™ä¼´ï¼â€",
                    desc: "è¯•å›¾è’™æ··è¿‡å…³ (éœ€è¯„åˆ†>4.8, æˆåŠŸç‡50%)",
                    condition: s => s.rating >= 4.8,
                    effect: s => {
                        // è·å–å½“å‰æ‹äººåˆ—è¡¨
                        const activeLovers = ['ghost', 'konig', 'krueger', 'keegan'].filter(k => s.chars[k].dating);
                        
                        if (chance(50)) {
                            // ğŸŸ¢ ç³Šå¼„æˆåŠŸï¼šåªæ‰£å½“å‰æ‹äººçš„å¥½æ„Ÿï¼Œä¸åˆ†æ‰‹
                            activeLovers.forEach(k => {
                                s.chars[k].aff -= 100; 
                            });
                            printMsg("ä½ ç”¨å®Œç¾çš„èŒä¸šå‡ç¬‘å’Œæ— æ‡ˆå¯å‡»çš„é€»è¾‘ï¼Œå¼ºè¡ŒæŠŠè¿™è§£é‡Šæˆäº†â€œä¸ºäº†ä¿æŠ¤å½¼æ­¤å®‰å…¨çš„å•†ä¸šä¼ªè£…â€ã€‚\nè™½ç„¶ä»–ä»¬çœ¼ç¥é‡Œå†™æ»¡äº†æ€€ç–‘ï¼Œä½†æ²¡æœ‰äººæ„¿æ„åšé‚£ä¸ªå…ˆæå‡ºç¦»å¼€çš„äººã€‚\nå±€é¢æš‚æ—¶ç¨³ä½äº†ï¼Œä½ ä»¬çš„å…³ç³»è¿˜åœ¨ï¼Œä½†è£‚ç—•å·²ç»äº§ç”Ÿã€‚", 'gain');
                        } else {
                            // ğŸ”´ ç³Šå¼„å¤±è´¥ï¼šåªå’Œå½“å‰æ‹äººåˆ†æ‰‹ï¼Œè§¦å‘åæ¡£
                            s.flags.cheating_exposed = true;
                         activeLovers.forEach(k => {
                                    s.chars[k].dating = false;
                                    s.chars[k].aff = -50;
                                   s.chars[k].confessed = true; 
    
                                 // ğŸŸ¢ æ–°å¢ï¼šæ ‡è®°ä¸ºå‰ä»» (åªæœ‰çœŸæ­£è°ˆè¿‡æ‹çˆ±çš„æ‰ç®—å‰ä»»)
                                 s.chars[k].is_ex = true;
                            });
                            printMsg("ä½ çš„è°è¨€è¢«å½“åœºæ‹†ç©¿ã€‚\nâ€œç”Ÿæ„ä¼™ä¼´ï¼Ÿåˆ«æŠŠæˆ‘ä»¬å½“å‚»å­ã€‚â€\nä»–ä»¬å¤±æœ›é€é¡¶ï¼Œæ‰”ä¸‹ç¤¼ç‰©æ„¤ç„¶ç¦»å»ã€‚", 'alert');
                        }
                    }
                },
                {
                    // ğŸ‘‘ å¥³ç‹é€‰é¡¹ï¼šä¿æŒæœ€ä¸¥è‹›çš„æ¡ä»¶
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œæˆ‘å…¨éƒ½è¦ã€‚â€ (å®åŠ›å‹åˆ¶)",
                    desc: "éœ€: 4äººå¥½æ„Ÿ300+, èµ„é‡‘10w, å…¨å£°æœ›90+, æ»¡çº§åº—",
                    
                    // ğŸŸ¢ ä¸¥è‹›æ¡ä»¶æ£€æµ‹ï¼šå¿…é¡» 4 ä¸ªäººéƒ½è¾¾æ ‡ï¼Œå“ªæ€•æ²¡åœ¨è°ˆæ‹çˆ±ä¹Ÿè¦è¾¾æ ‡
                    condition: s => {
                        const allFourHigh = s.chars.ghost.aff >= 300 && s.chars.konig.aff >= 300 && s.chars.krueger.aff >= 300 && s.chars.keegan.aff >= 300;
                        const allRepHigh = s.rep_141 >= 90 && s.rep_kortac >= 90 && s.rep_chimera >= 90 && s.rep_ghosts >= 90;
                        const rich = s.money >= 100000;
                        const maxShop = s.lvl_store >= 5; // å‡è®¾ 5 çº§æ˜¯æ»¡çº§æˆ–è¾ƒé«˜ç­‰çº§
                        
                        return allFourHigh && allRepHigh && rich && maxShop;
                    },
                    effect: s => {
                        s.flags.harem_queen = true; 
                        printMsg("ä½ æ²¡æœ‰é€€ç¼©ï¼Œåè€Œå°†é‚£æŠŠè±¡å¾æƒåŠ›çš„æˆ’æŒ‡æ‹åœ¨æ¡Œä¸Šã€‚\nâ€œåœ¨è¿™ä¸ªæˆ˜åŒºï¼Œä½ ä»¬çš„è¡¥ç»™ã€æƒ…æŠ¥ã€ç”šè‡³å‘½éƒ½åœ¨æˆ‘æ‰‹é‡Œï¼Œæˆ–è®¸æ˜¯æˆ‘æ¥ç»™ä½ ä»¬æä¾›é€‰æ‹©ã€‚â€\nâ€œæ”¶èµ·ä½ ä»¬çš„å«‰å¦’ï¼Œæˆ–è€…æ»šã€‚â€", 'gain');
                    },
                    result: "æ­»å¯‚æŒç»­äº†æ•´æ•´ä¸€åˆ†é’Ÿã€‚\nåœ¨è¿™ç»å¯¹çš„å®åŠ›å’Œé­…åŠ›é¢å‰ï¼Œä»–ä»¬æœ€ç»ˆä½ä¸‹äº†å¤´ï¼Œé»˜è®¤äº†è¿™ç§ç–¯ç‹‚çš„å¥‘çº¦ã€‚\nä½ æˆä¸ºäº†è¿™é‡Œçš„æ— å†•ä¹‹ç‹ã€‚"
                },
                    {
                    text: "ã€æ”¾å¼ƒæŠµæŠ—ã€‘æ²‰é»˜...",
                    desc: "ç°æœ‰å…³ç³»å…¨éƒ¨ç ´è£‚ (å½“äº‹äººå°†ä¸å†æ¥å—è¡¨ç™½)",
                    effect: s => {
                        // æ ‡è®°ä¸ºä¿®ç½—åœºçˆ†å‘è¿‡ï¼ˆç”¨äºè§¦å‘ç¥ç§˜å•†äººï¼‰
                        s.flags.cheating_exposed = true;
                        
                        // 1. æ‰¾å‡ºå½“å‰å—å®³è€…ï¼ˆæ­£åœ¨è°ˆæ‹çˆ±çš„äººï¼‰
                        const activeLovers = ['ghost', 'konig', 'krueger', 'keegan'].filter(k => s.chars[k].dating);
                        
                        // 2. åªå¯¹å—å®³è€…è¿›è¡Œå¤„å†³
                        activeLovers.forEach(k => {
                            s.chars[k].dating = false;       // åˆ†æ‰‹
                            s.chars[k].aff = -50;            // å˜æˆè´Ÿå¥½æ„Ÿ/ä»‡æ¨
                            
                            // ğŸŸ¢ å…³é”®ä¿®æ”¹ï¼šæ ‡è®°ä¸ºâ€œå·²è¡¨ç™½/å¿ƒæ­»â€
                            // è¿™æ ·ä»–ä»¬ä»¥åå°±ä¸ä¼šå†è§¦å‘è¡¨ç™½äº‹ä»¶äº†ï¼Œé™¤éä¹°åæ‚”è¯é‡ç½®
                            s.chars[k].confessed = true;     
                        });
                        
                        // *æ³¨ï¼šä¸åœ¨åœº/æ²¡è°ˆæ‹çˆ±çš„äººï¼ˆactiveLovers ä»¥å¤–çš„ï¼‰å®Œå…¨ä¸å—å½±å“
                        
                        log("å¤šé‡å…³ç³»å´©å¡Œ", 'loss');
                    },
                    result: "æ²¡äººèƒ½æ¥å—èƒŒå›ï¼Œä»–ä»¬å¤±æœ›é€é¡¶ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç¦»å¼€äº†"
                }
            ]
        }, 

        // === ğŸ”¥ åŠ¨æ€å­äº‹ä»¶ï¼šåªæ˜¾ç¤ºå½“å‰çš„æ‹äººé€‰é¡¹ ===
        cheating_choose_one: {
            text: "ä½ å¿…é¡»åšå‡ºé€‰æ‹©ã€‚è°æ‰æ˜¯ä½ å”¯ä¸€æƒ³ç•™åœ¨èº«è¾¹çš„äººï¼Ÿ",
            speaker: "System",
            type: "dialogue",
            // ğŸŸ¢ åŠ¨æ€ç”Ÿæˆé€‰é¡¹ï¼šåªæ˜¾ç¤ºå½“å‰æ­£åœ¨äº¤å¾€çš„äºº
            onTrigger: (evt, s) => {
                evt.options = ['ghost', 'konig', 'krueger', 'keegan']
                    .filter(k => s.chars[k].dating) // åªç­›é€‰æ‹äºº
                    .map(k => ({
                        text: `é€‰æ‹© ${k.charAt(0).toUpperCase() + k.slice(1)}`, // é¦–å­—æ¯å¤§å†™
                        effect: state => handleChoice(state, k) // è°ƒç”¨é€šç”¨çš„é€‰æ‹©å‡½æ•°
                    }));
            },
            options: [] // ç•™ç©ºï¼Œç”± onTrigger å¡«å……
        },

        // === è¡¨ç™½äº‹ä»¶ ===
ghost_confess: {
        text: "...", // å ä½ç¬¦ï¼Œç”± onTrigger å¡«å……
        speaker: "Simon 'Ghost' Riley",
        type: "dialogue",
        
        // ğŸŸ¢ åŠ¨æ€æ–‡æœ¬ç”Ÿæˆ
        onTrigger: (evt, s) => {
            if (s.chars.ghost.is_ex) {
                // ğŸ’”ã€æ±‚å¤åˆã€‘æ–‡æ¡ˆ
                evt.text = "Ghost å†æ¬¡ç«™åœ¨ä½ é¢å‰ï¼Œçœ‹èµ·æ¥æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´åŠ ç´§ç»·ã€‚\nâ€œæˆ‘ä»¬è¯•è¿‡åˆ†å¼€... ä½†é‚£ç®€ç›´æ˜¯åœ°ç‹±ï¼Œæˆ‘ä»¥ä¸ºæˆ‘èƒ½å›åˆ°ä»¥å‰é‚£ç§æ²¡æœ‰ç‰µæŒ‚çš„æ—¥å­ï¼Œä½†æˆ‘åšä¸åˆ°ã€‚â€\nä»–å‘ä½ ä¼¸å‡ºæ‰‹ï¼ŒæŒå¿ƒå¾®å¾®å‡ºæ±—ï¼šâ€œ{PLAYER}ï¼Œèƒ½ä¸èƒ½... å†ç»™æˆ‘ä¸€æ¬¡æœºä¼šï¼Ÿè¿™æ¬¡æˆ‘ç»ä¸ä¼šæç ¸ã€‚â€";
            } else {
                // ğŸ’–ã€åˆæ¬¡è¡¨ç™½ã€‘æ–‡æ¡ˆ
                evt.text = "Ghost ç­‰åˆ°æ‰“çƒŠåæ‰å‡ºç°ï¼Œä»–åœ¨ä½ é¢å‰æ‘˜ä¸‹äº†é¢ç½©â€”â€”è¿™æå…¶ç½•è§ï¼Œéœ²å‡ºäº†å¸ƒæ»¡ä¼¤ç—•ä½†åšæ¯…çš„è„¸åºã€‚\nâ€œ{PLAYER}ï¼Œåœ¨æˆ˜åœºä¸Šæ‰¾ä¾é æ˜¯æ„šè ¢çš„ï¼Œä½†... æˆ‘å‘ç°æˆ‘æ— æ³•åœæ­¢æŠŠåèƒŒäº¤ç»™ä½ è¿™ç§å¿µå¤´ã€‚â€\nä»–æ·±å¸äº†ä¸€å£æ°”ï¼šâ€œæˆ‘æƒ³è¿™æ˜¯ä¿¡ä»»ä»¥ä¸Šçš„æ„Ÿæƒ…ï¼Œä½ æ„¿æ„... è®©æˆ‘æˆä¸ºä½ çš„ä¼˜å…ˆäº‹é¡¹å—ï¼Ÿâ€";
            }
        },

        options: [
            {
                text: "æ¥å—ä»–çš„å¿ƒæ„",
                desc: "ç¡®ç«‹æ‹çˆ±å…³ç³»",
                effect: s => {
                    s.chars.ghost.confessed = true;
                    s.chars.ghost.dating = true;
                    
                    // ğŸŸ¢ æ ¸å¿ƒä¿®å¤ï¼šç ´é•œé‡åœ†ï¼Œç§»é™¤å‰ä»»æ ‡è®°
                    s.chars.ghost.is_ex = false; 
                    
                    s.chars.ghost.aff += 20;
                    log("ä¸ Ghost ç¡®ç«‹å…³ç³»", 'gain');
                },
                result: "Ghost ç´§ç´§æŠ±ä½äº†ä½ ï¼Œä»¿ä½›å¤±è€Œå¤å¾—çš„çå®ï¼ŒåŠ›é“å¤§å¾—è®©ä½ æœ‰äº›å–˜ä¸è¿‡æ°”ã€‚\nâ€œä»ç°åœ¨å¼€å§‹ï¼Œä½ æ˜¯æˆ‘çš„ä¼˜å…ˆäº‹é¡¹ã€‚â€"
            },
            {
                text: "æˆ‘ä»¬åªæ˜¯æˆ˜å‹",
                desc: "æ‹’ç» (è¿›å…¥30å¤©å†·é™æœŸ)",
                effect: s => {
                    s.chars.ghost.reject_count = (s.chars.ghost.reject_count || 0) + 1;
                    s.chars.ghost.last_reject_day = s.day;
                    s.chars.ghost.aff = Math.max(0, s.chars.ghost.aff - 20);
                    log("æ‹’ç»äº† Ghost", 'loss');
                },
                result: "ä»–é‡æ–°æˆ´ä¸Šé¢ç½©ï¼Œçœ¼é‡Œçš„å…‰èŠ’å½»åº•é»¯æ·¡äº†ä¸‹å»ï¼Œæ¢å¤äº†æ­»ä¸€èˆ¬çš„å¯‚é™ã€‚\nâ€œ...æ˜ç™½äº†ï¼ŒæŠ±æ­‰æ‰“æ‰°äº†ã€‚â€"
            }
        ]
    },


konig_confess: {
        text: "...",
        speaker: "KÃ¶nig",
        type: "dialogue",
        
        onTrigger: (evt, s) => {
            if (s.chars.konig.is_ex) {
                // ğŸ’”ã€æ±‚å¤åˆã€‘æ–‡æ¡ˆ
                evt.text = "KÃ¶nig åƒä¸ªåšé”™äº‹çš„å­©å­ä¸€æ ·ç¼©åœ¨é—¨å£ï¼Œçœ‹åˆ°ä½ æ²¡æœ‰èµ¶ä»–èµ°ï¼Œä»–æ‰æ•¢å°å¿ƒç¿¼ç¿¼åœ°é è¿‘ã€‚\nâ€œæ²¡æœ‰ä½ çš„æ—¥å­... å¤ªå†·äº†ï¼Œå¤ªå¯æ€•äº†ã€‚â€\nä»–çœ‹èµ·æ¥å¾ˆåæ‚”ï¼Œä¹Ÿæœ‰äº›å§”å±ˆï¼šâ€œæˆ‘çŸ¥é“æˆ‘ä¸å¤Ÿå¥½... ä½†æˆ‘ä¼šæ”¹çš„ï¼Œæˆ‘ä»€ä¹ˆéƒ½æ”¹... åªè¦ä½ è¿˜è¦æˆ‘...â€";
            } else {
                // ğŸ’–ã€åˆæ¬¡è¡¨ç™½ã€‘æ–‡æ¡ˆ
                evt.text = "KÃ¶nig åœ¨åº—é‡Œå¾˜å¾Šäº†å¾ˆä¹…ï¼Œç›´åˆ°æ²¡äººæ‰æ•¢é è¿‘ï¼Œä»–ç´§å¼ å¾—æµ‘èº«å‘æŠ–ï¼Œç„¦è™‘åœ°æ‰¯ç€è‡ªå·±çš„é¢ç½©ã€‚\nâ€œé‚£ä¸ª... æˆ‘... æˆ‘çŸ¥é“æˆ‘åƒä¸ªæ€ªç‰©ï¼Œä½†æ˜¯ï¼Œå’Œä½ åœ¨ä¸€èµ·æ—¶ï¼Œæˆ‘æ‰è§‰å¾—è‡ªå·±æ˜¯çœŸæ­£çš„å®Œæ•´...æ´»ç€ã€‚â€\nä»–é¼“èµ·å…¨éƒ¨å‹‡æ°”çœ‹ç€ä½ ï¼šâ€œä½ ... ä½ æ„¿æ„è®©æˆ‘ä¸€ç›´é™ªç€ä½ å—ï¼Ÿâ€";
            }
        },

        options: [
            {
                text: "æŠ±ä½ä»–ï¼Œç­”åº”ä»–",
                desc: "ç¡®ç«‹æ‹çˆ±å…³ç³»",
                effect: s => {
                    s.chars.konig.confessed = true;
                    s.chars.konig.dating = true;
                    
                    // ğŸŸ¢ æ ¸å¿ƒä¿®å¤ï¼šç§»é™¤å‰ä»»æ ‡è®°
                    s.chars.konig.is_ex = false;
                    
                    s.chars.konig.aff += 20;
                    log("ä¸ KÃ¶nig ç¡®ç«‹å…³ç³»", 'gain');
                },
                result: "KÃ¶nig å‡ ä¹è¦å“­å‡ºæ¥äº†ï¼Œä»–å°å¿ƒç¿¼ç¿¼åœ°æŠŠä½ æ‹¥å…¥æ€€ä¸­ï¼Œç”Ÿæ€•è¿™åªæ˜¯ä¸€åœºæ¢¦ã€‚\nâ€œæˆ‘å‘èª“ï¼æˆ‘ä¼šä¸ºä½ æŒ¡ä¸‹æ‰€æœ‰å­å¼¹ï¼æˆ‘å†ä¹Ÿä¸ä¼šè®©ä½ å¤±æœ›äº†ï¼â€"
            },
            {
                text: "å©‰æ‹’",
                desc: "æ‹’ç» (è¿›å…¥30å¤©å†·é™æœŸ)",
                effect: s => {
                    s.chars.konig.reject_count = (s.chars.konig.reject_count || 0) + 1;
                    s.chars.konig.last_reject_day = s.day;
                    s.chars.konig.aff = Math.max(0, s.chars.konig.aff - 20);
                    log("æ‹’ç»äº† KÃ¶nig", 'loss');
                },
                result: "â€œå™¢... å¯¹ï¼Œå¯¹ä¸èµ·ã€‚æˆ‘æ—©è¯¥çŸ¥é“çš„...â€ ä»–ç‹¼ç‹ˆåœ°è½è’è€Œé€ƒï¼ŒèƒŒå½±çœ‹èµ·æ¥å¿ƒç¢æ¬²ç»ã€‚"
            }
        ]
    },


// --- 3. Krueger (Sebastian) ---
    krueger_confess: {
        text: "...",
        speaker: "Sebastian Krueger",
        type: "dialogue",
        
        onTrigger: (evt, s) => {
            if (s.chars.krueger.is_ex) {
                // ğŸ’”ã€æ±‚å¤åˆã€‘æ–‡æ¡ˆ
                evt.text = "Krueger é åœ¨å¢™è¾¹ï¼Œè™½ç„¶ä¾æ—§æ˜¯ä¸€å‰¯æ¼«ä¸ç»å¿ƒçš„æ ·å­ï¼Œä½†ä½ å¤ªç†Ÿæ‚‰ä»–äº†ï¼Œäº‹å®ä¸Šä»–ç°åœ¨å¾ˆç„¦èºã€‚\nâ€œæˆ‘ä»¥ä¸ºæˆ‘å¯ä»¥ä¸åœ¨ä¹... è¯¥æ­»ï¼Œæˆ‘è¾“äº†ã€‚â€\nä»–èµ°è¿‡æ¥æŠŠä½ é€¼åœ¨æŸœå°å‰ï¼Œçœ¼ç¥é‡Œä¸ä»…æœ‰å æœ‰æ¬²ï¼Œè¿˜æœ‰å¦¥åã€‚\nâ€œæ²¡æœ‰ä½ çš„ä¸–ç•Œå¤ªæ— èŠäº†ï¼Œ{PLAYER}ï¼Œå›æ¥å§ï¼Œæˆ–è€…... è®©æˆ‘å›ã€‚â€";
            } else {
                // ğŸ’–ã€åˆæ¬¡è¡¨ç™½ã€‘æ–‡æ¡ˆ
                evt.text = "Krueger ä»é˜´å½±ä¸­èµ°å‡ºï¼Œç›´æ¥æŠŠä½ é€¼åˆ°äº†å¢™è§’ã€‚ä»–çš„çœ¼ç¥å……æ»¡äº†ä¾µç•¥æ€§å’Œå æœ‰æ¬²ã€‚\nâ€œæˆ‘è§‚å¯Ÿä½ å¾ˆä¹…äº†ï¼Œä½ å±äºæˆ‘ï¼Œä¸ä»…æ˜¯ä½œä¸ºç›Ÿå‹ï¼Œè€Œæ˜¯ä½œä¸º... æˆ˜åˆ©å“ï¼Œä¼´ä¾£ï¼Œä¼™ä¼´...éšä¾¿ä½ æ€ä¹ˆç§°å‘¼ï¼Œåˆ«è¯•å›¾æ‹’ç»â€";
            }
        },

        options: [
            {
                text: "æ¥å—ä»–çš„çˆ±",
                desc: "ç¡®ç«‹æ‹çˆ±å…³ç³»",
                effect: s => {
                    s.chars.krueger.confessed = true;
                    s.chars.krueger.dating = true;
                    
                    // ğŸŸ¢ æ ¸å¿ƒä¿®å¤ï¼šç§»é™¤å‰ä»»æ ‡è®°
                    s.chars.krueger.is_ex = false;
                    
                    s.chars.krueger.aff += 20;
                    log("ä¸ Krueger ç¡®ç«‹å…³ç³»", 'gain');
                },
                result: "ä»–ç²—æš´åœ°å»äº†ä½ ï¼Œç„¶åæ»¡æ„åœ°èˆ”äº†èˆ”å˜´å”‡ï¼Œåƒæ˜¯æ ‡è®°äº†è‡ªå·±çš„é¢†åœ°ã€‚\nâ€œå¾ˆå¥½çš„é€‰æ‹©ï¼Œä»ç°åœ¨èµ·ï¼Œè°æ•¢ç¢°ä½ ï¼Œæˆ‘å°±æŠŠè°åˆ‡æˆç¢ç‰‡ã€‚â€"
            },
            {
                text: "æ¨å¼€ä»–",
                desc: "æ‹’ç» (è¿›å…¥30å¤©å†·é™æœŸ)",
                effect: s => {
                    s.chars.krueger.reject_count = (s.chars.krueger.reject_count || 0) + 1;
                    s.chars.krueger.last_reject_day = s.day;
                    s.chars.krueger.aff = Math.max(0, s.chars.krueger.aff - 20);
                    log("æ‹’ç»äº† Krueger", 'loss');
                },
                    result: "ä»–çœ¯èµ·çœ¼ç›ï¼Œå†·å“¼ä¸€å£°ã€‚â€œä½ ä¼šæ”¹å˜ä¸»æ„çš„ï¼Œæˆ‘æœ‰çš„æ˜¯è€å¿ƒï¼Œæˆ‘ä¼šç­‰åˆ°ä½ ç‚¹å¤´çš„é‚£å¤©ã€‚â€"
                }
            ]
        },

// === Keegan ç‰¹æ®Šäº‹ä»¶ ===
        
        // 1. è¡¨ç™½ï¼šç†æ€§çš„æ²‰æ²¦
keegan_confess: {
        text: "...",
        speaker: "Keegan P. Russ",
        type: "dialogue",
        
        onTrigger: (evt, s) => {
            if (s.chars.keegan.is_ex) {
                // ğŸ’”ã€æ±‚å¤åˆã€‘æ–‡æ¡ˆ
                evt.text = "Keegan é™é™åœ°ç«™åœ¨é›¨ä¸­ï¼Œå¹¶æ²¡æœ‰è¿›æ¥ï¼Œç›´åˆ°ä½ æ‰“å¼€é—¨ã€‚\nâ€œå¯¹ä¸èµ·ï¼Œæˆ‘ä»¥ä¸ºæˆ‘æ“…é•¿æ–©æ–­è”ç³»... ä½†æˆ‘å‘ç°æˆ‘åšä¸åˆ°ã€‚â€\nä»–æ‘˜ä¸‹æ¹¿é€çš„å…œå¸½ï¼Œè“è‰²çš„çœ¼ç›é‡Œæ»¡æ˜¯æ‰§ç€ã€‚\nâ€œæ— è®ºæˆ‘èµ°åˆ°å“ªé‡Œï¼Œæˆ‘çš„é›·è¾¾å§‹ç»ˆæŒ‡å‘ä½ ã€‚{PLAYER}ï¼Œè®©æˆ‘å›åˆ°ä½ çš„èº«è¾¹ï¼Œå¥½å—ï¼Ÿâ€";
            } else {
                // ğŸ’–ã€åˆæ¬¡è¡¨ç™½ã€‘æ–‡æ¡ˆ
                evt.text = "Keegan åœ¨æ‰“çƒŠåç•™äº†ä¸‹æ¥ï¼Œä»–é åœ¨æŸœå°è¾¹æŠŠç©ç€æ‰‹é‡Œçš„ç«æŸ´ç›’ã€‚\nâ€œä½œä¸º Ghostï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»ä¿æŒå†·é™ï¼Œæ„Ÿæƒ…æ˜¯å¤šä½™çš„ç´¯èµ˜... ä½†æ¯æ¬¡ä»»åŠ¡ç»“æŸï¼Œæˆ‘åªæƒ³å›åˆ°è¿™é‡Œè§ä½ ã€‚â€\nä»–æŠ¬èµ·å¤´ï¼Œç›®å…‰ç¼ç¼ï¼šâ€œè¿™è¿åäº†æˆ‘çš„åŸåˆ™ï¼Œä½†æˆ‘...ä¼¼ä¹ä¹Ÿä¸æƒ³æ”¹äº†ï¼Œä½ æ„¿æ„æ¥çº³è¿™æ ·çš„æˆ‘å—ï¼Ÿâ€";
            }
        },

        options: [
            {
                text: "ç­”åº”ä»–ï¼šâ€œæ¬¢è¿å›å®¶ï¼ŒKeeganã€‚â€",
                desc: "ç¡®ç«‹æ‹çˆ±å…³ç³»",
                effect: s => {
                    s.chars.keegan.confessed = true;
                    s.chars.keegan.dating = true;
                    
                    // ğŸŸ¢ æ ¸å¿ƒä¿®å¤ï¼šç§»é™¤å‰ä»»æ ‡è®°
                    s.chars.keegan.is_ex = false;
                    
                    s.chars.keegan.aff += 20;
                    log("ä¸ Keegan ç¡®ç«‹å…³ç³»", 'gain');
                },
                result: "Keegan ç´§ç»·çš„è‚©è†€æ¾å¼›ä¸‹æ¥ï¼Œä»–èµ°è¿‡æ¥ç´§ç´§æŠ±ä½äº†ä½ ï¼Œé‚£ä¸ªæ‹¥æŠ±æ—¢æ¸©æš–åˆåšå®šã€‚\nâ€œæˆ‘ä¼šç”¨ç”Ÿå‘½æ¥å®ˆæŠ¤ä½ ã€‚â€"
            },
            {
                text: "å©‰æ‹’",
                desc: "æ‹’ç» (è¿›å…¥30å¤©å†·é™æœŸ)",
                effect: s => {
                    s.chars.keegan.reject_count = (s.chars.keegan.reject_count || 0) + 1;
                    s.chars.keegan.last_reject_day = s.day;
                    s.chars.keegan.aff = Math.max(0, s.chars.keegan.aff - 20);
                    log("æ‹’ç»äº† Keegan", 'loss');
                },
                result: "â€œ...æ˜ç™½äº†ã€‚â€ ä»–æ¢å¤äº†å¾€æ—¥çš„å†·é™ï¼Œä½†ä½ èƒ½çœ‹åˆ°ä»–æ¡ç´§æ‹³å¤´çš„æ‰‹å¾®å¾®é¢¤æŠ–ã€‚\nâ€œæŠ±æ­‰ç»™ä½ é€ æˆäº†å›°æ‰°ã€‚â€ ä»–è½¬èº«æ¶ˆå¤±åœ¨å¤œè‰²ä¸­ã€‚"
            }
        ]
    },

        // 2. åƒé†‹ï¼šå†·é™çš„å¨æ…‘
        keegan_jealous: {
            text: "Keegan ç›¯ç€åˆšæ‰é‚£ä¸ªè¯•å›¾å¯¹ä½ åŠ¨æ‰‹åŠ¨è„šçš„é…’é¬¼ç¦»å¼€çš„æ–¹å‘ã€‚\nâ€œé‚£ä¸ªäººã€‚â€ ä»–è¯­æ°”å¹³æ·¡åœ°å¼€å£ï¼Œâ€œä»–çš„æ‰‹åˆšæ‰æœ‰æ„æ— æ„ç¢°äº†ä½ ä¸‰æ¬¡ï¼Œéœ€è¦æˆ‘è®©ä»–ä»¥åå†ä¹Ÿæ‹¿ä¸äº†é…’æ¯å—ï¼Ÿâ€",
            speaker: "Keegan",
            type: "alert",
            options: [
                {
                    text: "å®‰æŠšä»–ï¼šâ€œæ²¡äº‹çš„ï¼Œæˆ‘å·²ç»èµ¶èµ°ä»–äº†ã€‚â€",
                    desc: "é˜»æ­¢ä»–åŠ¨æ‰‹",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("Keegan æ²¡å†è¯´ä»€ä¹ˆï¼Œä»–å°Šé‡ä½ çš„é€‰æ‹©ï¼Œä½†...\nâ€œ...ä¸‹ä¸ä¸ºä¾‹ï¼Œæˆ‘ä¸å–œæ¬¢åˆ«äººç¢°æˆ‘çš„... çå®ã€‚â€", 'dialogue', 'Keegan');
                    },
                    result: "ä»–çš„å æœ‰æ¬²æ€»æ˜¯è—åœ¨å†·é™çš„å¤–è¡¨ä¸‹ã€‚"
                },
                {
                    text: "é»˜è®¸ï¼šâ€œç»™ä»–ç‚¹æ•™è®­ä¹Ÿå¥½ã€‚â€",
                    desc: "åºŸåœŸåªè®²æ‹³å¤´",
                    effect: s => {
                        s.chars.keegan.aff += 8;
                        s.rep_ghosts -= 5; // ç¨å¾®æœ‰ç‚¹è¿‡ç«
                    },
                    result: "Keegan ç‚¹ç‚¹å¤´ï¼Œç¬¬äºŒå¤©ä½ å¬è¯´é‚£ä¸ªé…’é¬¼åœ¨å··å­é‡Œæ‘”æ–­äº†æ‰‹ã€‚"
                }
            ]
        },

        // 3. æ¸©å­˜ï¼šé›¨å£°ä¸å‘¼å¸
        keegan_intimate: {
            text: "çª—å¤–é›·é›¨äº¤åŠ ï¼ŒKeegan å´åœ¨ä½ åº—é‡Œçš„æ²™å‘ä¸Šç¡ç€äº†ï¼Œä»–å¹³æ—¶æ€»æ˜¯ä¿æŒè­¦æƒ•ï¼Œå¾ˆå°‘ç¡å¾—è¿™ä¹ˆæ²‰ã€‚\nä½ ç»™ä»–ç›–æ¯¯å­æ—¶ï¼Œä»–æœ¬èƒ½åœ°æŠ“ä½äº†ä½ çš„æ‰‹ï¼Œä½†åœ¨çœ‹æ¸…æ˜¯ä½ åï¼ŒåˆæŠŠä½ çš„æ‰‹è´´åœ¨äº†è‡ªå·±çš„è„¸é¢Šä¸Šã€‚",
            speaker: "Keegan",
            type: "event",
            options: [
                {
                    text: "é™ªä»–åä¸€ä¼šå„¿ (APå…¨æ»¡)",
                    desc: "æ¢å¤ç²¾åŠ›",
                    effect: s => {
                        s.ap = CONFIG.max_ap;
                        s.chars.keegan.aff += 5;
                        s.chars.keegan.last_intimate_day = s.day; // è®°å½•å†·å´
                        log("ä¸ Keegan çš„æ¸©å­˜æ—¶åˆ»", 'gain');
                    },
                    result: "â€œåˆ«èµ°...â€ ä»–å«ç³Šä¸æ¸…åœ°æ¢¦å‘“é“ï¼Œâ€œç•™ä¸‹...â€"
                }
            ]
        },

        // === æ·±å±‚æ¸©å­˜äº‹ä»¶ ===
        ghost_intimate: {
            text: "æ·±å¤œï¼ŒGhost å¸¦ç€ä¸€èº«å¯’æ°”å›æ¥ï¼Œç›´æ¥å€’åœ¨äº†ä½ é‡Œå±‹çš„æ²™å‘ä¸Šï¼Œä»–å¤ªç´¯äº†ï¼Œæ¯«æ— é˜²å¤‡åœ°æŠŠå¤´é åœ¨ä½ çš„è…¿ä¸Šã€‚\nâ€œåˆ«åŠ¨... å°±è®©æˆ‘è¿™æ ·å¾…äº”åˆ†é’Ÿï¼Œåªæœ‰åœ¨è¿™é‡Œï¼Œæˆ‘æ‰èƒ½é—­ä¸Šçœ¼ã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            options: [
                {
                    text: "è½»æŠšä»–çš„å¤´å‘",
                    desc: "æ¢å¤å…¨éƒ¨ç²¾åŠ›",
                    effect: s => {
                   s.ap = CONFIG.max_ap;
                   s.chars.ghost.aff += 5;
                    s.chars.ghost.last_intimate_day = s.day; // ğŸŸ¢ è®°å½•å†·å´æ—¥æœŸ
                   log("ä¸ Ghost çš„æ¸©å­˜æ—¶åˆ» (APå…¨æ»¡)", 'gain');
                    },
                    result: "ä»–åœ¨ä½ èº«è¾¹æ²‰æ²‰ç¡å»ï¼Œåœ¨æˆ˜ç«çº·é£çš„ä¸–ç•Œé‡Œï¼Œè¿™ä¸€åˆ»çš„å®é™æ¯”é»„é‡‘æ›´çè´µã€‚"
                }
            ]
        },

// [KÃ¶nig] ç”œèœœæ¸©å­˜ - [å·²ä¿®å¤ï¼šé˜²çˆ†ä»“]
        konig_intimate: {
            text: "KÃ¶nig ç»™ä½ å¸¦æ¥äº†ä¸€æŸä¸çŸ¥ä»å“ªç‰‡åºŸå¢Ÿé‡‡æ¥çš„é‡èŠ±ï¼Œè™½ç„¶æœ‰ç‚¹å‹æ‰äº†ã€‚\nä»–æŠŠä½ æŠ±èµ·æ¥ä¸¾é«˜é«˜ï¼Œéš”ç€å¤´å¥—è¹­ç€ä½ çš„è„¸ã€‚\nâ€œä½ æ˜¯æˆ‘çš„å°å¤ªé˜³ï¼Œçœ‹åˆ°ä½ ï¼Œæ‰€æœ‰çš„å™©æ¢¦éƒ½æ¶ˆå¤±äº†ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "äº«å—ä»–çš„æ‹¥æŠ±",
                    desc: "è·å¾—ç‰©èµ„å¥–åŠ±",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.chars.konig.last_intimate_day = s.day;
                        
                        // ğŸŸ¢ é˜²çˆ†ä»“é€»è¾‘
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        // åªæœ‰æ²¡æ»¡çš„æ—¶å€™æ‰åŠ 
                        if (s.medkit < cap) {
                            s.medkit = Math.min(cap, s.medkit + 2);
                            log("KÃ¶nig çš„çˆ±æ„ (+2 Medkit)", 'gain');
                        } else {
                            log("KÃ¶nig æƒ³é€ä½ è¯åŒ…ï¼Œä½†ä»“åº“æ»¡äº†", 'warn');
                        }
                    },
                    result: "ä»–æŠŠä½ æ”¾ä¸‹æ—¶ï¼Œæ‚„æ‚„å¾€ä½ å£è¢‹é‡Œå¡äº†ä¸¤ä¸ªæ€¥æ•‘åŒ…ã€‚â€œè¿™æ˜¯æˆ‘é¡ºè·¯æ¡çš„ï¼Œç»™ä½ çš„ã€‚â€"
                }
            ]
        },

        krueger_intimate: {
            text: "Krueger ä»Šæ™šæ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯é™é™åœ°ååœ¨ä½ èº«æ—æ“¦æ‹­ä»–çš„åŒåˆ€ï¼Œä½ å®‰é™çš„é åœ¨ä»–è‚©è†€ä¸Šæ„Ÿå—åˆ°ä»–çš„ä½“æ¸©ã€‚\nçªç„¶ï¼Œä»–æŠŠä¸€æš Chimera çš„ç²¾é”å‹‹ç« æŒ‚åœ¨äº†ä½ çš„è„–å­ä¸Šã€‚\nâ€œè¿™æ˜¯ä¿å‘½ç¬¦ï¼Œè¿™ç‰‡åŒºåŸŸæ‰€æœ‰çš„äººè§åˆ°è¿™ä¸ªéƒ½ä¼šç»•ç€ä½ èµ°ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            options: [
                {
                    text: "æ”¶ä¸‹ä¿¡ç‰©",
                    desc: "è·å¾—å£°æœ›åŠ æˆ",
                    effect: s => {
                    s.rep_chimera += 20;
                    s.chars.krueger.aff += 5;
                   s.chars.krueger.last_intimate_day = s.day; // ğŸŸ¢ è®°å½•å†·å´æ—¥æœŸ
                     log("è·å¾— Krueger çš„åº‡æŠ¤ (+20 Rep)", 'gain');
               },
                    result: "â€œä½ æ˜¯æˆ‘çš„ã€‚â€ ä»–ä½å£°é‡å¤äº†ä¸€éï¼Œæ¡ä½äº†ä½ çš„æ‰‹ã€‚"
                }
            ]
        },
    },

    // æ™®é€šéšæœºäº‹ä»¶åº“
    Random: {
customer_medkit: {
            text: "ä¸€åè„¸è‰²è‹ç™½çš„ä½£å…µèµ°è¿›æ¥ï¼Œæ‚ç€è…¹éƒ¨çš„ä¼¤å£ã€‚\nâ€œæœ‰æ²¡æœ‰æ­¢ç—›è¯æˆ–è€…... é‚£ä¸ª... åŒ»ç–—åŒ…ï¼Ÿæˆ‘æœ‰é’±ã€‚â€",
            speaker: "Mercenary",
            options: [
                {
                    text: `æ­£å¸¸å‡ºå”® ($${CONFIG.sell_price.medkit})`,
                    desc: "-1 Medkit, è·å¾—å¥½è¯„",
                    condition: s => s.medkit > 0,
                    effect: s => {
                        s.medkit--;
                        s.money += CONFIG.sell_price.medkit;
                        addShopRating(5.0, true);
                        log("å‡ºå”®åŒ»ç–—åŒ… (è·å¾—å¥½è¯„)", 'gain');
                    },
                    result: "ä½£å…µæ„Ÿæ¿€åœ°ç‚¹ç‚¹å¤´ï¼Œä»˜é’±ç¦»å¼€äº†ã€‚â€œæˆ‘ä¼šå‘Šè¯‰å…„å¼Ÿä»¬è¿™é‡Œå¾ˆå…¬é“ã€‚â€"
                },
                {
                    text: `ååœ°èµ·ä»· ($${Math.floor(CONFIG.sell_price.medkit * CONFIG.high_sell_multiplier)})`,
                    desc: "é«˜é£é™©é«˜å›æŠ¥ (å¯èƒ½æ‹›è‡´å·®è¯„)",
                    condition: s => s.medkit > 0,
                    effect: s => {
                        if(chance(60)) {
                            s.medkit--;
                            s.money += Math.floor(CONFIG.sell_price.medkit * CONFIG.high_sell_multiplier);
                            addShopRating(3.0, true);
                            log("é«˜ä»·å‡ºå”®æˆåŠŸ", 'gain');
                            printMsg("ä»–å’¬å’¬ç‰™ä»˜äº†é’±ã€‚â€œè¿™ç®€ç›´æ˜¯æŠ¢åŠ«...ä½†è°¢äº†ã€‚â€", 'system');
                        } else {
                            s.rep_141 -= 2;
                            s.rep_kortac -= 2;
                            addShopRating(1.0, false);
                            printMsg("â€œå»æ­»å§ï¼Œå¥¸å•†ï¼â€ ä»–æ„¤æ€’åœ°ç¦»å¼€äº†ã€‚", 'alert');
                        }
                    }
                },
                // ã€æ–°å¢ã€‘é˜²æ­¢å¡æ­»çš„é€‰é¡¹
                {
                    text: "æŠ±æ­‰ï¼Œæ²¡è´§äº†",
                    desc: "åº“å­˜ä¸è¶³",
                    result: "ä½£å…µå¤±æœ›åœ°å¹äº†å£æ°”ï¼Œæ‚ç€ä¼¤å£ç¦»å¼€äº†ã€‚"
                }
            ]
        },

// 1. [æ‰“åˆ†] åºŸåœŸç¾é£Ÿå®¶ (å‘³è§‰ä¸§å¤±ç‰ˆ)
        wasteland_gourmet: {
            text: "ä¸€ä¸ªè¡£ç€æµ®å¤¸çš„èƒ–å­æ‹¿ç€ç¬”è®°æœ¬èµ°äº†è¿›æ¥ï¼Œè‡ªç§°æ˜¯ã€ŠåºŸåœŸç±³å…¶æ—æŒ‡å—ã€‹çš„ç¼–è¾‘ã€‚\nâ€œç¯å¢ƒ... ç²—çŠ·ï¼ŒæœåŠ¡... åŸå§‹ï¼Œç°åœ¨ï¼Œè®©æˆ‘å°å°ä½ ä»¬çš„æ‹›ç‰Œèœï¼Œè¿™å†³å®šäº†ä½ ä»¬æ˜¯å‡ æ˜Ÿçº§é¿éš¾æ‰€ã€‚â€",
            speaker: "Gourmet",
            type: "event",
            options: [
                {
                    text: "å‘ˆä¸Šæœ€å¥½çš„ç½å¤´å’Œçº¢é…’ (-2 Food)",
                    desc: "è´¿èµ‚ä»–çš„å‘³è•¾",
                    condition: s => s.food >= 2,
                    effect: s => {
                        s.food -= 2;
                        addShopRating(5.0, true); // å¼ºåˆ¶äº”æ˜Ÿ
                        printMsg("èƒ–å­åƒå¾—æ»¡å˜´æµæ²¹ï¼šâ€œOh la la! è¿™ç§é‡‘å±å‘³å’Œé˜²è…å‰‚çš„å®Œç¾èåˆï¼äº”æ˜Ÿï¼ç»èµï¼â€", 'gain');
                    },
                    result: "ä½ çš„åº—é“ºç™»ä¸Šäº†åºŸåœŸç¾é£Ÿæ¦œé¦–ï¼ˆè™½ç„¶åªæœ‰ä¸‰å®¶åº—ä¸Šæ¦œï¼‰ã€‚"
                },
                {
                    text: "â€œçˆ±åƒåƒï¼Œä¸åƒæ»šã€‚â€",
                    desc: "ç¡¬æ ¸æœåŠ¡",
                    effect: s => {
                        addShopRating(1.0, false); // å¼ºåˆ¶ä¸€æ˜Ÿ
                    },
                    result: "ä»–åœ¨ç¬”è®°æœ¬ä¸Šç‹ ç‹ è®°äº†ä¸€ç¬”ï¼šâ€œè€æ¿æœåŠ¡æ€åº¦æå…¶æ¶åŠ£ï¼Œåƒé‡è›®äººä¸€æ ·,é›¶åˆ†ï¼â€"
                }
            ]
        },

        // 2. [æ‰“åˆ†] å¼ºè¿«ç—‡è£…ä¿®å·¥
        feng_shui_master: {
            text: "ä¸€ä¸ªèƒŒç€å„ç§å·¥å…·çš„ç”·äººå†²è¿›æ¥ï¼Œå¯¹ç€ä½ çš„è´§æ¶å¤§å–Šå¤§å«ï¼š\nâ€œä¸å¯¹ï¼å…¨éƒ½ä¸å¯¹ï¼å¼¹è¯ç®±æ€ä¹ˆèƒ½æ”¾åœ¨åŒ»ç–—åŒ…æ—è¾¹ï¼Ÿè¿™ä¸ä»…ä¸å‰åˆ©ï¼Œè€Œä¸”ä¸ç¬¦åˆé£æ°´å­¦ï¼å¿…é¡»é‡æ‘†ï¼â€",
            speaker: "Crazy Architect",
            type: "event",
            options: [
                {
                    text: "è®©ä»–æŠ˜è…¾ (æ¶ˆè€— 1 AP)",
                    desc: "è™½ç„¶å¾ˆçƒ¦ï¼Œä½†ä¹Ÿè®¸ä»–æœ‰é“ç†",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        addShopRating(4.8, true); // è¯„åˆ†å¤§å¹…ä¸Šå‡
                        printMsg("è™½ç„¶ç´¯ï¼Œä½†æ•´ç†åçš„è´§æ¶ç¡®å®è®©äººæ›´æœ‰è´­ä¹°æ¬²äº†ã€‚", 'gain');
                    },
                    result: "â€œçœ‹ï¼æ°”åœºé€šç•…äº†ï¼è´¢æºæ»šæ»šæ¥ï¼â€ ä»–æ»¡æ„åœ°æ“¦ç€æ±—èµ°äº†ï¼Œä¸´èµ°å‰è¿˜åœ¨å¤§xç‚¹è¯„ä¸Šå¤¸äº†ä½ çš„å“å‘³ã€‚"
                },
                {
                    text: "æŠŠä»–æ‰”å‡ºå»",
                    result: "â€œä½ ä¼šåæ‚”çš„ï¼ä½ çš„è´¢è¿è¢«å µä½äº†ï¼â€ å£°éŸ³æ¸æ¸è¿œå»ï¼Œå¹¸å¥½æ²¡æ‰åˆ†ã€‚"
                }
            ]
        },

        // 3. [æ‰“åˆ†] â€œæˆ‘ä¹Ÿè¦é¢å­â€
        refund_demand_angry: {
            text: "ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆå‡¶çš„ä½£å…µæŠŠä¸€æŠŠç”¨è¿‡çš„æªæ‹åœ¨æ¡Œä¸Šã€‚\nâ€œè¿™æªå¡å£³äº†ï¼å®³æˆ‘åœ¨å…„å¼Ÿé¢å‰ä¸¢äº†é¢å­ï¼è™½ç„¶æˆ‘åˆšæ‰è‡ªå·±ä¿®å¥½äº†å®ƒï¼Œä½†æˆ‘å¿ƒæƒ…å¾ˆä¸çˆ½ï¼æˆ‘è¦ç»™å·®è¯„ï¼â€",
            speaker: "Angry Merc",
            type: "alert",
            options: [
                {
                    text: "å…¨é¢é€€æ¬¾å¹¶é“æ­‰ (-$200)",
                    desc: "èŠ±é’±æ¶ˆç¾ä¿è¯„åˆ†",
                    condition: s => s.money >= 200,
                    effect: s => {
                        s.money -= 200;
                        addShopRating(4.5, true);
                        printMsg("ä½£å…µæ„£äº†ä¸€ä¸‹ï¼Œä¸å¥½æ„æ€åœ°æŒ æŒ å¤´ï¼šâ€œå‘ƒ... å…¶å®æˆ‘ä¹Ÿæ²¡é‚£ä¹ˆç”Ÿæ°”ï¼Œä½ äººæ€ªå¥½çš„å‘¢ã€‚â€", 'gain');
                    },
                    result: "ä»–ä¸ä»…æ”¶å›äº†å·®è¯„ï¼Œè¿˜ä¹°äº†ä¸€ç“¶æ°´ä½œä¸ºè¡¥å¿ã€‚"
                },
                {
                    text: "â€œæªæ²¡åï¼Œæ˜¯ä½ æ‰‹æ®‹ã€‚â€",
                    desc: "å®è¯å®è¯´ (æ‰ç²‰è­¦å‘Š)",
                    effect: s => {
                        addShopRating(1.0, false);
                        s.rep_kortac -= 2; 
                    },
                    result: "ä½£å…µæ°”å¾—è„¸çº¢è„–å­ç²—ï¼Œåœ¨é—¨å£éª‚äº†ä½ ååˆ†é’Ÿæ‰èµ°ï¼Œå‘¨å›´çš„äººéƒ½çŸ¥é“ä½ æ¬ºå®¢äº†ã€‚"
                }
            ]
        },

        // 4. [æ‰“åˆ†] åºŸåœŸç½‘çº¢ç›´æ’­
        wasteland_streamer: {
            text: "ä¸€ä¸ªä¸¾ç€ç ´æ—§æ‘„åƒæœºçš„å®¶ä¼™æ­£åœ¨ç›´æ’­ï¼š\nâ€œå®¶äººä»¬ï¼ä»Šå¤©æˆ‘ä»¬æ¥æ‰“å¡è¿™å®¶ä¼ è¯´ä¸­çš„å†›éœ€åº—ï¼å¬è¯´åªè¦ç»™å·®è¯„ï¼Œå°±ä¼šè¢«è€æ¿æš—æ€ï¼Ÿæˆ‘ä»¬æ¥è¯•è¯•æ˜¯ä¸æ˜¯çœŸçš„ï¼â€",
            speaker: "Streamer",
            type: "event",
            options: [
                {
                    text: "å¯¹ç€é•œå¤´å¾®ç¬‘å¹¶å±•ç¤ºæ­¦å™¨",
                    desc: "æ ¸å–„çš„å¾®ç¬‘ (æµé‡å˜ç°)",
                    effect: s => {
                        addShopRating(5.0, true);
                        s.money += 100; // æ‰“èµåˆ†æˆ
                        printMsg("å¼¹å¹•ç¬é—´åˆ·å±ï¼šâ€˜å§æ§½è€æ¿å¥½é£’â€™ã€â€˜è¿™æªæ˜¯çœŸçš„â€™ã€â€˜å·²å…³æ³¨â€™ã€‚", 'gain');
                    },
                    result: "ä¸»æ’­å“å¾—è¯´è¯éƒ½ç»“å·´äº†ï¼šâ€œçœ‹ã€çœ‹æ¥è€æ¿å¾ˆçƒ­æƒ…ï¼å¤§å®¶è®°å¾—ç‚¹èµï¼â€"
                },
                {
                    text: "æ‰“çˆ†ä»–çš„æ‘„åƒæœº (-1 Ammo)",
                    desc: "è¿™å°±æ˜¯çœŸçš„",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        // æ—¢æ²¡æœ‰å¥½è¯„ä¹Ÿæ²¡æœ‰å·®è¯„ï¼Œå› ä¸ºç›´æ’­ä¸­æ–­äº†
                        printMsg("ç›´æ’­ä¿¡å·ä¸­æ–­ï¼Œä¸–ç•Œæ¸…é™äº†ã€‚", 'system');
                    },
                    result: "ä¸»æ’­çœ‹ç€å†’çƒŸçš„é•œå¤´å“­ç€è·‘äº†ã€‚"
                }
            ]
        },

        // 5. [æ‰“åˆ†] å¥‡æ€ªçš„é—®å·è°ƒæŸ¥
        survey_bot: {
            text: "ä¸€å°å¸¦æœ‰è½®å­çš„é—®å·è°ƒæŸ¥æœºå™¨äººæŒ¡ä½äº†ä½ çš„è·¯ã€‚\nâ€œå“”â€”â€”ä¸ºäº†æå‡åºŸåœŸç”Ÿå­˜ä½“éªŒï¼Œè¯·å¯¹æœ¬æ¬¡è´­ç‰©ç¯å¢ƒè¿›è¡Œè¯„åˆ†ï¼Œå¦‚æœä¸è¯„åˆ†ï¼Œæˆ‘å°†å¯åŠ¨è‡ªæ¯ç¨‹åºå¹¶åœ¨æ‚¨åº—é‡Œçˆ†ç‚¸ã€‚â€",
            speaker: "Survey Bot",
            type: "alert",
            options: [
                {
                    text: "è®¤çœŸå¡«å†™é—®å· (æ¶ˆè€— 1 AP)",
                    desc: "ä¸ºäº†å®‰å…¨... (å¿…å¾—äº”æ˜Ÿ)",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        addShopRating(5.0, true); // æœºå™¨äººåˆ·çš„å¥½è¯„
                        printMsg("æœºå™¨äººï¼šâ€œæ„Ÿè°¢æ‚¨çš„åé¦ˆã€‚æ‚¨æ˜¯ç¬¬ 1 ä½é…åˆçš„ç¢³åŸºç”Ÿç‰©ã€‚ç³»ç»Ÿå¥–åŠ±ï¼šäº”æ˜Ÿå¥½è¯„ç”Ÿæˆä¸­ã€‚â€", 'gain');
                    },
                    result: "å®ƒåå‡ºä¸€å¼ æ‰“å°å¥½çš„å¥½è¯„å•ï¼Œç„¶åå¼€å¿ƒåœ°æ»šèµ°äº†ã€‚"
                },
                {
                    text: "ä¸€è„šè¸¢å¼€",
                    desc: "èµŒå®ƒæ˜¯ä¸ªå“‘ç‚®",
                    effect: s => {
                        if (chance(50)) {
                            printMsg("ç °ï¼è¿™æ˜¯ä¸ªå½©å¸¦ç‚®ã€‚æ»¡å±‹å­éƒ½æ˜¯äº®ç‰‡ã€‚", 'system');
                        } else {
                            s.rating = Math.max(1.0, s.rating - 0.2);
                            printMsg("å®ƒå¼€å§‹å¤§å–Šï¼šâ€˜åº—ä¸»æš´åŠ›æŠ—æ³•ï¼åº—ä¸»æš´åŠ›æŠ—æ³•ï¼â€™ åµå¾—é¡¾å®¢çº·çº·ç¦»å¼€ã€‚", 'loss');
                        }
                    },
                    result: "çœŸæ˜¯ä¸ªçƒ¦äººçš„é“ç–™ç˜©ã€‚"
                }
            ]
        },

        // 6. [æ‰“åˆ†] å¯¼æ¸¸çš„å›æ‰£
        tour_guide: {
            text: "ä¸€ä¸ªæ»‘å¤´çš„å¯¼æ¸¸å¸¦ç€ä¸€ç¾¤ç©¿ç€å¹²å‡€é˜²æŠ¤æœçš„é¿éš¾æ‰€è§‚å…‰å®¢æ¥åˆ°é—¨å£ã€‚\nä»–æ‚„æ‚„æŠŠä½ æ‹‰åˆ°ä¸€è¾¹ï¼šâ€œæˆ‘å¸¦è¿™ç¾¤è‚¥ç¾Šæ¥æ¶ˆè´¹ï¼Œä½†æˆ‘å¾—æŠ½æˆ 20%ã€‚ç»™é’±æˆ‘å°±è®©ä»–ä»¬åˆ·å¥½è¯„ï¼Œä¸ç»™æˆ‘å°±å¸¦ä»–ä»¬å»éš”å£è€ç‹çš„åº—ã€‚â€",
            speaker: "Guide",
            options: [
                {
                    text: "æˆäº¤ (-$100)",
                    desc: "è´­ä¹°æµé‡ä¸å¥½è¯„",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        s.money += 400; // è§‚å…‰å®¢æ¶ˆè´¹
                        addShopRating(4.5, true);
                        printMsg("è¿™ç¾¤è§‚å…‰å®¢ä¹°äº†å¥½å¤šæ²¡ç”¨çš„çºªå¿µå“ï¼Œè¿˜ç–¯ç‹‚æ‹ç…§å‘æœ‹å‹åœˆã€‚", 'gain');
                    },
                    result: "åŒèµ¢çš„äº¤æ˜“ï¼Œè™½ç„¶å¯¼æ¸¸ç¬‘å¾—å¾ˆæ¬ æã€‚"
                },
                {
                    text: "â€œæ»šã€‚â€",
                    desc: "æ‹’ç»å‹’ç´¢",
                    result: "å¯¼æ¸¸ç«‹åˆ»è½¬èº«ï¼šâ€œå„ä½ï¼Œè¿™å®¶åº—é£æ°´ä¸å¥½ï¼Œæˆ‘ä»¬å»ä¸‹ä¸€å®¶ï¼â€ è§‚å…‰å®¢ä»¬å¬è¯åœ°èµ°äº†ã€‚"
                }
            ]
        },

        // 7. [æ‰“åˆ†] å‡è¯é£æ³¢ (åè½¬)
        fake_medicine_panic: {
            text: "ä¸€åé¡¾å®¢å†²è¿›æ¥å¤§å–Šï¼šâ€œä½ ä»¬å–çš„æŠ—ç”Ÿç´ æ˜¯å‡çš„ï¼æˆ‘åƒäº†ä¹‹åæµ‘èº«å‘çƒ­ï¼Œè¿˜èƒ½çœ‹è§é‡å½±ï¼å¤§å®¶å¿«æ¥è¯„è¯„ç†å•Šï¼â€\nå‘¨å›´çš„äººå¼€å§‹å¯¹ä½ æŒ‡æŒ‡ç‚¹ç‚¹ï¼Œè¯„åˆ†çœ¼çœ‹å°±è¦æš´è·Œã€‚",
            speaker: "Customer",
            type: "alert",
            options: [
                {
                    text: "æ·¡å®šè§£é‡Šï¼šâ€œé‚£æ˜¯å‰¯ä½œç”¨ï¼Œè¯´æ˜è¯æ•ˆå¼ºã€‚â€",
                    desc: "ä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ (è¿æ°”åˆ¤å®š)",
                    effect: s => {
                        if (chance(70)) {
                            addShopRating(4.0, true);
                            printMsg("é¡¾å®¢æ„£ä½äº†ï¼šâ€œçœŸçš„ï¼Ÿ...æ€ªä¸å¾—æˆ‘è§‰å¾—è…°ä¸é…¸äº†ï¼â€", 'gain');
                        } else {
                            addShopRating(1.0, false);
                            printMsg("é¡¾å®¢ï¼šâ€œæ”¾å±ï¼æˆ‘åªæ˜¯ä½è¡€ç³–ï¼ä½ ä¸ªå¥¸å•†ï¼â€", 'loss');
                        }
                    },
                    result: "å±æœºå…¬å…³å…¨é ä¸€å¼ å˜´ã€‚"
                },
                {
                    text: "é€€æ¬¾æ¯äº‹å®äºº (-$50)",
                    desc: "ä¸æƒ³æŠŠäº‹æƒ…é—¹å¤§",
                    effect: s => {
                        s.money -= 50;
                    },
                    result: "é¡¾å®¢æ‹¿äº†é’±ï¼Œå˜Ÿå›”ç€èµ°äº†ï¼Œä¿¡èª‰ä¿ä½äº†ï¼Œä½†é’±æ²¡äº†ã€‚"
                }
            ]
        },

        // 8. [æ‰“åˆ†] è¯¯ä¼šæˆå‰ç¥¥ç‰© (Krueger)
        mascot_confusion: {
            text: "å‡ ä¸ªè·¯è¿‡çš„å°å­©æŒ‡ç€ååœ¨é—¨å£æ“¦åˆ€çš„ Krueger å°–å«ï¼š\nâ€œå¦ˆå¦ˆå¿«çœ‹ï¼æ˜¯è¿™å®¶åº—çš„å‰ç¥¥ç‰©ï¼é‚£ä¸ªæ‚²ä¼¤é’è›™é¢ç½©å¥½å¯çˆ±ï¼â€\nKrueger æ¡åˆ€çš„æ‰‹åœåœ¨äº†åŠç©ºï¼Œç©ºæ°”ç¬é—´å‡å›ºäº†ã€‚",
            speaker: "Kids",
            type: "event",
            // åªæœ‰ Krueger åœ¨åœºæ—¶è§¦å‘
            condition: s => s.chars.krueger.aff > 0,
            options: [
                {
                    text: "é¡ºæ°´æ¨èˆŸï¼šâ€œæ‘¸ä¸€æ¬¡ $5ã€‚â€",
                    desc: "Krueger ä¼šæ€äº†ä½ çš„ (ä½†èƒ½èµšé’±æ¶¨ç²‰)",
                    effect: s => {
                        s.money += 20;
                        s.chars.krueger.aff -= 5; 
                        addShopRating(5.0, true); // å­©å­ä»¬è§‰å¾—å¾ˆé…·ï¼Œå®¶é•¿ç»™å¥½è¯„
                        printMsg("Krueger å±…ç„¶å¿ä½äº†æ²¡æœ‰å‘ä½œï¼Œåªæ˜¯åƒä¸ªæœ¨å¤´äººä¸€æ ·ä»»ç”±å°å­©æˆ³ä»–çš„æˆ˜æœ¯èƒŒå¿ƒã€‚", 'gain');
                    },
                    result: "äº‹å Krueger æ‰¾ä½ è¦äº†é‚£ $20 ä½œä¸ºç²¾ç¥æŸå¤±è´¹ã€‚"
                },
                {
                    text: "èµ¶ç´§æŠŠå­©å­èµ¶èµ°",
                    desc: "æ•‘å­©å­çš„å‘½",
                    result: "â€œå¿«è·‘ï¼é‚£ä¸æ˜¯é’è›™ï¼é‚£æ˜¯å¤§ç°ç‹¼ï¼â€ å­©å­ä»¬è¢«ä½ å“è·‘äº†ã€‚"
                }
            ]
        },

// 4. [æ¸©é¦¨] è‚¥çš‚ä¸ç‹— (Soap & Riley)
        soap_dog_fail: {
            text: "Soap è¹²åœ¨åœ°ä¸Šï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€æ ¹æ˜‚è´µçš„ç«è…¿è‚ ï¼Œè¯•å›¾ä»¥æ­¤è¯±æƒ‘ Rileyï¼ˆè¿™é‡ŒæŒ‡å†›çŠ¬ï¼‰ã€‚\nâ€œæ¥å˜›ï¼Œä¹–ç‹—ç‹—... å«ä¸€å£°å”å”å°±ç»™ä½ åƒã€‚â€\nRiley æŠŠå¤´æ‰­åˆ°ä¸€è¾¹å®Œå…¨æ— è§†äº†ä»–ï¼Œç”šè‡³æ‰“äº†ä¸ªå“ˆæ¬ ã€‚\nSoap æŠ¬å¤´çœ‹ç€ä½ ï¼Œä¸€è„¸å§”å±ˆï¼šâ€œä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒåªå¬ Walkerså…„å¼Ÿå’ŒKeegançš„è¯ï¼Ÿæˆ‘ä¹Ÿå¾ˆå¸…å•Šï¼â€",
            speaker: "Soap",
            type: "dialogue",
            options: [
                {
                    text: "å¸®ä»–ä½œå¼Šï¼šå·å·å‘½ä»¤ Riley",
                    desc: "æ»¡è¶³ä»–çš„æ„¿æœ›",
                    effect: s => {
                        s.rep_141 += 5;
                        printMsg("ä½ çœ‹å‘ Rileyï¼Œå¾®å¾®ç‚¹å¤´ï¼ŒRiley æä¸æƒ…æ„¿åœ°æ•·è¡åœ°å«äº†ä¸€å£°ï¼Œå¼èµ°äº†ç«è…¿è‚ ã€‚\nSoap å¼€å¿ƒå¾—åƒä¸ªä¸¤ç™¾æ–¤çš„å­©å­ï¼šâ€œå®ƒç†æˆ‘äº†ï¼å®ƒå¿ƒé‡Œæœ‰æˆ‘ï¼â€", 'gain');
                    },
                    result: "Keegan åœ¨è¿œå¤„çœ‹ç€è¿™ä¸€å¹•ï¼Œæ— å¥ˆåœ°æ‘‡äº†æ‘‡å¤´ã€‚"
                },
                {
                    text: "â€œå› ä¸ºä½ å¤ªåµäº†ã€‚â€",
                    desc: "å®è¯å®è¯´",
                    result: "Soap é­å—äº†æš´å‡»ï¼šâ€œå¿ƒç¢äº†...â€"
                }
            ]
        },

        // 5. [æ¸©é¦¨] å­å¢¨çš„åŠŸå¤«èŒ¶ (Zimo)
        zimo_tea_ceremony: {
            text: "Zimo ä»Šå¤©æ²¡æœ‰å‡ºä»»åŠ¡ï¼Œä»–åœ¨åº—é‡Œé‚£ä¸ªé˜³å…‰æœ€å¥½çš„è§’è½æ‘†å¼€äº†ä¸€å¥—ä¾¿æºå¼èŒ¶å…·ã€‚\næ»šæ°´å†²å…¥ç´«ç ‚å£¶ï¼ŒèŒ¶é¦™å››æº¢ï¼Œç¬é—´ç›–è¿‡äº†åºŸåœŸçš„ç¡çƒŸå‘³ã€‚\nâ€œå¦¹å„¿ï¼Œåã€‚â€ ä»–ç»™ä½ å€’äº†ä¸€æ¯ï¼Œâ€œè¿™æ˜¯æ­£å±±å°ç§ï¼Œä»¥å‰æˆ‘çˆ·çˆ·æœ€çˆ±å–çš„ï¼Œåœ¨è¿™é¬¼åœ°æ–¹çœŸæ˜¯å–ä¸€å£å°‘ä¸€å£å’¯ã€‚â€",
            speaker: "Zimo",
            type: "event",
            options: [
                {
                    text: "åä¸‹æ¥é™ªä»–å–èŒ¶ (æ¶ˆè€— 1 AP)",
                    desc: "å·å¾—æµ®ç”ŸåŠæ—¥é—²",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // ç²¾ç¥å¤§æŒ¯
                        s.rep_kortac += 5;
                        printMsg("ä½ å’Œä»–é™é™åœ°åäº†åŠå°æ—¶ï¼ŒZimo è®²èµ·äº†ä»–å®¶ä¹¡çš„å±±å’Œæ°´ä»¥åŠè·³æ°´çš„å¤§çˆ·ä»¬ã€‚\nâ€œç­‰ä»—æ‰“å®Œäº†ï¼Œè¯·ä½ å»æˆ‘å®¶ä¹¡åƒå¸­ã€‚â€", 'gain');
                    },
                    result: "è¿™æ¯èŒ¶ä¸ä»…æš–äº†èƒƒï¼Œä¹Ÿæš–äº†å¿ƒã€‚"
                },
                {
                    text: "è°¢ç»ï¼šâ€œè¿˜æœ‰æ´»è¦å¹²ã€‚â€",
                    desc: "å¿™ç¢Œ",
                    result: "Zimo ç†è§£åœ°ç‚¹ç‚¹å¤´ï¼ŒæŠŠèŒ¶æ¯ç•™åœ¨æŸœå°ä¸Šï¼šâ€œç»™ä½ ç•™ç€ï¼Œå‡‰äº†å°±ä¸å¥½å–äº†ã€‚â€"
                }
            ]
        },


        // 7. [æ¸©é¦¨] å½±å­çš„é¦ˆèµ  (Graves)
        graves_rain_coat: {
            text: "å¤–é¢ä¸‹ç€é…¸é›¨ï¼ŒGraves çš„ç§äººè½¦é˜Ÿè·¯è¿‡ä½ çš„åº—é—¨å£ã€‚\nè½¦çª—é™ä¸‹ï¼ŒGraves æ‰”ç»™ä½ ä¸€ä»¶å´­æ–°çš„å¸¦æœ‰æš—å½±å…¬å¸æ ‡å¿—çš„é«˜çº§é˜²åŒ–é›¨æŠ«ã€‚\nâ€œæ‹¿ç€ï¼Œæˆ‘ä¸å¸Œæœ›æˆ‘æœ€å–œæ¬¢çš„åº—ä¸»å› ä¸ºæ·‹é›¨è€Œç§ƒé¡¶ï¼Œé‚£æ ·ä¼šå½±å“å¸‚å®¹ã€‚â€\nè™½ç„¶è¯ä¸å¥½å¬ï¼Œä½†é‚£æ˜¯é¡¶çº§è£…å¤‡ã€‚",
            speaker: "Phillip Graves",
            type: "event",
            options: [
                {
                    text: "æ”¶ä¸‹å¹¶é“è°¢",
                    desc: "è·å¾—é˜²å…·",
                    effect: s => {
                        s.rep_chimera += 0; // æš—å½±ç®—ä½œå¥‡ç¾æ‹‰é˜µè¥æˆ–ç‹¬ç«‹
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // å¿ƒæƒ…å¥½
                        printMsg("Graves æŒ¥æŒ¥æ‰‹ï¼Œè½¦çª—å‡èµ·ã€‚è½¦é˜Ÿæ‰¬é•¿è€Œå»ã€‚", 'gain');
                    },
                    result: "è¿™ä»¶é›¨æŠ«è´¨é‡æå¥½ï¼Œç”šè‡³è¿˜æœ‰æ’æ¸©åŠŸèƒ½ã€‚"
                },
                {
                    text: "â€œä½ è‡ªå·±ç•™ç€å§ï¼â€",
                    desc: "æ‰”å›å»",
                    result: "é›¨æŠ«æ‰åœ¨æ³¥æ°´é‡Œï¼ŒGraves å†·ç¬‘ä¸€å£°ï¼šâ€œä¸è¯†æŠ¬ä¸¾ã€‚â€ è½¦å¼€èµ°äº†ã€‚"
                }
            ]
        },


// 1. [æ‰“åˆ†] æ™®è±æ–¯çš„æƒå¨è®¤è¯ (Price)
        price_endorsement: {
            text: "æ™®è±æ–¯ä¸Šå°‰ï¼ˆPriceï¼‰æ­£ç«™åœ¨é—¨å£æŠ½é›ªèŒ„ï¼Œå‡ ä¸ªæ–°å…µè›‹å­è·¯è¿‡å‘ä»–æ•¬ç¤¼å¹¶è¯¢é—®å“ªé‡Œä¹°è¡¥ç»™æœ€é è°±ã€‚\nPrice ç”¨å¤§æ‹‡æŒ‡æŒ‡äº†æŒ‡ä½ çš„åº—é—¨ï¼šâ€œåªæœ‰è¿™ä¸€å®¶ï¼Œå…¶ä»–çš„éƒ½æ˜¯åƒåœ¾ã€‚â€\næ–°å…µä»¬ç«‹åˆ»æ‹¿å‡ºäº†ç¬”è®°æœ¬ç‹‚è®°ã€‚",
            speaker: "Captain Price",
            type: "event",
            options: [
                {
                    text: "é€ä¸Šä¸€ç›’é›ªèŒ„ä½œä¸ºæ„Ÿè°¢ (-$50)",
                    desc: "ç»´æŒå¥½å…³ç³»",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        addShopRating(5.0, true); // æƒå¨èƒŒä¹¦ï¼Œç›´æ¥äº”æ˜Ÿ
                        s.rep_141 += 5;
                        printMsg("Price æ¥è¿‡é›ªèŒ„ï¼Œå‹ä½å¸½æªç¬‘äº†ç¬‘ï¼šâ€œåˆä½œæ„‰å¿«ï¼Œå¥³å£«ã€‚â€", 'gain');
                    },
                    result: "æ–°å…µä»¬èœ‚æ‹¥è€Œå…¥ï¼Œä½ çš„åº—é“ºè¯„åˆ†å’Œä¿¡èª‰åº¦æš´æ¶¨ã€‚"
                },
                {
                    text: "å‘ä»–æŒ¥æ‰‹è‡´æ„",
                    desc: "ä¸å‘ä¸äº¢",
                    effect: s => {
                        addShopRating(4.5, true);
                    },
                    result: "æœ‰äº† 141 é˜Ÿé•¿çš„é‡‘å£ç‰è¨€ï¼Œä»Šå¤©çš„ç”Ÿæ„æ ¼å¤–å¥½ã€‚"
                }
            ]
        },

        // 2. [æ‰“åˆ†] ç›–å…¹çš„ä¸´æ—¶åº—å‘˜ (Gaz)
        gaz_help: {
            text: "åº—é‡Œå¿™å¾—ä¸å¯å¼€äº¤ï¼Œä½ ä¸€ä¸ªäººæ¨ä¸å¾—æœ‰ä¸‰å¤´å…­è‡‚ã€‚\næ­£åœ¨æŒ‘å¸½å­çš„ Gaz å®åœ¨æ˜¯çœ‹ä¸ä¸‹å»äº†ï¼Œä»–ä¸»åŠ¨ç«™åˆ°äº†è´§æ¶æ—ï¼Œå¼€å§‹ç†Ÿç»ƒåœ°å¸®è¿·è·¯çš„é¡¾å®¢æŒ‡å¼•æ–¹å‘ã€‚\nâ€œ5.56å­å¼¹åœ¨å·¦è¾¹ï¼Œæ­¢ç—›è¯åœ¨å³è¾¹ï¼Œåˆ«æŒ¡é“ï¼Œä¼™è®¡ã€‚â€",
            speaker: "Kyle 'Gaz' Garrick",
            type: "event",
            options: [
                {
                    text: "è˜è¯·ä»–å½“ä¸€å°æ—¶ä¸´æ—¶å·¥ (-$50)",
                    desc: "ä¸“ä¸šå¯¹å£",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        addShopRating(5.0, true); // æœåŠ¡æ•ˆç‡æå‡
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // ä½ çœåŠ›äº†
                        printMsg("Gaz æ“¦äº†æ“¦æ±—ï¼Œæ¥è¿‡è–ªæ°´ï¼šâ€œè°¢äº†ï¼Œæ­£å¥½å¤Ÿä¹°é‚£é¡¶å¸½å­ã€‚â€", 'gain');
                    },
                    result: "é¡¾å®¢ä»¬å¯¹è¿™ä½å¸…æ°”åˆä¸“ä¸šçš„åº—å‘˜èµä¸ç»å£ã€‚"
                },
                {
                    text: "è¯·ä»–å–ç“¶æ°´",
                    desc: "è¡¨è¾¾æ„Ÿè°¢",
                    effect: s => {
                        addShopRating(4.0, true);
                    },
                    result: "Gaz å–å®Œæ°´æ‘†æ‘†æ‰‹ï¼šâ€œä¸¾æ‰‹ä¹‹åŠ³ï¼Œæ¯”èµ·åœ¨ä¼¦æ•¦æŠ“ææ€–åˆ†å­ï¼Œè¿™è½»æ¾å¤šäº†ã€‚â€"
                }
            ]
        },

        // 3. [æ‰“åˆ†] è™çš„ç„å­¦ (Horangi)
        horangi_lucky_charm: {
            text: "Horangi å†²è¿›åº—é‡Œï¼ŒæŠ±ç€ä½ çš„æ”¶é“¶æœºäº²äº†ä¸€å£ï¼ˆç‰©ç†ï¼‰ã€‚\nâ€œæˆ‘å°±çŸ¥é“ï¼ä¸Šæ¬¡åœ¨ä½ è¿™ä¹°å®Œæ°´ä¹‹åï¼Œæˆ‘è¿èµ¢äº†äº”æŠŠæ‰‘å…‹ï¼è¿™å®¶åº—é£æ°´æ— æ•Œï¼æ—ºæˆ‘ï¼â€\nä»–è½¬èº«å¯¹ç€é—¨å¤–å¤§å–Šï¼šâ€œå…„å¼Ÿä»¬ï¼éƒ½æ¥è¿™ä¹°ä¸œè¥¿ï¼è¿™å„¿èƒ½è½¬è¿ï¼â€",
            speaker: "Horangi",
            type: "event",
            options: [
                {
                    text: "é…åˆä»–ï¼šâ€œæœ¬åº—ç¡®å®å¼€è¿‡å…‰ã€‚â€",
                    desc: "åˆ©ç”¨è¿·ä¿¡è¥é”€",
                    effect: s => {
                        addShopRating(4.8, true); // è¿·ä¿¡çš„ä½£å…µä»¬çº·çº·ç»™å¥½è¯„
                        s.money += 200; // å®¢æµæ¿€å¢
                        printMsg("ä¸€ç¾¤èµŒå¾’å’Œä½£å…µæ¶Œå…¥åº—é‡Œï¼Œç”šè‡³æœ‰äººæƒ³ä¹°ä½ çš„æŠ¹å¸ƒå›å»å½“æŠ¤èº«ç¬¦ã€‚", 'gain');
                    },
                    result: "Horangi å¾—æ„æ´‹æ´‹ï¼šâ€œçœ‹å§ï¼æˆ‘å°±è¯´æ˜¯å®åœ°ï¼â€"
                },
                {
                    text: "æŠŠä»–ä»æ”¶é“¶æœºä¸Šæ‰’æ‹‰ä¸‹æ¥",
                    desc: "â€œè„æ­»äº†ï¼â€",
                    result: "Horangi å˜¿å˜¿ä¸€ç¬‘å¹¶ä¸ä»‹æ„ï¼Œè¿˜åœ¨åº—é‡Œåˆ°å¤„ä¹±æ‘¸è¹­æ¬§æ°”ã€‚"
                }
            ]
        },

// ğŸ² [éšæœºäº‹ä»¶] 1. å¹½çµçš„â€œæ¨¡ä»¿è€…â€ (Cosplay ç°åœº)
        fake_ghost_visit: {
            text: "ä¸€ä¸ªç©¿ç€å»‰ä»·ä¸‡åœ£èŠ‚éª·é«…æœã€æˆ´ç€å¡‘æ–™é¢å…·çš„å®¶ä¼™å¤§æ‘‡å¤§æ‘†åœ°èµ°äº†è¿›æ¥ã€‚\nâ€œå˜¿ï¼Œè€æ¿ï¼æˆ‘æ˜¯ Ghostï¼ç»™æˆ‘æ¥ä»½å…è´¹çš„å¥—é¤ï¼å¦åˆ™æˆ‘å°±... å‘ƒï¼Œæˆ‘å°±çªæ­»ä½ ï¼â€\n(ä»–æ˜¾ç„¶å–é«˜äº†ï¼Œå®Œå…¨æ²¡æ³¨æ„åˆ°çœŸæ­£çš„ Ghost æ­£ç«™åœ¨ä»–èº«åçš„é˜´å½±é‡Œ)",
            speaker: "Fake Ghost",
            type: "event",
            options: [
                {
                    text: "é…åˆè¡¨æ¼”ï¼šâ€œå¤©å“ªï¼æ˜¯å¹½çµä¸­å°‰ï¼â€",
                    desc: "çœ‹çƒ­é—¹ä¸å«Œäº‹å¤§",
                    effect: s => {
                        s.chars.ghost.aff -= 2; // Ghost è§‰å¾—å¾ˆæ— è¯­
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // ä½ ç¬‘å¾—å¾ˆå¼€å¿ƒ
                        printMsg("ä½ å¤¸å¼ çš„æ¼”æŠ€é€—ä¹äº†å…¨åœºï¼ŒçœŸæ­£çš„ Ghost å¹äº†å£æ°”ï¼Œèµ°è¿‡å»å•æ‰‹æŠŠé‚£ä¸ªå†’ç‰Œè´§æäº†èµ·æ¥ï¼Œæ‰”å‡ºäº†é—¨å¤–ã€‚\nå†’ç‰Œè´§ï¼šâ€œå“‡ï¼æˆ‘ä¼šé£äº†ï¼å°±åƒçœŸæ­£çš„å¹½çµä¸€æ ·ï¼â€", 'gain');
                    },
                    result: "ä¸€åœºç²¾å½©çš„å–œå‰§æ¼”å‡ºã€‚"
                },
                {
                    text: "å†·æ¼ ï¼šâ€œçœŸæ­£çš„ Ghost ä¸ä¼šç©¿ä¹‰ä¹Œæ‰¹å‘çš„é¢å…·ã€‚â€",
                    desc: "æ— æƒ…æ‹†ç©¿",
                    result: "å†’ç‰Œè´§æ„£äº†ä¸€ä¸‹ï¼šâ€œè¿™æ˜¯... æˆ˜æœ¯ä¼ªè£…ï¼ä½ ä¸æ‡‚ï¼â€ ç„¶åè¢«å‡ ä¸ªè·¯è¿‡çš„ 141 é˜Ÿå‘˜æ¶èµ°äº†ã€‚"
                }
            ]
        },

        // ğŸ² [éšæœºäº‹ä»¶] 2. å­å¢¨çš„ç«é”…å±€ (Zimo)
        zimo_hotpot: {
            text: "Zimo å±…ç„¶æåˆ°äº†ä¸€ä¸ªä¾¿æºå¼ç…¤æ°”ç‚‰å’Œä¸€åŒ…ç«é”…åº•æ–™ï¼Œä»–ç›´æ¥åœ¨ä½ çš„åº—é—¨å£æ”¯èµ·äº†æ‘Šå­ã€‚\nâ€œå¦¹å„¿ï¼æ¥æ¥æ¥ï¼æ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸€é¡¿ç«é”…è§£å†³ä¸äº†çš„ï¼å¦‚æœæœ‰ï¼Œé‚£å°±ä¸¤é¡¿ï¼â€\né¦™å‘³é£˜äº†ä¸‰æ¡è¡—ï¼Œè¿ Barrage éƒ½è¢«å¸å¼•è¿‡æ¥äº†ï¼Œä¸è¿‡ä»–æ­£è¯•å›¾ç”¨ç­·å­å¤¹èµ·ä¸€é¢—ä¸¸å­ã€‚",
            speaker: "Zimo",
            type: "event",
            options: [
                {
                    text: "åŠ å…¥ç«é”…å±€ (æ¶ˆè€— 1 Food)",
                    desc: "å…¨å‘˜å›¢å»º (+å…¨é˜µè¥å¥½æ„Ÿ)",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.rep_141 += 3; s.rep_kortac += 3; s.rep_chimera += 3; s.rep_ghosts += 3;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                        printMsg("ä½ è´¡çŒ®äº†ä¸€äº›åˆé¤è‚‰ï¼Œå¤§å®¶å›´ç€é”…å­åƒå¾—æ»¡å¤´å¤§æ±—ã€‚\nBarrage ç»ˆäºå¤¹èµ·äº†ä¸¸å­ï¼Œä½†çƒ«åˆ°äº†èˆŒå¤´ã€‚\nKrueger é»˜é»˜åœ°å¾€é”…é‡ŒåŠ äº†ä¸€æŠŠé‡èœã€‚", 'gain');
                    },
                    result: "åœ¨è¿™å†°å†·çš„åºŸåœŸï¼Œè¿™æ˜¯æœ€æ¸©æš–çš„ä¸€åˆ»ã€‚"
                },
                {
                    text: "æ”¶åœºåœ°è´¹ ($50)",
                    desc: "åœ¨å•†è¨€å•†",
                    effect: s => {
                        s.money += 50;
                    },
                    result: "Zimo çˆ½å¿«åœ°ç»™äº†é’±ï¼šâ€œæ²¡é—®é¢˜ï¼åƒå¼€å¿ƒæœ€é‡è¦ï¼â€"
                }
            ]
        },

        // ğŸ² [éšæœºäº‹ä»¶] 3. çŒ«å’ªçš„æŠ¥æ© (å¦‚æœæ”¶å…»äº†çŒ«)
        cat_gift_grenade: {
            text: "ä½ æ”¶å…»çš„é‚£åªåº—å® çŒ«å’ªéª„å‚²åœ°è¿ˆç€çŒ«æ­¥èµ°äº†è¿›æ¥ï¼Œå˜´é‡Œå¼ç€å®ƒçš„â€œçŒç‰©â€ï¼Œæ”¾åœ¨äº†ä½ çš„è„šè¾¹ã€‚\nä½ å®šç›ä¸€çœ‹ï¼šé‚£ä¸æ˜¯è€é¼ ï¼Œè€Œæ˜¯ä¸€æšæ‹‰ç¯å·²ç»æ¾åŠ¨çš„é«˜çˆ†æ‰‹é›·ã€‚\nçŒ«å’ªï¼šâ€œå–µ~â€ (å¿«å¤¸æˆ‘ï¼)",
            speaker: "Shop Cat",
            type: "alert",
            // åªæœ‰æ”¶å…»äº†çŒ«æ‰è§¦å‘ (è¿™é‡Œå‡è®¾ä¹‹å‰æ”¶å…»çŒ«ä¼šç»™ä¸ª flagï¼Œå¦‚æœæ²¡æœ‰ flag å°±å½“ä½œé€šç”¨äº‹ä»¶)
            condition: s => chance(10), 
            options: [
                {
                    text: "å°å¿ƒç¿¼ç¿¼åœ°å¤„ç†æ‰‹é›·",
                    desc: "è·å¾— 1 Ammo (å¦‚æœæ˜¯å¥½çš„)",
                    effect: s => {
                        if (chance(50)) {
                            s.ammo += 1;
                            printMsg("ä½ å†·æ±—ç›´æµåœ°æŠŠæ‰‹é›·æ”¶äº†èµ·æ¥ã€‚å±…ç„¶è¿˜æ˜¯ä¸ªå¥½çš„ã€‚", 'gain');
                        } else {
                            printMsg("æ˜¯ä¸ªç©ºå£³å“‘å¼¹ï¼Œä½ æ¾äº†ä¸€å£æ°”ã€‚", 'system');
                        }
                    },
                    result: "ä½ æ‘¸äº†æ‘¸çŒ«å¤´ï¼Œå¿ƒæƒ…å¤æ‚ï¼šâ€œä¸‹æ¬¡å¸¦ç‚¹èƒ½åƒçš„ä¸œè¥¿ï¼Œå¥½å—ï¼Ÿâ€"
                },
                {
                    text: "â€œGhostï¼æ•‘å‘½ï¼çŒ«è¦ç‚¸äº†ï¼â€",
                    desc: "å‘¼å«æ‹†å¼¹ä¸“å®¶",
                    condition: s => s.chars.ghost.aff > 20,
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        printMsg("Ghost ç”¨ä¸¤æ ¹æ‰‹æŒ‡æ‹èµ·æ‰‹é›·ï¼Œçœ‹äº†ä¸€çœ¼çŒ«ï¼Œåˆçœ‹äº†ä¸€çœ¼ä½ ã€‚\nâ€œ...çŒ«éƒ½æ¯”ä½ ä¼šç”¨æ‰‹é›·ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "Ghost æ”¶èµ°äº†æ‰‹é›·ï¼Œå¹¶ç»™äº†çŒ«ä¸€æ¡å°é±¼å¹²ä½œä¸ºå¥–åŠ±ã€‚"
                }
            ]
        },

        // ğŸ² [éšæœºäº‹ä»¶] 4. è¯»ä¹¦ä¼š (Keegan & Krueger)
        reading_club: {
            text: "éš¾å¾—çš„å®‰é™åˆåã€‚ä½ å‘ç° Keegan å’Œ Krueger å±…ç„¶ååœ¨åŒä¸€å¼ æ¡Œå­çš„ä¸¤ç«¯çœ‹ä¹¦ã€‚\nKeegan åœ¨çœ‹ã€Šå­™å­å…µæ³•ã€‹ï¼ŒKrueger åœ¨çœ‹... ã€Šæ ¼æ—ç«¥è¯ã€‹ï¼Ÿ\nä¸¤äººä¹‹é—´çš„æ°”åœºè¯¡å¼‚åœ°å’Œè°ã€‚",
            speaker: "System",
            type: "event",
            options: [
                {
                    text: "ç»™ä»–ä»¬å€’èŒ¶ï¼Œä¸æ‰“æ‰°",
                    desc: "äº«å—é™è°§æ—¶å…‰",
                    effect: s => {
                        s.chars.keegan.aff += 2;
                        s.chars.krueger.aff += 2;
                        printMsg("ä¸¤äººåŒæ—¶æŠ¬æ‰‹æ¥è¿‡èŒ¶æ¯ï¼Œç”šè‡³æ²¡æœ‰æŠ¬å¤´ï¼ŒåŠ¨ä½œåŒæ­¥ç‡ 100%ã€‚", 'event');
                    },
                    result: "ä¹¦é¡µç¿»åŠ¨çš„å£°éŸ³æ˜¯æœ€å¥½çš„ç™½å™ªéŸ³ã€‚"
                },
                {
                    text: "é—® Krueger ä¸ºä»€ä¹ˆè¦çœ‹ç«¥è¯",
                    desc: "å¥½å¥‡å®³æ­»çŒ«",
                    result: "Krueger åˆä¸Šä¹¦ï¼Œçœ¼ç¥é˜´éƒï¼šâ€œå› ä¸ºç°å®æ¯”ç«¥è¯æ›´åƒåœ°ç‹±ï¼Œè¿˜æœ‰ï¼Œå°çº¢å¸½å…¶å®æ˜¯ä¸ªåˆºå®¢ï¼Œä½ æ²¡å‘ç°å—ï¼Ÿâ€"
                }
            ]
        },

        // ğŸ² [éšæœºäº‹ä»¶] 5. é…’åçœŸè¨€ (Graves)
        graves_drunk: {
            text: "Graves ç«Ÿç„¶å–é†‰äº†ï¼Œè¿™ä½å¹³æ—¥é‡Œç²¾æ˜å¼ºå¹²çš„æŒ‡æŒ¥å®˜æ­¤åˆ»è¶´åœ¨ä½ çš„æŸœå°ä¸Šï¼Œä¸ä»…é¢†å¸¦æ­ªäº†ï¼Œæ‰‹é‡ŒæŠ“ç€ä¸€ä¸ªç©ºé…’ç“¶ã€‚\nâ€œä»–ä»¬éƒ½è¯´æˆ‘æ˜¯ä¸ºäº†é’±... å—ï¼æ²¡é”™ï¼Œæˆ‘å°±æ˜¯ä¸ºäº†é’±ï¼ä½†æˆ‘ä¹Ÿæƒ³... æƒ³è®©æˆ‘çš„å…„å¼Ÿä»¬è¿‡ä¸Šå¥½æ—¥å­å•Šï¼æˆ‘æœ‰é”™å—ï¼Ÿå•Šï¼Ÿâ€",
            speaker: "Phillip Graves",
            type: "dialogue",
            options: [
                {
                    text: "â€œä½ æ²¡é”™ï¼Œåªæ˜¯é€‰é”™äº†è·¯ã€‚â€",
                    desc: "å……æ»¡å“²ç†çš„å®‰æ…°",
                    effect: s => {
                        s.rep_chimera += 0; // æš—å½±å…¬å¸å¥½æ„Ÿ
                        printMsg("Graves æ„£ä½äº†ï¼Œçœ¼é‡Œé—ªè¿‡ä¸€ä¸æ¸…æ˜ã€‚\nâ€œ...ä¹Ÿè®¸å§ï¼Œä½†è·¯ä¸€æ—¦é€‰äº†ï¼Œå°±æ²¡æ³•å›å¤´äº†ã€‚â€", 'dialogue', 'Graves');
                    },
                    result: "ä»–æ‰”ä¸‹ä¸€æ²“é’ç¥¨ä½œä¸ºé…’é’±ï¼Œè¸‰è·„ç€ç¦»å¼€äº†ï¼ŒèƒŒå½±çœ‹èµ·æ¥æœ‰ç‚¹å­¤å•ã€‚"
                },
                {
                    text: "â€œè¿™å°±æ˜¯ä½ èƒŒå› 141 çš„ç†ç”±ï¼Ÿâ€",
                    desc: "æ‰å¿ƒ",
                    result: "Graves çš„è„¸è‰²ç¬é—´é˜´æ²‰ä¸‹æ¥ï¼šâ€œé—­å˜´ï¼Œä½ æ‡‚ä»€ä¹ˆã€‚â€ ä»–æ‘”é—¨è€Œå»ã€‚"
                }
            ]
        },

// â˜¢ï¸ [é»‘è‰²å¹½é»˜] 1. â€œé™ˆå¹´ä½³é…¿â€å“é‰´ä¼š
        vintage_water_tasting: {
            text: "ä¸€ä¸ªè‡ªç§°åºŸåœŸå“é…’å¸ˆçš„å®¶ä¼™èµ°äº†è¿›æ¥ï¼Œä½†ä»–ä¸ä¹°é…’ï¼Œè€Œæ˜¯å¯¹ç€ä½ è´§æ¶ä¸Šçš„ç“¶è£…æ°´æŒ‡æŒ‡ç‚¹ç‚¹ã€‚\nâ€œå•Š... çœ‹æ¥æ˜¯ 2025 å¹´çš„é›¨æ°´ï¼Œç•¥å¸¦é…¸å‘³ï¼Œå£æ„Ÿåšé‡ï¼Œç”šè‡³èƒ½å°å‡ºé‚£å¹´åŒ–å·¥å‚çˆ†ç‚¸åçš„çƒŸç†æ„Ÿï¼Œç»ä½³çš„å¹´ä»½ï¼â€",
            speaker: "Water Sommelier",
            type: "event",
            options: [
                {
                    text: "é…åˆä»–ï¼šâ€œè¿™ç“¶è¦å– $500ã€‚â€",
                    desc: "èµ‹äºˆâ€˜æ–‡åŒ–ä»·å€¼â€™",
                    effect: s => {
                        if (chance(50)) {
                            s.money += 500;
                            s.food = Math.max(0, s.food - 1); // å–æ‰ä¸€ç“¶æ°´
                            printMsg("â€œä¸ºäº†è¿™ä»½æƒ…æ€€ï¼Œå€¼äº†ï¼â€ ä»–çœŸçš„æé’±ä¹°äº†ä¸€ç“¶æ™®é€šçš„æ°´ã€‚", 'gain');
                        } else {
                            printMsg("â€œä½ å±…ç„¶æƒ³å®°ä¸€åè‰ºæœ¯å®¶ï¼Ÿä¿—æ°”ï¼â€ ä»–æ„¤ç„¶ç¦»å»ã€‚", 'system');
                        }
                    },
                    result: "è¥é”€çš„è‰ºæœ¯åœ¨äºæŠŠåƒåœ¾è®²æˆæ•…äº‹ã€‚"
                },
                {
                    text: "â€œé‚£æ˜¯æ˜¨æ™šåˆšçŒçš„è‡ªæ¥æ°´ã€‚â€",
                    desc: "æ— æƒ…æ‹†ç©¿",
                    result: "å“é…’å¸ˆåƒµä½äº†ï¼šâ€œ...ä½ ä¸æ‡‚æ¬£èµã€‚â€ ç„¶åå°´å°¬åœ°æºœäº†ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 2. æƒ…æ„ŸæŠšæ…°æ‰‹é›·
        support_grenade: {
            text: "ä¸€åç²¾ç¥ææƒšçš„ä½£å…µæŠ±ç€ä¸€é¢—ä¿é™©æ “å·²ç»æ‘‡æ‘‡æ¬²å çš„æ‰‹é›·ååœ¨åº—é‡Œï¼Œä¸€è¾¹æŠšæ‘¸å®ƒä¸€è¾¹å–ƒå–ƒè‡ªè¯­ï¼š\nâ€œä¹–... åªæœ‰ä½ æ‡‚æˆ‘... åªæœ‰ä½ ä¸ä¼šç¦»å¼€æˆ‘... åˆ«ç”Ÿæ°”ï¼Œæˆ‘ä»¬ä¸ç‚¸...â€\nå‘¨å›´çš„é¡¾å®¢éƒ½åœ¨ç»™ä½ ä½¿çœ¼è‰²ï¼Œè®©ä½ èµ¶ç´§å¤„ç†ã€‚",
            speaker: "Unstable Merc",
            type: "alert",
            options: [
                {
                    text: "ç»™ä»–ä¸€å·èƒ¶å¸¦ (-1 Ammo)",
                    desc: "â€œæŠŠå®ƒçš„å˜´å°ä¸Šï¼Œä¸ºäº†å¤§å®¶å¥½ã€‚â€",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        addShopRating(5.0, true); // é¡¾å®¢æ„Ÿè°¢ä½ çš„æ•‘å‘½ä¹‹æ©
                        printMsg("ä½ é€’ç»™ä»–èƒ¶å¸¦ï¼Œä»–æ¸©æŸ”åœ°æŠŠæ‰‹é›·ç¼ äº†èµ·æ¥ï¼šâ€œçœ‹ï¼Œç©¿æ–°è¡£æœäº†ã€‚â€", 'gain');
                    },
                    result: "å±æœºè§£é™¤ï¼ˆæš‚æ—¶ï¼‰ï¼Œä»–æŠ±ç€æ‰‹é›·å¼€å¿ƒåœ°èµ°äº†ã€‚"
                },
                {
                    text: "è¯•å›¾èµ¶èµ°ä»–",
                    desc: "é«˜é£é™©æ“ä½œ",
                    effect: s => {
                        if (chance(20)) {
                            printMsg("è½°ï¼æ‰‹é›·åœ¨ä»–æ€€é‡Œç‚¸äº†ã€‚è¿˜å¥½æ˜¯é¢—å¨åŠ›å‡åŠçš„å“‘å¼¹ã€‚", 'loss');
                            s.medkit = Math.max(0, s.medkit - 1); // æ²»ç–—è¢«æ³¢åŠçš„è‡ªå·±
                        } else {
                            printMsg("ä»–å¤§å¼ä¸€å£°â€œå®ƒä¸å–œæ¬¢ä½ ï¼â€ç„¶åè·‘äº†å‡ºå»ã€‚", 'system');
                        }
                    },
                    result: "ç–¯å­æ¯”æ•Œäººæ›´å¯æ€•ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 3. ç“¶ç›–æ”¶è—å®¶ (è‡´æ•¬ Fallout)
        bottle_cap_guy: {
            text: "ä¸€ä¸ªç©¿ç€è“è‰²ç´§èº«è¡£çš„æ€ªäººå†²è¿›åº—é‡Œï¼Œä»–åœ¨æŸœå°ä¸Šæ‹ä¸‹äº†ä¸€å¤§æŠŠç”Ÿé”ˆçš„å•¤é…’ç“¶ç›–ã€‚\nâ€œç»™æˆ‘æ¥æœ€å¥½çš„è£…å¤‡ï¼æˆ‘æœ‰çš„æ˜¯é’±ï¼è¿™äº›å¯æ˜¯ç¡¬é€šè´§ï¼â€",
            speaker: "Vault Dweller?",
            type: "dialogue",
            options: [
                {
                    text: "â€œè¿™é‡Œä¸æ”¶ç“¶ç›–ï¼Œæœ‹å‹ã€‚â€",
                    desc: "è®©ä»–è®¤æ¸…ç°å®",
                    result: "ä»–ä¸€è„¸éœ‡æƒŠï¼šâ€œä»€ä¹ˆï¼Ÿè¿™ä¸å¯èƒ½ï¼éš¾é“é€šè´§è†¨èƒ€è¿™ä¹ˆä¸¥é‡äº†å—ï¼Ÿâ€ ä»–æŠ±ç€ç“¶ç›–å“­ç€è·‘äº†ã€‚"
                },
                {
                    text: "æ”¶ä¸‹ç“¶ç›–ï¼Œç»™ä»–ä¸€ç“¶æ°´ (-1 Food)",
                    desc: "é…åˆä»–çš„æ¼”å‡º (+å¿ƒæƒ…)",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // è¢«é€—ä¹äº†
                        printMsg("ä½ æ”¶ä¸‹äº†é‚£ä¸€å †åºŸé“ï¼Œè™½ç„¶æ²¡ç”¨ï¼Œä½†å¬ç€å“—å•¦å•¦çš„å£°éŸ³æŒºè§£å‹çš„ã€‚", 'gain');
                    },
                    result: "â€œè°¢äº†ï¼åºŸåœŸéœ€è¦ä½ è¿™æ ·çš„è‰¯å¿ƒå•†å®¶ï¼â€ ä»–ç«–èµ·å¤§æ‹‡æŒ‡ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 4. å“²å­¦åŠ«åŒª
        philosophical_bandit: {
            text: "ä¸€ä¸ªè’™é¢åŠ«åŒªä¸¾ç€æªå†²äº†è¿›æ¥ï¼šâ€œæ‰“åŠ«ï¼æŠŠé’±äº¤å‡º...ç­‰ç­‰ã€‚â€\nä»–çœ‹åˆ°äº†ä½ ä¹¦æ¶ä¸Šçš„ä¸€æœ¬æ—§ä¹¦ï¼Œçªç„¶æ„£ä½äº†ã€‚\nâ€œã€Šå­˜åœ¨ä¸è™šæ— ã€‹ï¼Ÿåœ¨è¿™ç§åªæœ‰æ€æˆ®çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å­˜åœ¨çš„æ„ä¹‰ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼ŸæŠ¢åŠ«çš„æœ¬è´¨ï¼Œæ˜¯ä¸æ˜¯ä¸€ç§å¯¹è™šæ— çš„åæŠ—ï¼Ÿâ€\nä»–æ”¾ä¸‹äº†æªï¼Œé™·å…¥äº†æ²‰æ€ã€‚",
            speaker: "Bandit",
            type: "event",
            options: [
                {
                    text: "è·Ÿä»–æ¢è®¨å“²å­¦ (æ¶ˆè€— 1 AP)",
                    desc: "ç”¨é€»è¾‘å¿½æ‚ ä»–",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.rep_chimera += 2; // ä¹Ÿè®¸ä»–æ˜¯ä¸ªæœ‰æ–‡åŒ–çš„ç–¯å­
                        printMsg("ä½ ä»¬èŠäº†åŠå°æ—¶çš„å­˜åœ¨ä¸»ä¹‰ï¼Œä»–æœ€åç—›å“­æµæ¶•ï¼Œç•™ä¸‹äº†ä»–çš„æªä½œä¸ºç¤¼ç‰©ã€‚", 'gain');
                        s.ammo += 5;
                    },
                    result: "çŸ¥è¯†å°±æ˜¯åŠ›é‡ã€‚"
                },
                {
                    text: "è¶æœºæŠŠä»–æ‰“æ™•",
                    desc: "ç‰©ç†è¶…åº¦",
                    result: "ä½ ç”¨æ”¶é“¶æœºåº•åº§ç ¸æ™•äº†ä»–ã€‚â€œæ„ä¹‰å°±æ˜¯ä½ ç°åœ¨å¾—å»åç‰¢ã€‚â€"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 5. æ•…éšœçš„å…¨æ¯å¹¿å‘Š
        glitchy_ad_drone: {
            text: "ä¸€ä¸ªåªæœ‰åŠä¸ªèºæ—‹æ¡¨çš„å¹¿å‘Šæ— äººæœºæ‘‡æ‘‡æ™ƒæ™ƒåœ°é£è¿›åº—é‡Œï¼ŒæŠ•å½±å‡ºä¸€ä¸ªæ»¡æ˜¯é›ªèŠ±ç‚¹çš„å…¨æ¯å½±åƒã€‚\nâ€œ...æ¬¢è¿æ¥åˆ°...å¤©å ‚æµ·æ»©åº¦å‡æ‘...äº«å—...24å°æ—¶...æ ¸é…¸...æ£€æµ‹...â€\nå®ƒå¡ä½äº†ï¼Œä¸€ç›´åœ¨é‡å¤æ ¸é…¸ä¸¤ä¸ªå­—ã€‚",
            speaker: "Broken Drone",
            type: "event",
            options: [
                {
                    text: "æ‹†äº†å–åºŸé“",
                    desc: "å›æ”¶èµ„æº",
                    effect: s => {
                        s.money += 30;
                        printMsg("ä½ ä¸€æ‰«å¸šæŠŠå®ƒæ‰“äº†ä¸‹æ¥ã€‚ç”µæ± è¿˜èƒ½ç”¨ã€‚", 'gain');
                    },
                    result: "é‚£ä¸ªè™šå‡çš„å¤©å ‚å½±åƒç»ˆäºæ¶ˆå¤±äº†ã€‚"
                },
                {
                    text: "ä¿®æ”¹å®ƒçš„ç¨‹åº",
                    desc: "è®©å®ƒæ’­æ”¾ä½ çš„åº—é“ºå¹¿å‘Š (éœ€ 1 AP)",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        addShopRating(4.5, true);
                        printMsg("ç°åœ¨å®ƒåœ¨è¡—ä¸Šåˆ°å¤„é£ï¼Œå–Šç€â€œå…¨åœºäº”æŠ˜ï¼ˆéª—ä½ çš„ï¼‰â€ï¼Œå¸å¼•äº†ä¸å°‘äººã€‚", 'gain');
                    },
                    result: "åºŸç‰©åˆ©ç”¨åˆ°äº†æè‡´ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 6. ç©ºæ°”ç½å¤´
        canned_air: {
            text: "ä¸€ä¸ªç²¾æ˜çš„å•†äººæ­£åœ¨å‘ä½ çš„é¡¾å®¢æ¨é”€æ–°äº§å“ã€‚\nâ€œè¿™æ˜¯â€˜æˆ˜å‰ç©ºæ°”â€™ï¼æ˜¯ä»æœªè¢«è¾å°„æ±¡æŸ“è¿‡çš„ã€2025 å¹´çš„çº¯å‡€ç©ºæ°”ï¼å¸ä¸€å£ï¼Œå»¶å¹´ç›Šå¯¿ï¼åªè¦ $100 ä¸€ç½ï¼â€\nï¼ˆå…¶å®å°±æ˜¯ä¸ªç©ºç½å¤´ï¼‰",
            speaker: "Scammer",
            type: "alert",
            options: [
                {
                    text: "æŠŠä»–è¸¢å‡ºå»",
                    desc: "ç»´æŠ¤æ¶ˆè´¹è€…æƒç›Š",
                    effect: s => {
                        addShopRating(5.0, true);
                    },
                    result: "â€œè¿™é‡Œä¸æ¬¢è¿éª—å­ï¼â€ é¡¾å®¢ä»¬çº·çº·ä¸ºä½ é¼“æŒã€‚"
                },
                {
                    text: "â€œç»™æˆ‘æ¥ä¸€ç½â€ (-$100)",
                    desc: "æ˜¯ä¸æ˜¯æ™ºå•†ç¨ï¼Ÿ",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // å¿ƒç†ä½œç”¨
                        printMsg("ä½ å¸äº†ä¸€å£... å—¯ï¼Œè¿™å°±æ˜¯ $100 çš„å‘³é“ã€‚æ„Ÿè§‰å¿ƒæƒ…å˜å¥½äº†ï¼Ÿ", 'gain');
                    },
                    result: "è¿™å¯èƒ½æ˜¯ä¸–ç•Œä¸Šæœ€è´µçš„å¿ƒç†å®‰æ…°å‰‚ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 7. éšå½¢ç‹—
        invisible_dog: {
            text: "ä¸€ä¸ªæµæµªæ±‰æ‰‹é‡Œæ‹¿ç€ä¸€æ ¹åƒµç¡¬çš„çš®å¸¦ï¼Œçš®å¸¦çš„å¦ä¸€ç«¯æ‚¬åœ¨åŠç©ºä¸­ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚\nâ€œå°å¿ƒç‚¹ï¼Œè€æ¿ã€‚â€˜ç»ˆç»“è€…â€™è„¾æ°”ä¸å¤ªå¥½ï¼Œå®ƒåªåƒæœ€å¥½çš„ç‰›æ’ã€‚â€\nä»–ç…æœ‰ä»‹äº‹åœ°æŠšæ‘¸ç€é‚£ä¸€å›¢ç©ºæ°”ï¼Œç”šè‡³è¿˜åœ¨ç»™å®ƒæ¢³æ¯›ã€‚",
            speaker: "Madman",
            type: "event",
            options: [
                {
                    text: "é…åˆä»–ï¼šâ€œçœŸæ˜¯æ¡å¥½ç‹—â€",
                    desc: "ç»™â€˜ç‹—â€™å–‚ç‚¹ç©ºæ°”",
                    effect: s => {
                        s.rating = Math.min(5.0, s.rating + 0.1);
                        printMsg("æµæµªæ±‰å¼€å¿ƒåœ°ç¬‘äº†ï¼šâ€œçœ‹ï¼å®ƒå–œæ¬¢ä½ ï¼å®ƒåœ¨èˆ”ä½ çš„æ‰‹ï¼â€\nï¼ˆä½ æ„Ÿè§‰æ‰‹èƒŒä¸Šå¥½åƒçœŸçš„æœ‰ç‚¹æ¹¿... ä¹Ÿè®¸æ˜¯å±‹é¡¶æ¼æ°´ï¼Ÿï¼‰", 'event');
                    },
                    result: "æœ‰äº›ç–¯ç™«æ˜¯è¿™ä¸ªä¸–ç•Œæœ€åçš„æ¸©æŸ”ã€‚"
                },
                {
                    text: "â€œè¿™å„¿ç¦æ­¢å® ç‰©å…¥å†…â€",
                    desc: "èµ¶èµ°ä»–",
                    result: "â€œèµ°å§ç»ˆç»“è€…ï¼Œè¿™é‡Œçš„äººä¸æ‡‚æ¬£èµã€‚â€ ä»–æ‹–ç€é‚£æ ¹ç©ºè¡è¡çš„çš®å¸¦èµ°äº†ã€‚"
                }
            ]
        },

        // â˜¢ï¸ [é»‘è‰²å¹½é»˜] 8. â€œæˆ‘æ˜¯ä½ çˆ¸çˆ¸â€
        dna_test: {
            text: "ä¸€ä¸ªæ»¡è„¸èƒ¡èŒ¬çš„å¤§å”å†²è¿›æ¥ï¼Œæ‹¿ç€ä¸€å¼ æ¨¡ç³Šä¸æ¸…çš„ç…§ç‰‡æ¯”å¯¹ä½ çš„è„¸ã€‚\nâ€œåƒï¼å¤ªåƒäº†ï¼å­©å­ï¼Œæˆ‘æ˜¯ä½ å¤±æ•£å¤šå¹´çš„çˆ¶äº²å•Šï¼æˆ‘çœ‹è¿‡å‰§æœ¬ï¼Œä¸»è§’é€šå¸¸éƒ½æœ‰ä¸ªç¥ç§˜çš„çˆ¹ï¼â€\nä»–æœŸå¾…åœ°çœ‹ç€ä½ ï¼Œä¼¼ä¹ç­‰ç€æ„Ÿäººçš„è®¤äº²åœºé¢ï¼ˆå’Œä½ çš„é’±ï¼‰ã€‚",
            speaker: "Stranger",
            type: "dialogue",
            options: [
                {
                    text: "â€œå¦‚æœä½ æ˜¯æˆ‘çˆ¹ï¼Œé‚£ä½ æ¬ æˆ‘ 20 å¹´æŠšå…»è´¹ã€‚â€",
                    desc: "åå‘è¦é’±",
                    effect: s => {
                        printMsg("å¤§å”æ„£ä½äº†ï¼Œè„¸è‰²å¤§å˜ï¼šâ€œå‘ƒ... æˆ‘çªç„¶æƒ³èµ·æ¥æˆ‘è®¤é”™äººäº†ï¼å†è§ï¼â€", 'system');
                    },
                    result: "ä»–è·‘å¾—æ¯”å…”å­è¿˜å¿«ã€‚"
                },
                {
                    text: "æ‹”æªä¸Šè†›",
                    desc: "ç®€å•ç›´æ¥",
                    result: "â€œæ‰“æ‰°äº†ï¼â€ ä»–ç¬é—´æ¶ˆå¤±ã€‚"
                }
            ]
        },

// [Soap] è½é€‰ç”·ä¸»ï¼šæ—¥è®°é‡Œçš„ç´ æ
        // è®¾å®šï¼šSoap å…¶å®ä¸€ç›´å·å·æš—æ‹ä½ ï¼Œä½†ä»–çŸ¥é“ä½ èº«è¾¹æœ‰æ›´å±é™©çš„äººï¼ˆGhost/Kruegerç­‰ï¼‰ï¼Œæ‰€ä»¥é€‰æ‹©é€€è®©ã€‚
        soap_sketchbook: {
            text: "Soap åŒ†å¿™ç¦»å¼€åº—é‡Œå»æ‰§è¡Œä»»åŠ¡ï¼Œå´ä¸å°å¿ƒé—è½äº†ä»–çš„æˆ˜æœ¯æ—¥è®°æœ¬ã€‚\nä½ æ¡èµ·æ¥æƒ³è¿½å‡ºå»ï¼Œä¹¦é¡µç¿»å¼€ï¼Œæ‰å‡ºäº†ä¸€å¼ ç´ æç”»ã€‚\nç”»çš„æ˜¯é‚£å¤©ä½ åœ¨æŸœå°åæ‰“çŒç¡çš„ä¾§è„¸ï¼Œä»–ç«Ÿç„¶æœ‰è¿™ä¹ˆä¼˜ç§€çš„ç”»æŠ€ï¼Ÿ\næ—è¾¹æœ‰ä¸€è¡Œæ½¦è‰çš„å°å­—ï¼š'The only peace I found here. (æˆ‘åœ¨æ­¤åœ°å¯»å¾—çš„å”¯ä¸€å®‰å®)'",
            speaker: "System",
            type: "event",
            options: [
                {
                    text: "è¿½å‡ºå»æŠŠæ—¥è®°è¿˜ç»™ä»–",
                    desc: "å‡è£…æ²¡çœ‹è§é‚£è¡Œå­—",
                    effect: s => {
                        s.rep_141 += 5;
                        printMsg("Soap è·‘å›æ¥æ‹¿æ—¥è®°æ—¶è„¸çº¢é€äº†ï¼Œä»–ç”šè‡³ä¸æ•¢çœ‹ä½ çš„çœ¼ç›ã€‚\nâ€œè°¢ã€è°¢äº†ï¼é‡Œé¢... æ²¡ä»€ä¹ˆé‡è¦çš„ä¸œè¥¿ï¼åˆ«å¤šæƒ³ï¼â€\nä»–æŠ“ç€æ—¥è®°é€ƒä¹Ÿä¼¼çš„è·‘äº†ã€‚", 'event');
                    },
                    result: "æœ‰äº›å¿ƒæ„ï¼Œæ³¨å®šåªèƒ½è—åœ¨æ—¥è®°é‡Œã€‚"
                },
                {
                    text: "åœ¨ç´ ææ—è¾¹ç”»ä¸€ä¸ªç¬‘è„¸",
                    desc: "æ— å£°çš„å›åº”",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "ç¬¬äºŒå¤©ï¼Œä½ å‘ç°åº—é—¨å£å¤šäº†ä¸€æŸåœ¨æ­¤åœ°æå…¶ç½•è§çš„é²œèŠ±ï¼Œæ²¡æœ‰ç½²åã€‚"
                }
            ]
        },

// ğŸ‡°ğŸ‡· [Horangi] è½é€‰ç”·ä¸»ï¼šå±é™©çš„èµŒçº¦
        horangi_bet: {
            text: "Horangi ååœ¨ä½ çš„æŸœå°ä¸Šï¼Œæ‰‹é‡Œç†Ÿç»ƒåœ°æŠŠç©ç€ä¸€æšç­¹ç ï¼Œç¬‘çœ¯çœ¯åœ°çœ‹ç€ä½ ã€‚\nâ€œå˜¿ï¼Œæ¼‚äº®è€æ¿ï¼ŒKÃ¶nig é‚£å®¶ä¼™å¤ªé—·äº†ï¼Œè¦ä¸è¦è·Ÿæˆ‘å»å…œé£ï¼Ÿèµ¢äº†å½’ä½ ï¼Œè¾“äº†... ä½ ...ï¼Ÿ",
            speaker: "Horangi",
            type: "dialogue",
            options: [
                {
                    text: "â€œæˆ‘åªèµŒé’±ï¼Œä¸èµŒäººã€‚â€",
                    desc: "æœ‰åŸåˆ™çš„æ‹’ç»",
                    effect: s => {
                        s.money += 200;
                        printMsg("Horangi å¤§ç¬‘èµ·æ¥ï¼šâ€œå“ˆå“ˆï¼æˆ‘å°±çŸ¥é“ï¼KÃ¶nig è¯´å¾—å¯¹ï¼Œä½ ç¡®å®å¾ˆéš¾æã€‚â€\nä»–ç•™ä¸‹ $200 ç­¹ç ä½œä¸ºè§é¢ç¤¼ï¼Œè·³ä¸‹æŸœå°èµ°äº†ã€‚", 'gain');
                    },
                    result: "è¿™ä¸ªå±é™©çš„ç”·äººå¯¹ä½ æ›´æ„Ÿå…´è¶£äº†ï¼Œä½†è¿™åªæ˜¯çŒäººçš„å…´è¶£ã€‚"
                },
                {
                    text: "å« KÃ¶nig å‡ºæ¥é¢†äºº",
                    desc: "â€œç®¡ç®¡ä½ æœ‹å‹ï¼â€",
                    result: "KÃ¶nig æ…Œæ…Œå¼ å¼ åœ°è·‘å‡ºæ¥ï¼ŒæŠŠ Horangi æ‹–èµ°äº†ï¼ŒHorangi ä¸€è¾¹è¢«æ‹–èµ°ä¸€è¾¹è¿˜åœ¨å¯¹ä½ åšé£å»ã€‚"
                }
            ]
        },

// ğŸ‡ºğŸ‡¸ [Barrage] è½é€‰ç”·ä¸»ï¼šäººä½“é˜²çˆ†å¢™
        barrage_encounter: {
            text: "åº—é‡Œçªç„¶å‘ç”Ÿäº†ä¸€èµ·å°å‹å“‘å¼¹å†’çƒŸäº‹æ•…ï¼Œé¡¾å®¢ä»¬å°–å«ç€é€ƒçªœã€‚\nå”¯ç‹¬ä¸€åèº«ç©¿é‡å‹é˜²çˆ†æœçš„ Shadow Company å£«å…µé€†æµè€Œä¸Šï¼ŒBarrage ä¸€è¨€ä¸å‘åœ°æŠŠä½ æŠ¤åœ¨èº«åï¼Œç”¨ä»–å®½é˜”å¾—åƒå µå¢™ä¸€æ ·çš„èƒŒè„ŠæŒ¡ä½äº†å¯èƒ½çš„çˆ†ç‚¸æ–¹å‘ã€‚\nä»–å•æ‰‹æŠ“èµ·é‚£ä¸ªå†’çƒŸçš„è£…ç½®åƒæç©å…·ä¸€æ ·æŠŠå®ƒæ‰”å‡ºäº†çª—å¤–ã€‚",
            speaker: "Barrage",
            type: "event",
            options: [
                {
                    text: "å‘ä»–é“è°¢å¹¶é€’è¿‡ä¸€ç“¶æ°´",
                    desc: "è¿‘è·ç¦»æ„Ÿå—ä»–çš„å‹è¿«æ„Ÿ",
                    effect: s => {
                        s.rep_chimera += 2; // è™½ç„¶ä»–æ˜¯SCçš„ï¼Œä½†è¿™é‡Œæš‚ä¸”ç®—ä½œé€šç”¨çš„é›‡ä½£å…µå¥½æ„Ÿæˆ–ç›´æ¥åŠ é’±
                        s.money += 100; // ç®—æ˜¯Gravesç»™çš„å¥–é‡‘ï¼Ÿæˆ–è€…ä»–è‡ªå·±ç»™çš„
                        printMsg("Barrage æ²¡æœ‰æ¥æ°´ï¼Œåªæ˜¯éš”ç€åšé‡çš„å¤´ç›”é—·å£°è¯´é“ï¼šâ€œ...Graves è®©æˆ‘ä»¥æ­¤ä¸ºæ®ç‚¹ï¼Œä½ ä¸è®¸æ­»ã€‚â€\né€è¿‡æˆ˜æœ¯èƒŒå¿ƒçš„ç¼éš™ï¼Œä½ éšçº¦èƒ½çœ‹åˆ°ä»–å› ä¸ºç´§ç»·è€Œéš†èµ·çš„å¤¸å¼ è‚Œè‚‰çº¿æ¡ã€‚", 'gain');
                    },
                    result: "ä»–å°±åƒä¸€åº§æ²‰é»˜çš„é»‘è‰²é“å¡”ï¼Œè™½ç„¶å±é™©ï¼Œä½†æ­¤åˆ»å´æ— æ¯”å¯é ã€‚"
                },
                {
                    text: "ç›¯ç€ä»–çš„èº«æçœ‹",
                    desc: "â€œè¿™è‚Œè‚‰æ˜¯çœŸçš„å—ï¼Ÿâ€",
                    result: "Barrage ä¼¼ä¹å¯Ÿè§‰åˆ°äº†ä½ çš„è§†çº¿ï¼Œä»–æœ‰äº›ä¸è‡ªåœ¨åœ°è°ƒæ•´äº†ä¸€ä¸‹æˆ˜æœ¯èƒŒå¿ƒï¼Œé—·é—·åœ°é—®ï¼šâ€œ...æŒ¡å…‰äº†å—ï¼Ÿâ€"
                }
            ]
        },

        // ğŸ‡ºğŸ‡¸ [Graves] è½é€‰ç”·ä¸»ï¼šä¸ä»…æ˜¯ç”Ÿæ„
        // è®¾å®šï¼šéœ¸é“æ€»è£å¼çš„é«˜ä½è€…ï¼Œä»–ä¹ æƒ¯äº†ç”¨é’±ä¹°ä¸€åˆ‡ï¼Œå´å‘ç°ä¹°ä¸åˆ°ä½ çš„å¿ƒã€‚
        graves_private_offer: {
            text: "Shadow Company çš„æŒ‡æŒ¥å®˜ Graves å±é€€äº†æ‰€æœ‰ä¿é•–ï¼Œç‹¬è‡ªä¸€äººé åœ¨ä½ çš„æŸœå°ä¸Šã€‚\nä»–æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·åš¼å£é¦™ç³–ï¼Œè€Œæ˜¯è®¤çœŸçš„å¹³è§†ç€ä½ ã€‚\nâ€œä½ çŸ¥é“å—ï¼Ÿæˆ‘å¯ä»¥ä¹°ä¸‹è¿™æ•´æ¡è¡—ï¼ŒæŠŠä½ æ¥åˆ°æˆ‘çš„ç§äººå²›å±¿ä¸Šï¼Œé‚£é‡Œæ²¡æœ‰è¾å°„ï¼Œæ²¡æœ‰æªå£°ã€‚â€\nä»–ä¼¸å‡ºæ‰‹ï¼ŒæŒ‡å°–æ‚¬åœåœ¨ä½ è„¸ä¾§ä¸€å˜ç±³å¤„ï¼Œå´å…‹åˆ¶åœ°æ²¡æœ‰è§¦ç¢°ã€‚\nâ€œä½†æˆ‘çŸ¥é“ä½ ä¸ä¼šç­”åº”ï¼Œä½ å–œæ¬¢è¿™é‡Œçš„é‡ç‹—ï¼Œè€Œä¸æ˜¯å®¶å…»çš„é‡‘æ¯›... å¯¹å—ï¼Ÿâ€",
            speaker: "Phillip Graves",
            type: "dialogue",
            options: [
                {
                    text: "â€œä½ è¯´å¾—å¯¹ï¼Œæˆ‘æœ‰è¿™ä¸ªåº—å°±å¤Ÿäº†ã€‚â€",
                    desc: "æ‹’ç»ä»–çš„å¥½æ„",
                    result: "Graves è‡ªå˜²åœ°ç¬‘äº†ä¸€å£°ï¼Œæ”¶å›äº†æ‰‹ã€‚\nâ€œçœŸé—æ†¾ï¼Œè¿™å¯èƒ½æ˜¯æˆ‘è¿™è¾ˆå­è°ˆå´©çš„å”¯ä¸€ä¸€ç¬”ç”Ÿæ„ã€‚â€\nä»–ç•™ä¸‹äº†ä¸€å¼ é»‘å¡ï¼šâ€œå¯†ç æ˜¯ä½ çš„ç”Ÿæ—¥ï¼Œåˆ«è¯¯ä¼šï¼Œè¿™æ˜¯ä¹‹å‰æ‹¿å¼¹è¯çš„é’±ã€‚â€"
                },
                {
                    text: "åŠå¼€ç©ç¬‘ï¼šâ€œå¦‚æœä½ ä¸å½“æŒ‡æŒ¥å®˜äº†ï¼Œæˆ‘å¯ä»¥è€ƒè™‘ã€‚â€",
                    desc: "ç»™ä»–ä¸€ç‚¹è™šå¹»çš„å¸Œæœ›",
                    effect: s => {
                        s.money += 1000; // ä»–é«˜å…´ï¼Œå‘é’±
                        printMsg("Graves æ„£ä½äº†ï¼Œéšå³çˆ†å‘å‡ºä¸€é˜µå¤§ç¬‘ã€‚\nâ€œå“ˆï¼ä¸ºäº†ä½ æ”¾å¼ƒæ•´ä¸ªæš—å½±å…¬å¸ï¼Ÿ...è¯¥æ­»ï¼Œè¿™å¬èµ·æ¥ç«Ÿç„¶æœ‰ç‚¹è¯±äººã€‚â€", 'dialogue', 'Graves');
                    },
                    result: "ä»–ç¦»å¼€æ—¶å¿ƒæƒ…æå¥½ï¼Œè¿èµ°è·¯éƒ½å¸¦ç€é£ï¼Œè™½ç„¶ä½ ä»¬éƒ½çŸ¥é“è¿™ä¸å¯èƒ½å®ç°ã€‚"
                }
            ]
        },

        // ğŸ‡¨ğŸ‡³ [Zimo] è½é€‰ç”·ä¸»ï¼šç‹¬å®¶çš„ç§°å‘¼
        // è®¾å®šï¼šæ¥è‡ªä¸œæ–¹çš„å«è“„å…³æ€€ï¼Œä»–æ˜¯æœ€åƒå®¶äººçš„é‚£ä¸€ä¸ªï¼Œä½†å› ä¸ºä»»åŠ¡æ³¨å®šæ¼‚æ³Šã€‚
        zimo_farewell: {
            text: "Zimo è¦å»æ‰§è¡Œä¸€ä¸ªé•¿æœŸæ½œä¼ä»»åŠ¡ï¼Œå¯èƒ½å¾ˆä¹…éƒ½ä¸ä¼šå›æ¥äº†ã€‚\nä»–ç‰¹æ„æ¥åº—é‡Œé“åˆ«ï¼Œå¹¶æ²¡æœ‰ä¹°ä¸œè¥¿ï¼Œè€Œæ˜¯ç»™äº†ä½ ä¸€ä¸ªçº¢è‰²çš„å¹³å®‰ç»“ã€‚\nâ€œå¦¹å„¿ï¼Œè¿™ä¸ªç»™ä½ ã€‚â€ ä»–çš„å£°éŸ³ä¸€å¦‚æ—¢å¾€çš„æ²‰ç¨³åˆäº²åˆ‡ï¼Œâ€œè¿™æ˜¯æˆ‘å¦ˆç¼–çš„ï¼Œæœ¬æ¥æƒ³ç•™ç»™... æœªæ¥çš„åª³å¦‡ï¼Œä½†æˆ‘è§‰å¾—ï¼Œä½ åœ¨è¿™ä¸ªé¬¼åœ°æ–¹æ›´éœ€è¦å®ƒã€‚â€\nä»–çœ‹ç€ä½ ï¼Œçœ¼ç¥é‡Œæœ‰åƒè¨€ä¸‡è¯­ï¼Œæœ€ç»ˆåªåŒ–ä½œäº†ä¸€ä¸ªæ ‡å‡†çš„å†›ç¤¼ã€‚",
            speaker: "Zimo",
            type: "event",
            options: [
                {
                    text: "æ”¶ä¸‹å¹³å®‰ç»“ï¼šâ€œä¸€å®šè¦æ´»ç€å›æ¥ã€‚â€",
                    desc: "æ¥å—è¿™ä»½æ²‰ç”¸ç”¸çš„å¿ƒæ„",
                    effect: s => {
                        s.ap = CONFIG.max_ap; // ç²¾ç¥åŠ›é‡
                        s.rep_kortac += 5;
                        printMsg("Zimo ç¬‘äº†ï¼Œä¼¸æ‰‹æ‰äº†æ‰ä½ çš„å¤´å‘â€”â€”è¿™æ˜¯ä»–ç¬¬ä¸€æ¬¡ä¹Ÿæ˜¯æœ€åä¸€æ¬¡é€¾è¶Šã€‚\nâ€œæ”¾å¿ƒï¼Œä¸ºäº†å›æ¥å–ä½ çš„èŒ¶ï¼Œæˆ‘ä¹Ÿå¾—æ´»ç€ã€‚â€", 'dialogue', 'Zimo');
                    },
                    result: "ä»–è½¬èº«èµ°è¿›äº†é£æ²™ä¸­ï¼Œä½†ä½ çŸ¥é“ï¼Œæ— è®ºä»–å»å“ªé‡Œï¼Œä»–çš„ç‰µæŒ‚ä¼šä¸€ç›´ä¿æŠ¤ä½ ã€‚"
                },
                {
                    text: "æ‹¥æŠ±ä»–ä¸€ä¸‹",
                    desc: "ç»™æ¸¸å­ä¸€ä¸ªé€åˆ«",
                    result: "Zimo æµ‘èº«åƒµç¡¬äº†ä¸€ä¸‹ï¼Œç„¶åç”¨åŠ›å›æŠ±äº†ä½ ä¸€ç§’é’Ÿã€‚\nâ€œ...è¿™å°±å¤Ÿäº†ã€‚â€ ä»–çº¢ç€çœ¼çœ¶ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // ğŸ‡¬ğŸ‡§ [Price] è½é€‰ç”·ä¸»ï¼šè€å…µçš„é—æ†¾
        // è®¾å®šï¼šå¹´é•¿è€…çš„å…‹åˆ¶å’Œé—æ†¾ã€‚ä»–åœ¨ä½ èº«ä¸Šçœ‹åˆ°äº†é€å»çš„ç¾å¥½ï¼Œæƒ³è§¦ç¢°å´åˆæ”¶æ‰‹ã€‚
        price_late_night: {
            text: "æ‰“çƒŠåï¼ŒPrice ä¸Šå°‰è¿˜åœ¨åº—é‡Œæ²¡èµ°ï¼Œä»–å–äº†ä¸€æ•´ç“¶å¨å£«å¿Œå´ä¾ç„¶æ¸…é†’å¾—å¯æ€•ã€‚\nâ€œçœ‹ç€ä½ ... æ€»è®©æˆ‘æƒ³èµ·å¾ˆä¹…ä»¥å‰ï¼Œåœ¨è¿™ä¸ªä¸–ç•Œè¿˜æ²¡å˜æˆåºŸå¢Ÿä¹‹å‰ã€‚â€\nä»–åå‡ºä¸€å£çƒŸåœˆï¼Œé€è¿‡çƒŸé›¾çœ‹ç€ä½ ï¼Œçœ¼ç¥æ·±é‚ƒæ²§æ¡‘ã€‚\nâ€œå¦‚æœæˆ‘å†å¹´è½»äºŒåå²... æˆ–è€…å¦‚æœæˆ‘ä¸æ˜¯ 141 çš„é˜Ÿé•¿...â€ ä»–æ‘‡äº†æ‘‡å¤´ï¼Œæç­äº†çƒŸå¤´ï¼Œâ€œç®—äº†ã€‚è€å…µä¸è¯¥æœ‰è¿™ç§å¥¢æœ›ã€‚â€",
            speaker: "Captain Price",
            type: "dialogue",
            options: [
                {
                    text: "ç»™ä»–çš„ç©ºæ¯å€’æ»¡æ°´ï¼šâ€œç°åœ¨ä¹Ÿä¸æ™šï¼Œä¸Šå°‰ã€‚â€",
                    desc: "å®‰æ…°è¿™ä¸ªå­¤ç‹¬çš„çµé­‚",
                    effect: s => {
                        s.rep_141 += 10;
                        printMsg("Price çœ‹ç€é‚£æ¯æ°´ï¼Œè‹¦ç¬‘äº†ä¸€å£°ã€‚\nâ€œä½ å¤ªæ¸©æŸ”äº†ï¼Œå­©å­ï¼Œè¿™åœ¨è¿™ä¸ªä¸–ç•Œæ˜¯ä¸ªå¼±ç‚¹... ä½†...ç®—äº†ã€‚â€", 'dialogue', 'Price');
                    },
                    result: "ä»–æ²¡æœ‰å†è¯´ä¸‹å»ï¼Œä½†é‚£å¤©æ™šä¸Šä»–åœ¨ä½ åº—é—¨å£çš„é•¿æ¤…ä¸Šåäº†ä¸€æ•´å¤œï¼Œä¸ºä½ å®ˆäº†ä¸€å¤œçš„é—¨ã€‚"
                },
                {
                    text: "â€œä½ ä¹Ÿéœ€è¦ä¼‘æ¯ï¼ŒJohnã€‚â€",
                    desc: "å–Šä»–çš„åå­—",
                    result: "å¬åˆ°åå­—çš„ç¬é—´ï¼ŒPrice çš„çœ¼ç¥è½¯åŒ–äº†ã€‚\nâ€œ...æ™šå®‰ï¼Œ{PLAYER} .â€"
                }
            ]
        },

// ğŸ² [å½©è›‹] Zimo çš„å®¶ä¹¡å‘³ (Zimo)
        zimo_visit: {
            text: "ä¸€ä¸ªäºšè£”ç‰¹ç§å…µé åœ¨æŸœå°è¾¹ï¼Œæ˜¯ Zimoã€‚ä»–çœ‹èµ·æ¥æœ‰äº›ç–²æƒ«ï¼Œä½†çœ‹åˆ°ä½ æ—¶éœ²å‡ºäº†ä¸€å£ç™½ç‰™ã€‚\nâ€œå¦¹å„¿ï¼Œè¿™é¬¼åœ°æ–¹çš„å†›ç²®æ·¡å‡ºä¸ªé¸Ÿæ¥äº†ã€‚ä½ è¿™å„¿æœ‰æ²¡æœ‰å¸¦åŠ²ç‚¹çš„ï¼Ÿæœ€å¥½æ˜¯èƒ½è¾£å‡ºçœ¼æ³ªçš„é‚£ç§ã€‚â€",
            speaker: "Zimo",
            type: "dialogue",
            options: [
                {
                    text: "æ‹¿å‡ºç§è—çš„ç‰¹è¾£é…± (-1 Food)",
                    desc: "å®¶ä¹¡çš„å‘³é“",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.konig.aff += 2; // å¤§å®¶éƒ½å–œæ¬¢å¥½åƒçš„
                        s.money += 100; // ä»–ç»™äº†é«˜ä»·
                        printMsg("Zimo å°äº†ä¸€å£ï¼Œçœ¼ç›ç¬é—´äº®äº†ï¼šâ€œå®‰é€¸ï¼å°±æ˜¯è¿™ä¸ªå‘³å„¿ï¼è°¢äº†å•Šå¦¹å„¿ï¼â€", 'dialogue', 'Zimo');
                    },
                    result: "ä»–å¿ƒæƒ…å¤§å¥½ï¼Œä¸´èµ°å‰è¿˜å¸®ä½ æŠŠé—¨å£çš„åƒåœ¾è¢‹é¡ºæ‰‹æ‰”äº†ã€‚"
                },
                {
                    text: "åªæœ‰ç™½å¼€æ°´",
                    desc: "æ— èƒ½ä¸ºåŠ›",
                    result: "â€œå“... è¡Œå§ï¼Œæ´»ç€å°±è¡Œã€‚â€ Zimo å¹äº†å£æ°”ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹æ³„æ°”ã€‚"
                }
            ]
        },

// ğŸ² [å½©è›‹] ä¸Šå°‰çš„é›ªèŒ„ (Price)
        price_cigar: {
            text: "æ™®è±æ–¯ä¸Šå°‰ï¼ˆPriceï¼‰éš¾å¾—æ²¡æœ‰æˆ´é‚£é¡¶æ ‡å¿—æ€§çš„å¥”å°¼å¸½ï¼Œä»–æ­£ååœ¨è§’è½é‡Œåäº‘åé›¾ï¼Œæ— è§†äº†æ—è¾¹å‡ ä½æ•¢æ€’ä¸æ•¢è¨€çš„å®¢äººã€‚\nâ€œåˆ«ä»‹æ„ã€‚â€ çœ‹åˆ°ä½ èµ°è¿‡æ¥ï¼Œä»–æŒ‡äº†æŒ‡æ¡Œä¸Šçš„ç©ºé…’ç“¶ï¼Œâ€œæœ‰æ—¶å€™è€å…µä¹Ÿéœ€è¦å–˜å£æ°”ï¼ŒGhost é‚£å°å­æœ€è¿‘æ²¡ç»™ä½ æ·»éº»çƒ¦å§ï¼Ÿâ€",
            speaker: "Price",
            type: "dialogue",
            options: [
                {
                    text: "â€œä»–å¾ˆä¹–ï¼ˆå¤§æ¦‚ï¼‰ã€‚â€",
                    desc: "å¸®ä¸‹å±è¯´å¥½è¯ (+141 å£°æœ›)",
                    // ğŸŸ¢ ä¿®å¤ï¼šæŠŠæ‰€æœ‰é€»è¾‘éƒ½æ”¾åœ¨ effect é‡Œï¼Œåˆ é™¤ action
                    effect: s => {
                        s.rep_141 += 5;
                        s.chars.ghost.aff += 3;
                        s.money += 200; // ç›´æ¥åœ¨è¿™é‡ŒåŠ é’±
                        
                        log("è·å¾— Price çš„å°å£è´¹ $200", 'gain'); // åŠ ä¸ªæ—¥å¿—æç¤º
                        printMsg("Price å“ˆå“ˆå¤§ç¬‘ï¼šâ€œä¹–ï¼Ÿè¿™è¾ˆå­æ²¡æƒ³åˆ°è¿™ä¸ªè¯èƒ½å’Œä»–æ­ä¸Šè¾¹...â€", 'dialogue', 'Price');
                    },
                    // ğŸŸ¢ å¼•æ“ä¼šè‡ªåŠ¨æ˜¾ç¤ºè¿™å¥è¯ï¼Œç„¶åè‡ªåŠ¨è¿”å›ä¸»èœå• 
                    result: "Price ç»™ä½ ç•™ä¸‹äº†ä¸€ç›’é«˜çº§é›ªèŒ„ä½œä¸ºå°å£è´¹ï¼ˆä»·å€¼ $200ï¼‰ã€‚"
                },
                {
                    text: "æŠ±æ€¨ï¼šâ€œä»–å¤ªéš¾æäº†ï¼â€",
                    desc: "å‘ŠçŠ¶",
                    result: "Price è€¸è€¸è‚©ï¼šâ€œé‚£æ˜¯ä½ çš„é—®é¢˜ï¼Œå¥³å£«ï¼Œåªè¦ä»–æªæ³•è¿˜å‡†ï¼Œæˆ‘å°±æ²¡æ„è§ã€‚â€"
                }
            ]
        },

        // ğŸ² [å½©è›‹] çˆ†ç ´ä¸“å®¶çš„æ¶ä½œå‰§ (Soap)
        soap_prank: {
            text: "â€œå˜¿ï¼è€æ¿ï¼â€ Soap é¬¼é¬¼ç¥Ÿç¥Ÿåœ°ä»è´§æ¶åé¢æ¢å‡ºå¤´ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€å·èƒ¶å¸¦å’Œä¸€ä¸ªé—ªå…‰å¼¹ã€‚\nâ€œGhost é©¬ä¸Šå°±è¦è¿›æ¥äº†ï¼Œæˆ‘æƒ³åœ¨ä»–èƒŒåŒ…ä¸ŠæŒ‚ä¸ªâ€˜ç”Ÿæ—¥å¿«ä¹â€™çš„æ°”çƒ... ä½ èƒ½å¸®æˆ‘æ‰“ä¸ªæ©æŠ¤å—ï¼Ÿæ‹œæ‰˜äº†ï¼Œè¿™ç»å¯¹ä¼šå¾ˆå¥½ç¬‘ï¼â€",
            speaker: "Soap",
            type: "event",
            options: [
                {
                    text: "é…åˆä»– (åˆ†æ•£ Ghost æ³¨æ„åŠ›)",
                    desc: "çœ‹ Ghost åƒç˜ª",
                    effect: s => {
                        s.chars.ghost.aff -= 5; // Ghost æœ‰ç‚¹ä¸çˆ½
                        s.rep_141 += 5; // ä½†æ•´ä¸ª 141 å°é˜Ÿéƒ½å¾ˆå¼€å¿ƒ
                        printMsg("ä½ å‡è£…è®© Ghost å¸®å¿™çœ‹è´¦å•ï¼ŒSoap æˆåŠŸå¾—æ‰‹äº†ã€‚\näº”åˆ†é’Ÿåï¼ŒGhost é¡¶ç€æ°”çƒèµ°åœ¨è¡—ä¸Šï¼Œè™½ç„¶ä»–æœ¬äººæ¯«æ— å¯Ÿè§‰ï¼Œä½†è·¯äººéƒ½å¿«ç¬‘ç–¯äº†ã€‚", 'gain');
                    },
                    result: "Soap ç»™ä½ ç«–äº†ä¸ªå¤§æ‹‡æŒ‡ï¼šâ€œå¹²å¾—æ¼‚äº®ï¼â€"
                },
                {
                    text: "å¤§å£°å–Šï¼šâ€œGhostï¼å°å¿ƒèº«åï¼â€",
                    desc: "å‡ºå– Soap",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "Ghost ç¬é—´å›å¤´æŠ“ä½äº† Soap çš„æ‰‹è…•ï¼ŒSoap å“€åšç€è¢«æ‹–èµ°äº†ï¼šâ€œå›å¾’ï¼è€æ¿ä½ æ˜¯å›å¾’ï¼ï¼â€"
                }
            ]
        },

        // ğŸ² [å½©è›‹] å½±å­å…¬å¸çš„â€œå‹è°Šâ€ (Graves)
        graves_offer: {
            text: "å¤§åé¼é¼çš„è²åˆ©æ™®Â·æ ¼é‡Œå¤«æ–¯ï¼ˆGravesï¼‰é åœ¨ä½ çš„æŸœå°ä¸Šï¼Œä»–åš¼ç€å£é¦™ç³–ä¸Šä¸‹æ‰“é‡ç€ä½ çš„åº—ã€‚\nâ€œä¸é”™çš„å°åº—ï¼Œç»è¥å¾—æœ‰å£°æœ‰è‰²ï¼ŒShadow Company (æš—å½±å…¬å¸) æ­£åœ¨å¯»æ‰¾èƒ½å¤Ÿâ€˜çµæ´»å¤„ç†â€™æŸäº›è´§ç‰©çš„ä¸­è½¬ç«™ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€æ®µ... äº’åˆ©å…±èµ¢çš„å‹è°Šã€‚â€",
            speaker: "Graves",
            type: "dialogue",
            options: [
                {
                    text: "æ¥å—åˆä½œ (é«˜é£é™©)",
                    desc: "è·å¾—å¤§é‡èµ„é‡‘ï¼Œä½†é™ä½ 141 å£°æœ›",
                    effect: s => {
                        s.money += 1500;
                        s.rep_141 -= 20;
                        log("æ¥å—äº† Graves çš„è„é’±", 'gain');
                    },
                    result: "â€œæˆ‘å°±çŸ¥é“ä½ æ˜¯ä¸ªèªæ˜äººã€‚â€ Graves æ‰”ä¸‹ä¸€å¤§è¢‹ç°é‡‘ï¼Œâ€œåˆ«è®© Shepherd çŸ¥é“ï¼Œæ‡‚å—ï¼Ÿâ€"
                },
                {
                    text: "å©‰æ‹’ï¼šâ€œæˆ‘åªåšå°æœ¬ç”Ÿæ„ã€‚â€",
                    desc: "ä¿æŒä¸­ç«‹",
                    result: "Graves è„¸ä¸Šçš„ç¬‘å®¹æ¶ˆå¤±äº†ä¸€ç§’ï¼Œéšå³åˆæ¢å¤äº†ï¼šâ€œçœŸé—æ†¾ï¼Œå¸Œæœ›ä½ åˆ«åæ‚”ä»Šå¤©çš„é€‰æ‹©ã€‚â€"
                }
            ]
        },

        // ğŸ² [å½©è›‹] å·¨äººçš„çƒ¦æ¼ (Barrage)
        barrage_stuck: {
            text: "åº—é—¨å£ä¼ æ¥ä¸€é˜µé‡‘å±æ‘©æ“¦çš„å·¨å“ï¼Œå½±å­éƒ¨é˜Ÿçš„å¹²å‘˜ Barrage è¯•å›¾æŒ¤è¿›åº—é—¨ï¼Œä½†ä»–èº«ä¸Šçš„é‡ç”²å®åœ¨æ˜¯å¤ªå®½äº†ï¼Œç›´æ¥å¡åœ¨äº†é—¨æ¡†ä¸­é—´ã€‚\nä»–é—·åœ¨å¤´ç›”é‡Œçš„å£°éŸ³å¬èµ·æ¥å¾ˆå§”å±ˆï¼šâ€œå‘ƒ... è€æ¿ï¼Ÿæˆ‘æƒ³æˆ‘éœ€è¦ä¸€ç‚¹é»„æ²¹... æˆ–è€…ä¸€ä¸ªæ’¬æ£ã€‚â€",
            speaker: "Barrage",
            type: "event",
            options: [
                {
                    text: "å¸®ä»–è„±å›° (-1 Ammo)",
                    desc: "ç”¨æ¶¦æ»‘æ²¹å¸®ä»–",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        s.rep_kortac += 5;
                        printMsg("è´¹äº†ä¹ç‰›äºŒè™ä¹‹åŠ›ï¼Œç»ˆäºæŠŠä»–å¼„å‡ºæ¥äº†ï¼ˆæˆ–è€…å¼„è¿›å»äº†ï¼‰ã€‚", 'gain');
                    },
                    result: "Barrage å°´å°¬åœ°æŒ æŒ å¤´ç›”ï¼šâ€œè¿™é—¨å¤ªå°äº†ï¼Œè€æ¿ä½ ä¿®ä¸€ä¿®å§ã€‚â€"
                },
                {
                    text: "â€œä½ å°±ç«™åœ¨é‚£ä¹°å§ã€‚â€",
                    desc: "é—¨ç¥",
                    result: "äºæ˜¯ä»–çœŸçš„å¡åœ¨é—¨å£å½“äº†ä¸€ä¸‹åˆçš„é—¨ç¥ï¼Œå±…ç„¶è¿˜å¸®ä½ å“è·‘äº†å‡ ä¸ªå°å·ã€‚"
                }
            ]
        },

        // ğŸ’€ [é»‘è‰²å¹½é»˜] â€œæ–°é²œâ€è‚‰ç±»
        mystery_meat_pie: {
            text: "ä¸€ä¸ªçœ‹èµ·æ¥ç–¯ç–¯ç™«ç™«çš„å¨å¸ˆæ­£åœ¨æ¨é”€ä»–çš„â€˜ç‰¹åˆ¶è‚‰é¥¼â€™ã€‚\nâ€œç™¾åˆ†ç™¾çº¯è‚‰ï¼ä¸å«è¾å°„ï¼åˆ«é—®æ˜¯ä»€ä¹ˆè‚‰ï¼Œé—®å°±æ˜¯å•†ä¸šæœºå¯†ï¼åªè¦ $20ï¼Œè¿™ä¸€å£ä¸‹å»èƒ½è®©ä½ çœ‹è§ä½ çš„å¤ªå¥¶ï¼â€",
            speaker: "Mad Chef",
            type: "event",
            options: [
                {
                    text: "ä¹°ä¸€å—è¯•è¯• (-$20)",
                    desc: "è¿™æ˜¯ä¸€åœºè±ªèµŒ",
                    condition: s => s.money >= 20,
                    effect: s => {
                        s.money -= 20;
                        if (chance(30)) {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                            printMsg("è™½ç„¶å£æ„Ÿåƒé‹åº•ï¼Œä½†æ„å¤–åœ°å¾ˆé¡¶é¥±ï¼(AP+2)", 'gain');
                        } else {
                            s.medkit = Math.max(0, s.medkit - 1);
                            printMsg("ä½ çœ‹è§äº†å¤ªå¥¶... è¿˜æœ‰ä¼šé£çš„ç²‰è‰²å¤§è±¡ï¼Œä¸å¾—ä¸åƒè¯è§£æ¯’ã€‚", 'loss');
                        }
                    },
                    result: "è¿™å‘³é“ï¼Œç»ˆèº«éš¾å¿˜ã€‚"
                },
                {
                    text: "ä¸¾æŠ¥ä»–ä¹±æ‘†æ‘Š",
                    result: "å·¡é€»é˜ŸæŠŠä»–èµ¶èµ°äº†ï¼Œä½†ä»–ä¸´èµ°å‰è¯…å’’ä½ è¿™è¾ˆå­åƒæ–¹ä¾¿é¢æ²¡æœ‰è°ƒæ–™åŒ…ã€‚"
                }
            ]
        },

        // ğŸ’€ [é»‘è‰²å¹½é»˜] äºŒæ‰‹é™è½ä¼
        used_parachute: {
            text: "ä¸€ä¸ªæ‹¾è’è€…è¯•å›¾å–ç»™ä½ ä¸€ä¸ªé™è½ä¼åŒ…ã€‚\nâ€œä¹æˆæ–°ï¼åªç”¨è¿‡ä¸€æ¬¡ï¼ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹... å‘ƒï¼Œè¡€è¿¹ï¼Œæ´—æ´—å°±èƒ½ç”¨ï¼Œå‰ä¸»äººä¸éœ€è¦å®ƒäº†ã€‚â€",
            speaker: "Scavenger",
            type: "dialogue",
            options: [
                {
                    text: "ä½ä»·å›æ”¶ (-$50)",
                    desc: "æ‹†è§£å¸ƒæ–™ (è·å¾—å¤§é‡ Food?)",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        // ğŸŸ¢ é˜²çˆ†ä»“é€»è¾‘
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        // è¿™é‡Œæˆ‘ä»¬æŠŠé™è½ä¼ç»³ç´¢å½“åšâ€œç‰©èµ„â€æˆ–è€…... å±…ç„¶åœ¨åŒ…é‡Œå‘ç°äº†å‹ç¼©é¥¼å¹²
                        const foodGain = Math.min(5, cap - s.food);
                        
                        s.food += foodGain;
                        printMsg(`ä½ åœ¨é™è½ä¼åŒ…çš„å¤¹å±‚é‡Œå‘ç°äº† ${foodGain} å—åº”æ€¥å‹ç¼©å¹²ç²®ã€‚`, 'gain');
                    },
                    result: "é™è½ä¼æœ¬èº«ç ´äº†ä¸ªå¤§æ´ï¼ˆéš¾æ€ªå‰ä¸»äººä¸éœ€è¦äº†ï¼‰ï¼Œä½†ç‰©èµ„æ˜¯å¥½çš„ã€‚"
                },
                {
                    text: "â€œæ™¦æ°”ï¼Œæ‹¿èµ°ã€‚â€",
                    result: "æ‹¾è’è€…éª‚éª‚å’§å’§åœ°èµ°äº†ã€‚"
                }
            ]
        },

        // ğŸ’€ [é»‘è‰²å¹½é»˜] å¹¸è¿è½¬ç›˜
        russian_roulette_light: {
            text: "ä¸¤ä¸ªæ— èŠçš„ä½£å…µæ­£åœ¨ç©å¹¸è¿å·¦è½®ï¼Œä¸è¿‡ä»–ä»¬ç”¨çš„æ˜¯æ°´æªï¼Œé‡Œé¢è£…çš„æ˜¯è¾£æ¤’æ°´ã€‚\nâ€œå˜¿è€æ¿ï¼æ¥è¯•è¯•ï¼Ÿè¾“äº†è¢«æ»‹ä¸€è„¸ï¼Œèµ¢äº†æ‹¿èµ°è¿™å †ç½å¤´ï¼â€",
            speaker: "Bored Mercs",
            type: "event",
            options: [
                {
                    text: "åŠ å…¥æ¸¸æˆ",
                    desc: "èµ¢é¢ 50%",
                    effect: s => {
                        if (chance(50)) {
                            // ğŸŸ¢ é˜²çˆ†ä»“é€»è¾‘
                            const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                            const gain = Math.min(3, cap - s.food);
                            s.food += gain;
                            printMsg("å’”å“’ã€‚ç©ºæªï¼ä½ èµ¢äº†ï¼ä½£å…µä»¬æ¬¢å‘¼ç€æŠŠç½å¤´ç»™äº†ä½ ã€‚", 'gain');
                        } else {
                            s.rating = Math.max(1.0, s.rating - 0.1);
                            printMsg("æ»‹â€”â€”ï¼ä½ çš„çœ¼ç›ï¼ä½ é¡¶ç€æ»¡è„¸è¾£æ¤’æ°´å·¥ä½œäº†ä¸€å¤©ï¼Œå½¢è±¡å…¨æ— ã€‚", 'loss');
                        }
                    },
                    result: "è¿™å°±æ˜¯åºŸåœŸç”·äººçš„å¿«ä¹å—ï¼Ÿ"
                }
            ]
        },

// ğŸ”´ [è´Ÿå£°æœ›] TF141ï¼šè”åˆåææœæŸ¥
        // è®¾å®šï¼šå®˜æ–¹èƒŒæ™¯ï¼Œå¤šå›½éƒ¨é˜Ÿï¼Œæ‰‹æ®µæ­£è§„ä½†å¼ºç¡¬ï¼Œä»¥â€œåæâ€åä¹‰æ²¡æ”¶ç‰©èµ„
        bad_rep_141: {
            text: "ä¸€æ”¯å…¨å‰¯æ­¦è£…çš„å¤šå›½è”åˆç‰¹é£éƒ¨é˜Ÿçªç„¶åŒ…å›´äº†ä½ çš„åº—é“ºã€‚\nå¸¦é˜Ÿçš„å†›å®˜å‡ºç¤ºäº†æœæŸ¥ä»¤ï¼šâ€œæ ¹æ®ã€Šå›½é™…åæåå®šã€‹ï¼Œæˆ‘ä»¬æ€€ç–‘è¯¥æ®ç‚¹æ­£åœ¨ä¸ºææ€–åˆ†å­æä¾›åå‹¤æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦â€˜å¾ç”¨â€™è¿™æ‰¹ç‰©èµ„è¿›è¡Œè°ƒæŸ¥ã€‚â€\n(TF141 å£°æœ› < 0 è§¦å‘)",
            speaker: "TF141 Officer",
            type: "alert",
            condition: s => s.rep_141 < 0,
            options: [
                {
                    text: "é…åˆè°ƒæŸ¥ (äº¤å‡ºå¼¹è¯)",
                    desc: "å¤±å»æ‰€æœ‰å¼¹è¯åº“å­˜",
                    effect: s => {
                        const loss = s.ammo;
                        s.ammo = 0;
                        s.rep_141 += 5; // ç¨å¾®ç¼“è§£å…³ç³»
                        log(`141 æ²¡æ”¶äº† ${loss} ä»½å¼¹è¯ä½œä¸ºè¯ç‰©`, 'loss');
                    },
                    result: "â€œæ˜æ™ºçš„é€‰æ‹©ï¼Œå¦‚æœè°ƒæŸ¥è¯æ˜ä½ æ˜¯æ¸…ç™½çš„ï¼Œæˆ‘ä»¬ä¼š...ä¹Ÿè®¸ä¼šå½’è¿˜ã€‚â€ (ä»–ä»¬æ˜¾ç„¶ä¸ä¼šè¿˜äº†)"
                },
                {
                    text: "æ®ç†åŠ›äº‰ï¼šâ€œè¿™æ˜¯ç§æœ‰è´¢äº§ï¼â€",
                    desc: "è¯•å›¾è®²é“ç† (å¯èƒ½è¢«æ•)",
                    effect: s => {
                        if (chance(30)) {
                            printMsg("å†›å®˜çš±äº†çš±çœ‰ï¼ŒæŒ¥æ‰‹æ’¤é€€äº†ï¼šâ€œç›¯ç€å¥¹ï¼Œæˆ‘ä»¬èµ°ã€‚â€ (ä¾¥å¹¸é€ƒè¿‡)", 'gain');
                        } else {
                            s.money = Math.floor(s.money * 0.8); // ç½šæ¬¾ 20%
                            s.rating -= 0.5; // è¯„åˆ†ä¸‹é™
                            printMsg("â€œå¦¨ç¢å…¬åŠ¡ï¼Œå¸¦èµ°ï¼â€ ä½ è¢«å…³æŠ¼äº†ä¸€æ™šå¹¶è¢«ç½šæ¬¾ã€‚", 'alert');
                        }
                    },
                    result: "è·Ÿå®˜æ–¹æ­£è§„å†›è®²é“ç†æ˜¯å¾ˆéš¾çš„ï¼Œå°¤å…¶æ˜¯å½“ä»–ä»¬è§‰å¾—ä½ æ˜¯ææ€–åˆ†å­åŒä¼™æ—¶ã€‚"
                }
            ]
        },

        // ğŸ”´ [è´Ÿå£°æœ›] å¥‡ç¾æ‹‰ (Chimera)ï¼šå°¼å¤è±çš„â€œæ¸…é“å¤«â€
        // è®¾å®šï¼šå°¼å¤è±çš„ç§å…µï¼Œå¹²è„æ´»ç´¯æ´»ï¼Œç”šè‡³å¯èƒ½è®¤è¯† Priceï¼Œæ‰€ä»¥æ‰‹æ®µé˜´ç‹ ä¸”å¸¦æœ‰è­¦å‘Šæ€§è´¨
        bad_rep_chimera: {
            text: "å‡ ä¸ªç©¿ç€æ²¡æœ‰æ ‡è¯†ä½œæˆ˜æœã€è¯´ç€ä¿„è¯­å£éŸ³çš„é›‡ä½£å…µèµ°è¿›äº†åº—é‡Œã€‚\né¢†å¤´çš„äººæ„å‘³æ·±é•¿åœ°çœ‹ç€ä½ ï¼šâ€œå°¼å¤è±å…ˆç”Ÿå¯¹ä½ æœ€è¿‘çš„è¡¨ç°å¾ˆä¸æ»¡æ„ï¼Œä½ è®©æˆ‘ä»¬çš„å·¥ä½œå˜å¾—...å¾ˆå¤æ‚ï¼Œæ‡‚å—ï¼Ÿâ€",
            speaker: "Chimera Merc",
            type: "alert",
            condition: s => s.rep_chimera < 0,
            options: [
                {
                    text: "æ”¯ä»˜â€œä¸”è¿‡è´¹â€ (-$1000)",
                    desc: "èŠ±é’±ä¹°å¹³å®‰",
                    condition: s => s.money >= 1000,
                    effect: s => {
                        s.money -= 1000;
                        s.rep_chimera += 10; // èŠ±é’±æ¶ˆç¾æ•ˆæœæ˜¾è‘—
                        log("æ”¯ä»˜ç»™å¥‡ç¾æ‹‰ $1000", 'loss');
                    },
                    result: "â€œè¿™å°±å¯¹äº†ï¼Œå°¼å¤è±å…ˆç”Ÿå–œæ¬¢æ‡‚è§„çŸ©çš„äººã€‚â€ ä»–ä»¬æ‹¿é’±èµ°äººï¼Œè¿˜é¡ºæ‰‹æ‹¿äº†ä¸¤ç“¶é…’ã€‚"
                },
                {
                    text: "è£…å‚»å……æ„£",
                    desc: "æ‹’ç»æ”¯ä»˜ (å¯èƒ½å¯¼è‡´è®¾æ–½è¢«ç ´å)",
                    effect: s => {
                        s.lvl_med = Math.max(1, s.lvl_med - 1); // åŒ»ç–—è®¾æ–½é™çº§
                        printMsg("â€œçœ‹æ¥ä½ éœ€è¦ä¸€ç‚¹æ•™è®­ã€‚â€ ä»–ä»¬ç ¸åäº†ä½ çš„åŒ»ç–—è®¾å¤‡ã€‚", 'alert');
                        log("å¥‡ç¾æ‹‰ç ´åäº†åŒ»ç–—è®¾æ–½", 'loss');
                    },
                    result: "è™½ç„¶ä»–ä»¬æ²¡æœ‰ä¼¤äººï¼Œä½†æŠŠä½ æ˜‚è´µçš„åŒ»ç–—ä»ªå™¨ç ¸æˆäº†åºŸé“ã€‚"
                }
            ]
        },

        // ğŸ”´ [è´Ÿå£°æœ›] Ghostsï¼šå¹½çµå…¥ä¾µ
        // è®¾å®šï¼šç¾å›½é¡¶å°–ç‰¹ç§éƒ¨é˜Ÿï¼Œé«˜ç§‘æŠ€ï¼Œéšç§˜ã€‚ä½ ä¸ä¼šçœ‹åˆ°ä»–ä»¬ï¼Œåªä¼šé­å—ç”µå­æˆ˜æ‰“å‡»æˆ–æ— å£°çš„æŸå¤±
        bad_rep_ghosts: {
            text: "ä½ æ­£å‡†å¤‡ç»“ç®—ä»Šå¤©çš„è´¦ç›®ï¼Œçªç„¶åº—å†…æ‰€æœ‰çš„ç”µå­å±å¹•å…¨éƒ¨é»‘å±ï¼Œéšåäº®èµ·äº†ä¸€ä¸ªè¯¡å¼‚çš„å¹½çµéª·é«…å›¾æ ‡ã€‚\nå¹¿æ’­é‡Œä¼ å‡ºç»è¿‡å˜å£°å¤„ç†çš„å£°éŸ³ï¼šâ€œç›®æ ‡å·²è¢«æ ‡è®°ä¸ºæ½œåœ¨å¨èƒï¼Œæ­£åœ¨æ‰§è¡Œèµ„äº§å†»ç»“ä¸æƒ…æŠ¥å‰¥ç¦»ç¨‹åºã€‚â€\n(Ghosts å£°æœ› < 0 è§¦å‘)",
            speaker: "System Hack",
            type: "alert",
            condition: s => s.rep_ghosts < 0,
            options: [
                {
                    text: "åˆ‡æ–­ç”µæºï¼å¿«ï¼(æ¶ˆè€— 2 AP)",
                    desc: "ç‰©ç†æ–­ç½‘æ­¢æŸ",
                    condition: s => s.ap >= 2,
                    effect: s => {
                        s.ap -= 2;
                        const loss = rng(100, 200); // å°‘é‡æŸå¤±
                        s.money = Math.max(0, s.money - loss);
                        printMsg(`ä½ åƒç–¯äº†ä¸€æ ·æ‹”æ‰äº†æ‰€æœ‰ç”µçº¿ï¼ŒæŸå¤±äº† $${loss}ã€‚`, 'event');
                    },
                    result: "å±å¹•ç†„ç­äº†ï¼Œä½ ä¿ä½äº†å¤§éƒ¨åˆ†èµ„é‡‘ï¼Œä½†è¢«å“å‡ºäº†ä¸€èº«å†·æ±—ã€‚"
                },
                {
                    text: "æ— èƒ½ä¸ºåŠ›...",
                    desc: "çœ¼çççœ‹ç€èµ„é‡‘è¢«è½¬èµ°",
                    effect: s => {
                        const loss = Math.floor(s.money * 0.4); // æŸå¤± 40% ç°é‡‘
                        s.money -= loss;
                        s.rep_ghosts += 2; // ä»–ä»¬æ‹¿åˆ°äº†æƒ³è¦çš„ï¼Œå¨èƒåº¦é™ä½
                        log(`è¢« Ghosts é»‘å®¢è½¬èµ° $${loss}`, 'loss');
                    },
                    result: "å±å¹•ä¸Šæ»šåŠ¨ç€æ•°æ®æµï¼Œä½ çš„åŠ å¯†è´¦æˆ·ç¬é—´è¢«æ¸…ç©ºäº†è¿‘ä¸€åŠï¼Œéšåå›¾æ ‡æ¶ˆå¤±ï¼Œä¸€åˆ‡æ¢å¤æ­£å¸¸ï¼Œä»¿ä½›ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡ã€‚"
                }
            ]
        },

        // ğŸ”´ [è´Ÿå£°æœ›] KorTacï¼šé›‡ä½£å…µçš„æ å¤º
        // è®¾å®šï¼šçº¯ç²¹çš„é›‡ä½£å…µç»„ç»‡ï¼Œç®€å•ç²—æš´ï¼Œå°±æ˜¯æ¥æŠ¢ä¸œè¥¿æˆ–è€…æŠ¢äººçš„
        bad_rep_kortac: {
            text: "ä¸€è¾†æ»¡è½½ KorTac å£«å…µçš„è£…ç”²å¡è½¦ç›´æ¥æ’å¼€äº†ä½ åº—é—¨å£çš„è·¯éšœã€‚\nä»–ä»¬åƒåœŸåŒªä¸€æ ·é—¯äº†è¿›æ¥ï¼šâ€œè¿™ç‰‡åŒºåŸŸçš„è¡¥ç»™ç°åœ¨å½’ KorTac æ‰€æœ‰ï¼è¦ä¹ˆäº¤å‡ºç‰©èµ„ï¼Œè¦ä¹ˆè·Ÿæˆ‘ä»¬èµ°ä¸€è¶Ÿï¼â€\n(KorTac å£°æœ› < 0 è§¦å‘)",
            speaker: "KorTac Commander",
            type: "alert",
            condition: s => s.rep_kortac < 0,
            options: [
                {
                    text: "äº¤å‡ºæ‰€æœ‰åŒ»ç–—åŒ…å’Œé£Ÿç‰©",
                    desc: "ä¿ä½æ€§å‘½å’Œé’±",
                    condition: s => s.medkit > 0 || s.food > 0,
                    effect: s => {
                        s.medkit = 0;
                        s.food = 0;
                        s.rep_kortac += 5; // ç¨å¾®æ»¡æ„
                        log("KorTac æ´—åŠ«äº†ä»“åº“", 'loss');
                    },
                    result: "ä»–ä»¬åƒè—è™«ä¸€æ ·æ¬ç©ºäº†ä½ çš„è´§æ¶ã€‚â€œç®—ä½ è¯†ç›¸ï¼Œæˆ‘ä»¬èµ°ï¼â€"
                },
                {
                    text: "æ­»å®ˆä»“åº“ (æ¶ˆè€—å¼¹è¯)",
                    desc: "å‘ç”Ÿäº¤ç« (-5 Ammo)",
                    condition: s => s.ammo >= 5,
                    effect: s => {
                        s.ammo -= 5;
                        if (chance(40)) {
                            printMsg("ä¾æ‰˜æ©ä½“ï¼Œä½ å‹‰å¼ºå‡»é€€äº†ä»–ä»¬ï¼Œä½†åº—é¢å—æŸä¸¥é‡ã€‚", 'gain');
                            s.rating -= 0.5;
                        } else {
                            printMsg("ç«åŠ›ä¸è¶³ï¼ä»–ä»¬å†²è¿›æ¥æŠŠä½ æ‰“æ™•äº†ï¼ŒæŠ¢èµ°äº†ä¸€åŠçš„é’±ã€‚", 'alert');
                            s.money = Math.floor(s.money / 2);
                        }
                    },
                    result: "è¿™å¸®é›‡ä½£å…µç®€ç›´å°±æ˜¯ä¸€ç¾¤æœ‰æ‰§ç…§çš„å¼ºç›—ã€‚"
                }
            ]
        },


// --- ã€æ–°å¢ã€‘è¯„åˆ†ç³»ç»Ÿä¸“å±äº‹ä»¶ ---
// --- ã€æ–°å¢ã€‘ç¥ç§˜å•†äºº (åæ‚”è¯é€»è¾‘) ---
        mystery_merchant: {
            text: "ä¸€ä¸ªæµ‘èº«è£¹åœ¨é»‘è¢é‡Œçš„ç¥ç§˜å•†äººæ‹¦ä½äº†ä½ ã€‚ä»–çš„è´§æ¶ä¸Šæ‘†æ»¡äº†å¥‡å¼‚çš„ç“¶ç“¶ç½ç½ã€‚\nâ€œå¹´è½»çš„ {PLAYER} å•Šï¼Œä½ çš„çœ¼ç¥é‡Œå……æ»¡äº†æ•…äº‹... æˆ–è€…è¯´æ˜¯â€˜äº‹æ•…â€™ï¼Ÿâ€",
            speaker: "Mystery Merchant",
            options: [
                {
              text: "è´­ä¹°â€˜è®°å¿†æ¸…æ´—è¯æ°´â€™ (-$100,000)",
                    desc: "å¼ºåˆ¶é‡ç½®å…¨å‘˜å¥½æ„Ÿä¸å…³ç³» (æ…ç”¨ï¼)",
                    // ğŸŸ¢ ä¿®æ”¹ï¼šå»æ‰äº†ä¿®ç½—åœºé™åˆ¶ï¼Œåªä¿ç•™é‡‘é’±é™åˆ¶
                    condition: s => s.money >= 100000,
                    effect: s => {
                        s.money -= 100000;
                        
                        // 1. æ¸…é™¤ä¿®ç½—åœºæ ‡è®°
                        s.flags.cheating_exposed = false;
                        
                        // 2. é‡ç½®4ä½ç”·ä¸»çš„çŠ¶æ€
                          ['ghost', 'konig', 'krueger', 'keegan'].forEach(k => {
                            s.chars[k].dating = false;
                            s.chars[k].confessed = false; 
                            s.chars[k].aff = 10; 
                            
                            // ğŸŸ¢ ã€å…³é”®ã€‘å½»åº•æ´—ç™½ï¼Œè¿å‰ä»»éƒ½ä¸æ˜¯äº†ï¼Œå˜å›é™Œç”Ÿäºº/æˆ˜å‹
                            s.chars[k].is_ex = false; 
                        });

                        log("è´­ä¹°äº†åæ‚”è¯ï¼Œä¸–ç•Œçº¿é‡ç½®", 'gain');
                    },
                    result: "ä½ å–ä¸‹äº†è¯æ°´... ä¸ï¼Œæ˜¯ä½ æŠŠè¯æ°´æ´’åœ¨äº†ç©ºæ°”ä¸­ã€‚\nä¸€é˜µå¥‡å¼‚çš„è¿·é›¾æ•£å»ï¼Œå½“ä½ å†æ¬¡è§åˆ°ä»–ä»¬æ—¶ï¼Œä»–ä»¬çœ¼ä¸­çš„çˆ±æ„...æˆ–è€…æ¨æ„æ¶ˆå¤±äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç†Ÿæ‚‰çš„æˆ˜å‹æƒ…è°Šã€‚\nä½ è·å¾—äº†ç¬¬äºŒæ¬¡æœºä¼šï¼Œè¿™æ¬¡åˆ«å†æç ¸äº†ã€‚"
                },
                {
                    text: "è´­ä¹°æ™®é€šçš„ç›²ç›’ (-$500)",
                    desc: "éšä¾¿ä¹°ç‚¹ä»€ä¹ˆ",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        const loot = rng(1, 3);
                        if(loot === 1) { s.medkit += 5; log("è·å¾— 5 Medkit", 'gain'); }
                        if(loot === 2) { s.ammo += 10; log("è·å¾— 10 Ammo", 'gain'); }
                        if(loot === 3) { s.food += 10; log("è·å¾— 10 Food", 'gain'); }
                    },
                    result: "å•†äººæ”¶ä¸‹é’±ï¼Œæ‰”ç»™ä½ ä¸€ä¸ªåŒ…è£¹å°±å‡­ç©ºæ¶ˆå¤±äº†ã€‚"
                },
                {
                    text: "ç¦»å¼€",
                    result: "â€œå¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰å‹‡æ°”é¢å¯¹è¿‡å»çš„é”™è¯¯ã€‚â€ å•†äººçš„ç¬‘å£°æ¶ˆæ•£åœ¨é£ä¸­ã€‚"
                }
            ]
        },

        // 1. å·®è¯„å‹’ç´¢ (ä¸¤éš¾é€‰æ‹©)
        review_blackmail: {
            text: "ä¸€ä¸ªæ— èµ–æµæ°“é åœ¨æŸœå°è¾¹ï¼Œæ‰‹é‡ŒæŠ›ç€ä¸€æšç¡¬å¸ã€‚\nâ€œè€æ¿ï¼Œæˆ‘çœ‹ä½ ç”Ÿæ„ä¸é”™ã€‚ç»™æˆ‘ $1000 â€˜ä¿æŠ¤è´¹â€™ï¼Œå¦åˆ™æˆ‘å°±åˆ°å¤„æ•£æ’­è°£è¨€ï¼Œè¯´ä½ çš„è¯åŒ…é‡Œè£…çš„æ˜¯é”¯æœ«ã€‚â€",
            speaker: "Thug",
            options: [
                {
                    text: "èŠ±é’±æ¶ˆç¾ (-$1000)",
                    desc: "è™½ç„¶å¾ˆä¸çˆ½ï¼Œä½†ä¿ä½äº†å£°èª‰",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 1000;
                        // è™½ç„¶æ²¡è·å¾—å¥½è¯„ï¼Œä½†é¿å…äº†å·®è¯„ï¼Œç¨å¾®åŠ ä¸€ç‚¹ç‚¹å®‰æ…°åˆ†
                        addShopRating(4.0, true); 
                        log("æ”¯ä»˜å‹’ç´¢è´¹ä¿ä½äº†å£°èª‰", 'loss');
                    },
                    result: "æµæ°“æ‹¿äº†é’±ï¼Œå¹ç€å£å“¨èµ°äº†ã€‚â€œèªæ˜äººã€‚ç¥ä½ ç”Ÿæ„å…´éš†ã€‚â€"
                },
                {
                    text: "æŠŠä»–è½°å‡ºå»",
                    desc: "è·å¾— 1 æ˜Ÿå·®è¯„",
                    effect: s => {
                        // é­å—æ¶æ„å·®è¯„
                        addShopRating(1.0, false);
                        printMsg("ä»–åœ¨é—¨å£å¤§å–Šå¤§å«ï¼Œç”šè‡³åœ¨ä½ çš„å¢™ä¸Šä¹±æ¶‚ä¹±ç”»ã€‚", 'alert');
                    },
                    result: "æµæ°“ä¸´èµ°å‰æ¶ç‹ ç‹ åœ°å•äº†ä¸€å£ï¼šâ€œç­‰ç€ç§ï¼Œä½ çš„åº—å®Œäº†ï¼â€"
                }
            ]
        },
// ğŸ‘‘ å¥³ç‹æ—¥å¸¸ï¼šå±é™©çš„æ—©æ™¨
        harem_morning: {
            text: "æ—©æ™¨æµ‘èº«é…¸ç—›åœ°é†’æ¥ï¼Œä½ å‘ç°åº—é‡Œçš„æ°”æ°›å¼‚å¸¸... å’Œè°ï¼Ÿ\nKÃ¶nig æ­£åœ¨æ¬è¿é‡å‹è´§ç‰©ï¼ŒKeeganç»™ä½ å€’äº†æ¯æ¸©æ°´ï¼ŒGhost æ­£åœ¨æ“¦æ‹­æŸœå°ï¼ˆè™½ç„¶ä¸€è„¸ä¸çˆ½ï¼‰ï¼Œè€Œ Krueger æ­£åœ¨é—¨å£åƒé—¨ç¥ä¸€æ ·å°†æ¥è·¯ä¸æ˜çš„äººå“è·‘ã€‚",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šå¥³ç‹æ¨¡å¼ ä¸” éšæœº
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "äº«å—è¿™ä¸€åˆ» (AP+3)",
                    desc: "æœ€å¼ºåæ´å›¢",
                    effect: s => {
                        s.ap = CONFIG.max_ap + 2; // ç²¾åŠ›çˆ†è¡¨
                        s.money += 500; // ä»–ä»¬é¡ºæ‰‹å¸®ä½ èµšäº†é’±
                        log("å…¨å‘˜åä½œå¸¦æ¥æ”¶ç›Š +$500", 'gain');
                        printMsg("Ghostï¼šâ€œçœ‹ä»€ä¹ˆï¼Ÿèµ¶ç´§å¹²æ´»ã€‚â€\nè™½ç„¶å˜´ç¡¬ï¼Œä½†ä»–ä»¬ç¡®å®æŠŠä½ ç…§é¡¾å¾—å¾ˆå¥½ã€‚", 'dialogue', 'Ghost');
                    },
                    result: "åœ¨è¿™ä¸ªåºŸåœŸä¸Šï¼Œè¿™å¯èƒ½æ˜¯æœ€å¥¢ä¾ˆçš„å®‰å…¨æ„Ÿã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 2. èŸ‘è‚ç«é€Ÿèµ›
        cockroach_race: {
            text: "åº—é‡Œæ²¡ä»€ä¹ˆç”Ÿæ„ï¼Œå‡ ä¸ªæ— èŠçš„æ‹¾è’è€…åœ¨åœ°ä¸Šç”»äº†å‡ ä¸ªåœˆï¼ŒæŠ“æ¥äº†å‡ åªå˜å¼‚èŸ‘è‚ã€‚\nâ€œå˜¿è€æ¿ï¼ç¬¬ä¸€å±Šâ€˜æ— å·®åˆ«èŸ‘è‚å†²åˆºèµ›â€™é©¬ä¸Šå¼€å§‹ï¼è¦ä¸è¦æŠ¼æ³¨ï¼Ÿâ€",
            type: "event",
            options: [
                {
                    text: "æŠ¼æ³¨ 3 å·â€œé—ªç”µâ€ (-$20)",
                    desc: "å°èµŒæ€¡æƒ…",
                    condition: s => s.money >= 20,
                    effect: s => {
                        s.money -= 20;
                        if (chance(40)) {
                            s.money += 60;
                            printMsg("é‚£åªæ–­äº†ä¸€æ¡è…¿çš„èŸ‘è‚å±…ç„¶è·‘å¾—æœ€å¿«ï¼ä½ èµ¢äº† $60ï¼", 'gain');
                        } else {
                            printMsg("ä½ çš„é€‰æ‰‹è·‘åˆ°ä¸€åŠè¢«å¦ä¸€åªé€‰æ‰‹åƒæ‰äº†... æ¯”èµ›å–æ¶ˆã€‚", 'loss');
                        }
                    },
                    result: "ä¸€ç¾¤å¤§ç”·äººå›´ç€å‡ åªè™«å­å¤§å‘¼å°å«ï¼Œåœºé¢ä¸€åº¦éå¸¸æ»‘ç¨½ã€‚"
                },
                {
                    text: "æŠŠä»–ä»¬èµ¶å‡ºå»",
                    desc: "å¤ªæ¶å¿ƒäº†",
                    effect: s => {
                        addShopRating(4.5, true); // å…¶ä»–é¡¾å®¢è§‰å¾—ä½ åšå¾—å¯¹
                    },
                    result: "â€œçœŸæ²¡åŠ²...â€ ä»–ä»¬æŠ“èµ·èŸ‘è‚å»éš”å£äº†ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 3. æ€€æ—§ç”µå½±å¤œ
        movie_night: {
            text: "ä½ ä¿®å¥½äº†ä¸€å°è€å¼æŠ•å½±ä»ªï¼Œè™½ç„¶åªæœ‰ä¸€éƒ¨åä¸ºã€ŠçŒ«å’Œè€é¼ ã€‹çš„æˆ˜å‰åŠ¨ç”»ç‰‡å…‰ç›˜ã€‚\nä»Šæ™šè¦ä¸è¦åœ¨åº—é‡Œæ”¾æ˜ ï¼Ÿ",
            type: "event",
            options: [
                 {
                    text: "ä¸¾åŠå…¬ç›Šæ”¾æ˜ ä¼š (æ¶ˆè€— 1 AP)",
                    desc: "å…¨é˜µè¥å£°æœ›æå‡ï¼Œå¤§é‡å¥½è¯„",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        // ğŸŸ¢ ã€ä¿®å¤ã€‘è¡¥ä¸Š Ghosts
                        s.rep_141 += 3; s.rep_kortac += 3; s.rep_chimera += 3; s.rep_ghosts += 3;
                        
                        addShopRating(5.0, true);
                        s.rating = Math.min(5.0, s.rating + 0.1);
                        printMsg("ä¸ç®¡æ˜¯å‡¶ç¥æ¶ç…çš„ä½£å…µè¿˜æ˜¯æµæµªæ±‰ï¼Œæ­¤åˆ»éƒ½å®‰é™åœ°ååœ¨ä¸€èµ·çœ‹ç€è¿™åªç¬¨çŒ«å‘ç¬‘ã€‚", 'gain');
                    },
                    result: "è¿™å¯èƒ½æ˜¯åºŸåœŸä¸Šæœ€å’Œå¹³çš„ä¸€ä¸ªå¤œæ™šï¼ŒKrueger ç”šè‡³ä¹Ÿè¢«é€—ç¬‘äº†ã€‚"
                },
                {
                    text: "ç•™ç€è‡ªå·±çœ‹",
                    desc: "å¿ƒæƒ…å˜å¥½",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "ä½ ä¸€è¾¹åƒç½å¤´ä¸€è¾¹çœ‹åŠ¨ç”»ç‰‡ï¼Œæ„Ÿè§‰èº«å¿ƒéƒ½è¢«æ²»æ„ˆäº†ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 4. æ´—è¡£æ—¥çš„å°´å°¬
        laundry_day: {
            text: "KÃ¶nig æŠ±ç€ä¸€å †å·¨å¤§çš„æˆ˜æœ¯è£…å¤‡ç«™åœ¨æ°´æ¡¶å‰å‘æ„ã€‚\nâ€œé‚£ä¸ª... è€æ¿ï¼Œè¿™ä»¶èƒŒå¿ƒä¸Šæ²¾äº†æœºæ²¹ï¼Œæ€ä¹ˆæ“éƒ½æ“ä¸æ‰... è¿™å¯æ˜¯é…å‘çš„ï¼Œå¼„è„äº†ä¼šè¢«éª‚ã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "æä¾›å¼ºåŠ›å»æ±¡å‰‚ (-1 Ammo)",
                    desc: "ç”¨ç«è¯æˆåˆ†è°ƒåˆ¶ (Ammo-1)",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig è¯•äº†ä¸€ä¸‹ï¼Œæ±¡æ¸å¥‡è¿¹èˆ¬åœ°æ¶ˆå¤±äº†ï¼\nâ€œå“‡ï¼ä½ æ˜¯é­”æ³•å¸ˆå—ï¼Ÿâ€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–å¼€å¿ƒåœ°å“¼ç€æ­Œç»§ç»­æ´—è¡£æœå»äº†ï¼Œè™½ç„¶é‚£æ˜¯é¦–è·‘è°ƒçš„å¾·è¯­æ­Œã€‚"
                },
                {
                    text: "å¸®ä»–æ‰‹æ´—",
                    desc: "æœ‰ç‚¹æš§æ˜§çš„å¸®åŠ© (æ¶ˆè€— AP)",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.chars.konig.aff += 8;
                        printMsg("ä½ æŒ½èµ·è¢–å­å¸®å¿™ï¼ŒKÃ¶nig è¹²åœ¨ä¸€æ—çœ‹ç€ä½ çš„æ‰‹ï¼Œè„¸çº¢å¾—åƒä¸ªç•ªèŒ„ã€‚", 'event');
                    },
                    result: "â€œæ‰‹... æ‰‹ä¼šå˜ç²—ç³™çš„... ä¸‹æ¬¡è¿˜æ˜¯æˆ‘æ¥å§ã€‚â€ ä»–å°å£°è¯´é“ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 5. å¥‡æ€ªçš„ç½å¤´ç›²ç›’
        mystery_can_tasting: {
            text: "ä¸€åæ‹¾è’è€…æŒ–åˆ°äº†ä¸€ç®±æ ‡ç­¾å…¨éƒ¨è„±è½çš„ç½å¤´ã€‚\nâ€œæˆ‘ä¸æ•¢åƒï¼Œä¹Ÿä¸çŸ¥é“é‡Œé¢æ˜¯ç‰›è‚‰è¿˜æ˜¯ç‹—ç²®ï¼Œè€æ¿ï¼Œä½ æ•¢ä¸æ•¢è·Ÿæˆ‘ç©ä¸ªæ¸¸æˆï¼Ÿä¸€äººå¼€ä¸€ç½ï¼Œè°åƒåˆ°å¥½åƒçš„ç®—è°èµ¢ã€‚â€",
            speaker: "Scavenger",
            type: "event",
            options: [
                {
                    text: "æ¥å—æŒ‘æˆ˜ (å…è´¹åƒä¸€é¡¿)",
                    desc: "çœ‹è¿æ°”",
                    effect: s => {
                        if (chance(50)) {
                            s.food = Math.min(CONFIG.capacity_tiers[s.lvl_store-1], s.food + 1);
                            printMsg("å•µï¼ä½ å¼€å‡ºäº†ä¸€ç½ç”œç¾çš„é»„æ¡ƒç½å¤´ï¼å‘³é“ç»äº†ï¼(+1 Food)", 'gain');
                        } else {
                            printMsg("å™—... æ˜¯ä¸€ç½å‘é…µçš„é²±é±¼ã€‚é‚£å‘³é“å·®ç‚¹æŠŠä½ é€èµ°ã€‚", 'loss');
                            s.rating -= 0.1; // åº—é‡Œè‡­äº†
                        }
                    },
                    result: "é‚£ä¸ªæ‹¾è’è€…å¼€å‡ºäº†ä¸€ç½è¿‡æœŸçš„çŒ«ç²®ï¼Œæ­£è‹¦ç€è„¸å¾€ä¸‹å’½ã€‚"
                },
                {
                    text: "æ‹’ç»",
                    result: "â€œæ— è¶£çš„äººã€‚â€ ä»–è€¸è€¸è‚©è‡ªå·±å¼€äº†ä¸€ç½ï¼Œç»“æœå–·äº†ä¸€èº«ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 6. å¹½çµçš„æ¶‚é¸¦
        ghost_doodle: {
            text: "ä½ æ•´ç†è´§æ¶æ—¶ï¼Œå‘ç° Ghost ç»å¸¸é ç€çš„é‚£ä¸ªè§’è½çš„å¢™å£ä¸Šå¤šäº†ä¸€ä¸ªå°å°çš„å›¾æ¡ˆã€‚\næ˜¯ç”¨åˆ€å°–åˆ»ä¸Šå»çš„ï¼Œç”»çš„æ˜¯ä¸€åªæ­£åœ¨ç¡è§‰çš„ç®€ç¬”ç”»å°çŒ«ï¼ˆæˆ–è€…æ˜¯ç‹—ï¼Ÿï¼‰ã€‚",
            type: "event",
            // åªæœ‰ Ghost å¥½æ„Ÿåº¦é«˜äº†æ‰ä¼šå¹²è¿™ç§å¹¼ç¨šçš„äº‹
            condition: s => s.chars.ghost.aff > 80,
            options: [
                {
                    text: "åœ¨æ—è¾¹ç”»ä¸ªç¬‘è„¸å›åº”",
                    desc: "æ— å£°çš„äº’åŠ¨",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                    },
                    result: "ç¬¬äºŒå¤©ï¼Œä½ å‘ç°ç¬‘è„¸æ—è¾¹å¤šäº†ä¸€ä¸ªå°å°çš„â€œâˆšâ€ã€‚"
                },
                {
                    text: "æ“¦æ‰/æ— è§†",
                    desc: "ä¿æŒå¢™é¢æ•´æ´",
                    result: "ä½ æŠŠåˆ»ç—•æŠ¹å¹³äº†ï¼Œä¹‹å Ghost å†ä¹Ÿæ²¡å¾€é‚£é‡Œé è¿‡ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 7. åœç«æ—¥çš„é˜³å…‰
        peaceful_afternoon: {
            text: "ä»Šå¤©å‡ºå¥‡çš„å®‰é™ï¼Œè¿œå¤„æ²¡æœ‰æªç‚®å£°ï¼Œåªæœ‰é£å¹è¿‡åºŸå¢Ÿçš„å“¨éŸ³ã€‚\né˜³å…‰ç©¿è¿‡å°˜åŸƒæ´’åœ¨æŸœå°ä¸Šï¼Œæš–æ´‹æ´‹çš„è®©äººæƒ³ç¡è§‰ã€‚",
            type: "event",
            options: [
                {
                    text: "è¶´åœ¨æŸœå°ä¸Šç¡ä¸ªåˆè§‰ (å›å¤ AP)",
                    desc: "éš¾å¾—çš„ä¼‘æ¯æ—¶å…‰",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                        printMsg("ä½ åšäº†ä¸€ä¸ªå…³äºæˆ˜å‰ä¸–ç•Œçš„æ¢¦ï¼Œé†’æ¥æ—¶ç²¾ç¥é¥±æ»¡ã€‚(AP+2)", 'gain');
                    },
                    result: "é†’æ¥æ—¶ï¼Œä½ å‘ç°èº«ä¸ŠæŠ«ç€ä¸€ä»¶ä¸çŸ¥é“æ˜¯è°ç»™ä½ ç›–çš„æˆ˜æœ¯å¤–å¥—ã€‚"
                },
                {
                    text: "è¶æœºæ•´ç†åº“å­˜",
                    desc: "å‹¤åŠ³è‡´å¯Œ",
                    effect: s => {
                        s.money += 50; // æ‰¾åˆ°äº†ä¸€äº›é›¶é’±
                    },
                    result: "ä½ åœ¨è§’è½é‡Œæ‰¾åˆ°äº†å‡ æšæ‰è½çš„ç¡¬å¸ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 8. æŒ‘é£Ÿçš„ Krueger
        krueger_picky_eater: {
            text: "Krueger ååœ¨è§’è½é‡Œï¼Œç›¯ç€æ‰‹é‡Œçš„å‹ç¼©é¥¼å¹²ä¸€è„¸å«Œå¼ƒã€‚\nä»–ç”¨åŒ•é¦–æŠŠé¥¼å¹²åˆ‡æˆæè–„çš„è–„ç‰‡ï¼Œç”šè‡³è¯•å›¾æŠŠé‡Œé¢çš„è‘¡è„å¹²æŒ‘å‡ºæ¥ã€‚\nâ€œè¿™ä¸œè¥¿ç®€ç›´æ˜¯åœ¨ä¾®è¾±æˆ‘çš„å‘³è•¾ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            options: [
                {
                    text: "ç»™ä»–ä¸€å‹ºæœé…± (-1 Food)",
                    desc: "æ”¹å–„ä¼™é£Ÿ",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.krueger.aff += 3;
                        printMsg("Krueger æŒ‘çœ‰çœ‹äº†ä½ ä¸€çœ¼ï¼ŒæŠ¹ä¸Šæœé…±ã€‚â€œç®—ä½ æ‡‚äº‹ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "ä»–ç»ˆäºä¸å†æŠ˜ç£¨é‚£å—é¥¼å¹²ï¼Œä¸¤ä¸‰å£åƒå®Œäº†ã€‚"
                },
                {
                    text: "åæ§½ï¼šâ€œæœ‰çš„åƒå°±ä¸é”™äº†â€",
                    desc: "è¿™æ˜¯åºŸåœŸï¼",
                    result: "â€œå“¼ã€‚â€ Krueger æŠŠè‘¡è„å¹²å¼¹åˆ°äº†åœ°ä¸Šï¼Œé‚£æ˜¯ä»–æœ€åçš„å€”å¼ºã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 9. æ¼é›¨çš„è¯—æ„
        rainy_mood: {
            text: "å¤–é¢ä¸‹ç€æ·…æ·…æ²¥æ²¥çš„å°é›¨ï¼ˆéš¾å¾—æ˜¯æ²¡æœ‰è…èš€æ€§çš„æ™®é€šé›¨ï¼‰ã€‚\né›¨æ°´æ‰“åœ¨é“çš®å±‹é¡¶ä¸Šï¼Œå‘å‡ºæœ‰èŠ‚å¥çš„ç™½å™ªéŸ³ã€‚å‡ ä¸ªè·¯è¿‡çš„æ—…äººå†³å®šåœ¨ä½ åº—é‡Œå¤šåä¸€ä¼šå„¿ã€‚",
            type: "event",
            options: [
                {
                    text: "æä¾›å…è´¹çƒ­æ°´",
                    desc: "æ¸©æš–äººå¿ƒ (+è¯„åˆ†)",
                    effect: s => {
                        addShopRating(5.0, true);
                        s.rep_141 += 2; s.rep_kortac += 2;
                        printMsg("å¤§å®¶æ§ç€çƒ­æ°”è…¾è…¾çš„æ¯å­ï¼ŒåŸæœ¬ç´§ç»·çš„ç¥ç»éƒ½æ”¾æ¾äº†ä¸‹æ¥ã€‚", 'gain');
                    },
                    result: "æœ‰äººå¼€å§‹è®²èµ·äº†ç¬‘è¯ï¼Œåº—é‡Œå……æ»¡äº†å¿«æ´»çš„ç©ºæ°”ã€‚"
                },
                {
                    text: "æ¨é”€é›¨å…·",
                    desc: "å€Ÿæœºèµšé’±",
                    effect: s => {
                        s.money += 80;
                    },
                    result: "ä½ å–æ‰äº†å‡ ä»¶é›¨è¡£ï¼Œå°èµšä¸€ç¬”ã€‚"
                }
            ]
        },

        // ğŸŸ¢ [æ—¥å¸¸] 10. åæ‰çš„æ”¶éŸ³æœº
        broken_radio_fix: {
            text: "ä½ åº—é‡Œçš„è€å¼æ”¶éŸ³æœºçªç„¶æ²¡å£°äº†ï¼Œåªå‰©ä¸‹åˆºè€³çš„æ‚éŸ³ã€‚\næ­£å½“ä½ å‡†å¤‡æ‹æ‰“å®ƒæ—¶ï¼Œä¸€ä¸ªè·¯è¿‡çš„è’™é¢æŠ€æœ¯å‘˜æ¢è¿‡å¤´æ¥ã€‚",
            speaker: "Tech Guy",
            type: "event",
            options: [
                {
                    text: "è®©ä»–è¯•è¯•ä¿®å¥½",
                    desc: "å¯èƒ½éœ€è¦æ”¯ä»˜è´¹ç”¨",
                    effect: s => {
                        if (chance(70)) {
                            printMsg("ä»–ä¸‰ä¸¤ä¸‹å°±ä¿®å¥½äº†ï¼Œç”šè‡³è¿˜å¸®ä½ è°ƒåˆ°äº†ä¸€ä¸ªæ”¾çˆµå£«ä¹çš„é¢‘é“ã€‚", 'gain');
                            s.rating += 0.1; // éŸ³ä¹æå‡æ ¼è°ƒ
                        } else {
                            printMsg("ä»–æŠŠæ”¶éŸ³æœºæ‹†æ•£äº†ï¼Œç„¶åæŒ æŒ å¤´è¯´â€˜ç¼ºé›¶ä»¶â€™ï¼Œå°±èµ°äº†ã€‚", 'loss');
                        }
                    },
                    result: "â€œä¸ç”¨è°¢ï¼ŒèŒä¸šç—…çŠ¯äº†ã€‚â€ ä»–æ²¡æ”¶é’±å°±èµ°äº†ã€‚"
                },
                {
                    text: "æš´åŠ›ç»´ä¿®ï¼ˆæ‹å®ƒï¼ï¼‰",
                    desc: "ä¼ ç»Ÿçš„ä¿®ç†æ–¹å¼",
                    effect: s => {
                        if (chance(50)) {
                            printMsg("å•ªï¼æ”¶éŸ³æœºå±…ç„¶ç¥å¥‡åœ°æ¢å¤äº†å·¥ä½œï¼", 'gain');
                        } else {
                            printMsg("å•ªï¼å†’çƒŸäº†ï¼Œå½»åº•åäº†ã€‚", 'loss');
                        }
                    },
                    result: "æœ‰æ—¶å€™æš´åŠ›èƒ½è§£å†³é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¸èƒ½ã€‚"
                }
            ]
        },

// ğŸµ 1. åºŸåœŸç†å‘å¸ˆ (ç”Ÿæ´»æŠ€èƒ½)
        daily_haircut: {
            text: "ä¸€åæ»¡è„¸èƒ¡èŒ¬çš„å£«å…µä¸å¥½æ„æ€åœ°æŒ äº†æŒ å¤´ï¼šâ€œè€æ¿ï¼Œæˆ‘çŸ¥é“è¿™ä¸åœ¨ä¸šåŠ¡èŒƒå›´å†…... ä½†æˆ‘çš„åˆ˜æµ·å·²ç»æŒ¡ä½ç„å‡†é•œäº†ï¼Œä½ èƒ½å¸®æˆ‘å‰ªå‰ªå¤´å‘å—ï¼Ÿâ€",
            speaker: "Soldier",
            type: "dialogue",
            options: [
                {
                    text: "æ‹¿å‡ºå‰ªåˆ€ (æ¶ˆè€— 1 AP)",
                    desc: "ç®€å•çš„ä¿®å‰ª",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.rep_141 += 3; // å£«å…µå¾ˆæ„Ÿæ¿€
                        s.money += 20; // æ„æ€ä¸€ä¸‹çš„å°è´¹
                        printMsg("ä½ çš„æ‰‹è‰ºä¸€èˆ¬ï¼Œç”šè‡³å‰ªäº†ä¸ªç¼ºå£ï¼Œä½†å£«å…µçœ‹èµ·æ¥æ¸…çˆ½å¤šäº†ã€‚â€œè°¢äº†ï¼è¿™ä¸‹èƒ½çœ‹æ¸…æ•Œäººäº†ï¼â€", 'gain');
                    },
                    result: "è™½ç„¶ä¸€åœ°ç¢å‘å¾ˆéš¾æ‰«ï¼Œä½†çœ‹ç€ä»–å¼€å¿ƒçš„èƒŒå½±ï¼Œä½ è§‰å¾—è¿˜ä¸é”™ã€‚"
                },
                {
                    text: "é€’ç»™ä»–ä¸€æŠŠåŒ•é¦–",
                    desc: "è®©ä»–è‡ªå·±è§£å†³",
                    result: "å£«å…µå¹äº†å£æ°”ï¼Œå¯¹ç€é•œå­éšä¾¿å‰²äº†å‡ ä¸‹ã€‚â€œå¥½å§ï¼Œè¿™æ˜¯æˆ˜æŸé£ã€‚â€"
                }
            ]
        },

        // ğŸ² 2. å…±äº«çƒ­æ±¤ (æ¸©é¦¨æ—¶åˆ»)
        soup_day: {
            text: "ä»Šå¤©é˜´å†·åˆºéª¨ï¼Œä½ çœ‹ç€ä»“åº“é‡Œå‰©ä¸‹çš„å‡ ä¸ªå¿«è¿‡æœŸçš„è”¬èœç½å¤´ï¼Œçªå‘å¥‡æƒ³å†³å®šç…®ä¸€å¤§é”…çƒ­æ±¤ã€‚",
            type: "event",
            options: [
                {
                    text: "é‚€è¯·å¤§å®¶ä¸€èµ·å– (-3 Food)",
                    desc: "æ¸©æš–æ‰€æœ‰äºº (+å…¨å‘˜å¥½æ„Ÿ)",
                    condition: s => s.food >= 3,
                    effect: s => {
                        s.food -= 3;
                        s.chars.ghost.aff += 3; s.chars.konig.aff += 5; s.rep_ghosts += 5; s.chars.krueger.aff += 3;
                        addShopRating(5.0, true);
                        printMsg("åº—é‡Œå¼¥æ¼«ç€æµ“éƒçš„é¦™å‘³ï¼ŒKÃ¶nig ç”šè‡³å–äº†ä¸‰å¤§ç¢—ã€‚å¤§å®¶å›´ç€ç«ç‚‰ï¼Œæš‚æ—¶å¿˜è®°äº†å¤–é¢çš„å¯’å†·ã€‚", 'gain');
                    },
                    result: "æ²¡æœ‰ä»€ä¹ˆæ¯”å†¬æ—¥é‡Œçš„ä¸€ç¢—çƒ­æ±¤æ›´èƒ½æ”¶ä¹°äººå¿ƒçš„äº†ã€‚"
                },
                {
                    text: "è‡ªå·±ç‹¬äº« (AP+2)",
                    desc: "æ¢å¤ç²¾åŠ›",
                    effect: s => {
                        s.food--;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                    },
                    result: "ä½ å–å®Œäº†ä¸€æ•´ç¢—çƒ­æ±¤ï¼Œæ„Ÿè§‰æ´»è¿‡æ¥äº†ã€‚"
                }
            ]
        },

        // ğŸ’ª 3. æ‰³æ‰‹è…•å¤§èµ› (ç”·äººè‡³æ­»æ˜¯å°‘å¹´)
        arm_wrestle_bet: {
            text: "ä¸çŸ¥é“æ˜¯è°èµ·çš„å¤´ï¼ŒKÃ¶nig æ­£è¢«ä¸€ç¾¤èµ·å“„çš„ä½£å…µå›´åœ¨ä¸­é—´æ‰³æ‰‹è…•ï¼Œä»–çš„å¯¹æ‰‹æ˜¯ä¸€ä¸ªå£®å¾—åƒç‰›ä¸€æ ·çš„é‡è£…æœºæªæ‰‹ã€‚\nKÃ¶nig çœ‹èµ·æ¥å¿«å“­äº†ï¼šâ€œæˆ‘ã€æˆ‘ä¸æƒ³å¼„ä¼¤ä»–...â€",
            speaker: "Crowd",
            type: "event",
            // éœ€è¦ KÃ¶nig åœ¨åœº
            condition: s => s.chars.konig.aff > 0,
            options: [
                {
                    text: "æŠ¼ KÃ¶nig èµ¢ (-$50)",
                    desc: "ç›¸ä¿¡ä»–çš„åŠ›é‡",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        s.money += 100; // èµ¢äº†
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig çœ‹åˆ°ä½ ä¸‹äº†æ³¨ï¼Œçœ¼ç¥ä¸€å˜ï¼Œç¬é—´å‘åŠ›ï¼â€œå˜­â€çš„ä¸€å£°ï¼Œæœºæªæ‰‹çš„æ‰‹èƒŒç‹ ç‹ ç ¸åœ¨æ¡Œä¸Šã€‚", 'gain');
                        log("èµŒèµ¢äº†æ‰³æ‰‹è…•æ¯”èµ›", 'gain');
                    },
                    result: "KÃ¶nig æ‰ç€æ‰‹è…•è·‘åˆ°ä½ é¢å‰æ±‚å¤¸å¥–ï¼šâ€œæˆ‘èµ¢äº†ï¼æ²¡ç»™ä½ ä¸¢è„¸å§ï¼Ÿâ€"
                },
                {
                    text: "åˆ¶æ­¢æ¯”èµ›",
                    desc: "æ€•ç ¸åæ¡Œå­",
                    result: "â€œæ•£äº†æ•£äº†ï¼ï¼è€æ¿ç”Ÿæ°”äº†ï¼â€ äººç¾¤ä¸€å“„è€Œæ•£ï¼ŒKÃ¶nig æ¾äº†ä¸€å£æ°”ã€‚"
                }
            ]
        },

        // ğŸª° 4. äººä¸è‹è‡çš„æˆ˜äº‰ (æ— èŠæ—¥å¸¸)
        fly_battle: {
            text: "ä¸€åªå·¨å¤§çš„å˜å¼‚ç»¿å¤´è‹è‡åœ¨åº—é‡Œå—¡å—¡ä½œå“ï¼Œå®ƒçš„é£è¡Œè½¨è¿¹æå…¶é£éªšï¼Œå·²ç»æŒ‘è¡…äº†ä½ åŠä¸ªå°æ—¶ã€‚",
            type: "event",
            options: [
                {
                    text: "ä½¿ç”¨æˆ˜æœ¯æ€è™«å‰‚ (æ¶ˆè€— 1 AP)",
                    desc: "åŠ¿å¿…æ‹¿ä¸‹ï¼",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        if (chance(80)) {
                            printMsg("å•ªï¼ä¸–ç•Œæ¸…é™äº†ï¼Œä½ æ„Ÿåˆ°ä¸€é˜µè«åçš„æˆå°±æ„Ÿã€‚", 'gain');
                        } else {
                            printMsg("è¯¥æ­»ï¼è®©å®ƒè·‘äº†ï¼å®ƒæ’ç¿»äº†ä½ çš„æ°´æ¯ã€‚", 'loss');
                        }
                    },
                    result: "è¿™å°±æ˜¯åºŸåœŸç”Ÿæ´»æ¯ç‡¥ä¸”æœ´å®æ— åçš„ä¸€é¢ã€‚"
                },
                {
                    text: "éšå®ƒå»å§",
                    result: "ä½ å­¦ä¼šäº†ä¸å™ªéŸ³å…±å­˜ï¼ˆå¹¶æ²¡æœ‰ï¼Œä½ çƒ¦äº†ä¸€æ•´å¤©ï¼‰ã€‚"
                }
            ]
        },

        // ğŸŒˆ 5. åºŸåœŸå½©è™¹ (é£æ™¯)
        rainbow_moment: {
            text: "é…¸é›¨åœäº†ï¼Œä½ æŠ¬å¤´çœ‹å‘çª—å¤–ï¼Œç°æš—çš„å¤©ç©ºä¸­ç«Ÿç„¶å‡ºç°äº†ä¸€é“å¾®å¼±ä½†æ¸…æ™°çš„å½©è™¹ã€‚\nè¿™åœ¨æ±¡æŸ“ä¸¥é‡çš„æˆ˜åŒºç®€ç›´æ˜¯å¥‡è¿¹ã€‚",
            type: "event",
            options: [
                {
                    text: "å«å¤§å®¶éƒ½æ¥çœ‹",
                    desc: "åˆ†äº«ç¾å¥½æ—¶åˆ» (+å…¨å‘˜å¿ƒæƒ…)",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        s.chars.ghost.aff += 2; s.chars.konig.aff += 2; s.chars.krueger.aff += 2;
                        printMsg("Krueger åœä¸‹äº†æ“¦åˆ€çš„æ‰‹ï¼ŒGhost èµ°åˆ°äº†çª—è¾¹ï¼ŒKÃ¶nig å‘å‡ºäº†â€˜å“‡â€™çš„å£°éŸ³ã€‚", 'gain');
                    },
                    result: "å“ªæ€•æ˜¯æ€æ‰‹ï¼Œæ­¤åˆ»ä¹Ÿå˜å¾—æŸ”å’Œäº†ï¼Œä½ ä»¬é™é™åœ°çœ‹äº†äº”åˆ†é’Ÿï¼Œç›´åˆ°å½©è™¹æ¶ˆå¤±ã€‚"
                },
                {
                    text: "æ‹ç…§ç•™å¿µ",
                    desc: "ä¹Ÿè®¸èƒ½å–ç»™æŠ¥ç¤¾ï¼Ÿ",
                    effect: s => {
                        s.money += 50; // å–ç…§ç‰‡
                    },
                    result: "ä½ æ‹ä¸‹äº†ä¸€å¼ ä¸é”™çš„ç…§ç‰‡ï¼Œåæ¥å–ç»™äº†ä¸€ä¸ªå–œæ¬¢æ”¶é›†é£æ™¯çš„æ€ªäººã€‚"
                }
            ]
        },

        // ğŸšª 6. å±å‘€ä½œå“çš„é—¨è½´ (å¼ºè¿«ç—‡)
        squeaky_door: {
            text: "åº—é—¨çš„åˆé¡µç”Ÿé”ˆäº†ï¼Œæ¯æ¬¡æœ‰äººè¿›å‡ºéƒ½ä¼šå‘å‡ºåˆºè€³çš„â€œå±â€”â€”å˜â€”â€”â€å£°ï¼Œç®€ç›´åƒæ˜¯æŒ‡ç”²åˆ®é»‘æ¿ã€‚",
            type: "alert",
            options: [
                {
                    text: "ç”¨æªæ²¹æ¶¦æ»‘ä¸€ä¸‹ (-1 Ammo)",
                    desc: "è™½ç„¶æœ‰ç‚¹æµªè´¹ï¼Œä½†ä¸ºäº†è€³æœµ...",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        addShopRating(4.2, true); // é¡¾å®¢ä¹Ÿè§‰å¾—èˆ’æœå¤šäº†
                        printMsg("ç»ˆäºå®‰é™äº†ã€‚é¡ºæ»‘æ— æ¯”ã€‚", 'gain');
                    },
                    result: "å†ä¹Ÿæ²¡æœ‰å™ªéŸ³äº†ï¼Œä½ æ„Ÿè§‰å¿ƒæƒ…èˆ’ç•…ã€‚"
                },
                {
                    text: "å¿ç€",
                    desc: "è¿™å«â€˜å¤©ç„¶è­¦æŠ¥å™¨â€™",
                    result: "æ¯æ¬¡æœ‰å®¢äººæ¥ä½ éƒ½ä¼šè¢«å“ä¸€è·³ï¼ŒGhost ç”šè‡³é—®ä½ æ˜¯ä¸æ˜¯åœ¨å…»æƒ¨å«é¸¡ã€‚"
                }
            ]
        },

        // ğŸ“ 7. å¡«å­—æ¸¸æˆ (æ™ºåŠ›æ±‚åŠ©)
        crossword_puzzle: {
            text: "ä¸€åæ­£åœ¨ä¼‘æ¯çš„å†›å®˜æ­£å¯¹ç€ä¸€å¼ æŠ¥çº¸ç¢ç‰‡çš±çœ‰ï¼Œä»–å’¬ç€ç¬”å¤´ï¼Œç—›è‹¦ä¸‡åˆ†ã€‚\nâ€œè€æ¿... å¸®ä¸ªå¿™ã€‚â€˜ä¸€ç§æˆ˜å‰æµè¡Œçš„ç¢³é…¸é¥®æ–™ï¼Œå¯å£__â€™ï¼Œä¸¤ä¸ªå­—ã€‚â€",
            speaker: "Officer",
            type: "dialogue",
            options: [
                {
                    text: "å‘Šè¯‰ä»–ï¼šâ€œå¯ä¹â€",
                    desc: "ä¸¾æ‰‹ä¹‹åŠ³",
                    effect: s => {
                        s.rep_kortac += 2; // å‡è®¾ä»–æ˜¯ Kortac çš„
                        printMsg("â€œå¯¹å•Šï¼è¯¥æ­»ï¼Œæˆ‘æ€ä¹ˆå¿˜äº†ï¼â€ å†›å®˜æç„¶å¤§æ‚Ÿã€‚", 'gain');
                    },
                    result: "ä»–å¼€å¿ƒåœ°å¡«ä¸Šäº†æ ¼å­ï¼Œä¸ºäº†æ„Ÿè°¢ä½ ï¼Œä»–åœ¨åº—é‡Œå¤šä¹°äº†ä¸€åŒ…çƒŸã€‚"
                },
                {
                    text: "èƒ¡è¯´å…«é“ï¼šâ€œé›ªç¢§â€",
                    desc: "æ¶ä½œå‰§",
                    result: "â€œé›ªç¢§ï¼Ÿå¯¹ä¸ä¸Šå•Š...â€ ä»–é™·å…¥äº†æ›´æ·±çš„æ²‰æ€ã€‚"
                }
            ]
        },

        // â˜ï¸ 8. å±‹é¡¶å‘å‘† (å·æ‡’)
        roof_gaze: {
            text: "ä»Šå¤©ç”Ÿæ„å†·æ¸…ï¼Œä½ çˆ¬ä¸Šäº†åº—é“ºçš„å±‹é¡¶ï¼Œé£æœ‰ç‚¹å¤§ä½†è§†é‡å¾ˆå¥½ï¼Œä½ å¯ä»¥çœ‹åˆ°è¿œå¤„çš„ç¡çƒŸï¼Œä¹Ÿèƒ½çœ‹åˆ°è„šä¸‹å¿™ç¢Œå¦‚è¼èšçš„äººç¾¤ã€‚",
            type: "event",
            options: [
                {
                    text: "èººä¸‹å°æ†©ç‰‡åˆ» (æ¶ˆè€— 1 AP)",
                    desc: "ä»€ä¹ˆéƒ½ä¸æƒ³ï¼Œæ”¾ç©ºå¤§è„‘",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--; // è™½ç„¶æ¶ˆè€—APå»æ‰§è¡Œï¼Œä½†å¿ƒæƒ…å˜å¥½äº†
                        // è¿™é‡Œè®¾å®šä¸€ä¸ªå°æ¦‚ç‡äº‹ä»¶ï¼šæ¢å¤æ›´å¤šAPæˆ–è€…è·å¾—çµæ„Ÿ
                        if(chance(50)) {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 3); 
                            printMsg("ä½ ç¡äº†ä¸€ä¸ªé«˜è´¨é‡çš„åˆè§‰ï¼Œç²¾ç¥ç„•å‘ï¼(APå›æ»¡)", 'gain');
                        } else {
                            printMsg("é£å¤ªå¤§äº†ï¼Œæ²¡ç¡ç€ï¼Œä½†å¿ƒæƒ…å¹³é™äº†è®¸å¤šã€‚", 'system');
                        }
                    },
                    result: "å¶å°”çš„é€ƒç¦»æ˜¯å¿…è¦çš„ã€‚"
                },
                {
                    text: "è§‚å¯Ÿåœ°å½¢",
                    desc: "å¢åŠ æƒ…æŠ¥",
                    effect: s => {
                        s.money += 30; // å–æƒ…æŠ¥
                        log("è®°å½•å·¡é€»è·¯çº¿è·åˆ©", 'gain');
                    },
                    result: "ä½ è®°ä¸‹äº†å‡ æ¡æ–°çš„å·¡é€»è·¯çº¿ï¼Œå–ç»™äº†æƒ…æŠ¥è´©å­ã€‚"
                }
            ]
        },

        // ğŸ§¹ 9. æ´—è¡£æ—¥ (ç”Ÿæ´»çäº‹)
        laundry_day: {
            text: "ä½ çš„æˆ˜æœ¯èƒŒå¿ƒå’Œè¡£æœå·²ç»è„å¾—èƒ½ç«‹èµ·æ¥äº†ï¼Œè™½ç„¶æ°´å¾ˆçè´µï¼Œä½†è¿™çœŸçš„ä¸èƒ½å†å¿äº†ã€‚",
            type: "event",
            options: [
                {
                    text: "å½»åº•æ¸…æ´— (æ¶ˆè€— 1 AP)",
                    desc: "æ•´ä¸ªäººç„•ç„¶ä¸€æ–°",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.chars.ghost.aff += 2; // Ghost å–œæ¬¢å¹²å‡€
                        s.chars.krueger.aff += 2;
                        printMsg("ä½ èº«ä¸Šç»ˆäºæ²¡æœ‰ç¡çƒŸå‘³å’Œæ±—å‘³äº†ï¼Œä½ å…´å†²å†²çš„å‘ç°è‡ªå·±é­…åŠ›å¢åŠ äº†ã€‚", 'gain');
                    },
                    result: "æ™¾è¡£æœçš„æ—¶å€™ï¼ŒKÃ¶nig ç”šè‡³ä¸»åŠ¨å¸®ä½ æŠŠæŒ‚å¾—å¤ªé«˜çš„è¡£æœå–äº†ä¸‹æ¥ã€‚"
                },
                {
                    text: "å–·ç‚¹é™¤è‡­å‰‚å‡‘åˆ",
                    desc: "è¿™å°±å¾ˆæœ‰åºŸåœŸå‘³",
                    result: "æ··åˆç€æ±—å‘³å’Œå»‰ä»·èŠ±é¦™çš„å‘³é“... ä»¤äººçª’æ¯ã€‚"
                }
            ]
        },

        // ğŸŒ™ 10. æ·±å¤œæ³¡é¢ (çµé­‚å¤œå®µ)
        midnight_snack: {
            text: "åŠå¤œä¸¤ç‚¹ï¼Œä½ é¥¿é†’äº†ï¼Œç¿»ç®±å€’æŸœåªæ‰¾åˆ°ä¸€åŒ…çè—çš„çº¢çƒ§ç‰›è‚‰é¢ï¼Œä½ å¬åˆ°äº† Ghost åœ¨å±‹é¡¶å·¡é€»çš„è„šæ­¥å£°ï¼ŒKÃ¶nig åœ¨éš”å£æ‰“å‘¼å™œã€‚",
            type: "event",
            options: [
                {
                    text: "ç…®äº†å®ƒï¼åŠ ä¸ªè›‹ï¼(-1 Food)",
                    desc: "æ·±å¤œæ”¾æ¯’",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // åƒé¥±äº†ç²¾ç¥å¥½
                        // Ghost é—»å‘³è€Œæ¥
                        if(s.chars.ghost.dating) {
                            printMsg("Ghost åƒå¹½çµä¸€æ ·å‡ºç°åœ¨ä½ èº«åï¼šâ€œ...åˆ†æˆ‘ä¸€å£ã€‚â€", 'event');
                            s.chars.ghost.aff += 2;
                        }
                    },
                    result: "çƒ­è…¾è…¾çš„é¢æ¡ä¸‹è‚šï¼Œè¿™å°±æ˜¯å¹¸ç¦çš„å…·è±¡åŒ–ã€‚"
                },
                {
                    text: "å¿ä½ï¼Œç¡è§‰",
                    desc: "çœçœå§",
                    result: "ä½ ä¼´ç€é¥¥é¥¿æ„Ÿå…¥ç¡äº†ï¼Œæ¢¦é‡Œå…¨æ˜¯çƒ¤é¸¡ã€‚"
                }
            ]
        },

// ğŸ² 31. å°¼å¤è±çš„åæ§½ (å¥‡ç¾æ‹‰é£è¯„è¢«å®³)
        nikolai_complaint: {
            text: "Chimera çš„é¢†è¢–å°¼å¤è±ç½•è§åœ°äº²è‡ªæ¥åº—é‡Œä¹°çƒŸã€‚ä»–çœ‹èµ·æ¥ä¸€è„¸éƒé—·ï¼Œæ­£åœ¨å’Œä½ çš„åº—å‘˜æŠ±æ€¨ï¼š\nâ€œè¿™ä¸–é“çœŸæ˜¯ç–¯äº†ï¼Œæˆ‘åˆšå¬åˆ°ä¼ è¨€ï¼Œè¯´ Chimera æ˜¯è¿™ä¸€å¸¦æœ€å¤§çš„é»‘é“å¸®æ´¾ï¼Ÿé»‘é“ï¼Ÿï¼\næˆ‘ä»¬æ˜¯ç§äººå†›äº‹æ‰¿åŒ…å•†ï¼æ˜¯ PMCï¼æˆ‘ä»¬æœ‰æ‰§ç…§çš„ï¼è™½ç„¶... ç¡®å®å¶å°”å¹²ç‚¹æ¹¿æ´»ï¼Œä½†é‚£æ˜¯ä¸¤ç äº‹ï¼â€",
            speaker: "Nikolai",
            type: "dialogue",
            options: [
                {
                    text: "å®‰æ…°ä»–ï¼šâ€œå¤§å®¶éƒ½çŸ¥é“ä½ ä»¬å¾ˆä¸“ä¸šã€‚â€",
                    desc: "æä¾›æƒ…ç»ªä»·å€¼ (+Chimeraå£°æœ›)",
                    effect: s => {
                        s.rep_chimera += 5;
                        printMsg("å°¼å¤è±å¹äº†å£æ°”ï¼šâ€œè¿˜æ˜¯ä½ æ‡‚è¡Œï¼Œè¿™å¹´å¤´ï¼Œæ­£ç»ç”Ÿæ„éš¾åšå•Šã€‚â€ ä»–å¤šä¹°äº†ä¸€æ¡çƒŸã€‚", 'dialogue', 'Nikolai');
                        s.money += 50;
                    },
                    result: "ä½ è·å¾—äº†ä¸€ç‚¹å°è´¹ã€‚"
                },
                {
                    text: "â€œè¿™éš¾é“ä¸æ˜¯å¤¸å¥–å—ï¼Ÿâ€",
                    desc: "è°ƒä¾ƒä»–",
                    result: "å°¼å¤è±æ„£äº†ä¸€ä¸‹ï¼Œéšå³è‹¦ç¬‘ï¼šâ€œå“ˆï¼Œä¹Ÿè®¸å§ï¼Œè‡³å°‘æ²¡äººæ•¢æ¬ æˆ‘ä»¬çš„é’±ã€‚â€"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 32. 141 ç»„å›¢è´­ç‰© (çƒ­é—¹æ—¥å¸¸)
        tf141_shopping_spree: {
            text: "åº—é—¨è¢«æ¨å¼€ï¼Œå–§é—¹å£°ç¬é—´å¡«æ»¡äº†æˆ¿é—´ï¼ŒTF141 çš„æ ¸å¿ƒæˆå‘˜å±…ç„¶ä¸€èµ·æ¥äº†ã€‚\nSoap å…´å¥‹åœ°æ‘†å¼„ç€è´§æ¶ä¸Šçš„æˆ˜æœ¯æ‰‹ç”µï¼šâ€œçœ‹è¿™ä¸ªï¼è¿™äº®åº¦èƒ½é—ªç Ghost çš„ç‹—çœ¼ï¼â€\nGaz æ— å¥ˆåœ°è·Ÿåœ¨åé¢ï¼šâ€œSoapï¼Œåˆ«ä¹±åŠ¨ä¸œè¥¿ã€‚â€\nPrice é˜Ÿé•¿å¼ç€é›ªèŒ„ç«™åœ¨æŸœå°å‰ï¼Œçœ‹ä¸Šå»åƒæ˜¯æ¥ç»™è¿™å¸®å­©å­ä¹°å•çš„å®¶é•¿ã€‚",
            speaker: "TF141 Squad",
            type: "event",
            options: [
                {
                    text: "çƒ­æƒ…æ¥å¾…ï¼šâ€œéšä¾¿çœ‹ï¼Œç»™ä½ ä»¬æ‰“ä¹æŠ˜ï¼â€",
                    desc: "æ‹‰æ‹¢å…³ç³» (+141å£°æœ›)",
                    effect: s => {
                        s.rep_141 += 10;
                        s.money += 300; // ä»–ä»¬ä¹°äº†ä¸å°‘ä¸œè¥¿
                        printMsg("Soapï¼šâ€œè€æ¿å¤§æ°”ï¼â€\nPrice ç‚¹ç‚¹å¤´ï¼šâ€œè°¢äº†ï¼Œè¿™äº›è¡¥ç»™å¾ˆæœ‰ç”¨ï¼Œè®°æˆ‘è´¦ä¸Šã€‚â€", 'gain');
                        log("141å°é˜Ÿå¤§é‡‡è´­ï¼Œè·åˆ© $300", 'gain');
                    },
                    result: "åº—é‡Œå……æ»¡äº†å¿«æ´»çš„ç©ºæ°”ï¼ŒGhost å¦‚æœåœ¨åœºä¹Ÿä¼šé»˜é»˜åŠ å…¥ä»–ä»¬å§ã€‚"
                },
                {
                    text: "åªå’Œ Price è°ˆç”Ÿæ„",
                    desc: "æ— è§†å…¶ä»–äººçš„åµé—¹",
                    effect: s => {
                        s.money += 400; // å…¨ä»·å–
                    },
                    result: "Price çˆ½å¿«åœ°ä»˜äº†é’±ï¼Œç„¶åæ‹ç€ Soap çš„é¢†å­æŠŠä»–æ‹–å‡ºäº†åº—é—¨ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 33. è€å‹å™æ—§ (Golem & Krueger)
        golem_visit: {
            text: "ä¸€ä¸ªç©¿ç€è¿å¸½è¡«çš„ç”·äººèµ°äº†è¿›æ¥ï¼Œæ‰‹é‡Œæç€ä¸¤æ‰“å•¤é…’ã€‚\nä»–å¹¶æ²¡æœ‰çœ‹ä½ ï¼Œè€Œæ˜¯å¾„ç›´èµ°å‘äº†è§’è½é‡Œçš„ Kruegerã€‚\nä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒKrueger å¹¶æ²¡æœ‰æ‹”åˆ€ï¼Œåè€Œæ¥è¿‡äº†ä¸€ç½å•¤é…’ã€‚\nGolemï¼šâ€œå¥½ä¹…ä¸è§ï¼Œè¿˜æ˜¯è¿™å‰¯æ­»æ ·ï¼Ÿâ€\nKruegerï¼šâ€œ...æ»šã€‚â€ (ä½†å˜´è§’ä¼¼ä¹æœ‰ä¸€ä¸ç¬‘æ„)",
            speaker: "Golem",
            type: "event",
            // åªæœ‰ Krueger åœ¨åœºï¼ˆå¥½æ„Ÿ>0 é»˜è®¤ä¸ºå·²è®¤è¯†/åœ¨åº—é‡Œï¼‰æ—¶è§¦å‘
            condition: s => s.chars.krueger.aff > 0,
            options: [
                {
                    text: "ç»™ä»–ä»¬é€ç‚¹ä¸‹é…’èœ (-1 Food)",
                    desc: "ä¸æ‰“æ‰°ä»–ä»¬çš„å™æ—§",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.krueger.aff += 5;
                        printMsg("Golem ä¸¾æ¯å‘ä½ è‡´æ„ï¼šâ€œè€æ¿æ‡‚äº‹ï¼è¿™ç¬”è´¦ç®—æˆ‘çš„ã€‚â€ ä»–åœ¨æ¡Œä¸Šç•™ä¸‹äº† $200ã€‚", 'gain');
                        s.money += 200;
                    },
                    result: "ä¸¤äººä½å£°äº¤è°ˆç€è¿‡å»çš„æˆ˜å½¹ï¼Œé‚£æ˜¯ä½ æ— æ³•æ’è¶³çš„è¿‡å¾€ã€‚"
                },
                {
                    text: "é™é™æ—è§‚",
                    result: "Krueger çœ‹èµ·æ¥æ”¾æ¾äº†å¾ˆå¤šï¼Œå“ªæ€•æ˜¯é‡å…½ä¹Ÿéœ€è¦åŒç±»çš„é™ªä¼´ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 34. éª°å­æ¸¸æˆ (Horangi & KÃ¶nig)
        horangi_visit: {
            text: "é‚£ä¸ªæ€»æ˜¯ç¬‘çœ¯çœ¯çš„éŸ©å›½äºº Horangi æ¥äº†ï¼Œä»–å¾„ç›´æ‰¾åˆ°äº†æ­£åœ¨æ¬è´§çš„ KÃ¶nigã€‚\nâ€œ KÃ¶nigï¼åˆ«å¹²æ´»äº†ï¼Œæ¥ç©ä¸¤æŠŠï¼Ÿâ€ Horangi å“—å•¦å•¦åœ°æ‘‡ç€æ‰‹é‡Œçš„éª°å­ï¼Œâ€œè¿˜æ˜¯è€è§„çŸ©ï¼Œè¾“äº†çš„è¯·å–é…’ï¼Ÿâ€\nKÃ¶nig çœ‹èµ·æ¥å¾ˆä¸ºéš¾ï¼Œæ±‚åŠ©ä¼¼çš„çœ‹å‘ä½ ã€‚",
            speaker: "Horangi",
            type: "event",
            condition: s => s.chars.konig.aff > 0,
            options: [
                {
                    text: "å‡†è®¸ KÃ¶nig ä¼‘æ¯ä¸€ä¼šå„¿",
                    desc: "è®©ä»–å»ç©",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig é«˜å…´åœ°æ‘˜ä¸‹æ‰‹å¥—å’Œhorangiå‡ºé—¨äº†â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "KÃ¶nig å¾ˆæ™šæ‰å›æ¥ï¼Œèº«ä¸Šæœ‰è‚¡é…’æ°”ã€‚"
                },
                {
                    text: "â€œå·¥ä½œæ—¶é—´ç¦æ­¢èµŒåšã€‚â€",
                    desc: "ä¸¥æ ¼ç®¡ç†",
                    result: "Horangi è€¸è€¸è‚©ï¼šâ€œå¥½å§ï¼Œè€æ¿çœŸå‡¶ã€‚â€ KÃ¶nig ä½ä¸‹å¤´ç»§ç»­æ¬ç®±å­ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹å¤±è½ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 35. å°†å†›çš„æ‹œè®¿ (å‹è¿«æ„Ÿ)
        shepherd_visit: {
            text: "ä¸€åˆ—é»‘è‰²çš„è½¦é˜Ÿåœåœ¨é—¨å£ï¼Œä¸‹æ¥äº†å‡ åå…¨å‰¯æ­¦è£…çš„å£«å…µæ¸…ç©ºäº†å‘¨å›´çš„è¡—é“ã€‚\nè°¢è²å°”å¾·å°†å†›å¤§æ­¥èµ°è¿›åº—é‡Œï¼Œç”šè‡³æ²¡æœ‰çœ‹ä¸€çœ¼è´§æ¶ï¼Œç›´æ¥ç›¯ç€ä½ çš„çœ¼ç›ã€‚\nâ€œæˆ‘ä»¬éœ€è¦ä¸€æ‰¹ç‰¹æ®Šçš„ç‰©èµ„ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¼šé…åˆçš„ï¼Œå¯¹å—ï¼Ÿâ€\n(è¿™æ˜¯ä¸€ä¸ªæ— æ³•æ‹’ç»çš„è¦æ±‚)",
            speaker: "General Shepherd",
            type: "alert",
            options: [
                {
                    text: "â€œæš‚æ—¶å¿æ°”åå£°ã€‚â€ (-20 Medkit)",
                    desc: "åªèƒ½ç…§åš",
                    condition: s => s.medkit >= 20,
                    effect: s => {
                        s.medkit -= 20;
                        s.money += 2500; // ä»–è™½ç„¶éœ¸é“ï¼Œä½†ç»™é’±å¾ˆå¤§æ–¹
                        s.rep_141 -= 35; // 141 ä¸å–œæ¬¢ä»–å’Œæš—å½±å…¬å¸
                        log("è¢«è¿«ä¸è°¢è²å°”å¾·äº¤æ˜“", 'warn');
                    },
                    result: "â€œå¾ˆå¥½ã€‚â€ ä»–æ‰”ä¸‹ä¸€æ²“åšåšçš„é’ç¥¨ï¼Œå¸¦ç€ç‰©èµ„ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "ç‰©èµ„ä¸è¶³ / è¯•å›¾æ‹’ç»",
                    desc: "è¿™ä¼šæ¿€æ€’ä»–",
                    condition: s => s.medkit < 20,
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 1.0);
                        printMsg("â€œä»¤äººå¤±æœ›ã€‚â€ è°¢è²å°”å¾·å†·å†·åœ°æŒ¥æ‰‹ï¼Œæ‰‹ä¸‹å¼ºè¡ŒæœæŸ¥äº†ä½ çš„åº—é“ºï¼Œæå¾—ä¸€å›¢ä¹±ã€‚", 'alert');
                    },
                    result: "ä»–ä»¬ä»€ä¹ˆéƒ½æ²¡æœåˆ°ï¼Œä½†ä½ çš„åº—é“ºè¢«è¿«åœä¸šæ•´é¡¿äº†ä¸€å¤©ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸ‘‘ å¥³ç‹å‰§æƒ… 18ï¼šæˆ˜æœ¯çº§æŒ‰æ‘© (æè‡´æœä¾)
        harem_tactical_spa: {
            text: "ä½ åªæ˜¯åœ¨çœ‹è´¦æœ¬æ—¶éšå£æŠ±æ€¨äº†ä¸€å¥è‚©è†€å¥½é…¸ï¼Œä¸‹ä¸€ç§’ï¼Œä½ æ‰‹ä¸­çš„ç¬”å°±è¢«æŠ½èµ°äº†ï¼Œæ•´ä¸ªäººè¢«æŒ‰åœ¨äº†æ²™å‘ä¸Šã€‚\nGhost æ­£åœ¨æŒ‰æä½ çš„è‚©é¢ˆï¼ˆè™½ç„¶çœ‹ä¸Šå»æ˜¯åœ¨å¯»æ‰¾é¢ˆåŠ¨è„‰ï¼Œä½†åŠ›åº¦æ§åˆ¶å¾—å¾ˆå®Œç¾ï¼‰ï¼›\nKÃ¶nig è·ªåœ¨åœ°ä¸Šå¸®ä½ æ”¾æ¾å°è…¿è‚Œè‚‰ï¼Œè„¸çº¢çº¢çš„ä¸æ•¢æŠ¬å¤´ï¼›\nKeegan æ‰˜ç€ä½ çš„æ‰‹æŒè¿›è¡Œæ‰‹éƒ¨ç©´ä½æŒ‰æ‘©ï¼›\nè€Œ Krueger... ä»–æ­£åœ¨ç”¨ç²¾æ²¹å¸®ä½ æ¨èƒŒã€‚",
            speaker: "The Harem",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šå¥³ç‹æ¨¡å¼ + éšæœº
            condition: s => s.flags.harem_queen && chance(15),
            options: [
                {
                    text: "é—­çœ¼äº«å—å¸ç‹çº§æœåŠ¡",
                    desc: "æ¢å¤å¤§é‡ç²¾åŠ› (AP+3)",
                    effect: s => {
                        // çªç ´ AP ä¸Šé™
                        s.ap = Math.min(CONFIG.max_ap + 3, s.ap + 3);
                        
                        // å…¨å‘˜å¥½æ„Ÿå¾®å‡
                        s.chars.ghost.aff += 3; s.chars.konig.aff += 3;
                        s.chars.krueger.aff += 3; s.chars.keegan.aff += 3;
                        
                        printMsg("è™½ç„¶ä»–ä»¬çš„æ‰‹åŠ²è¿˜æ˜¯æœ‰ç‚¹å¤§ï¼ˆæ¯•ç«Ÿæ˜¯æ€äººçš„æ‰‹ï¼‰ï¼Œä½†è¿™ä»½å°å¿ƒç¿¼ç¿¼çš„æœä¾è®©ä½ å½»åº•æ”¾æ¾äº†ä¸‹æ¥ã€‚", 'gain');
                    },
                    result: "Ghostï¼šâ€œåŠ›åº¦è¿˜å¯ä»¥å—ï¼ŸMa'amã€‚â€\nKÃ¶nigï¼šâ€œçš®ã€çš®è‚¤å¥½æ»‘...â€\nKruegerï¼šâ€œå•§ï¼Œè¿™å—è‚Œè‚‰å¤ªåƒµç¡¬äº†ï¼Œä½ éœ€è¦å¤šè¿åŠ¨... æˆ–è€…å¤šåšâ€˜è¿åŠ¨â€™ã€‚â€"
                },
                {
                    text: "â€œå¥½äº†ï¼Œæˆ‘è¿˜å¾—å·¥ä½œã€‚â€",
                    desc: "è¯•å›¾èµ·èº«",
                    result: "Keegan å¹³é™åœ°æŠŠä½ æŒ‰äº†å›å»ï¼šâ€œå·¥ä½œå¯ä»¥ç­‰ï¼Œèº«ä½“ç»´æŠ¤æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§ã€‚èººå¥½ã€‚â€"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 19ï¼šè¿‡åº¦æŠ¤é€ (å‡ºè¡Œæ’åœº)
        harem_overkill_escort: {
            text: "ä½ æƒ³å»éš”å£è¡—åŒºçš„é›†å¸‚ä¹°ç“¶ç‰›å¥¶ï¼Œåˆšè¸å‡ºåº—é—¨å°±å‘ç°ä»–ä»¬å››ä¸ªäººæŠŠä½ æŠ¤å¾—å¯†ä¸é€é£ã€‚\nGhostï¼šâ€œUAV å·²å¯åŠ¨ï¼Œæ‰«æè·¯å†µã€‚â€\nKeeganï¼šâ€œåˆ¶é«˜ç‚¹ç‹™å‡»ä½å·²å°±ç»ªï¼Œè§†é‡æ¸…æ™°ã€‚â€\nKruegerï¼šâ€œä¾§ç¿¼å®‰å…¨ï¼Œåˆšæ‰é‚£ä¸ªçœ‹ä½ çš„è·¯äººå·²ç»è¢«æˆ‘åŠé€€äº†ã€‚â€\nKÃ¶nig ç”šè‡³æ‹¿å‡ºäº†é˜²çˆ†ç›¾æŒ¡åœ¨ä½ èº«å‰ï¼Œåƒå µå¢™ä¸€æ ·ã€‚\nä½ ï¼šâ€œ...æˆ‘åªæ˜¯å»ä¹°ç“¶ç‰›å¥¶ï¼Œä¸æ˜¯å»åˆºæ€æ€»ç»Ÿã€‚â€",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && chance(12),
            options: [
                {
                    text: "æ¥å—æŠ¤é€ï¼Œäº«å—ç‰¹æƒ",
                    desc: "æ•´æ¡è¡—éƒ½è¢«æ¸…åœºäº† (å£°æœ›æå‡)",
                    effect: s => {
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5; s.rep_ghosts += 5;
                        printMsg("è·¯äººå“å¾—çº·çº·è´´å¢™ç«™ç«‹ï¼Œä½ ä¹°åˆ°äº†æœ€æ–°é²œçš„ç‰›å¥¶ï¼Œå› ä¸ºæ²¡äººæ•¢è·Ÿä½ æŠ¢ã€‚", 'gain');
                    },
                    result: "è¿™å°±æ˜¯æ‰€è°“çš„â€œç»å¯¹å®‰å…¨æ„Ÿâ€ï¼ˆè™½ç„¶æœ‰ç‚¹ç¤¾æ­»ï¼‰ã€‚"
                },
                {
                    text: "å‘½ä»¤ä»–ä»¬å…¨éƒ¨æ¢ä¾¿è£…",
                    desc: "â€œä½è°ƒç‚¹ï¼åˆ«å“ç€äººï¼â€",
                    effect: s => {
                        s.chars.keegan.aff += 5; // Keegan å–œæ¬¢ä½è°ƒæ½œå…¥
                    },
                    result: "è™½ç„¶æ¢äº†ä¾¿è£…ï¼Œä½†é‚£å››è‚¡æ€æ°”è…¾è…¾çš„æ°”åœºè¿˜æ˜¯è®©æ–¹åœ†åç±³å†…æ— äººæ•¢è¿‘èº«ï¼Œç‰›å¥¶æ‘Šè€æ¿èƒ†æˆ˜å¿ƒæƒŠåœ°å…è´¹æŠŠç‰›å¥¶é€ä½ äº†ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 20ï¼šèµŒæ¡Œä¸Šçš„ç­¹ç  (å†…å·)
        harem_card_game: {
            text: "æ·±å¤œï¼Œä½ å‘ç°ä»–ä»¬å››ä¸ªå›´ååœ¨ä¸€èµ·æ‰“æ‰‘å…‹ï¼Œæ°”æ°›å´å¼‚å¸¸å‡é‡ã€‚\næ¡Œä¸Šæ²¡æœ‰é’±ï¼Œä¸­é—´åªæ”¾ç€ä¸€å¼ è¿™ä¸€å‘¨çš„æ’ç­è¡¨ã€‚\nKruegeræ¼«ä¸ç»å¿ƒçš„ç”©å‡ºå‡ å¼ ç‰Œï¼šâ€œåŒèŠ±é¡ºï¼Œè¿™å‘¨çš„æ—©å®‰å»å½’æˆ‘ã€‚â€\nGhost è„¸è‰²ä¸å–„åœ°æŒ‰ä½ç‰Œæ¡Œï¼šâ€œå‡ºåƒäº†å§ï¼Ÿé‚£å¼ çº¢æ¡ƒ A åˆšæ‰è¿˜åœ¨æˆ‘æ‰‹é‡Œã€‚â€\nKÃ¶nig å§”å±ˆåœ°çœ‹ç€æ‰‹é‡Œçš„çƒ‚ç‰Œï¼šâ€œ...æˆ‘èƒ½ç”³è¯·åªè´Ÿè´£åšæ—©é¥­å—ï¼Ÿâ€",
            speaker: "The Harem",
            type: "dialogue",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "æ²¡æ”¶æ‰‘å…‹ï¼šâ€œæ˜å¤©çš„å®‰æ’æˆ‘è¯´äº†ç®—ã€‚â€",
                    desc: "ç»ˆæ­¢ä»–ä»¬çš„äº‰å¤º",
                    effect: s => {
                        s.chars.ghost.aff += 2; s.chars.konig.aff += 5; // KÃ¶nig æ¾äº†å£æ°”
                        s.chars.krueger.aff += 2; s.chars.keegan.aff += 2;
                        printMsg("å››äººåŒæ—¶æ¾äº†ä¸€å£æ°”ï¼ˆæˆ–è€…å¹æ°”ï¼‰ã€‚\nKrueger é»˜é»˜æ”¶èµ·äº†è¢–å­é‡Œè—çš„ç‰Œã€‚", 'event');
                    },
                    result: "ä½ æ‰æ˜¯è¿™åœºæ¸¸æˆçš„åº„å®¶ï¼Œæ²¡äººèƒ½è¶Šè¿‡ä½ åˆ¶å®šè§„åˆ™ã€‚"
                },
                {
                    text: "åŠ å…¥èµŒå±€ï¼šâ€œæˆ‘ä¹Ÿæ¥ï¼Œè°èµ¢äº†å¬è°çš„ã€‚â€",
                    desc: "æé«˜èµŒæ³¨",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // ç©å¾—å¾ˆå¼€å¿ƒ
                        printMsg("æœ‰äº†ä½ çš„åŠ å…¥ï¼Œæ¸¸æˆå˜å¾—æ›´åŠ ç–¯ç‹‚ï¼ŒGhost èƒœè´Ÿæ¬²çˆ†æ£šï¼ŒKrueger å¼€å§‹æ˜ç›®å¼ èƒ†åœ°ä½œå¼Šã€‚", 'event');
                    },
                    result: "æœ€åè°èµ¢äº†ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯çœ‹ä»–ä»¬ä¸ºäº†ä½ åœ¨è¿™ç§å°äº‹äº‰å¾—é¢çº¢è€³èµ¤ï¼ŒçœŸçš„å¾ˆæœ‰è¶£ã€‚"
                }
            ]
        },

// ğŸ‘‘ å¥³ç‹å‰§æƒ… 7ï¼šæ·±å¤œæ±‡æŠ¥ (ä¸“å±ç‰¹æƒ)
        harem_mission_debrief: {
            text: "ä½ ä¸ Ghost çš„ä¸€æ¬¡ç§˜å¯†åˆä½œå–å¾—äº†å·¨å¤§æˆåŠŸï¼Œæ·±å¤œï¼Œä»–ç‹¬è‡ªæ¥åˆ°ä½ çš„åŠå…¬å®¤æ±‡æŠ¥ï¼Œä½ ä»¬ä¹‹é—´çš„é»˜å¥‘è®©æ—äººéš¾ä»¥ä»‹å…¥ã€‚\nç©ºæ°”ä¸­å¼¥æ¼«ç€ä¸€ç§åªæœ‰ä½ ä»¬ä¸¤äººæ‡‚çš„å¾®å¦™æ°›å›´ã€‚",
            speaker: "Ghost",
            type: "event",
            condition: s => s.flags.harem_queen && chance(15),
            options: [
                {
                    text: "ä½è¯­ï¼šâ€œè®©ä»–ä»¬å…ˆå›å»ï¼Œä½ ç•™ä¸‹... è¿˜æœ‰ç»†èŠ‚è¦è°ˆã€‚â€",
                    desc: "ç§å¯†ç‹¬å¤„",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("Ghost çš„å˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼Œå…³ä¸Šå¹¶åé”äº†åŠå…¬å®¤çš„é—¨ã€‚\nâ€œå¦‚ä½ æ‰€æ„¿ï¼ŒMa'amã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "é—¨å¤–ä¼ æ¥äº† KÃ¶nig å¤±æœ›çš„å¹æ°”å£°å’Œ Krueger ç¦»å¼€çš„è„šæ­¥å£°ã€‚"
                },
                {
                    text: "æ¥é€šé€šè®¯ï¼šâ€œKÃ¶nigåå‹¤ï¼ŒKeeganå®‰æŠšä¼¤å‘˜ï¼ŒKruegerè­¦æˆ’ï¼ŒGhostï¼Œæ±‡æŠ¥ã€‚â€",
                    desc: "å…¬äº‹å…¬åŠ (Ghost ä¼šä¸çˆ½)",
                    effect: s => {
                        s.rep_141 += 5;
                        printMsg("Ghost æ¯«ä¸å®¢æ°”åœ°å¯¹ä½ ç¿»äº†ä¸ªç™½çœ¼ï¼Œä½†è¿˜æ˜¯ç«™ç›´äº†èº«ä½“å¼€å§‹æ±‡æŠ¥å·¥ä½œã€‚\nâ€œ...æ”¶åˆ°ï¼Œä½ çœŸæ˜¯ä¸ªæ— æƒ…çš„æŒ‡æŒ¥å®˜ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä½ äº«å—ç€è¿™ç§è¢«ä»–æŠ±æ€¨ä½†åˆä¸å¾—ä¸æœä»çš„æ„Ÿè§‰ã€‚"
                },
                {
                    text: "å½“ç€ Ghost çš„é¢å‘¼å« Kruegerï¼šâ€œæ¥æˆ‘åŠå…¬å®¤ï¼Œç°åœ¨ã€‚â€",
                    desc: "æ•…æ„åˆ¶é€ ä¿®ç½—åœº",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        s.chars.ghost.aff -= 2; // å°å°åƒé†‹
                        printMsg("Ghost çš„çœ¼ç¥ç¬é—´å†·äº†ä¸‹æ¥ï¼ŒæŠ±èµ·æ‰‹è‡‚é åœ¨å¢™ä¸Šã€‚\nå‡ ç§’é’Ÿåï¼ŒKrueger æ¨é—¨è€Œå…¥ï¼Œçœ‹åˆ° Ghost åœ¨åœºï¼Œéœ²å‡ºäº†ä¸€ä¸ªæŒ‘è¡…çš„ç¬‘å®¹ã€‚", 'event');
                    },
                    result: "ä»Šæ™šçš„åŠå…¬å®¤æ³¨å®šä¸ä¼šå¹³é™ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸ‘‘ å¥³ç‹å‰§æƒ… 10ï¼šç§å¯†å…»æŠ¤ (æŸ”æƒ…åˆæ¶©)
        harem_skincare: {
            text: "æ²æµ´åï¼Œä½ è£¹ç€ä¸ç»¸ç¡è¢ååœ¨æ˜é»„çš„ç¯å…‰ä¸‹ï¼Œç©ºæ°”ä¸­å¼¥æ¼«ç€ç²¾æ²¹çš„é¦™æ°”ã€‚\nä½ æ…µæ‡’åœ°ä¼¸å‡ºæ‰‹è‡‚ï¼šâ€œå¸®æˆ‘æ¶‚æ¶¦è‚¤æ²¹ã€‚â€\nå››ä¸ªç”·äººäº’ç›¸å¯¹è§†äº†ä¸€çœ¼ã€‚",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && chance(15),
            options: [
                {
                    text: "åˆ†é…ä»»åŠ¡ï¼šâ€œä½ ...ç»™æˆ‘æ‰æ‰è‚©è†€ï¼Œä½ ä½ ...æŒ‰è…¿ï¼Œä½ å»ç»™æˆ‘æŒ‰è„šã€‚â€",
                    desc: "äº«å—é¡¶çº§çš„æœä¾",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                        s.chars.ghost.aff += 3; s.chars.konig.aff += 3; s.chars.krueger.aff += 3;
                        printMsg("çœŸèˆ’æœ...ä¹Ÿè®¸è¿™æ ·çš„äº‹æƒ…å¯ä»¥å¤šæ¥å‡ æ¬¡ï¼Ÿ", 'event');
                    },
                    result: "æ»¡å®¤æ—–æ—ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 11ï¼šå¤±æ§çš„å·¨å…½ (KÃ¶nig çˆ†å‘)
        harem_konig_outburst: {
            text: "ä»Šæ™šåªæœ‰ KÃ¶nig åœ¨ä½ æˆ¿é‡Œå®ˆå¤œï¼Œä½ æ³¨æ„åˆ°ä»–ä¸€ç›´ç›¯ç€ä½ çš„è„¸ï¼Œå‘¼å¸é¢‘ç‡å¿«å¾—ä¸æ­£å¸¸ã€‚\nâ€œåˆ«... åˆ«ç”¨é‚£ç§çœ¼ç¥çœ‹æˆ‘... æˆ‘çš„å¿è€æ˜¯æœ‰é™åº¦çš„ï¼Œ{PLAYER}...",
            speaker: "KÃ¶nig",
            type: "alert",
            // åªæœ‰åœ¨å¥³ç‹æ¨¡å¼ ä¸” KÃ¶nig å¥½æ„Ÿåº¦æé«˜(>200) æ—¶è§¦å‘
            condition: s => s.flags.harem_queen && s.chars.konig.aff >= 200 && chance(8),
            options: [
                {
                    text: "æŠšæ‘¸ä»–çš„é¢ç½©ï¼šâ€œé‚£å°±ä¸å¿äº†ï¼Œä¹–å­©å­ã€‚â€",
                    desc: "å…è®¸ä»–çš„æ”¾è‚† ",
                    effect: s => {
                        s.ap = 0; // ç²¾åŠ›è€—å°½ï¼Œç¬¬äºŒå¤©èµ·ä¸æ¥
                        s.chars.konig.aff += 50; // æå¤§æ»¡è¶³ï¼Œå¥½æ„Ÿæš´å¢
                        printMsg("KÃ¶nig çš„ç†æ™ºå½»åº•å´©æ–­äº†ï¼Œä»–ä¸€æŠŠæ‰¯ä¸‹å¤´å¥—ï¼Œè¿‘ä¹å‡¶ç‹ åœ°å»äº†ä¸‹æ¥ï¼Œä¸å†æœ‰ä»»ä½•é¡¾å¿Œã€‚\nâ€œæ˜¯ä½ å…è®¸çš„... æ˜¯ä½ çš„é”™... æˆ‘ä¸ä¼šåœä¸‹çš„...", 'event');
                    },
                    result: "ç¬¬äºŒå¤©ä¸­åˆä½ æ‰é†’æ¥ï¼Œæµ‘èº«åƒæ˜¯æ•£äº†æ¶ï¼Œè€Œ KÃ¶nig æ­£åœ¨ä¸€è¾¹è·ªç€æ“¦åœ°æ¿ï¼Œä¸€è¾¹çº¢ç€è„¸å·çœ‹ä½ ã€‚"
                },
                {
                    text: "å†·ä¸‹è„¸ï¼šâ€œé€€åï¼ŒKÃ¶nigï¼Œä½ è¶Šç•Œäº†ã€‚â€",
                    desc: "é‡æ–°å»ºç«‹å¨ä¸¥",
                    effect: s => {
                        s.chars.konig.aff -= 5;
                        printMsg("KÃ¶nig æµ‘èº«ä¸€åƒµï¼Œçœ¼é‡Œçš„ç–¯ç‹‚ç¬é—´è¤ªå»ï¼Œå˜æˆäº†æåº¦çš„ææ…Œã€‚\nä»–ç‹¼ç‹ˆåœ°æ»šä¸‹åºŠï¼Œç¼©åœ¨è§’è½é‡Œå‘æŠ–ï¼šâ€œå¯¹ã€å¯¹ä¸èµ·ï¼æˆ‘ä¸çŸ¥é“æˆ‘æ€ä¹ˆäº†... è¯·æƒ©ç½šæˆ‘...â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–è·ªäº†ä¸€æ•´æ™šä½œä¸ºè‡ªæˆ‘æƒ©ç½šï¼Œè¿™åªé‡å…½çš„é“¾å­ä¾ç„¶ç‰¢ç‰¢æ¡åœ¨ä½ æ‰‹é‡Œã€‚"
                }
            ]
        }, // <--- æœ€åä¸€ä¸ªäº‹ä»¶å¯ä»¥ä¸åŠ é€—å·ï¼Œä½†åŠ ä¸Šä¹Ÿä¸æŠ¥é”™

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 8ï¼šç¤¼ç‰©èƒŒåçš„å¿ƒæ„ (å æœ‰æ¬²)
        harem_gift_conflict: {
            text: "ä»Šå¤©ä¸çŸ¥é“æ˜¯ä»€ä¹ˆç‰¹æ®Šæ—¥å­ã€‚\nKÃ¶nig é€ä½ ä¸€æšä»£è¡¨å®¶æ—è£è€€çš„å¾½ç« ï¼ŒKrueger é€ä½ ä¸€æŠŠé”‹åˆ©çš„è´´èº«åŒ•é¦–ï¼ŒGhost é€ä½ ä¸€æ¡... é»‘è‰²çš®è´¨é¡¹åœˆã€‚\nä¸‰ä»¶ç¤¼ç‰©æ‘†åœ¨æ¡Œä¸Šï¼Œä»–ä»¬æ²‰é»˜åˆæŒ‘è¡…åœ°çœ‹ç€å½¼æ­¤ï¼Œç­‰å¾…ä½ çš„é€‰æ‹©ã€‚",
            speaker: "The Harem",
            type: "dialogue",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "ã€ä½©æˆ´å¾½ç« ã€‘â€œKÃ¶nigï¼Œå¸®æˆ‘æˆ´ä¸Šã€‚â€",
                    desc: "é€‰æ‹© KÃ¶nig çš„å¿ è¯š",
                    effect: s => {
                        s.chars.konig.aff += 10;
                        printMsg("KÃ¶nig çš„æ‰‹é¢¤æŠ–ç€ï¼Œå°å¿ƒç¿¼ç¿¼åœ°å°†å¾½ç« åˆ«åœ¨ä½ çš„é¢†å£ï¼Œä»–ä½å¤´äº²å»äº†é‚£æšå¾½ç« ã€‚\nGhost å’Œ Krueger å†·å“¼ä¸€å£°ï¼Œè½¬èº«ç¦»å¼€äº†ã€‚", 'event');
                    },
                    result: "è¿™åªå·¨å…½æ­¤åˆ»æ¸©é¡ºå¾—åƒåªç»µç¾Šã€‚"
                },
                {
                    text: "ã€æ¬£èµåŒ•é¦–ã€‘â€œè¿™åˆ€å¾ˆé…æˆ‘ï¼ŒKruegerã€‚â€",
                    desc: "é€‰æ‹© Krueger çš„é”‹åˆ©",
                    effect: s => {
                        s.chars.krueger.aff += 10;
                        printMsg("Krueger èµ°åˆ°ä½ èº«åï¼Œæ¡ç€ä½ çš„æ‰‹æ•™ä½ æŠŠç©é‚£æŠŠåˆ€ï¼Œä»–çš„å‘¼å¸å–·æ´’åœ¨ä½ è€³è¾¹ï¼šâ€œå®ƒä¼šæ›¿æˆ‘å°å°æ•Œäººçš„è¡€... æˆ–è€…ä½ çš„ã€‚â€", 'event');
                    },
                    result: "å±é™©çš„å®šæƒ…ä¿¡ç‰©ã€‚"
                },
                {
                    text: "ã€ç³»ä¸Šé¡¹åœˆã€‘â€œGhostï¼Œè¿™æ˜¯ä½ çš„æ ‡è®°å—ï¼Ÿâ€",
                    desc: "é€‰æ‹© Ghost çš„æŒæ§",
                    effect: s => {
                        s.chars.ghost.aff += 10;
                        printMsg("Ghost èµ°ä¸Šå‰ï¼ŒåŠ¨ä½œç†Ÿç»ƒåœ°ä¸ºä½ æ‰£ä¸Šé¡¹åœˆï¼Œçš®å¸¦æ‰£å‘å‡ºæ¸…è„†çš„å£°å“ã€‚\nâ€œæ²¡é”™ï¼Œä½ æ˜¯æˆ‘çš„ä»»åŠ¡ï¼Œä¹Ÿæ˜¯æˆ‘çš„... ç§æœ‰è´¢äº§ã€‚â€", 'event');
                    },
                    result: "è¿™ç§ç¦å¿Œçš„æŸç¼šæ„Ÿè®©ä½ å¿ƒè·³åŠ é€Ÿã€‚"
                },
                {
                    text: "ã€å…¨éƒ¨æ”¶èµ·ã€‘â€œæˆ‘è½®æ¢ç”¨ã€‚â€",
                    desc: "å…¨éƒ½è¦ï¼(ç«¯æ°´å¤§å¸ˆ)",
                    effect: s => {
                        s.chars.ghost.aff += 5; s.chars.konig.aff += 5; s.chars.krueger.aff += 5;
                        printMsg("ä¸‰äººæ„£ä½äº†ã€‚\nGhostï¼šâ€œè´ªå¿ƒã€‚â€\nKruegerï¼šâ€œå‘µï¼Œæœ‰è¶£çš„å¥³äººã€‚â€\nKÃ¶nigï¼šâ€œåªè¦ä½ å–œæ¬¢... éƒ½è¡Œï¼â€", 'dialogue', 'Multiple');
                    },
                    result: "ä½ æŠŠæ‰€æœ‰ç¤¼ç‰©éƒ½æ”¶äº†èµ·æ¥ï¼Œæ¯•ç«Ÿå¥³ç‹ä¸éœ€è¦åšé€‰æ‹©é¢˜ã€‚"
                }
            ]
        }, // <--- é€—å·


// ğŸ‘‘ å¥³ç‹å‰§æƒ… 1ï¼šåå±‹å®¡è®¯ (æƒåŠ›çš„æ¸¸æˆ)
        harem_interrogation: {
            text: "ä½ æ‡’æ´‹æ´‹åœ°ååœ¨åå±‹å®¡è®¯é—´çš„è½¯æ¤…ä¸Šï¼Œæ‰‹é‡Œæ‘‡æ™ƒç€ä¸€æ¯çº¢é…’ã€‚\né¢å‰çš„ä¿˜è™ï¼ˆæ•Œå¯¹é˜µè¥çš„å€’éœ‰è›‹ï¼‰æ­£è·ªåœ¨åœ°ä¸Šç‘Ÿç‘Ÿå‘æŠ–ï¼Œä»–çœ‹äº†ä¸€çœ¼ä½ èº«ååˆçœ‹äº†ä¸€çœ¼ä½ ï¼Œä¼¼ä¹ä¸çŸ¥é“è¯¥æ›´æ€•è°ã€‚\nâ€œæˆ‘... æˆ‘éƒ½è¯´ï¼æ±‚ä½ ï¼åˆ«è®©ä»–ä»¬é è¿‘æˆ‘ï¼â€",
            speaker: "Captive",
            type: "dialogue",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "è½»ç¬‘ï¼šâ€œæˆ‘ä»€ä¹ˆéƒ½æ²¡åšå•Šã€‚â€",
                    desc: "äº«å—è¿™ç§ä¸æ€’è‡ªå¨çš„æ„Ÿè§‰",
                    effect: s => {
                        s.money += 800; // è·å¾—èµé‡‘/æƒ…æŠ¥è´¹
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5;
                        printMsg("ä½ ç”šè‡³æ²¡æœ‰èµ·èº«ï¼Œåªæ˜¯æ— è¾œåœ°æ‘Šäº†æ‘Šæ‰‹ã€‚\nGhost åœ¨é˜´å½±é‡Œå‘å‡ºäº†ä¸€å£°å†·å“¼ï¼ŒKrueger ç©å¼„åŒ•é¦–çš„å¯’å…‰é—ªè¿‡ä¿˜è™çš„çœ¼ç›ï¼ŒKeeganæˆ´ä¸Šæ‰‹å¥—ï¼ŒKÃ¶nig æ²‰é»˜åœ°ç«™åœ¨é—¨å£å µä½äº†å”¯ä¸€çš„ç”Ÿè·¯ã€‚\nä¿˜è™å´©æºƒäº†ï¼ŒæŠŠçŸ¥é“çš„æ‰€æœ‰æƒ…æŠ¥å’Œè—ç§æˆ¿é’±çš„åœ°ç‚¹éƒ½åäº†å‡ºæ¥ã€‚", 'gain');
                    },
                    result: "æœ‰æ—¶å€™ï¼Œææƒ§æ˜¯æœ€å¥½çš„å®¡è®¯å‰‚ï¼Œå°¤å…¶æ˜¯å½“ä½ æ‹¥æœ‰å››å€çš„ææƒ§æºæ—¶ã€‚"
                },
                {
                    text: "æå“ï¼šâ€œæˆ–è€…ä½ æƒ³é€‰ä¸€ä¸ªâ€˜é™ªç»ƒâ€™ï¼Ÿâ€",
                    desc: "Krueger ä¼¼ä¹å¾ˆæœŸå¾…",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger ä¸Šå‰ä¸€æ­¥ï¼Œé‚£æ˜¯æ•é£Ÿè€…çš„åŠ¨ä½œã€‚ä¿˜è™å‘å‡ºäº†æ€çŒªèˆ¬çš„æƒ¨å«ï¼šâ€œä¸ï¼ï¼æˆ‘è¯´ï¼å°±åœ¨ B åŒºçš„åœ°ä¸‹å®¤ï¼â€", 'dialogue', 'Krueger');
                    },
                    result: "æƒ…æŠ¥åˆ°æ‰‹ï¼ŒKrueger çœ‹èµ·æ¥æœ‰ç‚¹é—æ†¾æ²¡èƒ½åŠ¨æ‰‹ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 2ï¼šè¿Ÿåˆ°çš„æƒ©ç½š (æˆ–è€…æ˜¯å¥–åŠ±?)
        harem_late_return: {
            text: "ä½ æ¯”é¢„æœŸæ™šäº†ä¸€ä¸ªå°æ—¶å›åˆ°åº—é‡Œã€‚\nåˆšè¿›é—¨ï¼Œæ°”æ°›å°±ä¸å¯¹åŠ²ã€‚\nGhost å†·å†°å†°åœ°é åœ¨æŸœå°è¾¹ï¼šâ€œæ™šäº† 60 åˆ†é’Ÿï¼Œè§£é‡Šã€‚â€\nKÃ¶nig ç«‹åˆ»æ‰‘äº†ä¸Šæ¥ï¼Œä¸Šä¸‹æ£€æŸ¥ä½ æœ‰æ²¡æœ‰å—ä¼¤ï¼Œæ€¥å¾—çœ¼çœ¶å‘çº¢ã€‚\n Keegan é åœ¨é—¨è¾¹çš„é˜´å½±é‡Œï¼Œè™½ç„¶ä¸€è¨€ä¸å‘ï¼Œä½†ä»–é‚£åŒè“çœ¼ç›æŠŠä½ ä»å¤´åˆ°è„šæ‰«æäº†ä¸€éã€‚\nè€Œ Krueger èº«ä¸Šå¸¦ç€å¤–é¢çš„å¯’æ°”å’Œå°˜åœŸï¼Œæ˜¾ç„¶ä»–åˆšæ‰å·²ç»å‡ºå»æ‰¾ä½ äº†ï¼Œç”šè‡³å¯èƒ½æ¸…ç†äº†æ²¿é€”æ‰€æœ‰çš„æ´»ç‰©ã€‚",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "å®‰æŠšä»–ä»¬ï¼šâ€œé‡åˆ°ç‚¹å°éº»çƒ¦ï¼Œè§£å†³äº†ã€‚â€",
                    desc: "åœ¨è¿™ä¸ªå®¶é‡Œï¼Œä½ æ˜¯æ ¸å¿ƒ",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.chars.konig.aff += 5;
                        s.chars.krueger.aff += 5;
                        printMsg("ä½ æŒ¨ä¸ªå®‰æŠšäº†ä»–ä»¬ï¼ŒKÃ¶nig æŠŠå¤´åŸ‹åœ¨ä½ é¢ˆçªé‡Œè¹­äº†å¾ˆä¹…ï¼ŒGhost è™½ç„¶è¿˜åœ¨å˜´ç¡¬è®©ä½ ä¸‹æ¬¡æŒ‰è§„çŸ©åŠäº‹ï¼Œä½†ç»™ä½ å€’äº†æ¯çƒ­æ°´ï¼ŒKruegerå»æ´—æ‰äº†æ‰‹ä¸Šçš„è¡€è¿¹ï¼ŒKeegan åˆ™é»˜é»˜åœ°å†æ¬¡æ£€æŸ¥äº†é—¨çª—é”æ‰£ï¼Œç¡®è®¤è¿™é‡Œç»å¯¹å®‰å…¨ã€‚", 'event');
                    },
                    result: "ä»–ä»¬åªæ˜¯å®³æ€•å¤±å»ä½ ï¼Œåœ¨è¿™ä¸ªåºŸåœŸä¸Šï¼Œä½ æ˜¯ä»–ä»¬å”¯ä¸€çš„é”šç‚¹ã€‚"
                },
                {
                    text: "æŒ‘çœ‰ï¼šâ€œæ€ä¹ˆï¼Œæ€•æˆ‘è·‘äº†ï¼Ÿâ€",
                    desc: "å¥³ç‹çš„è‡ªä¿¡",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1); // å¿ƒæƒ…æ„‰æ‚¦
                        printMsg("Ghost æ²‰é»˜äº†ä¸€ç¬ï¼Œä½å£°è¯´é“ï¼šâ€œåªæ˜¯æœ‰ç‚¹æ‹…å¿ƒã€‚â€\nKrueger ä»èƒŒåæŠ±ä½ä½ ï¼Œå£°éŸ³æ²™å“‘ï¼šâ€œä½ æ˜¯æˆ‘çš„ï¼Œè·‘ä¸æ‰ã€‚â€", 'dialogue', 'Multiple');
                    },
                    result: "ç–¯ç‹‚çš„ä¸€å¤œ..."
                }
            ]
        }, // <--- é€—å·

// ğŸ‘‘ å¥³ç‹å‰§æƒ… 4ï¼šæ‹å–ä¼šä¸Šçš„ç¤¼è²Œç«ä»·
        harem_auction: {
            text: "ä¸€åº§åœ°ä¸‹ä¸–ç•Œçš„è±ªåæ‹å–è¡Œï¼Œç›®æ ‡æ˜¯ä¸€ä»½èƒ½å¤§å¹…æå‡åº—é“ºå®‰ä¿ç­‰çº§çš„å°–ç«¯ç§‘æŠ€è“å›¾ã€‚\nç«äº‰å¯¹æ‰‹ä¸æ–­æŠ¬ä»·ï¼Œä»·æ ¼å·²é€¼è¿‘ä½ çš„å¿ƒç†åº•çº¿ã€‚\nä½ å¾®å¾®çš±çœ‰ï¼Œå¹¶æœªä¸¾ç‰Œï¼Œåªæ˜¯è½»è½»å¹äº†å£æ°”ã€‚",
            speaker: "Auctioneer",
            type: "event",
            condition: s => s.flags.harem_queen && s.money >= 20000, // éœ€è¦æœ‰ç‚¹é’±å…¥åœº
            options: [
                {
                    text: "ä½è¯­ï¼šâ€œæˆ‘ä¸å–œæ¬¢æœ‰äººå’Œæˆ‘äº‰ä¸œè¥¿ã€‚â€",
                    desc: "è®©ä»–ä»¬ç”¨â€œç‰¹æ®Šæ‰‹æ®µâ€è§£å†³",
                    effect: s => {
                        s.money -= 20000; // ä»¥åº•ä»·æˆäº¤
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5;
                        printMsg("ä¸‹ä¸€ç§’ï¼ŒGhost å†°å†·çš„è§†çº¿é”å®šäº†é‚£ä¸ªç«äº‰è€…ï¼›Krueger å‹å¥½åœ°æ‚ä½é‚£äººè‚©è†€è€³è¯­äº†å‡ å¥ï¼›KÃ¶nig åˆ™åƒå µå¢™ä¸€æ ·æŒ¡ä½äº†ä»–çš„å»è·¯ã€‚\nç«äº‰è€…è„¸è‰²æƒ¨ç™½ï¼Œå½“åœºå¼ƒæƒã€‚\næ‹å–å¸ˆè½é”¤ã€‚Krueger å›åˆ°ä½ èº«è¾¹æ•´ç†ç€è¢–å£ï¼šâ€œå‹å¥½çš„å•†åŠ¡æ´½è°ˆï¼Œä»…æ­¤è€Œå·²ã€‚â€", 'gain');
                    },
                    result: "ä½ ä»¥åº•ä»·æ‹å¾—äº†è“å›¾ï¼Œå…¨åœºé¸¦é›€æ— å£°ï¼Œæ²¡äººæ•¢å†çœ‹ä½ ä¸€çœ¼ã€‚"
                },
                {
                    text: "ç›´æ¥ä¸¾ç‰Œï¼šâ€œå‡ºåŒå€ã€‚è®©ä»–é—­å˜´ã€‚â€",
                    desc: "ç”¨é‡‘é’±ç¾è¾±å¯¹æ‰‹ (-$5000)",
                    condition: s => s.money >= 5000,
                    effect: s => {
                        s.money -= 5000;
                        addShopRating(5.0, true);
                        printMsg("Krueger å‘å‡ºä¸€å£°è½»ç¬‘ï¼šâ€œæŒ¥é‡‘å¦‚åœŸçš„é£æ ¼ï¼Œä¸é”™ã€‚â€\né‚£ä¸ªç«äº‰å¯¹æ‰‹è¢«ä½ çš„æ°”åŠ¿ï¼ˆå’Œè´¢åŠ›ï¼‰å½»åº•ç¢¾å‹ï¼Œç°æºœæºœåœ°ç¦»åœºäº†ã€‚", 'gain');
                    },
                    result: "ä½ ç”¨é’±ç ¸æ™•äº†æ‰€æœ‰äººã€‚è¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼è®©ä½ çš„ç”·äººä»¬çœ‹ä½ çš„çœ¼ç¥æ›´åŠ ç‚½çƒ­ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 5ï¼šå…¬å¼€çš„å®£èª“ (å®´ä¼šæ‰“è„¸)
        harem_banquet: {
            text: "åœ¨ä¸€æ¬¡ç”±ä½ ä¸»åŠçš„ç››å¤§æ™šå®´ä¸Šï¼Œä¸€ä½ä¸çŸ¥å¤©é«˜åœ°åšçš„æ•Œå¯¹åŠ¿åŠ›ä»£è¡¨å…¬å¼€å˜²è®½ä½ ï¼š\nâ€œä½ åªæ˜¯ä¾é èº«ä½“å’Œè¯¡è®¡æ‰å‹‰å¼ºç»´ç³»ç€è¿™ä¸ªè„†å¼±çš„åå®«ï¼Œç©ç«è€…å¿…è‡ªç„šï¼Œå¥³å£«ã€‚â€\nå®´ä¼šå…ç¬é—´å®‰é™ä¸‹æ¥ï¼Œæ‰€æœ‰ç›®å…‰éƒ½é›†ä¸­åœ¨ä½ èº«ä¸Šã€‚",
            speaker: "Rival Leader",
            type: "alert",
            condition: s => s.flags.harem_queen && chance(8),
            options: [
                {
                    text: "è½»è”‘ä¸€ç¬‘ï¼šâ€œä½ å¯ä»¥äº²è‡ªé—®é—®ä»–ä»¬ã€‚â€",
                    desc: "å±•ç¤ºç»å¯¹çš„ç»Ÿå¾¡åŠ›",
                    effect: s => {
                        s.rep_141 += 10; s.rep_kortac += 10; s.rep_ghosts += 10; s.rep_chimera += 10;
                        printMsg("Krueger çš„åˆ€ç¬é—´æŠµä½äº†é‚£äººçš„å–‰å’™ï¼ŒKÃ¶nig å•æ‰‹æŒ‰ä½äº†ä»–çš„è‚©è†€è®©ä»–è·ªä¸‹ã€‚â€", 'gain');
                    },
                    result: "æ²¡å¤šä¹…åï¼Œé‚£ä¸ªä»£è¡¨è¢«åƒåƒåœ¾ä¸€æ ·æ‰”äº†å‡ºå»ï¼Œå…¨åœºè‚ƒé™ï¼Œéšåçˆ†å‘å‡ºæ•¬ç•çš„æŒå£°ã€‚"
                },
                {
                    text: "æ— éœ€åºŸè¯ï¼Œæ³¼ä»–ä¸€è„¸é…’",
                    desc: "ç¾è¾±å¹¶é©±é€",
                    effect: s => {
                        s.chars.konig.aff += 5; // KÃ¶nig å–œæ¬¢ä½ è¿™ç§ç›´æ¥çš„æƒ…ç»ªè¡¨è¾¾
                        printMsg("çº¢é…’é¡ºç€ä»–çš„è„¸æµä¸‹ã€‚æ²¡ç­‰ä½ ä¸‹ä»¤ï¼Œå››äººå·²ç»é»˜å¥‘åœ°å°é”äº†é‚£äººçš„æ‰€æœ‰é€€è·¯ã€‚\nGhostï¼šâ€œè¿™é…’å¾ˆè´µï¼Œä½ èµ”ä¸èµ·ã€‚â€\né‚£ä¸ªè ¢è´§è¢«æ‹–å‡ºå»æ—¶ç”šè‡³ä¸æ•¢æƒ¨å«ã€‚", 'event');
                    },
                    result: "ä»æ­¤æ— äººå†æ•¢è´¨ç–‘ä½ çš„åœ°ä½ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 16ï¼šæ™¨ç»ƒä¿®ç½—åœº (é›„æ€§è·å°”è’™)
        harem_training_day: {
            text: "æ¸…æ™¨çš„é˜³å…‰æ­£å¥½ï¼Œä½ åœ¨äºŒæ¥¼çš„é˜³å°ä¸Šå–å’–å•¡æ—¶æ­£å¥½çœ‹åˆ°æ¥¼ä¸‹çš„é™¢å­é‡Œä»–ä»¬æ­£åœ¨è¿›è¡Œä½“èƒ½è®­ç»ƒã€‚\né‡ç‚¹æ˜¯â€”â€”ä»–ä»¬éƒ½æ²¡ç©¿ä¸Šè¡£ã€‚\nKÃ¶nig æ­£åœ¨å•æ‰‹ä¸¾èµ·å·¨å¤§çš„å¡è½¦è½®èƒï¼›Ghost æ­£åœ¨åšé«˜å¼ºåº¦çš„å€’ç«‹ä¿¯å§æ’‘ï¼›Krueger å’Œ Keegan æ­£åœ¨è¿›è¡Œé€Ÿåº¦æå¿«çš„è¿‘èº«æ ¼æ–—æ¼”ç»ƒã€‚\næ³¨æ„åˆ°ä½ çš„è§†çº¿åï¼Œä»–ä»¬æ‰‹é‡Œçš„åŠ¨ä½œæ˜æ˜¾å˜å¾—... æ›´ç”¨åŠ›ã€æ›´å…·å±•ç¤ºæ€§äº†ã€‚",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "å¹ä¸ªå£å“¨ï¼šâ€œèº«æä¸é”™ï¼Œå…ˆç”Ÿä»¬ï¼Œç»§ç»­ä¿æŒã€‚â€",
                    desc: "åƒæ£€é˜…å£«å…µä¸€æ ·æ¬£èµ (å›å¤ AP)",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // ç²¾ç¥å¤§æŒ¯
                        s.chars.konig.aff += 2; s.chars.ghost.aff += 2; s.chars.krueger.aff += 2; s.chars.keegan.aff += 2;
                        printMsg("KÃ¶nig å·®ç‚¹æŠŠè½®èƒç ¸åœ¨è„šä¸Šï¼Œè„¸çº¢é€äº†ï¼›Ghost ç¿»äº†ä¸ªç™½çœ¼ï¼›Krueger èˆ”äº†èˆ”å˜´å”‡ï¼›Keegan æ— å¥ˆçš„ç¬‘äº†ç¬‘ã€‚", 'gain');
                    },
                    result: "æ²¡æœ‰ä»€ä¹ˆæ¯”æ¸…æ™¨çš„æ™¯è‰²æ›´èƒ½å¼€å¯ç¾å¥½çš„ä¸€å¤©äº†ã€‚"
                },
                {
                    text: "æ‰”ä¸‹ä¸€æ¡æ¯›å·¾ï¼šâ€œKruegerï¼Œä¸Šæ¥å¸®æˆ‘æ“¦èƒŒï¼Œå…¶ä»–äººç»§ç»­ã€‚â€",
                    desc: "è¡Œä½¿å¥³ç‹çš„ç¿»ç‰Œæƒ",
                    effect: s => {
                        s.chars.krueger.aff += 10;
                        // å…¶ä»–äººä¼šåƒé†‹ï¼Œä½†åœ¨å¥³ç‹é¢å‰åªèƒ½å¿ç€
                        printMsg("Krueger éœ²å‡ºäº†èƒœåˆ©è€…çš„ç¬‘å®¹ï¼Œåœ¨ä¸€ä¼—æ€äººçš„ç›®å…‰ä¸­èµ°ä¸Šäº†æ¥¼æ¢¯ã€‚\næ¥¼ä¸‹ä¼ æ¥äº† KÃ¶nig å§”å±ˆåœ°æŠŠè½®èƒç ¸åœ¨åœ°ä¸Šçš„å£°éŸ³ã€‚", 'event');
                    },
                    result: "ä»Šå¤©çš„æ—©æ™¨æ³¨å®šè¦åœ¨ Krueger çš„ç‰¹æ®ŠæœåŠ¡ä¸­åº¦è¿‡ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 17ï¼šé›¨ä¼æˆ˜äº‰ (æ—¥å¸¸äº‰å® )
        harem_umbrella_war: {
            text: "å¤–é¢ä¸‹ç€ç“¢æ³¼å¤§é›¨ï¼Œä½†ä½ éœ€è¦å»ä¸€è¶Ÿéš”å£çš„ä»“åº“ã€‚\nåˆšèµ°åˆ°é—¨å£ï¼Œå››æŠŠä¼åŒæ—¶æ’‘å¼€ï¼Œä½ é€‰è°ï¼Ÿ\nKÃ¶nigï¼šâ€œæˆ‘... æˆ‘å¤Ÿé«˜ï¼Œä¸ä¼šç¢°åˆ°ä½ çš„å¤´ï¼â€\nKeeganï¼šâ€œ...æˆ‘æŠ±ç€ä½ è·‘è¿‡å»ï¼Œä¸€æ»´é›¨éƒ½ä¸ä¼šæ²¾åˆ°ã€‚â€\nå››äººäº’ä¸ç›¸è®©ï¼ŒæŠŠé—¨å£å µå¾—æ­»æ­»çš„ã€‚",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && (s.weather.name === 'é…¸é›¨' || s.weather.name === 'æš´é›¨'),
            options: [
                {
                    text: "â€œKeeganï¼ŒæŠ±æˆ‘è¿‡å»ã€‚â€",
                    desc: "é€‰æ‹©æ•ˆç‡æœ€é«˜çš„æ–¹æ¡ˆ",
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        printMsg("ä¸‹ä¸€ç§’ä½ å·²ç»åœ¨Keeganæ€€é‡Œäº†ï¼Œä»–ç§»åŠ¨é€Ÿåº¦åˆå¿«åˆç¨³ï¼Œç¡®å®ä¸€æ»´é›¨éƒ½æ²¡è®©ä½ æ·‹åˆ°ã€‚", 'event');
                    },
                    result: "å…¶ä»–ä¸‰äººåªèƒ½éƒé—·åœ°æ’‘ç€ä¼è·Ÿåœ¨åé¢åƒç°ã€‚"
                },
                {
                    text: "â€œKÃ¶nig æ’‘ä¼ï¼ŒGhost å¼€è·¯ï¼ŒKrueger æ–­åã€‚â€",
                    desc: "åˆç†çš„æˆ˜æœ¯åˆ†é…",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        printMsg("KÃ¶nig å¼€å¿ƒåˆå°å¿ƒç¿¼ç¿¼åœ°æŠŠå·¨å¤§çš„é»‘ä¼ä¸¾åœ¨ä½ å¤´é¡¶ï¼Œç”Ÿæ€•ä½ æ·‹åˆ°ä¸€ç‚¹é›¨ã€‚", 'gain');
                    },
                    result: "ä½ åƒå¥³ç‹å‡ºå·¡ä¸€æ ·ï¼Œåœ¨ä¸€ç¾¤é¡¶å°–æ€æ‰‹çš„æŠ¤é€ä¸‹ç©¿è¿‡äº†çŸ­çŸ­åç±³çš„è¡—é“ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 3ï¼šå¿ è¯šçš„è¯•ç‚¼ (ç»å¯¹æŒæ§)
        harem_loyalty_test: {
            text: "ä¸€ä½ç¥ç§˜çš„è¯´å®¢æ¥åˆ°ä½ çš„åº—é“ºï¼Œå£°ç§°å¯ä»¥ç»™ä½ æä¾›â€œçœŸæ­£çš„è‡ªç”±â€ï¼Œæš—ç¤ºå¯ä»¥å¸®ä½ æ‘†è„±å‘¨å›´è¿™å››ä¸ªâ€œå±é™©ä¸”ä¸ç¨³å®šâ€çš„ç”·äººã€‚\nâ€œå¥³å£«ï¼Œä½ è¢«é‡å…½åŒ…å›´äº†ã€‚â€ è¯´å®¢å·§èˆŒå¦‚ç°§ï¼Œâ€œæˆ‘å¯ä»¥å¸¦ä½ å»å®‰å…¨åŒºã€‚â€\nä½ é¥¶æœ‰å…´è‡´åœ°å¬ç€ï¼Œä»¿ä½›åœ¨å¬ä¸€ä¸ªä¸è‡ªå·±æ— å…³çš„ç¬‘è¯ã€‚",
            speaker: "Persuader",
            type: "alert",
            condition: s => s.flags.harem_queen && chance(5), // æ¯”è¾ƒç¨€æœ‰çš„å‰§æƒ…
            options: [
                {
                    text: "â€œè¢«é©¯æœçš„é‡å…½ï¼Œè¿˜ä¼šå‘å¾€è’é‡å—ï¼Ÿâ€",
                    desc: "ã€ç»ˆæå¥³ç‹ã€‘éœ€å…¨å‘˜å¥½æ„Ÿåº¦ >= 500",
                    condition: s => s.chars.ghost.aff >= 500 && s.chars.konig.aff >= 500 && s.chars.krueger.aff >= 500,
                    effect: s => {
                        s.rep_141 += 10; s.rep_kortac += 10; s.rep_chimera += 10;
                        printMsg("ä½ ç”šè‡³æ²¡æœ‰å›å¤´ï¼ŒKrueger é”ä¸Šäº†é—¨ï¼ŒKÃ¶nig æŒ¡åœ¨äº†è¯´å®¢é¢å‰ï¼ŒKeegan ååœ¨çª—å°ä¸Šï¼Œæ¼«ä¸ç»å¿ƒåœ°æŠŠç©ç€è¯´å®¢åˆšå¸¦æ¥çš„çªƒå¬å™¨ã€‚\nä½ ç¬‘ç€å¯¹é¢¤æŠ–çš„è¯´å®¢è¯´ï¼šâ€œä½ çœ‹ï¼Œä»–ä»¬ä¸æ˜¯æˆ‘çš„ç‹±å’ï¼Œæ˜¯æˆ‘çš„çŒçŠ¬ï¼Œè€Œä½ ... ä¹Ÿè®¸æ˜¯ä»Šå¤©çš„åŠ é¤ï¼Ÿâ€", 'gain');
                    },
                    result: "è¯´å®¢è¢«å“å¾—ç˜«è½¯åœ¨åœ°ï¼Œè¿™å››ä¸ªç”·äººçœ‹ç€ä½ çš„çœ¼ç¥ç‹‚çƒ­åˆè™”è¯šã€‚"
                },
                {
                    text: "â€œçŒœçŒœè°æœ€æƒ³æ‹§æ–­ä½ çš„è„–å­ï¼Ÿâ€",
                    desc: "è¿™å°±æ˜¯ä½ è¦çš„â€œè‡ªç”±â€ï¼Ÿ",
                    effect: s => {
                        s.chars.konig.aff += 5; // KÃ¶nig è¿™ç§è€å®äººä¸ºäº†ä½ å‘ç«æ›´å¸¦æ„Ÿ
                        printMsg("æ— éœ€ä½ ä¸‹ä»¤ï¼ŒKÃ¶nig æŒ‡å…³èŠ‚æå¾—å‘ç™½ä»ä»“åº“èµ°å‡ºã€‚\nè¯´å®¢åœ¨å®è´¨èˆ¬çš„æ€æ„ä¸­è·ªå€’ï¼Œä½ è½»ç¬‘ç€æ‘†æ‰‹ï¼šâ€œæ‰”å‡ºå»å§ï¼Œåˆ«å¼„è„äº†åœ°æ¿ã€‚â€", 'event');
                    },
                    result: "è¿™å‡ºé—¹å‰§æˆäº†å·©å›ºå¿ è¯šçš„å‚¬åŒ–å‰‚ï¼Œå½“æ™šï¼Œæ¯ä¸ªäººéƒ½ç”¨å„è‡ªçš„æ–¹å¼å†æ¬¡å‘ä½ è¯æ˜äº†ä»–ä»¬çš„å½’å±æƒã€‚"
                }
            ]
        }, // <--- è®°å¾—æ£€æŸ¥è¿™é‡Œéœ€ä¸éœ€è¦é€—å·

// ğŸ‘‘ å¥³ç‹å‰§æƒ… 12ï¼šå¾®æ™çš„æƒŠæ…Œ (å…¨å‘˜è¿‡æ¿€ååº”)
        harem_sick_day: {
            text: "æœ€è¿‘ä½ çš„åº—é™„è¿‘åœ¨ä¿®è·¯ï¼Œä½ è¢«ç°å°˜å‘›åˆ°åè½»è½»å’³å—½äº†ä¸€å£°ã€‚\nä¸‹ä¸€ç§’ï¼Œåº—é‡Œçš„ç©ºæ°”å‡å›ºäº†ã€‚\nKÃ¶nig æ‰‹é‡Œçš„ç®±å­â€œå“å½“â€ä¸€å£°ç ¸åœ¨åœ°ä¸Šï¼›Ghost æ‘¸äº†æ‘¸ä½ çš„é¢å¤´ï¼›Keegan è¿…é€Ÿå…³é—­äº†é€šé£å£å¹¶æ‰“å¼€æ–°é£ç³»ç»Ÿã€‚",
            speaker: "The Harem",
            type: "event",
            // è§¦å‘æ¡ä»¶ï¼šå¥³ç‹æ¨¡å¼ + éšæœº
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "æ— å¥ˆåœ°ç¬‘ï¼šâ€œæˆ‘æ²¡äº‹ï¼Œåˆ«å¤§æƒŠå°æ€ªã€‚â€",
                    desc: "å®‰æŠšè¿™ç¾¤ç´§å¼ è¿‡åº¦çš„ç”·äºº",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.chars.ghost.aff += 5;
                        printMsg("KÃ¶nig è¿˜æ˜¯ä¸æ”¾å¿ƒï¼ŒæŠŠä½ æŠ±åˆ°äº†èººæ¤…ä¸Šå¹¶ç›–äº†ä¸‰å±‚æ¯¯å­ã€‚\nKeegan é€’ç»™ä½ ä¸€æ¯æ¸©åº¦ç²¾ç¡®åˆ° 45 åº¦çš„æ¸©æ°´ã€‚\nKrueger å®ˆåœ¨é—¨å£ï¼šâ€œä»Šå¤©ä¸è¥ä¸šäº†ï¼Œè°ä¹Ÿåˆ«æƒ³æ‰“æ‰°å¥¹ä¼‘æ¯ã€‚â€", 'event');
                    },
                    result: "ä½ è¢«è¿«äº«å—äº†ä¸€æ•´å¤©çš„â€œé‡ç—‡ç›‘æŠ¤â€å¾…é‡ï¼Œè™½ç„¶æœ‰ç‚¹å¤¸å¼ ï¼Œä½†å¾ˆæ¸©æš–ã€‚"
                },
                {
                    text: "æ’’å¨‡ï¼šâ€œæˆ‘å¥½åƒçœŸçš„æœ‰ç‚¹ä¸èˆ’æœ...â€",
                    desc: "äº«å—ä»–ä»¬çš„æœä¾ (AP å›æ»¡)",
                    effect: s => {
                        s.ap = CONFIG.max_ap + 2; // çªç ´ä¸Šé™
                        s.money += 200; // KÃ¶nig ç”šè‡³å»ä¹°äº†æ˜‚è´µçš„è¡¥å“
                        printMsg("è¿™ä¸‹å½»åº•ä¹±å¥—äº†ï¼Œä½ è¢«å–‚äº†æœ€å¥½çš„è¡¥ç»™å“ï¼Œäº«å—äº†è½®ç•ªæŒ‰æ‘©ã€‚\nGhost ç”šè‡³ç»™ä½ è¯»äº†ä¸€æ®µï¼ˆæ¯ç‡¥çš„ï¼‰ä»»åŠ¡ç®€æŠ¥æ¥å“„ä½ ç¡è§‰ã€‚", 'gain');
                    },
                    result: "é†’æ¥æ—¶ï¼Œä½ å‘ç°å››ä¸ªå¤§ç”·äººå›´åœ¨ä½ åºŠè¾¹å®ˆç€ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 13ï¼šæ„šè ¢çš„æ‹›å‹Ÿ (æ‰“è„¸)
        harem_poaching: {
            text: "ä¸€åä¸çŸ¥æ­»æ´»çš„é›‡ä½£å…µå›¢é•¿èµ°è¿›äº†åº—é‡Œï¼Œç›´æ¥æ— è§†äº†ååœ¨æŸœå°åçš„ä½ ï¼Œè€Œæ˜¯èµ°å‘äº†æ­£åœ¨æ“¦æªçš„ç”·äººä»¬ã€‚\nâ€œå˜¿ï¼Œå…„å¼Ÿä»¬ï¼Œè·Ÿç€ä¸ªå¥³äººæ··æœ‰ä»€ä¹ˆå‰é€”ï¼ŸåŠ å…¥æˆ‘çš„å…µå›¢å§ï¼Œé’±ã€å¥³äººã€åœ°ä½ï¼Œåº”æœ‰å°½æœ‰ï¼åˆ«è®©è¿™å¨˜ä»¬å„¿é™åˆ¶äº†ä½ ä»¬çš„æ‰åã€‚â€\nç©ºæ°”çªç„¶å®‰é™ï¼Œå››åŒçœ¼ç›åŒæ—¶åƒçœ‹æ­»äººä¸€æ ·çœ‹å‘ä»–ã€‚",
            speaker: "Mercenary Leader",
            type: "alert",
            condition: s => s.flags.harem_queen && chance(8),
            options: [
                {
                    text: "æ‰˜ç€ä¸‹å·´çœ‹æˆï¼šâ€œè¿™æ¡ä»¶ä¸é”™ï¼Œä½ ä»¬æƒ³å»å—ï¼Ÿâ€",
                    desc: "æŠŠé€‰æ‹©æƒäº¤ç»™ä»–ä»¬ (çœ‹æˆ)",
                    effect: s => {
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5; s.rep_ghosts += 5;
                        printMsg("Ghost å†·ç¬‘ï¼šâ€œé’±ï¼Ÿå¥¹ç»™æˆ‘çš„æ¯”ä½ èƒ½æƒ³è±¡çš„æ›´å¤šã€‚â€\nKruegerï¼šâ€œå¥³äººï¼Ÿé™¤äº†å¥¹ï¼Œå…¶ä»–éƒ½æ˜¯åƒåœ¾ã€‚â€\nKeegan ç”šè‡³æ²¡æŠ¬å¤´\nKÃ¶nig ç«™äº†èµ·æ¥ï¼Œå·¨å¤§çš„é˜´å½±ç¬¼ç½©äº†é‚£äººï¼šâ€œä¸è®¸... ä¾®è¾±å¥¹ï¼â€", 'gain');
                    },
                    result: "é‚£ä¸ªå›¢é•¿è¢« KÃ¶nig å•æ‰‹æ‰”å‡ºäº†å¤§é—¨ï¼Œå¹¶åœ¨ç©ºä¸­åˆ’å‡ºäº†ä¸€é“ä¼˜ç¾çš„æŠ›ç‰©çº¿ã€‚"
                },
                {
                    text: "å†·å†·å¼€å£ï¼šâ€œå½“ç€æˆ‘çš„é¢æŒ–äººï¼Œä½ å¾ˆæœ‰å‹‡æ°”ã€‚â€",
                    desc: "äº²è‡ªç«‹å¨",
                    effect: s => {
                        s.chars.krueger.aff += 5; // Krueger å–œæ¬¢ä½ çš„æ®‹å¿
                        printMsg("ä½ æ‰“äº†ä¸ªå“æŒ‡ï¼ŒKrueger ç¬é—´å‡ºç°åœ¨é‚£äººèº«åï¼Œåˆ€æ¶åœ¨è„–å­ä¸Šã€‚\nä½ ï¼šâ€œç•™ä¸‹ä»–çš„ä¸€æ ¹æ‰‹æŒ‡ä½œä¸ºå­¦è´¹ï¼Œç„¶åè®©ä»–æ»šã€‚â€", 'event');
                    },
                    result: "æƒ¨å«å£°å“å½»è¡—åŒºï¼Œä»æ­¤ä»¥åï¼Œæ²¡äººæ•¢å†è´¨ç–‘è°æ‰æ˜¯è¿™é‡ŒçœŸæ­£çš„è€å¤§ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹å‰§æƒ… 14ï¼šä¸“å±ç‹åº§ (æ—¥å¸¸)
        harem_throne: {
            text: "ä½ æ–°ä¹°äº†ä¸€æŠŠèˆ’é€‚çš„çœŸçš®å•äººæ²™å‘æ‘†åœ¨åº—é‡Œè§†é‡æœ€å¥½çš„ä½ç½®ï¼Œå½“ä½ åä¸‹æ—¶ï¼Œå‘¨å›´çš„ç”·äººä»¬è‡ªç„¶è€Œç„¶åœ°å›´äº†è¿‡æ¥ï¼Œå½¢æˆäº†ä¸€ä¸ªç»å¯¹é˜²å¾¡åœˆã€‚\nGhost é åœ¨çª—è¾¹è­¦æˆ’ï¼ŒKeegan éšæ²¡åœ¨é˜´å½±é‡Œï¼ŒKrueger ååœ¨ä½ è„šè¾¹çš„åœ°æ¯¯ä¸Šæ“¦æ‹­åŒ•é¦–ï¼ŒKÃ¶nig åˆ™ç«™åœ¨ä½ èº«åå……å½“é èƒŒå’Œé®é˜³ä¼ã€‚\nè¿™å°±æ˜¯ä½ çš„ç‹åº§ã€‚",
            speaker: "The Harem",
            type: "event",
            condition: s => s.flags.harem_queen && chance(10),
            options: [
                {
                    text: "ä¼¸æ‰‹æ‘¸æ‘¸ Krueger çš„å¤´",
                    desc: "åƒå¯¹å¾…å¿ çŠ¬ä¸€æ ·",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger åƒåªå¤§çŒ«ä¸€æ ·è¹­äº†è¹­ä½ çš„æŒå¿ƒï¼Œå®Œå…¨æ²¡æœ‰äº†å¹³æ—¶çš„æ€æ°”ã€‚\nGhost å•§äº†ä¸€å£°ï¼šâ€œåˆ«å¤ªå® å¥¹äº†ã€‚â€ ä½†å¹¶æ²¡æœ‰é˜»æ­¢ã€‚", 'event');
                    },
                    result: "è¿™ç§æŒæ§ä¸€åˆ‡çš„æ„Ÿè§‰è®©äººç€è¿·ã€‚"
                },
                {
                    text: "é—­ç›®å…»ç¥ï¼šâ€œæˆ‘ç¡ä¸€ä¼šå„¿ã€‚â€",
                    desc: "ç»å¯¹çš„å®‰å…¨æ„Ÿ (AP+2)",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                        printMsg("æ‰€æœ‰äººç¬é—´åœæ­¢äº†åŠ¨ä½œå’Œäº¤è°ˆã€‚\nä½ æ„Ÿè§‰åˆ° KÃ¶nig å°å¿ƒç¿¼ç¿¼åœ°æŠŠä¸€ä»¶å¤–å¥—ç›–åœ¨ä½ èº«ä¸Šã€‚\nåœ¨è¿™ä¸ªæˆ˜ç«çº·é£çš„ä¸–ç•Œé‡Œï¼Œè¿™é‡Œæ˜¯æœ€å®‰é™çš„æ¸¯æ¹¾ã€‚", 'gain');
                    },
                    result: "ä½ ç¡å¾—å¾ˆé¦™ï¼Œé†’æ¥æ—¶å‘ç°å¤§å®¶éƒ½è¿˜åœ¨åŸä½å®ˆç€ä½ ã€‚"
                }
            ]
        },

        // ğŸ‘‘ å¥³ç‹æ—¥å¸¸ï¼šç»å¯¹é˜²å¾¡
        harem_defense: {
            text: "ä¸€é˜Ÿå…¨å‰¯æ­¦è£…çš„æ å¤ºè€…è¯•å›¾å†²å‡»ä½ çš„åº—é“ºã€‚ä½ åˆšæƒ³æ‹”æªï¼Œä¸€åªæ‰‹æŒ‰ä½äº†ä½ çš„è‚©è†€ã€‚\nGhostï¼šâ€œçœçœå§ï¼Œè¿™ç§æ‚é±¼ä¸å€¼å¾—ä½ åŠ¨æ‰‹ã€‚â€\nKrueger å’Œ KÃ¶nig å·²ç»ä»ä¸¤ä¾§åŒ…æŠ„äº†è¿‡å»ï¼ŒKeeganæ¶èµ·äº†æªã€‚",
            type: "alert",
            condition: s => s.flags.harem_queen && chance(8),
            options: [
                {
                    text: "åä¸‹å–èŒ¶è§‚æˆ˜",
                    desc: "è§‚çœ‹é¡¶çº§æˆ˜åŠ›ç¢¾å‹",
                    effect: s => {
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5;
                        // æˆ˜åˆ©å“
                        s.ammo += 20;
                        printMsg("æˆ˜æ–—ç»“æŸå¾—å¤ªå¿«äº†ï¼ŒKÃ¶nig éšæ‰‹æŠŠå°¸ä½“æ‰”äº†å‡ºå»ã€‚", 'event');
                    },
                    result: "è¿™å°±æ˜¯æ‹¥æœ‰ä¸“å±å†›å›¢çš„æ„Ÿè§‰ã€‚"
                }
            ]
        },
        // 2. æˆ˜åœ°è®°è€…çš„é‡‡è®¿ (é«˜åˆ†æœºä¼š)
        journalist_visit: {
            text: "ä¸€åæˆ´ç€ PRESS å¤´ç›”çš„æˆ˜åœ°è®°è€…èµ°è¿›åº—é‡Œã€‚\nâ€œæˆ‘åœ¨å†™ä¸€ç¯‡å…³äºæˆ˜åŒºç»æµçš„æŠ¥é“ã€‚ä½ æ„¿æ„æ¥å—ç®€çŸ­çš„é‡‡è®¿ï¼Œè°ˆè°ˆå¦‚ä½•åœ¨è¿™é‡ŒåšæŒç»è¥å—ï¼Ÿâ€",
            speaker: "Journalist",
            type: "event",
            options: [
                {
                    text: "æ¥å—é‡‡è®¿ (æ¶ˆè€— 1 AP)",
                    desc: "å¤§å¹…æå‡çŸ¥ååº¦å’Œè¯„åˆ†",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        // è·å¾—å®Œç¾çš„ 5 æ˜Ÿè¯„ä»·
                        addShopRating(5.0, true);
                        s.rep_141 += 5; // è®°è€…é€šå¸¸å’Œæ­£è§„å†›æœ‰è”ç³»
                        log("æ¥å—é‡‡è®¿ï¼Œåå£°å¤§å™ª", 'gain');
                    },
                    result: "è¿™ç¯‡æŠ¥é“ç¬¬äºŒå¤©å°±åˆŠç™»äº†ã€‚å¾ˆå¤šäººæ…•åè€Œæ¥ï¼Œç§°èµä½ çš„åšæŒå’Œä¸“ä¸šã€‚"
                },
                {
                    text: "æ‹’ç»",
                    desc: "ä¿æŒä½è°ƒ",
                    result: "â€œå¥½å§ï¼Œæˆ‘ä¹Ÿç†è§£ã€‚ä½è°ƒæ˜¯ç”Ÿå­˜ä¹‹é“ã€‚â€ è®°è€…é—æ†¾åœ°ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // 3. æŒ‘å‰”çš„è´µå¦‡ (æœåŠ¡æ€åº¦)
        picky_customer: {
            text: "ä¸€ä½ç©¿ç€è®²ç©¶çš„é¡¾å®¢æç€é¼»å­èµ°äº†è¿›æ¥ã€‚\nâ€œå¤©å“ªï¼Œè¿™é‡Œçš„ç©ºæ°”å…¨æ˜¯ç°å°˜ã€‚è¿™ç“¶æ°´çœ‹èµ·æ¥ä¹Ÿè„å…®å…®çš„... ä½ ä»¬çœŸçš„å°±è¿™æ ·å–ç»™å®¢äººå—ï¼Ÿâ€",
            speaker: "Civilian",
            options: [
                {
                    text: "è€å¿ƒæ“¦æ‹­å¹¶æ‰“æŠ˜å‡ºå”®é£Ÿç‰© (-$20)",
                    desc: "ç‰ºç‰²åˆ©æ¶¦æ¢å–å¥½è¯„",
                    condition: s => s.food > 0,
                    effect: s => {
                        s.food--;
                        s.money += (CONFIG.sell_price.food - 20); // æ‰“æŠ˜
                        addShopRating(4.5, true);
                        log("æ‰“æŠ˜å®‰æŠšäº†æŒ‘å‰”é¡¾å®¢", 'info');
                    },
                    result: "â€œå“¼ï¼Œçœ‹åœ¨ä½ æ€åº¦è¿˜è¡Œçš„ä»½ä¸Šï¼Œæˆ‘å°±å‹‰å¼ºæ¥å—å§ã€‚â€ å¥¹è™½ç„¶å˜´æ¯’ï¼Œä½†ç»™äº†ä¸ªå¥½è¯„ã€‚"
                },
                {
                    text: "çˆ±ä¹°ä¸ä¹°",
                    desc: "è·å¾— 2 æ˜Ÿå·®è¯„",
                    effect: s => {
                        addShopRating(2.0, false);
                    },
                    result: "å¥¹å°–å«ç€è·‘äº†å‡ºå»ï¼šâ€œè¿™æ˜¯æˆ‘è§è¿‡çš„æœ€ç³Ÿç³•çš„æœåŠ¡ï¼æˆ‘è¦å‘Šè¯‰æ‰€æœ‰äººï¼â€"
                }
            ]
        },

        // 4. å‡è´§é£æ³¢ (å±æœºå…¬å…³)
        fake_goods_rumor: {
            text: "å‡ ä¸ªä½£å…µæ€’æ°”å†²å†²åœ°å›æ¥æ‰¾ä½ ã€‚\nâ€œä¸Šæ¬¡ä¹°çš„å¼¹è¯å…¨æ˜¯å“‘ç«çš„ï¼å·®ç‚¹å®³æ­»æˆ‘ä»¬ï¼ä½ éœ€è¦ç»™æˆ‘ä»¬ä¸€ä¸ªè§£é‡Šï¼â€ (è¿™æ˜¾ç„¶æ˜¯ä¸ªè¯¯ä¼šï¼Œæˆ–è€…æ˜¯è¢«æ‰åŒ…äº†)",
            speaker: "Mercenary",
            type: "alert",
            options: [
                {
                    text: "å…¨é¢é€€æ¬¾å¹¶èµ”å¿ (-$800)",
                    desc: "æŒ½å›ä¿¡èª‰çš„å”¯ä¸€åŠæ³•",
                    condition: s => s.money >= 800,
                    effect: s => {
                        s.money -= 800;
                        addShopRating(5.0, true); // å±æœºå…¬å…³æˆåŠŸ
                        log("èµ”å¿é¡¾å®¢æŒ½å›äº†å£°èª‰", 'loss');
                    },
                    result: "ä½£å…µä»¬çš„æ€’æ°”å¹³æ¯äº†ã€‚â€œå¥½å§ï¼Œçœ‹æ¥ä½ æ˜¯ä¸ªè®²ç©¶äººï¼Œæˆ‘ä»¬ä¼šæ”¶å›ä¹‹å‰çš„è¯ã€‚â€"
                },
                {
                    text: "åšå†³å¦è®¤",
                    desc: "ä¿¡èª‰æ‰«åœ° (1 æ˜Ÿ)",
                    effect: s => {
                        addShopRating(1.0, false);
                        s.rep_kortac -= 5;
                        s.rep_141 -= 5;
                    },
                    result: "åŒæ–¹ä¸æ¬¢è€Œæ•£ã€‚å³ä¾¿ä½ æ˜¯æ¸…ç™½çš„ï¼Œä½†ååå£°å·²ç»ä¼ å‡ºå»äº†ã€‚"
                }
            ]
        },

        // 5. æ…•åè€Œæ¥çš„å¤§å®¢æˆ· (é«˜è¯„åˆ†é™å®š)
          vip_bulk_order: {
            // ã€ä¿®æ”¹ã€‘æŠŠå¼€åœºç™½æ”¹å¾—ä¸­æ€§ä¸€ç‚¹ï¼Œå…·ä½“è¯„ä»·åœ¨é€‰é¡¹ç»“æœé‡Œä½“ç°
            text: "ä¸€è¾†é‡å‹è£…ç”²è½¦åœåœ¨é—¨å£ï¼Œä¸€ä½çœ‹èµ·æ¥å¾ˆæœ‰æƒåŠ¿çš„æŒ‡æŒ¥å®˜èµ°äº†è¿›æ¥ï¼Œç¯è§†ç€ä½ çš„åº—é“ºã€‚\nâ€œæˆ‘æœ‰ä¸€ç¬”å¤§è®¢å•ï¼Œä½†æˆ‘åªå’Œè¿™ç‰‡åŒºåŸŸæœ€å€¼å¾—ä¿¡èµ–çš„äººåšç”Ÿæ„ã€‚â€",
            speaker: "Commander",
            type: "event",
            options: [
                {
                    text: "æ¥ä¸‹å¤§å• (-10 Medkit)",
                    desc: "å·¨é¢åˆ©æ¶¦ + è¶…çº§å¥½è¯„",
                    // æ¡ä»¶ï¼šè¯„åˆ† >= 4.5 ä¸” åº“å­˜å¤Ÿ
                    condition: s => s.rating >= 4.5 && s.medkit >= 10, 
                    effect: s => {
                        s.medkit -= 10;
                        const profit = CONFIG.sell_price.medkit * 10 * 1.5; // 1.5å€æº¢ä»·
                        s.money += profit;
                        addShopRating(5.0, true);
                        log(`å®Œæˆ VIP è®¢å•è·åˆ© $${profit}`, 'gain');
                    },
                    result: "æŒ‡æŒ¥å®˜éå¸¸æ»¡æ„ï¼šâ€œåä¸è™šä¼ ï¼è¿™é‡Œçš„è´§ç‰©å’ŒæœåŠ¡éƒ½æ˜¯é¡¶çº§çš„ã€‚æˆ‘ä¼šå‘å¸ä»¤éƒ¨æ¨èä½ çš„åº—é“ºã€‚â€"
                },
                {
                    text: "åº“å­˜ä¸è¶³",
                    desc: "è™½ç„¶è¯„åˆ†å¤Ÿï¼Œä½†æ²¡è´§",
                    // æ¡ä»¶ï¼šè¯„åˆ† >= 4.5 ä½† åº“å­˜ä¸å¤Ÿ
                    condition: s => s.rating >= 4.5 && s.medkit < 10,
                    result: "æŒ‡æŒ¥å®˜çœ‹ç€ç©ºè¡è¡çš„è´§æ¶æ‘‡äº†æ‘‡å¤´ï¼šâ€œçœ‹æ¥ä¼ è¨€å¤¸å¤§äº†ã€‚ç­‰ä½ å¤‡è¶³äº†è´§å†è¯´å§ã€‚â€ ä»–å¤±æœ›åœ°ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "æ¯›é‚è‡ªè",
                    desc: "è¯„åˆ†ä¸è¶³ä½†æ˜¯æˆ‘èƒ†å­å¤§",
                    // æ¡ä»¶ï¼šè¯„åˆ† < 4.5 (ä½åˆ†ç©å®¶åªèƒ½çœ‹è¿™ä¸ª)
                    condition: s => s.rating < 4.5,
                    result: "æŒ‡æŒ¥å®˜æŸ¥çœ‹äº†ä½ çš„åº—é“ºè¯„ä»·è®°å½•ï¼Œçš±èµ·äº†çœ‰å¤´ã€‚\nâ€œä½ çš„ä¿¡èª‰ä¼¼ä¹è¿˜è¾¾ä¸åˆ°æˆ‘çš„è¦æ±‚ã€‚è¿™ç§çº§åˆ«çš„è®¢å•ï¼Œæˆ‘ä¸èƒ½å†’é™©ã€‚â€\nä»–è½¬èº«ç¦»å¼€äº†ï¼Œç•™ä¸‹ä¸€è„¸å°´å°¬çš„ä½ ã€‚"
                }
            ]
        },

// --- ã€æ–°å¢ã€‘ç”·ä¸»æ—¥å¸¸äº’åŠ¨ä¸æ›´å¤šéšæœºäº‹ä»¶ ---

        // 1. KÃ¶nig çš„é«˜å¤„ä½œä¸š (æ—¥å¸¸äº’åŠ¨)
        konig_high_shelf: {
            text: "ä½ æ­£è¸©ç€æ‘‡æ‘‡æ™ƒæ™ƒçš„æ¢¯å­ï¼Œè¯•å›¾æŠŠä¸€ç®±æ²‰é‡çš„å¼¹è¯æ¨ä¸Šæœ€é«˜å±‚çš„è´§æ¶ã€‚KÃ¶nig æ­£å¥½è·¯è¿‡ï¼ŒæŠ¬å¤´çœ‹ç€ä½ ã€‚\nâ€œé‚£ä¸ª... éœ€è¦å¸®å¿™å—ï¼Ÿæˆ‘ç”šè‡³ä¸éœ€è¦è¸®è„šã€‚â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "æ‹œæ‰˜ä»–å¸®å¿™",
                    desc: "å‘æŒ¥ä»–çš„èº«é«˜ä¼˜åŠ¿",
                    effect: s => {
                        s.chars.konig.aff += 3;
                        printMsg("KÃ¶nig è½»è€Œæ˜“ä¸¾åœ°å•æ‰‹æŠŠç®±å­æ”¾äº†ä¸Šå»ã€‚â€œå¥½äº†ã€‚å°å¿ƒç‚¹ï¼Œåˆ«æ‘”ç€ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–çœ‹èµ·æ¥å› ä¸ºå¸®ä¸Šäº†å¿™è€Œå¾ˆé«˜å…´ï¼ˆè™½ç„¶éš”ç€å¤´å¥—çœ‹ä¸è§è¡¨æƒ…ï¼‰ã€‚"
                },
                {
                    text: "è‡ªå·±é€å¼º",
                    desc: "å¯èƒ½ä¼šæ‘”å€’",
                    effect: s => {
                        if(chance(50)) {
                            printMsg("ä½ è„šä¸‹ä¸€æ»‘ï¼å¹¸å¥½ KÃ¶nig çœ¼ç–¾æ‰‹å¿«æ‰¶ä½äº†ä½ ã€‚", 'event');
                            s.chars.konig.aff += 2;
                        } else {
                            printMsg("ä½ æ™ƒäº†å‡ ä¸‹ï¼Œç»ˆäºè¿˜æ˜¯è‡ªå·±æ”¾ä¸Šå»äº†ã€‚ç´¯å¾—å¤Ÿå‘›ã€‚", 'system');
                        }
                    },
                    result: "KÃ¶nig ç«™åœ¨æ—è¾¹ç´§å¼ å¾—æ‰‹éƒ½ä¸çŸ¥é“å¾€å“ªæ”¾ã€‚"
                }
            ]
        },

        // 2. Ghost çš„æ¿€å…‰ç„å‡† (å®‰å…¨æ„Ÿ)
        ghost_laser_dot: {
            text: "ä¸€åå–é†‰çš„é—¹äº‹è€…æ­£åœ¨æŸœå°å‰å¤§å¼å¤§å«ï¼Œè¯•å›¾èµ–è´¦ã€‚çªç„¶ï¼Œä¸€ä¸ªçº¢è‰²çš„æ¿€å…‰çº¢ç‚¹é™é™åœ°åœåœ¨äº†é‚£ä¸ªé†‰æ±‰çš„çœ‰å¿ƒä¸Šã€‚\nä½ å¾€çª—å¤–çœ‹å»ï¼ŒGhost åœ¨è¿œå¤„çš„åºŸå¢Ÿé¡¶ä¸Šå‘ä½ æ¯”äº†ä¸ªæ‰‹åŠ¿ã€‚",
            speaker: "System",
            type: "event",
            options: [
                {
                    text: "å†·å†·åœ°è¯·é†‰æ±‰ç¦»å¼€",
                    desc: "ç‹å‡è™å¨",
                    effect: s => {
                        s.chars.ghost.aff += 3;
                        addShopRating(4.0, true); // é¡¾å®¢è§‰å¾—ä½ å¾ˆæœ‰èƒŒæ™¯
                    },
                    result: "é†‰æ±‰çœ‹åˆ°äº†èº«ä¸Šçš„çº¢ç‚¹ï¼Œç¬é—´é†’é…’ï¼Œå“å¾—å±æ»šå°¿æµåœ°è·‘äº†ã€‚"
                },
                {
                    text: "å‘çª—å¤–æŒ¥æ‰‹è‡´è°¢",
                    desc: "æ„Ÿè°¢ä»–çš„å®ˆæŠ¤",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                    },
                    result: "çº¢ç‚¹æ¶ˆå¤±äº†ã€‚æ— çº¿ç”µé‡Œä¼ æ¥ä¸€å£°éš¾ä»¥å¯Ÿè§‰çš„è½»ç¬‘ã€‚"
                }
            ]
        },

        // 3. Krueger çš„è‚ƒé™ (å¨æ…‘åŠ›)
        krueger_silence: {
            text: "åº—é‡Œå‡ ä¸ªæµæ°“æ­£åœ¨å¤§å£°å–§å“—ï¼Œéªšæ‰°å…¶ä»–å®¢äººã€‚è¿™æ—¶ Krueger æ¨é—¨è€Œå…¥ï¼Œä»–æ²¡æœ‰è¯´è¯ï¼Œåªæ˜¯å†·å†·åœ°æ‰«è§†äº†ä¸€åœˆã€‚\nåº—é‡Œç¬é—´å®‰é™å¾—è¿é’ˆæ‰åœ¨åœ°ä¸Šçš„å£°éŸ³éƒ½èƒ½å¬è§ã€‚",
            speaker: "System",
            type: "event",
            options: [
                {
                    text: "é€ä»–ä¸€ç“¶æ°´ä½œä¸ºæ„Ÿè°¢",
                    desc: "ä»–å¸®ä½ ç»´æŠ¤äº†ç§©åº (-$10)",
                    condition: s => s.money >= 10,
                    effect: s => {
                        s.money -= 10;
                        s.chars.krueger.aff += 4;
                        addShopRating(4.5, true); // é¡¾å®¢å–œæ¬¢å®‰é™çš„ç¯å¢ƒ
                    },
                    result: "Krueger æ¥è¿‡æ°´ï¼Œé åœ¨è§’è½é‡Œã€‚é‚£äº›æµæ°“å¤§æ°”éƒ½ä¸æ•¢å‡ºï¼Œç°æºœæºœåœ°ç»“è´¦èµ°äº†ã€‚"
                },
                {
                    text: "è¶æœºå‘æµæ°“æ¨é”€é«˜ä»·ä¿é™©",
                    desc: "åˆ©ç”¨ææƒ§è¥é”€",
                    effect: s => {
                        s.money += 100;
                        s.rep_chimera += 2;
                    },
                    result: "æµæ°“ä»¬ä¸ºäº†å°½å¿«ç¦»å¼€ï¼Œèƒ¡ä¹±ä¹°äº†ä¸€å †ä¸œè¥¿ã€‚Krueger ä¼¼ä¹å¯¹æ­¤æ„Ÿåˆ°å¥½ç¬‘ã€‚"
                }
            ]
        },

// ğŸŸ¢ 4. è”åˆå›½æ•‘æ´è½¦é˜Ÿ (ä½ä»·è¿›è´§ - ä¿®å¤ç‰ˆ)
        un_convoy: {
            text: "ä¸€æ”¯è”åˆå›½çš„æ•‘æ´è½¦é˜Ÿè·¯è¿‡ï¼ŒæŒ‡æŒ¥å®˜è¡¨ç¤ºä»–ä»¬æœ‰å¤šä½™çš„ç‰©èµ„ï¼Œæ„¿æ„ä½ä»·å¤„ç†ç»™å½“åœ°å•†å®¶ã€‚",
            speaker: "UN Officer",
            options: [
                {
                    text: "æ”¶è´­åŒ»ç–—åŒ… (5ä¸ª/$150)",
                    desc: "æä½æˆæœ¬è¿›è´§",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        s.medkit += 5;
                        log("ä½ä»·æ”¶è´­äº† 5 ä¸ªåŒ»ç–—åŒ…", 'gain');
                    },
                    result: "è¿™æ‰¹è´§æˆè‰²å¾ˆæ–°ï¼Œè½¬æ‰‹èƒ½èµšä¸å°‘ã€‚"
                },
                {
                    text: "æ”¶è´­å‹ç¼©é¥¼å¹² (10ä¸ª/$100)",
                    desc: "å›¤ç§¯é£Ÿç‰©çš„å¥½æœºä¼š",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        s.food += 10;
                        log("ä½ä»·æ”¶è´­äº† 10 ä»½é£Ÿç‰©", 'gain');
                    },
                    result: "è™½ç„¶å‘³é“åƒåš¼èœ¡ï¼Œä½†åœ¨è¿™åœ°æ–¹èƒ½æ•‘å‘½ã€‚"
                },
                // âœ… æ–°å¢ï¼šä¿åº•é€‰é¡¹ï¼Œé˜²æ­¢æ²¡é’±æ—¶å¡æ­»
                {
                    text: "ä¸éœ€è¦",
                    desc: "ç¦»å¼€äº¤æ˜“",
                    result: "ä½ å‘è½¦é˜ŸæŒ¥æ‰‹å‘Šåˆ«ï¼Œä»–ä»¬ç»§ç»­å‰å¾€ä¸‹ä¸€ä¸ªæ®ç‚¹ã€‚"
                }
            ]
        }, // <--- è®°å¾—æ£€æŸ¥é€—å·

        // 5. é¼ æ‚£å±æœº (åº“å­˜æŸå¤±)
        rat_infestation: {
            text: "è¯¥æ­»ï¼æ˜¨æ™šå¿˜äº†å…³ç´§ä»“åº“é—¨ï¼Œå‡ åªå˜å¼‚çš„è€é¼ é’»äº†è¿›å»ï¼Œå’¬åäº†ä¸å°‘ä¸œè¥¿ã€‚",
            type: "alert",
            options: [
                {
                    text: "æ¸…ç†å—æŸç‰©èµ„",
                    desc: "æŸå¤±éƒ¨åˆ†é£Ÿç‰©",
                    effect: s => {
                        if(s.food > 0) {
                            const loss = rng(2, 4);
                            s.food = Math.max(0, s.food - loss);
                            log(`è€é¼ åƒæ‰äº† ${loss} ä»½é£Ÿç‰©`, 'loss');
                        } else {
                            printMsg("å¹¸å¥½æ²¡åƒçš„ï¼Œè€é¼ é¥¿ç€è‚šå­èµ°äº†ã€‚", 'system');
                        }
                    },
                    result: "ä½ èŠ±äº†ä¸€ä¸Šåˆæ‰“æ‰«å«ç”Ÿï¼Œæ¶å¿ƒåäº†ã€‚"
                },
                {
                    text: "è®¾æ³•æŠŠè€é¼ è‚‰åšæˆ...?",
                    desc: "è·å¾—... 'è‚‰' (+2 Food, ä½†å¯èƒ½æ‰è¯„åˆ†)",
                    effect: s => {
                        s.food += 2;
                        addShopRating(2.0, false); // è¢«å‘ç°äº†è‚¯å®šå·®è¯„
                        printMsg("è¿™æœ‰ç‚¹ä¸é“å¾·... ä½†è¿™æ˜¯æœ«ä¸–ã€‚", 'system');
                    },
                    result: "ä½ æŠŠ'è‚‰'æ··è¿›äº†ç½å¤´é‡Œã€‚å¸Œæœ›æ²¡äººåƒå‡ºæ¥ã€‚"
                }
            ]
        },

        // 6. åœç”µäº‹æ•… (è®¾æ–½æ•…éšœ)
        power_outage: {
            text: "å‘ç”µæœºçš„å—¡å—¡å£°çªç„¶åœæ­¢äº†ã€‚åº—é“ºé™·å…¥äº†ä¸€ç‰‡æ¼†é»‘ã€‚æ²¡æœ‰ç”µï¼Œå†·è—æŸœé‡Œçš„è¯å“å¯èƒ½ä¼šå¤±æ•ˆã€‚",
            type: "alert",
            options: [
                {
                    text: "ç‡ƒçƒ§ç‡ƒæ²¹ç´§æ€¥å‘ç”µ (-$100)",
                    desc: "è´­ä¹°é«˜ä»·ç‡ƒæ²¹ç»´æŒç”µåŠ›",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        log("æ”¯ä»˜ç‡ƒæ²¹è´¹ç»´æŒç”µåŠ›", 'loss');
                    },
                    result: "ç¯é‡æ–°äº®äº†èµ·æ¥ï¼Œç‰©èµ„ä¿ä½äº†ã€‚"
                },
                {
                    text: "å¬å¤©ç”±å‘½",
                    desc: "å¯èƒ½æŸå¤±åŒ»ç–—åŒ…",
                    effect: s => {
                        if(s.medkit > 0 && chance(50)) {
                            s.medkit--;
                            printMsg("æ¸©åº¦å‡é«˜å¯¼è‡´ 1 ä¸ªåŒ»ç–—åŒ…å¤±æ•ˆäº†ã€‚", 'loss');
                        }
                    },
                    result: "æˆ‘ä»¬åœ¨é»‘æš—ä¸­åº¦è¿‡äº†ä¸€å¤©ã€‚"
                }
            ]
        },

// 7. èµ°å¤±çš„å†›çŠ¬ (æ„å¤–æ”¶è·)
        lost_dog: {
            text: "ä¸€åªæˆ´ç€æˆ˜æœ¯é¡¹åœˆçš„å¾·å›½ç‰§ç¾ŠçŠ¬è·‘è¿›äº†åº—é‡Œï¼Œçœ‹èµ·æ¥æ˜¯å’Œä¸»äººèµ°æ•£äº†ã€‚å®ƒå˜´é‡Œå¼ç€ä¸€ä¸ªè¢‹å­ã€‚",
            type: "event",
            options: [
                {
                    text: "å–‚å®ƒç‚¹åƒçš„ (-1 Food)",
                    desc: "å®ƒä¼šæŠŠè¢‹å­ç»™ä½ ",
                    condition: s => s.food >= 1,
                    effect: s => {
                        // ã€ä¿®æ­£ã€‘ç‰©èµ„æ·»åŠ ä¸èƒ½è¶…è¿‡ä»“åº“ä¸Šé™
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        const ammoGain = Math.min(5, cap - s.ammo);
                        
                        s.food--;
                        s.ammo += ammoGain; 
                        
                        if (ammoGain > 0) {
                             printMsg(`ç‹—ç‹—å¼€å¿ƒåœ°åƒäº†ä¸œè¥¿ï¼Œç•™ä¸‹äº†å˜´é‡Œçš„å¼¹è¯è¢‹ (+${ammoGain} Ammo)ã€‚`, 'gain');
                        } else {
                            printMsg("ç‹—ç‹—å¼€å¿ƒåœ°åƒäº†ä¸œè¥¿ï¼Œä½†å¼¹è¯è¢‹å› ä»“åº“å·²æ»¡è¢«æ”¾å¼ƒã€‚", 'system');
                        }
                    },
                    result: "å®ƒæ‘‡ç€å°¾å·´è·‘èµ°äº†ï¼Œè¿™ç¬”äº¤æ˜“å¾ˆåˆ’ç®—ã€‚"
                },
                {
                    text: "æŸ¥çœ‹é¡¹åœˆä¸Šçš„å½’å±",
                    desc: "è”ç³»å¤±ä¸» (+å£°æœ›)",
                    effect: s => {
                        const faction = ['rep_141', 'rep_kortac'][rng(0,1)];
                        State[faction] += 5;
                        printMsg(`è¿™æ˜¯ ${faction === 'rep_141' ? 'TF141' : 'KorTac'} çš„å†›çŠ¬ã€‚å¯¹æ–¹å¾ˆæ„Ÿæ¿€ä½ ã€‚`, 'gain');
                    },
                    result: "ä¸€æ”¯å°é˜Ÿå¾ˆå¿«è¿‡æ¥é¢†èµ°äº†ç‹—ã€‚"
                }
            ]
        },

        // 8. è¡—å¤´åº†ç¥æ´»åŠ¨ (å¿ƒæƒ…/AP)
        street_festival: {
            text: "éš¾å¾—çš„åœç«æ—¥ï¼å¤–é¢çš„å¹¸å­˜è€…ä»¬è‡ªå‘ç»„ç»‡äº†ä¸€åœºå°å‹åº†ç¥æ´»åŠ¨ï¼Œæœ‰äººåœ¨çƒ¤è‚‰ï¼Œæœ‰äººåœ¨å¼¹å‰ä»–ã€‚",
            type: "event",
            options: [
                    {
                    text: "å…³åº—å»å‚åŠ  (æ¶ˆè€— 1 AP)",
                    desc: "æ”¾æ¾èº«å¿ƒï¼Œå…¨é˜µè¥å¥½æ„Ÿå¾®å‡",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        // ğŸŸ¢ ã€ä¿®å¤ã€‘è¡¥ä¸Š Ghosts
                        s.rep_141 += 2; s.rep_kortac += 2; s.rep_chimera += 2; s.rep_ghosts += 2;
                        
                        s.rating = Math.min(5.0, s.rating + 0.1); 
                        log("åº¦è¿‡äº†æ„‰å¿«çš„ä¸€å¤©", 'gain');
                    },
                    result: "ä¹…è¿çš„éŸ³ä¹å’Œå•¤é…’ã€‚ä½ æ„Ÿè§‰å……æ»¡å¹²åŠ²ã€‚"
                },
                {
                    text: "è¶æœºå‘äººç¾¤æ¨é”€",
                    desc: "èµšé’±çš„å¥½æœºä¼š",
                    effect: s => {
                        const profit = rng(100, 200);
                        s.money += profit;
                        log(`æ‘†æ‘Šè·åˆ© $${profit}`, 'gain');
                    },
                    result: "è™½ç„¶æ²¡ç©æˆï¼Œä½†èµšå¾—ç›†æ»¡é’µæ»¡ã€‚"
                }
            ]
        },
// --- ã€æ–°å¢ã€‘ä¸–ç•Œè§‚ä¸ç»è¥é£é™©äº‹ä»¶ ---

        // 16. KorTac å æ¯æ— äººæœºé›¶ä»¶ (é«˜ä»·å€¼å‘ç°)
        kortac_tech_loot: {
            text: "ä½ åœ¨åº—åçš„åºŸå¢Ÿé‡Œå‘ç°äº†ä¸€æ¶ KorTac ä¾¦å¯Ÿæ— äººæœºçš„æ®‹éª¸ã€‚é‡Œé¢çš„æ ¸å¿ƒèŠ¯ç‰‡çœ‹èµ·æ¥ä»·å€¼ä¸è²ã€‚",
            type: "event",
            options: [
                {
                    text: "æ‹†å¸èŠ¯ç‰‡ (-1 AP)",
                    desc: "é«˜ä»·å‡ºå”®ç»™é»‘å¸‚",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const gain = rng(400, 700);
                        s.money += gain;
                        s.rep_kortac -= 5; // KorTac ä¼šå‘ç°é›¶ä»¶ä¸¢å¤±
                        log(`å‡ºå”® KorTac èŠ¯ç‰‡è·åˆ© $${gain}`, 'gain');
                    },
                    result: "ä½ æˆåŠŸå–ä¸‹äº†èŠ¯ç‰‡ï¼Œä½†äº‹å KorTac çš„äººçœ‹èµ·æ¥å¾ˆä¸é«˜å…´ã€‚"
                },
                {
                    text: "å½’è¿˜ç»™ KorTac",
                    desc: "è·å¾—å£°æœ›ï¼Œä½†å¤±å»ç°é‡‘",
                    effect: s => {
                        s.rep_kortac += 10;
                    },
                    result: "KorTac å¯¹ä½ çš„ä¸­ç«‹è¡Œä¸ºè¡¨ç¤ºæ»¡æ„ã€‚"
                }
            ]
        },

// 17. Ghost çš„ç§˜å¯†è¡¥ç»™ (Affection äº’åŠ¨)
        ghost_secret_drop: {
            text: "ä½ æ‰“å¼€ä»“åº“ï¼Œå‘ç°äº†ä¸€ä¸ªé™Œç”Ÿçš„é»‘è‰²å¼¹è¯ç®±ã€‚é‡Œé¢æœ‰ä¸€å¼ å†™ç€â€˜åˆ«å£°å¼ â€™çš„çº¸æ¡ã€‚ä½ çŒœè¿™å¯èƒ½æ˜¯ Ghost ç•™ä¸‹çš„ã€‚",
            type: "event",
            options: [
                {
                    text: "æ”¶ä¸‹è¿™ä»½ç¤¼ç‰©",
                    desc: "è·å¾—ç‰©èµ„å’Œå¥½æ„Ÿ",
                    effect: s => {
                        // ã€ä¿®æ­£ã€‘ç‰©èµ„æ·»åŠ ä¸èƒ½è¶…è¿‡ä»“åº“ä¸Šé™
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        
                        // è®¡ç®—å¼¹è¯å’ŒåŒ»ç–—åŒ…çš„å®é™…å¢é‡
                        const ammoGain = Math.min(10, cap - s.ammo);
                        const medGain = Math.min(1, cap - s.medkit);
                        
                        s.ammo += ammoGain;
                        s.medkit += medGain;
                        s.chars.ghost.aff += 5;
                        
                        // è®°å½•æ—¥å¿—å’Œåé¦ˆ
                        let msg = `Ghost ç§˜å¯†ç©ºæŠ•äº†ç‰©èµ„ (+${ammoGain} Ammo, +${medGain} Medkit)`;
                        if (ammoGain < 10 || medGain < 1) {
                            msg += " (ä»“åº“å·²æ»¡ï¼Œéƒ¨åˆ†ç‰©èµ„è¢«æ”¾å¼ƒ)";
                            printMsg("å¼¹è¯ç®±é‡Œçš„ç‰©èµ„å› ä¸ºä½ çš„ä»“åº“ç©ºé—´ä¸è¶³ï¼Œæ— æ³•å®Œå…¨æ”¶çº³ã€‚", 'warn');
                        }
                        log(msg, 'gain');
                    },
                    result: "å¼¹è¯ç®±é‡Œè£…æ»¡äº†ç¨€æœ‰å¼¹è¯å’ŒåŒ»ç–—ç”¨å“ã€‚è¿™è®©ä½ æ„Ÿåˆ°å®‰å¿ƒã€‚"
                }
            ]
        },

        // 18. KÃ¶nig çš„å¹½é—­ææƒ§ç—‡ (Affection äº’åŠ¨)
        konig_phobia_trigger: {
            text: "KÃ¶nig è¯•å›¾é€šè¿‡åæ–¹çš„å‚¨ç‰©èµ°å»Šï¼Œä½†èµ°å»Šå¤ªçª„ï¼Œä»–çªç„¶å‘¼å¸æ€¥ä¿ƒï¼ŒåŒæ‰‹æŠ±å¤´ï¼Œé™·å…¥äº†ææ…Œã€‚\nâ€œå¤ª... å¤ªæŒ¤äº†ï¼æˆ‘å–˜ä¸è¿‡æ°”ï¼â€",
            speaker: "KÃ¶nig",
            type: "alert",
            options: [
                {
                    text: "å¼•å¯¼ä»–å‰å¾€å®½æ•åŒºåŸŸ",
                    desc: "å¸®ä»–è„±ç¦»ææ…Œ",
                    effect: s => {
                        s.chars.konig.aff += 10;
                        printMsg("KÃ¶nig è·Ÿç€ä½ çš„æŒ‡å¼•èµ°åˆ°äº†å®¤å¤–ï¼Œå¤§å£å–˜æ°”ã€‚â€œè°¢è°¢... è°¢ä½ ï¼Œ{PLAYER}ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "KÃ¶nig æ¢å¤äº†å†·é™ï¼Œä»–çœ‹èµ·æ¥å¾ˆæ„Ÿæ¿€ä½ æ²¡æœ‰å˜²ç¬‘ä»–ã€‚"
                },
                {
                    text: "æ— è§†ä»–ï¼Œè®©ä»–è‡ªå·±å†·é™",
                    desc: "ä»–å¯èƒ½ä¼šå—ä¼¤æˆ–æ„¤æ€’",
                    effect: s => {
                        s.chars.konig.aff -= 5;
                    },
                    result: "KÃ¶nig æœ€ç»ˆé è‡ªå·±çš„åŠ›é‡ç¦»å¼€äº†ï¼Œä½†è„¸è‰²éå¸¸éš¾çœ‹ã€‚"
                }
            ]
        },

        // 19. Chimera çš„æ‹›å‹Ÿè¯·æ±‚ (é˜µè¥é€‰æ‹©)
        chimera_recruiter: {
            text: "ä¸€å Chimera çš„è”ç»œå®˜å‘ä½ æŠ›å‡ºäº†æ©„æ¦„æã€‚\nâ€œå‡­ä½ çš„ç»è¥èƒ½åŠ›ï¼Œåº”è¯¥åŠ å…¥æˆ‘ä»¬ã€‚æˆ‘ä»¬ä¼šç»™ä½ ä¸°åšçš„å›æŠ¥ï¼Œä½†ä½ å¿…é¡»åœæ­¢å¯¹ TF141 çš„ä¸€åˆ‡æ´åŠ©ã€‚â€",
            speaker: "Chimera Agent",
            options: [
                {
                    text: "ç­”åº”åŠ å…¥ (é£é™©)",
                    desc: "è·å¾—é‡‘é’±ï¼Œä½† TF141 å£°æœ›å¤§è·Œ",
                    effect: s => {
                        s.money += 500;
                        s.rep_141 -= 20;
                        s.rep_chimera += 10;
                        log("æ¥å— Chimera æ‹›å‹Ÿè·å¾— $500", 'gain');
                    },
                    result: "ä½ è·å¾—äº† Chimera çš„ 'å†…éƒ¨ä»·'ï¼Œä½†ä½ çŸ¥é“å·²ç»æ— æ³•å›å¤´äº†ã€‚"
                },
                {
                    text: "æ‹’ç»ï¼Œä¿æŒä¸­ç«‹",
                    desc: "TF141 å£°æœ›å¾®å‡",
                    effect: s => {
                        s.rep_141 += 5;
                        s.rep_chimera -= 2;
                    },
                    result: "â€œçœŸé—æ†¾ã€‚â€ è”ç»œå®˜è€¸è€¸è‚©ï¼Œè­¦å‘Šä½ ä¸è¦æ³„å¯†ã€‚"
                }
            ]
        },

        // 20. å‡å¸æµé€š (ç»è¥é£é™©)
        counterfeit_currency: {
            text: "ä½ å‘ç°æœ€è¿‘æ”¶åˆ°çš„å‡ å¼ é’ç¥¨æ‰‹æ„Ÿä¸å¯¹ï¼Œä»”ç»†æ£€æŸ¥åç¡®è®¤æ˜¯å‡å¸ï¼ä½ å¿…é¡»æƒ³åŠæ³•å¤„ç†å®ƒä»¬ã€‚",
            type: "alert",
            options: [
                {
                    text: "ç§ä¸‹é”€æ¯ (æŸå¤± $100)",
                    desc: "é¿å…é£é™©ï¼Œä½†æŸå¤±ç°é‡‘",
                    effect: s => {
                        s.money -= 100;
                        log("é”€æ¯å‡å¸ï¼ŒæŸå¤± $100", 'loss');
                    },
                    result: "ä½ å°†å‡å¸çƒ§æ¯äº†ã€‚å®‰å…¨ç¬¬ä¸€ã€‚"
                },
                {
                    text: "è¯•å›¾æ‰¾æœºä¼šèŠ±æ‰",
                    desc: "é«˜é£é™©ï¼Œå¯èƒ½æ‹›è‡´å·®è¯„å’Œç½šæ¬¾",
                    effect: s => {
                        if (chance(40)) {
                            s.money += 200; // æˆåŠŸèŠ±æ‰
                            log("æˆåŠŸèŠ±æ‰å‡å¸è·åˆ© $200", 'gain');
                        } else {
                            s.money -= 50; // è¢«å‘ç°
                            addShopRating(1.0, false);
                            log("è¯•å›¾ä½¿ç”¨å‡å¸è¢«ç½šæ¬¾ $50", 'loss');
                        }
                    },
                    result: "ä½ å†³å®šæä¸€æŠŠã€‚"
                }
            ]
        },

// 21. ç¥ç§˜çš„æ­¦å™¨èµ ç¤¼ - [å·²ä¿®å¤ï¼šé˜²çˆ†ä»“]
        weapon_gift: {
            text: "ä½ æ‰“å¼€åº—é—¨ï¼Œå‘ç°é—¨å£æ”¾ç€ä¸€æŠŠå´­æ–°çš„çªå‡»æ­¥æªï¼Œæ—è¾¹æœ‰ä¸€å¼ çº¸æ¡ï¼šâ€˜æ„Ÿè°¢ä½ ä¸Šæ¬¡çš„å¸®åŠ©ã€‚â€”â€” Mâ€™",
            type: "event",
            options: [
                {
                    text: "æ”¶ä¸‹æ­¦å™¨",
                    desc: "è·å¾—å¼¹è¯å’Œå£°æœ›",
                    effect: s => {
                        // ğŸŸ¢ é˜²çˆ†ä»“
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        s.ammo = Math.min(cap, s.ammo + 15);
                        
                        s.rep_141 += 5; 
                        log("æ”¶åˆ°ç§˜å¯†ç¤¼ç‰©ï¼Œå¼¹è¯+15", 'gain');
                    },
                    result: "è¿™æŠŠæªçš„åšå·¥æå¥½ï¼Œå¼¹è¯å……è¶³ã€‚"
                }
            ]
        },


        // 22. ç«äº‰å¯¹æ‰‹çš„å¨èƒ (è¯„åˆ†/é˜²å¾¡)
        rival_threat: {
            text: "ä¸€ä¸ªä¿¡å°è¢«å¡è¿›äº†ä½ çš„é—¨ç¼ã€‚é‡Œé¢æ˜¯ä¸€å¼ æ‰‹å†™çš„å¨èƒä¿¡ï¼Œè¦æ±‚ä½ åœæ­¢åœ¨è¥¿åŒºæ‰©å¼ ï¼Œå¦åˆ™å°† 'æ•™è®­' ä½ ã€‚",
            type: "alert",
            options: [
                {
                    text: "åŠ å¼ºé˜²å« (-$150)",
                    desc: "èŠ±é’±é›‡ä½£å®‰ä¿",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        log("é›‡ä½£é¢å¤–å®‰ä¿", 'loss');
                    },
                    result: "ä½ é›‡ä½£äº†ä¸¤ä¸ªé€€å½¹å£«å…µåœ¨å‘¨å›´å·¡é€»ã€‚å¨èƒæš‚æ—¶è§£é™¤ã€‚"
                },
                {
                    text: "ä½å¤´ç¤ºå¼± (æ‰è¯„åˆ†)",
                    desc: "æ”¾å¼ƒéƒ¨åˆ†å¸‚åœº",
                    effect: s => {
                        addShopRating(2.5, false);
                    },
                    result: "ä½ æŒ‚å‡ºäº† 'åªæœåŠ¡è€é¡¾å®¢' çš„ç‰Œå­ï¼ŒæŸå¤±äº†ä¸€éƒ¨åˆ†æ–°å®¢æˆ·ã€‚"
                }
            ]
        },

        // 23. Faction æ‰¹é‡ç‡ƒæ²¹è®¢å• (ç‰©èµ„äº¤æ˜“)
        faction_bulk_fuel: {
            text: "KorTac çš„åå‹¤äººå‘˜æ€¥éœ€å¤§é‡çš„ç‡ƒæ–™è¡¥ç»™ä»–ä»¬çš„è½½å…·ï¼Œä»–ä»¬ä»¥é«˜å‡ºåŸä»· 50% çš„ä»·æ ¼æ”¶è´­ä½ çš„æ‰€æœ‰å†›ç²®ã€‚",
            speaker: "KorTac QM",
            options: [
                {
                    text: "å…¨éƒ¨å‡ºå”® (æ¸…ç©ºé£Ÿç‰©)",
                    desc: "å·¨é¢åˆ©æ¶¦ï¼Œæ¸…ç©ºåº“å­˜",
                    condition: s => s.food >= 1,
                    effect: s => {
                        const profit = s.food * CONFIG.sell_price.food * 1.5;
                        s.money += profit;
                        s.food = 0;
                        s.rep_kortac += 10;
                        log(`æ‰¹é‡ç‡ƒæ²¹è®¢å•è·åˆ© $${profit}`, 'gain');
                    },
                    result: "KorTac æ„Ÿè°¢ä½ çš„å¸®åŠ©ï¼Œå¹¶è¿…é€Ÿæ‹–èµ°äº†æ‰€æœ‰çš„é£Ÿç‰©ã€‚"
                },
                {
                    text: "æ‹’ç»ï¼Œç•™ç€è‡ªç”¨",
                    result: "åå‹¤äººå‘˜å¤±æœ›åœ°èµ°äº†ã€‚ä½ å®ˆä½äº†é£Ÿç‰©ï¼Œä½†é”™å¤±äº†èµšé’±æœºä¼šã€‚"
                }
            ]
        },

        // 24. ç§˜å¯†é€šé“å‘ç° (è®¾æ–½å‡çº§)
        tunnel_discovery: {
            text: "ä»“åº“çš„å¢™å£ä¸‹å‡ºç°äº†ä¸€é“è£‚ç¼ï¼Œä½ æ’¬å¼€åå‘ç°ä¸€ä¸ªé€šå¾€åŸå¸‚åœ°ä¸‹ç½‘ç»œçš„ç§˜å¯†é€šé“ï¼",
            type: "event",
            options: [
                {
                    text: "æ¢ç´¢åœ°ä¸‹ç½‘ç»œ (-1 AP)",
                    desc: "é«˜é£é™©ï¼Œé«˜æ”¶ç›Š",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const loot = rng(200, 400);
                        s.money += loot;
                        s.rep_chimera += 5; // Chimera å¯èƒ½æ§åˆ¶åœ°ä¸‹ç½‘ç»œ
                        log(`æ¢ç´¢åœ°ä¸‹é€šé“è·åˆ© $${loot}`, 'gain');
                    },
                    result: "ä½ å‘ç°äº†è®¸å¤šè¢«é—å¼ƒçš„ç‰©èµ„å’Œè¢« Chimera æ ‡è®°è¿‡çš„å®‰å…¨å±‹ã€‚"
                },
                {
                    text: "å°æ­»é€šé“",
                    desc: "å®‰å…¨ç¬¬ä¸€",
                    result: "ä½ ç”¨æ°´æ³¥å’ŒçŸ³å—å½»åº•å°æ­»äº†é€šé“ã€‚è™½ç„¶å®‰å…¨äº†ï¼Œä½†æœ‰ç‚¹å¯æƒœã€‚"
                }
            ]
        },

        // 25. å¸‚åœºå´©ç›˜è°£è¨€ (ç­–ç•¥)
        market_crash_rumor: {
            text: "çªç„¶æœ‰ä¼ è¨€è¯´å½“åœ°çš„é»‘å¸‚å³å°†è¢«æ¸…å‰¿ï¼Œæ‰€æœ‰ç‰©èµ„çš„ä»·æ ¼å°†åœ¨æ˜å¤©æš´è·Œ 80%ï¼",
            type: "alert",
            options: [
                {
                    text: "ç«‹å³æŠ›å”®æ‰€æœ‰åº“å­˜ (-1 AP)",
                    desc: "å°†æ‰€æœ‰ç‰©èµ„æŒ‰åŠä»·å–å‡º",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const totalValue = (s.medkit * CONFIG.sell_price.medkit + s.food * CONFIG.sell_price.food + s.ammo * CONFIG.sell_price.ammo) / 2;
                        s.money += totalValue;
                        s.medkit = 0; s.food = 0; s.ammo = 0;
                        log(`ææ…Œæ€§æŠ›å”®ï¼Œå›ç¬¼èµ„é‡‘ $${totalValue}`, 'gain');
                    },
                    result: "ä½ è¿…é€Ÿæ¸…ç©ºäº†ä»“åº“ï¼Œä½†å¿ƒæœ‰ä½™æ‚¸ã€‚å¸Œæœ›è°£è¨€æ˜¯çœŸçš„ã€‚"
                },
                {
                    text: "ç›¸ä¿¡æ˜¯è°£è¨€",
                    desc: "ç•™ç€åº“å­˜",
                    result: "ä½ èµŒå®šè¿™æ˜¯æœ‰äººæ•…æ„æ”¾å‡ºçš„å‡æ¶ˆæ¯ã€‚"
                }
            ]
        },

        // 9. æ‹¾è’è€…çš„è—å®å›¾ (æ¢ç´¢Buff)
        treasure_map: {
            text: "ä¸€ä¸ªå¿«è¦æ–­æ°”çš„æ‹¾è’è€…å¡ç»™ä½ ä¸€å¼ çš±å·´å·´çš„çº¸æ¡ã€‚â€œæˆ‘åœ¨é‚£è¾¹... è—äº†å®è´... ç»™... ç»™ä½ äº†...â€",
            speaker: "Dying Scavenger",
            options: [
                {
                    text: "ç«‹å³å»æ¢ç´¢ (æ¶ˆè€— 1 AP)",
                    desc: "å¿…å¾—é«˜é¢å›æŠ¥",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const loot = rng(300, 500);
                        s.money += loot;
                        s.medkit += 2;
                        log(`æŒ–æ˜å®è—è·å¾— $${loot} å’Œç‰©èµ„`, 'gain');
                    },
                    result: "æŒ‰ç…§åœ°å›¾æŒ‡å¼•ï¼Œä½ åœ¨ä¸€ä¸ªåºŸå¼ƒæ²¹æ¡¶ä¸‹æ‰¾åˆ°äº†ä»–çš„èƒŒåŒ…ï¼"
                },
                {
                    text: "æ²¡ç©ºç†ä¼š",
                    result: "ä¹Ÿè®¸æ˜¯é™·é˜±ï¼Œè¿˜æ˜¯å°å¿ƒä¸ºå¦™ã€‚ä½ æ‰”æ‰äº†çº¸æ¡ã€‚"
                }
            ]
        },
// 26. æ‰‘å…‹ç‰Œå±€ (èµŒåšå°æ¸¸æˆ)
        poker_night: {
            text: "å‡ åä¼‘ç­çš„å£«å…µæ­£åœ¨è§’è½é‡Œç©å¾·å·æ‰‘å…‹ã€‚çœ‹åˆ°ä½ èµ°è¿‡æ¥ï¼Œå…¶ä¸­ä¸€äººæŒ¥äº†æŒ¥æ‰‹é‡Œçš„é’ç¥¨ã€‚\nâ€œå˜¿è€æ¿ï¼Œè¦ä¸è¦æ¥ä¸€æŠŠï¼Ÿç›²æ³¨ $50ï¼Œèµ¢å®¶é€šåƒã€‚â€",
            speaker: "Soldier",
            options: [
                {
                    text: "åŠ å…¥ç‰Œå±€ (-$50)",
                    desc: "è¿æ°”æ¸¸æˆ (èƒœç‡ 40%)",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        if (chance(40)) {
                            const pool = rng(150, 300);
                            s.money += pool;
                            log(`ç‰Œå±€å¤§èƒœï¼èµ¢å– $${pool}`, 'gain');
                            printMsg("ä½ çš„åŒèŠ±é¡ºé€šæ€å…¨åœºï¼å£«å…µä»¬è™½ç„¶è¾“äº†é’±ï¼Œä½†å¯¹ä½ çš„ç‰ŒæŠ€èµä¸ç»å£ã€‚", 'gain');
                        } else {
                            log("ç‰Œå±€è¾“äº† $50", 'loss');
                            printMsg("è¿æ°”ä¸ä½³ï¼Œä½ çš„ä¸¤å¯¹è¾“ç»™äº†å¯¹é¢çš„è‘«èŠ¦ã€‚ä¸‹æ¬¡å†æ¥å§ã€‚", 'alert');
                        }
                    },
                    result: "ä½ åä¸Šäº†ç‰Œæ¡Œï¼Œæ°”æ°›çƒ­çƒˆã€‚"
                },
                {
                    text: "å©‰æ‹’",
                    result: "â€œæˆ‘ä¸èµŒåšï¼Œåªåšç”Ÿæ„ã€‚â€ ä½ ç¤¼è²Œåœ°æ‹’ç»äº†ã€‚"
                }
            ]
        },

        // 27. ç”Ÿæ—¥æ„¿æœ› (æ¸©æƒ…)
        soldier_birthday: {
            text: "ä¸€åå¹´è½»çš„åˆ—å…µåœ¨è´§æ¶å‰å¾˜å¾Šäº†å¾ˆä¹…ï¼Œç¥æƒ…è½å¯ã€‚\nâ€œä»Šå¤©æ˜¯æˆ‘ 20 å²ç”Ÿæ—¥... ä½†æˆ‘æƒ³ä¸èµ·è›‹ç³•çš„å‘³é“äº†ã€‚ä½ æœ‰å“ªæ€•ä¸€ç‚¹ç‚¹ç”œçš„ä¸œè¥¿å—ï¼Ÿâ€",
            speaker: "Private",
            options: [
                {
                    text: "é€ä»–ä¸€ç½æ°´æœç½å¤´ (-1 Food)",
                    desc: "ç¥ä»–ç”Ÿæ—¥å¿«ä¹",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.rep_141 += 5; // å‡è®¾ä»–æ˜¯ 141 çš„æ–°å…µ
                        s.rating = Math.min(5.0, s.rating + 0.1);
                        log("æ»¡è¶³äº†æ–°å…µçš„æ„¿æœ›", 'gain');
                    },
                    result: "ä»–æƒŠå–œåœ°æ¥è¿‡ç½å¤´ï¼Œçœ¼çœ¶çº¢äº†ã€‚â€œè°¢è°¢ï¼è¿™æ˜¯æˆ‘æ”¶åˆ°æœ€å¥½çš„ç¤¼ç‰©ï¼â€"
                },
                {
                    text: "æ¨èä»–ä¹°å‹ç¼©é¥¼å¹²",
                    desc: "æ­£å¸¸äº¤æ˜“",
                    result: "ä»–å¹äº†å£æ°”ï¼Œä¹°äº†ä¸€å—ç¡¬é‚¦é‚¦çš„é¥¼å¹²ï¼Œé»˜é»˜åœ°ååœ¨è§’è½å•ƒç€ã€‚"
                }
            ]
        },

        // 28. å€Ÿç”¨å±‹é¡¶ (é˜µè¥ååŠ©)
        sniper_request: {
            text: "æ— çº¿ç”µé‡Œä¼ æ¥ä¸€ä¸ªå†°å†·çš„å£°éŸ³ï¼šâ€œè¿™é‡Œæ˜¯ 141 ç‹™å‡»å°ç»„ï¼Œä½ çš„åº—é“ºå±‹é¡¶è§†é‡æä½³ï¼Œæˆ‘ä»¬éœ€è¦å€Ÿç”¨ 1 å°æ—¶è¿›è¡Œè§‚æµ‹ï¼Œæ˜¯å¦å…è®¸ï¼Ÿâ€",
            speaker: "Sniper (Radio)",
            options: [
                {
                    text: "å…è®¸è¿›å…¥",
                    desc: "TF141 å¥½æ„Ÿâ†‘ï¼Œä½†å¯èƒ½æƒŠæ‰°é¡¾å®¢",
                    effect: s => {
                        s.rep_141 += 8;
                        if (chance(30)) {
                            addShopRating(3.0, true); // é¡¾å®¢æ„Ÿåˆ°ä¸å®‰
                            printMsg("é¡¾å®¢ä»¬å¬åˆ°å±‹é¡¶çš„è„šæ­¥å£°æœ‰äº›ç´§å¼ ï¼Œä½†æ²¡å‡ºä¹±å­ã€‚", 'system');
                        } else {
                            printMsg("ç‹™å‡»æ‰‹éå¸¸ä¸“ä¸šï¼Œç”šè‡³æ²¡äººå‘ç°ä»–åœ¨ä¸Šé¢ã€‚", 'gain');
                        }
                    },
                    result: "â€œæ”¶åˆ°ã€‚æˆ‘ä»¬ä¼šä¿æŒå®‰é™ã€‚å®Œæ¯•ã€‚â€"
                },
                {
                    text: "æ‹’ç»",
                    desc: "è¿™é‡Œæ˜¯ä¸­ç«‹åŒºåŸŸ",
                    effect: s => {
                        s.rep_141 -= 2;
                    },
                    result: "â€œ...æ˜ç™½äº†ã€‚æˆ‘ä»¬å¯»æ‰¾å…¶ä»–ç‚¹ä½ã€‚å®Œæ¯•ã€‚â€"
                }
            ]
        },

        // 29. é»‘å¸‚æ‹å–ä¼š (è¿›è´§æœºä¼š)
        black_market_invite: {
            text: "ä½ æ”¶åˆ°äº†ä¸€æ¡åŠ å¯†çŸ­ä¿¡ï¼š\nã€ä»Šæ™šåœ¨ B åŒºä¸¾è¡Œåœ°ä¸‹æ‹å–ã€‚æœ‰ä¸€æ‰¹æ— ä¸»çš„é«˜çˆ†æ‰‹é›·ã€‚ä¸€å£ä»· $300ï¼Œè¦ä¸è¦ï¼Ÿã€",
            type: "event",
            options: [
                {
                    text: "å‚ä¸ç«æ‹ (-$300)",
                    desc: "è·å¾—å¤§é‡å¼¹è¯",
                    condition: s => s.money >= 300,
                    effect: s => {
                        s.money -= 300;
                        const ammoGain = rng(15, 25);
                        s.ammo += ammoGain;
                        log(`æ‹å–è·å¾— ${ammoGain} å¼¹è¯`, 'gain');
                    },
                    result: "äº¤æ˜“å¾ˆé¡ºåˆ©ï¼Œè¿™æ‰¹è´§æˆè‰²å¾ˆæ–°ï¼Œç»å¯¹ç‰©è¶…æ‰€å€¼ã€‚"
                },
                {
                    text: "å¿½ç•¥çŸ­ä¿¡",
                    result: "ä½ åˆ é™¤äº†çŸ­ä¿¡ã€‚å¤šä¸€äº‹ä¸å¦‚å°‘ä¸€äº‹ã€‚"
                }
            ]
        },

// 30. æŸåçš„å¤–éª¨éª¼ (å·²ä¿®å¤ï¼šå¢åŠ ç¦»å¼€é€‰é¡¹)
        broken_exosuit: {
            text: "ä¸€åä½£å…µæ‹–ç€æ²‰é‡çš„æœºæ¢°è…¿æŒªè¿›åº—é‡Œï¼Œä»–çš„å¤–éª¨éª¼ä¼ºæœç”µæœºåœ¨å†’çƒŸã€‚\nâ€œè¿™è¯¥æ­»çš„ç ´çƒ‚å¡ä½äº†ï¼è€æ¿ï¼Œä½ æœ‰æ¶¦æ»‘æ²¹æˆ–è€…å·¥å…·å—ï¼Ÿæˆ‘åŠ¨ä¸äº†äº†ï¼â€",
            speaker: "Mercenary",
            options: [
                {
                    text: "å¸®å¿™ç»´ä¿® (æ¶ˆè€— 1 AP)",
                    desc: "è·å¾—é«˜é¢æŠ¥é…¬",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const reward = rng(100, 150);
                        s.money += reward;
                        log(`ç»´ä¿®å¤–éª¨éª¼è·åˆ© $${reward}`, 'gain');
                    },
                    result: "ä½ æ‹†å¼€å¤–å£³ï¼Œé‡æ–°æ¥é©³äº†çº¿è·¯ã€‚æœºæ¢°è…¿é‡æ–°è¿ä½œäº†ã€‚â€œæ‰‹è‰ºä¸é”™ï¼è¿™æ˜¯ç»™ä½ çš„ã€‚â€"
                },
                {
                    text: "å–ç»™ä»–ä¸€ç“¶æ²¹ (-1 Ammo)",
                    desc: "ç”¨æªæ²¹å‡‘åˆä¸€ä¸‹",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        s.money += 50;
                    },
                    result: "ä»–å€’äº†ä¸€æ•´ç“¶æ²¹è¿›å»ï¼Œå‹‰å¼ºèƒ½èµ°äº†ã€‚â€œè°¢äº†ï¼Œå¸Œæœ›èƒ½æ’‘åˆ°åŸºåœ°ã€‚â€"
                },
                // ã€æ–°å¢ã€‘ä¿åº•é€‰é¡¹ï¼Œé˜²æ­¢å¡æ­»
                {
                    text: "çˆ±è«èƒ½åŠ©",
                    desc: "æ²¡æœ‰ä»»ä½•å·¥å…·",
                    result: "ä½£å…µå¹äº†å£æ°”ï¼šâ€œå€’éœ‰é€é¡¶ã€‚â€ ä»–åªèƒ½æ‹–ç€æ²‰é‡çš„è…¿æ…¢æ…¢æŒªäº†å‡ºå»ã€‚"
                }
            ]
        },

// 36. åœ°ä¸‹é»‘å¸‚å†›ç« (å¤§é¢è¿›è´§) - [å·²ä¿®å¤ï¼šé˜²çˆ†ä»“]
        black_market_arms: {
            text: "ä¸€è¾†æ²¡æœ‰ä»»ä½•æ ‡è¯†çš„å¡è½¦åœåœ¨åé—¨ã€‚å¸æœºè¯´ä»–æœ‰ä¸€æ‰¹è¢«â€˜æ³¨é”€â€™çš„å¼¹è¯ï¼Œé‡å¤§ä»ä¼˜ã€‚\nâ€œä¸€å£ä»· $2000ï¼Œç»™ä½  50 ç®±å¼¹è¯ã€‚è¿™å¯æ˜¯ 0.5 æŠ˜ã€‚â€",
            speaker: "Smuggler",
            options: [
                {
                    text: "å…¨éƒ¨åƒä¸‹ (-$2000)",
                    desc: "è·å¾— 50 Ammo (ä»“åº“å·²æ»¡åˆ™ä¸¢å¼ƒå¤šä½™)",
                    condition: s => s.money >= 2000,
                    effect: s => {
                        s.money -= 2000;
                        // ğŸŸ¢ è·å–å½“å‰ä¸Šé™ (åŒ…å« KÃ¶nig åŠ æˆ)
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        // ğŸŸ¢ è®¡ç®—å®é™…èƒ½åŠ å¤šå°‘
                        const addAmount = Math.min(50, cap - s.ammo);
                        
                        if (addAmount > 0) {
                            s.ammo += addAmount;
                            log(`é»‘å¸‚é‡‡è´­: +${addAmount} Ammo`, 'gain');
                        } else {
                            printMsg("ä½ ä¹°ä¸‹äº†è´§ï¼Œä½†ä»“åº“å®åœ¨å¡ä¸ä¸‹äº†ï¼Œåªèƒ½å¿ç—›æ‰”æ‰ã€‚", 'alert');
                        }
                    },
                    result: "ä½ è¿…é€Ÿå®Œæˆäº†äº¤æ˜“ã€‚è¿™æ‰¹è´§è¶³å¤Ÿä½ å–å¾ˆä¹…äº†ã€‚"
                },
                {
                    text: "èµ„é‡‘ä¸è¶³ / ä¸éœ€è¦",
                    result: "å¸æœºè€¸è€¸è‚©ï¼šâ€œé‚£æˆ‘å»é—®é—®éš”å£ã€‚â€ å¡è½¦å¼€èµ°äº†ã€‚"
                }
            ]
        },

        // 37. ç´§æ€¥æ‰‹æœ¯éœ€æ±‚ (å¤§é¢å”®å‡º)
        urgent_surgery: {
            text: "å‡ åæµ‘èº«æ˜¯è¡€çš„å£«å…µæŠ¬ç€æ‹…æ¶å†²è¿›æ¥ï¼Œä¸Šé¢èººç€ä¸€ä½é‡è¦äººç‰©ã€‚\nâ€œæˆ‘ä»¬éœ€è¦å¤§é‡æŠ—ç”Ÿç´ å’Œæ­¢è¡€å‰‚ï¼ç°åœ¨å°±è¦ï¼ç»™ä½  $3000ï¼Œä¹°ä½  10 ä¸ªåŒ»ç–—åŒ…ï¼â€",
            speaker: "Medic",
            options: [
                {
                    text: "ç«‹åˆ»æä¾› (-10 Medkit)",
                    desc: "æ•‘äººä¸”æš´å¯Œ (+$3000)",
                    condition: s => s.medkit >= 10,
                    effect: s => {
                        s.medkit -= 10;
                        s.money += 3000;
                        s.rep_141 += 10; // æ•‘äº†é‡è¦äººç‰©
                        log("ç´§æ€¥å”®å‡ºåŒ»ç–—åŒ…è·åˆ© $3000", 'gain');
                    },
                    result: "ä»–ä»¬æ‹¿äº†è¯å°±å¼€å§‹ç°åœºæ€¥æ•‘ã€‚â€œä½ æ•‘äº†é•¿å®˜çš„å‘½ï¼æˆ‘ä»¬ä¸ä¼šå¿˜è®°çš„ï¼â€"
                },
                {
                    text: "åº“å­˜ä¸è¶³",
                    desc: "æ— æ³•æ»¡è¶³éœ€æ±‚",
                    result: "â€œè¯¥æ­»ï¼å»ä¸‹ä¸€ä¸ªæ®ç‚¹ï¼â€ ä»–ä»¬æŠ¬ç€ä¼¤å‘˜åŒ†å¿™ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // 38. è±ªèµŒè½®ç›˜ (æç«¯é£é™©)
        russian_roulette: {
            text: "ä¸€ä¸ªç–¯ç–¯ç™«ç™«çš„è€å…µååœ¨ä½ çš„åº—é‡Œï¼Œä»–åœ¨å·¦è½®æ‰‹æªé‡Œå¡äº†ä¸€é¢—å­å¼¹ï¼Œæ‹åœ¨æ¡Œä¸Šã€‚\nâ€œæ•¢ä¸æ•¢ç©ï¼Ÿä½ èµ¢äº†ï¼Œæˆ‘ç»™ä½  $5000ã€‚ä½ è¾“äº†ï¼Œç»™æˆ‘ $2000ã€‚â€ (èƒœç‡ 5/6)",
            speaker: "Crazy Vet",
            options: [
                {
                    text: "å’Œä»–èµŒï¼(-$2000 æˆ– +$5000)",
                    desc: "è¾“äº†ä¼šè‡ªåŠ¨æ‰£æ¬¾ï¼Œæåº¦å±é™©",
                    condition: s => s.money >= 2000,
                    effect: s => {
                        // 1/6 æ¦‚ç‡è¾“
                        if (chance(16.6)) {
                            s.money -= 2000;
                            printMsg("å’”å“’â€”â€”å˜­ï¼\nå¥½å§ï¼Œæ²¡æ‰“ä¸­ä½ ï¼Œä½†ä»–åˆ¤ä½ è¾“äº†ã€‚ä½ ä¹–ä¹–æäº†é’±ä¿å‘½ã€‚", 'alert');
                            log("èµŒåšæƒ¨è´¥æŸå¤± $2000", 'loss');
                        } else {
                            s.money += 5000;
                            printMsg("å’”å“’ã€‚\nç©ºæªã€‚è€å…µå¤§ç¬‘ç€æ‰”ä¸‹ä¸€å¤§æ†é’ç¥¨ï¼šâ€œå¥½èƒ†é‡ï¼å½’ä½ äº†ï¼â€", 'gain');
                            log("è±ªèµŒèµ¢å– $5000", 'gain');
                        }
                    },
                    result: "ä½ æ‹¿èµ·äº†æªï¼Œæ‰‹å¿ƒå…¨æ˜¯æ±—..."
                },
                {
                    text: "æŠŠæªæ”¶èµ°",
                    desc: "æ‹’ç»ç–¯å­",
                    result: "ä½ æ²¡æ”¶äº†ä»–çš„æªï¼ŒæŠŠä»–èµ¶äº†å‡ºå»ã€‚è¿™é‡Œä¸æ˜¯èµŒåœºã€‚"
                }
            ]
        },

// 39. æˆ˜åŒºåº—é“ºæ‰©å»º (æŠ•èµ„ - ä¿®å¤ç‰ˆ)
        store_expansion: {
            text: "ä¸€é˜Ÿå·¥ç¨‹å…µè·¯è¿‡ï¼Œè¡¨ç¤ºå¦‚æœç»™å¤Ÿé’±ï¼Œå¯ä»¥å¸®ä½ æ‰©å»ºåœ°ä¸‹æ©ä½“ï¼Œæ°¸ä¹…å¢åŠ å®‰å…¨æ€§æˆ–ä»“åº“å®¹é‡ã€‚\nâ€œåªè¦ $4000ï¼Œæˆ‘ä»¬èƒ½æŠŠè¿™é‡Œå»ºæˆå ¡å’ã€‚â€",
            speaker: "Engineer",
            options: [
                {
                    text: "æ‰©å»ºä»“åº“ (-$4000)",
                    desc: "ç«‹å³å‡ 1 çº§ä»“åº“",
                    // ğŸŸ¢ ä¿®å¤ï¼šå¢åŠ äº† && s.lvl_store < CONFIG.capacity_tiers.length
                    // åªæœ‰é’±å¤Ÿ ä¸” è¿˜æ²¡æ»¡çº§ æ—¶ï¼ŒæŒ‰é’®æ‰äº®
                    condition: s => s.money >= 4000 && s.lvl_store < CONFIG.capacity_tiers.length,
                    effect: s => {
                        s.money -= 4000;
                        s.lvl_store++;
                        log("æ–¥å·¨èµ„æ‰©å»ºäº†ä»“åº“", 'gain');
                    },
                    result: "ç»è¿‡ä¸€æ•´å¤©çš„æ–½å·¥ï¼Œä½ çš„ä»“åº“ç©ºé—´å¤§å¹…æå‡äº†ï¼"
                },
                {
                    text: "å¤ªè´µäº† / å·²æ»¡çº§",
                    result: "â€œå¥½å§ï¼Œå¦‚æœä½ æ”¹å˜ä¸»æ„äº†éšæ—¶å‘¼å«æˆ‘ä»¬ã€‚â€"
                }
            ]
        },

        // 40. ç»ç‰ˆè‰ºæœ¯å“ (æ”¶è—/å€’å–)
        rare_painting: {
            text: "ä¸€ä¸ªè½é­„çš„è´µæ—æƒ³ç”¨ä¸€å¹…æ²¹ç”»æ¢å–ç°é‡‘é€ƒç¦»æˆ˜åŒºã€‚\nâ€œè¿™æ˜¯çœŸè¿¹ï¼æˆ˜å‰ä»·å€¼è¿åŸï¼ç°åœ¨åªè¦ $1500... æ±‚ä½ äº†ã€‚â€",
            speaker: "Noble",
            options: [
                {
                    text: "ä¹°ä¸‹ç”»ä½œ (-$1500)",
                    desc: "èµŒå®ƒæœªæ¥èƒ½å‡å€¼",
                    condition: s => s.money >= 1500,
                    effect: s => {
                        s.money -= 1500;
                        // 50% å‡ ç‡æ˜¯çœŸè¿¹ï¼Œå¯ä»¥å–ç»™ç¥ç§˜å•†äººæˆ–æ”¶è—å®¶
                        if (chance(50)) {
                            s.money += 4000; // è‡ªåŠ¨è½¬æ‰‹ç»™æ”¶è—å®¶
                            printMsg("ä½ è½¬æ‰‹è”ç³»äº†ä¸€ä¸ªæ”¶è—å®¶ï¼Œå¯¹æ–¹é‰´å®šä¸ºçœŸè¿¹ï¼Œå‡ºä»· $4000 æ”¶è´­ï¼", 'gain');
                            log("å€’å–è‰ºæœ¯å“è·åˆ©", 'gain');
                        } else {
                            printMsg("åæ¥ä½ æ‰¾äººé‰´å®šäº†ä¸€ä¸‹... æ˜¯èµå“ã€‚åªå€¼ $50ã€‚", 'loss');
                        }
                    },
                    result: "ä½ ä¹°ä¸‹äº†è¿™å¹…ç”»ã€‚"
                },
                {
                    text: "ä¸æ„Ÿå…´è¶£",
                    result: "è´µæ—å¤±æœ›åœ°æŠ±ç€ç”»èµ°äº†ã€‚"
                }
            ]
        },

        // 41. ä¿æŠ¤è´¹å±æœº (å¤§é¢å‹’ç´¢)
        cartel_extortion: {
            text: "è¿™æ¬¡æ¥çš„ä¸æ˜¯å°æ··æ··ï¼Œè€Œæ˜¯è£…å¤‡ç²¾è‰¯çš„çŠ¯ç½ªé›†å›¢æ­¦è£…ã€‚\nâ€œå¬è¯´ä½ èµšäº†ä¸å°‘ã€‚äº¤å‡º $3000 â€˜ç‰¹åˆ«ç¨â€™ï¼Œæˆ–è€…æˆ‘ä»¬ç°åœ¨å°±çƒ§äº†ä½ çš„åº—ã€‚â€",
            speaker: "Cartel Boss",
            type: "alert",
            options: [
                {
                    text: "ç ´è´¢å…ç¾ (-$3000)",
                    desc: "æåº¦è‚‰ç–¼ï¼Œä½†ä¿å¹³å®‰",
                    condition: s => s.money >= 3000,
                    effect: s => {
                        s.money -= 3000;
                        log("è¢«çŠ¯ç½ªé›†å›¢å‹’ç´¢ $3000", 'loss');
                    },
                    result: "ä»–ä»¬æ‹¿äº†é’±ï¼Œåœ¨ä½ é—¨å£å–·äº†ä¸ªâ€˜å·²ä»˜â€™çš„æ ‡è®°ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "æ‹’ç»/æ²¡é’±",
                    desc: "æ‰¿å—æŸå¤± (éšæœºæ‰£é™¤ç‰©èµ„å’Œè¯„åˆ†)",
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 1.0);
                        s.medkit = Math.max(0, s.medkit - 5);
                        s.food = Math.max(0, s.food - 5);
                        printMsg("ä»–ä»¬è™½ç„¶æ²¡çƒ§åº—ï¼Œä½†ç ¸åäº†è´§æ¶å¹¶æŠ¢èµ°äº†ä¸€éƒ¨åˆ†ç‰©èµ„ã€‚", 'alert');
                        log("é­åˆ°æš´åŠ›æ´—åŠ«", 'loss');
                    },
                    result: "ä½ æ‹’ç»äº†å‹’ç´¢ï¼Œåœºé¢ä¸€åº¦éå¸¸æš´åŠ›ã€‚"
                }
            ]
        },

        // 42. é»„é‡‘æ¢é£Ÿç‰© (ç‰¹æ®Šäº¤æ˜“)
        gold_exchange: {
            text: "ä¸€ä¸ªéš¾æ°‘æ‹¿å‡ºä¸€æ¡æ²‰ç”¸ç”¸çš„é‡‘é¡¹é“¾ã€‚\nâ€œæˆ‘ä¸æƒ³è¦é’±ï¼Œé’±æ˜¯åºŸçº¸ã€‚æˆ‘è¦åƒçš„ã€‚ç»™æˆ‘ 20 ä»½å†›ç²®ï¼Œè¿™é‡‘å­å½’ä½ ã€‚â€",
            speaker: "Refugee",
            options: [
                {
                    text: "æˆäº¤ (-20 Food)",
                    desc: "é‡‘å­å¯æ¢å– $2500",
                    condition: s => s.food >= 20,
                    effect: s => {
                        s.food -= 20;
                        s.money += 2500;
                        log("ç”¨é£Ÿç‰©æ¢å–äº†é»„é‡‘", 'gain');
                    },
                    result: "éš¾æ°‘æŠ±ç€é£Ÿç‰©åƒæ©ä¸‡è°¢åœ°èµ°äº†ã€‚ä½ æŠŠé‡‘é¡¹é“¾å–ç»™äº†é»‘å¸‚ï¼Œå¤§èµšä¸€ç¬”ã€‚"
                },
                {
                    text: "é£Ÿç‰©ä¸å¤Ÿ/ä¸æ¢",
                    result: "éš¾æ°‘å¹äº†å£æ°”ï¼Œç»§ç»­å»å¯»æ‰¾ä¸‹ä¸€å®¶åº—ã€‚"
                }
            ]
        },

        // 43. é›‡ä½£å…µçš„èµé‡‘ (æ•‘äºº)
        hostage_situation: {
            text: "ä½ æ”¶åˆ°ä¸€å¼ ç…§ç‰‡ï¼Œæ˜¯ä½ çš„ä¸€ä½è€é¡¾å®¢è¢«ç»‘æ¶äº†ã€‚\nâ€œ$2000 èµé‡‘ï¼Œæ”¾åå··åƒåœ¾æ¡¶é‡Œã€‚åˆ«è€èŠ±æ ·ã€‚â€",
            type: "event",
            options: [
                {
                    text: "æ”¯ä»˜èµé‡‘ (-$2000)",
                    desc: "è·å¾—å¤§é‡å¥½è¯„å’Œå£°æœ›",
                    condition: s => s.money >= 2000,
                    effect: s => {
                        s.money -= 2000;
                        addShopRating(5.0, true);
                        addShopRating(5.0, true); // è¿ç»­å¥½è¯„
                        s.rep_141 += 10;
                        log("æ”¯ä»˜èµé‡‘æ•‘å›äº†é¡¾å®¢", 'loss');
                    },
                    result: "é¡¾å®¢ç¬¬äºŒå¤©å¹³å®‰å›æ¥äº†ï¼Œæ•´ä¸ªè¡—åŒºéƒ½åœ¨ä¼ é¢‚ä½ çš„ä¹‰ä¸¾ã€‚"
                },
                {
                    text: "æ— è§†",
                    desc: "ä½ ä¸æ˜¯è­¦å¯Ÿ",
                    result: "ä½ çƒ§æ‰äº†ç…§ç‰‡ã€‚åœ¨è¿™ä¸–é“ï¼Œè¿™ç§äº‹æ¯å¤©éƒ½åœ¨å‘ç”Ÿã€‚"
                }
            ]
        },

        // 44. åºŸå¼ƒæœåŠ¡å™¨ (æ•°æ®æŒ–æ˜)
        server_data: {
            text: "æœ‰äººæ‹–æ¥ä¸€å°ä»é“¶è¡ŒåºŸå¢ŸæŒ–å‡ºæ¥çš„æœåŠ¡å™¨ä¸»æœºã€‚\nâ€œè¿™ç©æ„å„¿è¿˜èƒ½é€šç”µã€‚ä½†æˆ‘æ²¡æœ‰å¯†ç ã€‚$500 å–ä½ ï¼Œä½ è¦ä¸è¦ç¢°ç¢°è¿æ°”ï¼Ÿâ€",
            speaker: "Scavenger",
            options: [
                {
                    text: "ä¹°ä¸‹ä¸»æœº (-$500)",
                    desc: "æ¶ˆè€— 1 AP ç ´è§£ï¼Œå¯èƒ½åŒ…å«åŠ å¯†è´§å¸",
                    condition: s => s.money >= 500 && s.ap > 0,
                    effect: s => {
                        s.money -= 500;
                        s.ap--;
                        if (chance(50)) {
                            const crypto = rng(2000, 5000);
                            s.money += crypto;
                            printMsg(`ç ´è§£æˆåŠŸï¼é‡Œé¢æœ‰æ—§ä¸–ç•Œçš„åŠ å¯†è´§å¸è´¦æˆ·ï¼Œä»·å€¼ $${crypto}ï¼`, 'gain');
                            log("æ•°æ®æŒ–æ˜æš´å¯Œ", 'gain');
                        } else {
                            printMsg("ç ´è§£å¤±è´¥... ç¡¬ç›˜æ˜¯åçš„ã€‚ä½ ç™½èŠ±äº† $500ã€‚", 'loss');
                        }
                    },
                    result: "ä½ æ¥ä¸Šç”µæºï¼Œå¼€å§‹å°è¯•ç ´è§£..."
                },
                {
                    text: "ä¸ä¹°",
                    result: "ç”µå­åƒåœ¾è€Œå·²ã€‚ä½ æ‘†æ‘†æ‰‹æ‹’ç»äº†ã€‚"
                }
            ]
        },
// ğŸŸ¢ 1. å£«å…µæŠ±æ€¨å†›ç²® (æ—¥å¸¸äº’åŠ¨)
        food_complaint: {
            text: "ä¸€å KorTac çš„æ–°å…µè¶´åœ¨æŸœå°ä¸Šå‘ç‰¢éªšï¼Œçœ‹èµ·æ¥é¢å¦‚èœè‰²ï¼š\nâ€œè€æ¿ï¼Œæˆ‘çœŸçš„åƒä¸ä¸‹é‚£äº›åƒç –å¤´ä¸€æ ·çš„å†›ç²®äº†... ä½ èƒ½ä¸èƒ½è¡Œè¡Œå¥½ï¼Œç»™æˆ‘æ•´ç‚¹äººç±»åƒçš„é£Ÿç‰©ï¼Ÿâ€",
            speaker: "KorTac Rookie",
            type: "dialogue",
            options: [
                {
                    text: "ç»™ä»–ä¸€ä»½çœŸæ­£çš„é£Ÿç‰© (-1 Food)",
                    desc: "å®‰æŠšä»–çš„èƒƒ (+è¯„åˆ†)",
                    condition: s => s.food >= 1, // æ²¡é£Ÿç‰©æ—¶å˜ç°
                    effect: s => {
                        s.food--;
                        addShopRating(5.0, true);
                        s.rep_kortac += 2;
                        printMsg("æ–°å…µæ„ŸåŠ¨å¾—å·®ç‚¹å“­äº†ï¼šâ€œè¿™æ˜¯æˆ‘è¿™å‘¨åƒè¿‡æœ€å¥½çš„ä¸œè¥¿ï¼æˆ‘ä¼šå‘Šè¯‰æˆ˜å‹ä»¬ä½ æ˜¯ä¸ªå¥½äººï¼â€", 'dialogue', 'Rookie');
                    },
                    result: "ä½ è·å¾—äº†ä¸€ä¸ªå¿ å®çš„é¡¾å®¢ã€‚"
                },
                {
                    text: "æ— è§†ä»–",
                    desc: "ç»§ç»­æ“¦æ‹­æŸœå°",
                    result: "æ–°å…µå¹äº†å£æ°”ï¼šâ€œå¥½å§ï¼Œçœ‹æ¥åªèƒ½ç»§ç»­å•ƒç –å¤´äº†ã€‚â€ ä»–å¤±æœ›åœ°ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "å˜²è®½ä»–ï¼šâ€œè¿™å¯æ˜¯ä¸ºäº†é”»ç‚¼ä½ çš„ç‰™å£â€",
                    desc: "è™½ç„¶æœ‰ç‚¹ç¼ºå¾·ï¼Œä½†å¾ˆæœ‰è¶£",
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 0.1); // è¯„åˆ†å¾®é™
                        printMsg("æ–°å…µç¿»äº†ä¸ªç™½çœ¼ï¼šâ€œä½ çœŸå¹½é»˜ï¼Œè€æ¿ï¼Œå¸Œæœ›ä½ ç‰™é½¿ä¹Ÿè¿™ä¹ˆå¥½ã€‚â€", 'dialogue', 'Rookie');
                    },
                    result: "å‘¨å›´çš„ä½£å…µå¬åˆ°äº†éƒ½ç¬‘å‡ºäº†å£°ï¼Œè™½ç„¶æœ‰ç‚¹æŸï¼Œä½†æ´»è·ƒäº†æ°”æ°›ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 2. ä¾¿æºæ·‹æµ´å™¨åæ‰ (é˜µè¥å£°æœ›)
        broken_shower: {
            text: "ä¸€å TF141 çš„å·¥å…µæ»¡å¤´å¤§æ±—åœ°å†²è¿›æ¥ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€ä¸ªæ‹†æ•£çš„é›¶ä»¶ï¼š\nâ€œè§é¬¼ï¼Œæˆ‘ä»¬çš„ä¾¿æºæ·‹æµ´å™¨åˆåäº†ï¼æ™®è±æ–¯é˜Ÿé•¿è¿˜åœ¨ç­‰ç€æ´—æ¾¡... ä½ è¿™é‡Œæœ‰ç²¾ç»†èºä¸åˆ€å€Ÿæˆ‘ç”¨ä¸€ä¸‹å—ï¼Ÿâ€",
            speaker: "TF141 Engineer",
            type: "event",
            options: [
                {
                    text: "å€Ÿç»™ä»–å·¥å…·",
                    desc: "ä¸¾æ‰‹ä¹‹åŠ³ (+141 å£°æœ›)",
                    effect: s => {
                        s.rep_141 += 5;
                        printMsg("å·¥å…µé£å¿«åœ°ä¿®å¥½äº†è®¾å¤‡ï¼šâ€œæ•‘å¤§å‘½äº†ï¼è°¢äº†è€æ¿ï¼â€", 'gain');
                    },
                    result: "ä»–æŠŠèºä¸åˆ€è¿˜ç»™äº†ä½ ï¼Œè¿˜é¡ºæ‰‹å¸®ä½ ç´§äº†ç´§æŸœå°çš„èºä¸ã€‚"
                },
                {
                    text: "æ”¶å–å·¥å…·æŸè€—è´¹ (+$20)",
                    desc: "äº²å…„å¼Ÿæ˜ç®—è´¦",
                    effect: s => {
                        s.money += 20;
                        printMsg("å·¥å…µå˜Ÿå›”ç€ä»˜äº†é’±ï¼šâ€œè¡Œå§ï¼Œæ€»æ¯”è¢«é˜Ÿé•¿éª‚ä¸€é¡¿å¥½ã€‚â€", 'system');
                    },
                    result: "ä½ èµšäº†ä¸€ç¬”å°é’±ã€‚"
                },
                {
                    text: "è°ƒä¾ƒï¼šâ€œä½ ä»¬ä¸å¤©å¤©ç‚¸æ‰æ·‹æµ´å™¨å—ï¼Ÿâ€",
                    desc: "å®˜æ–¹åæ§½ (æ— æ”¶ç›Š)",
                    result: "å·¥å…µæ„£äº†ä¸€ä¸‹ï¼Œè‹¦ç¬‘é“ï¼šâ€œé‚£æ˜¯ Soap å¹²çš„ï¼Œä¸æ˜¯æˆ‘ï¼åˆ«æäº†ï¼â€ ä»–æ‘‡ç€å¤´è·‘äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 3. é£å¤ªå¤§ï¼Œæ‰è½ç‰©ä¹±é£ (å¹¸è¿äº‹ä»¶)
        windy_airdrop: {
            text: "å¤–é¢çš„é£å¤§å¾—å“äººã€‚çªç„¶â€œå“å½“â€ä¸€å£°å·¨å“ï¼Œä¸€ä¸ªåç¦»èˆªçº¿çš„è¡¥ç»™ç®±ç›´æ¥ç ¸åœ¨äº†ä½ çš„åº—é—¨å£ï¼ˆå¹¸å¥½æ²¡ç ¸ç©¿å±‹é¡¶ï¼‰ã€‚\nè™½ç„¶çœ‹èµ·æ¥æ˜¯ä¸ªä½çº§è¡¥ç»™ç®±ï¼Œä½†ä¾ç„¶ä¹Ÿæ˜¯è‚‰ã€‚",
            type: "event",
            options: [
                {
                    text: "æ‰“å¼€çœ‹çœ‹",
                    desc: "è·å¾—éšæœºå°‘é‡ç‰©èµ„",
                    effect: s => {
                        const lootType = ['medkit', 'food', 'ammo'][rng(0, 2)];
                        s[lootType] += rng(1, 3); // éšæœºè·å¾— 1-3 ä¸ª
                        log(`æ¡åˆ°å¤©ä¸Šæ‰çš„ ${lootType}`, 'gain');
                        printMsg(`ç®±å­è™½ç„¶æ‘”æ‰äº†ï¼Œä½†ä½ åœ¨é‡Œé¢æ‰¾åˆ°äº†äº›æœ‰ç”¨çš„ä¸œè¥¿ã€‚`, 'gain');
                    },
                    result: "ç™½æ¡çš„ç‰©èµ„æ€»æ˜¯æœ€é¦™çš„ã€‚"
                },
                {
                    text: "ä¸Šäº¤",
                    desc: "è”ç³»æœ€è¿‘çš„å·¡é€»é˜Ÿ (+è¯„åˆ†)",
                    effect: s => {
                        addShopRating(5.0, true);
                        s.rep_kortac += 3; // å‡è®¾æ˜¯ KorTac çš„è¾–åŒº
                    },
                    result: "å·¡é€»é˜Ÿå¯¹ä½ çš„æ‹¾é‡‘ä¸æ˜§è¡¨ç¤ºèµèµï¼Œå¹¶åœ¨åŒºåŸŸå¹¿æ’­é‡Œè¡¨æ‰¬äº†ä½ ã€‚"
                },
                {
                    text: "æ®ä¸ºå·±æœ‰å¹¶è—èµ·æ¥",
                    desc: "æœ‰é£é™©è¢«å‘ç°",
                    effect: s => {
                        if (chance(30)) {
                            // å¤±è´¥
                            printMsg("è¿˜æ²¡ç­‰ä½ è—å¥½ï¼Œæ— äººæœºå°±é£è¿‡æ¥äº†ã€‚ä½ è¢«è­¦å‘Šäº†ä¸€æ¬¡ã€‚", 'alert');
                            s.rep_kortac -= 5;
                        } else {
                            // æˆåŠŸ
                            s.ammo += 5;
                            s.money += 50;
                            log("ç§åç©ºæŠ•ç‰©èµ„", 'gain');
                            printMsg("ä½ åŠ¨ä½œå¾ˆå¿«ï¼ŒæŠŠé‡Œé¢çš„å­å¼¹å’Œç°é‡‘éƒ½æ‹¿èµ°äº†ã€‚", 'gain');
                        }
                    }
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 4. å·¡é€»é˜Ÿæ£€æŸ¥åº—é“º (ç»è¥é£é™©)
        chimera_patrol: {
            text: "Chimera çš„å·¡é€»å…µæ¨é—¨è€Œå…¥ï¼Œçœ¼ç¥ä¸å–„åœ°æ‰«è§†ç€ä½ çš„è´§æ¶ï¼š\nâ€œæœ€è¿‘èµ°ç§å¾ˆä¸¥é‡ï¼Œä¾‹è¡Œç›˜æŸ¥ã€‚é…åˆç‚¹ï¼Œåˆ«è®©æˆ‘ä»¬éš¾åšã€‚â€",
            speaker: "Chimera Patrol",
            type: "alert",
            options: [
                {
                    text: "è€å®é…åˆæ£€æŸ¥",
                    desc: "è·å¾—å¥½è¯„ï¼Œä½†å¦‚æœä½ æœ‰è¿ç¦å“...",
                    effect: s => {
                        addShopRating(4.5, true);
                        printMsg("â€œè¿˜ç®—å¹²å‡€ã€‚â€ ä»–ä»¬ç¿»å¾—ä¹±ä¸ƒå…«ç³Ÿåç¦»å¼€äº†ã€‚", 'system');
                    },
                    result: "è™½ç„¶åº—é‡Œè¢«å¼„ä¹±äº†ï¼Œä½†è‡³å°‘è¯æ˜äº†ä½ çš„æ¸…ç™½ã€‚"
                },
                {
                    text: "è¯•å›¾è—åŒ¿éƒ¨åˆ†é«˜ä»·å€¼ç‰©èµ„",
                    desc: "æˆåŠŸ+$100 / å¤±è´¥ç½šæ¬¾",
                    effect: s => {
                        if (chance(50)) {
                            s.money += 100; // ä¹Ÿå°±æ˜¯å°‘äº¤ç¨/å°‘æŸå¤±çš„æ„æ€
                            log("æˆåŠŸè—åŒ¿ç‰©èµ„", 'gain');
                            printMsg("ä½ ç”¨èº«ä½“æŒ¡ä½äº†ä»–ä»¬çš„è§†çº¿ï¼ŒæˆåŠŸä¿ä½äº†ä¸€ç®±å¥½è´§ã€‚", 'gain');
                        } else {
                            s.money -= 600;
                            log("è¢«å‘ç°å¹¶ç½šæ¬¾", 'loss');
                            printMsg("â€œè¿™æ˜¯ä»€ä¹ˆï¼Ÿæƒ³è€èŠ±æ ·ï¼Ÿâ€ ä½ è¢«ç‹ ç‹ ç½šäº†ä¸€ç¬”ã€‚", 'alert');
                        }
                    }
                },
                {
                    text: "ç»™å°è´¹åŠ é€Ÿç¦»å¼€ (-$500)",
                    desc: "èŠ±é’±ä¹°æ¸…å‡€",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        s.rep_chimera += 2;
                        log("è´¿èµ‚å·¡é€»é˜Ÿ", 'loss');
                    },
                    result: "å¸¦å¤´çš„å£«å…µæ”¶ä¸‹é’±ï¼Œéœ²å‡ºæ»¡æ„çš„ç¬‘å®¹ï¼šâ€œæ‡‚äº‹ã€‚æˆ‘ä»¬èµ°ã€‚â€"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 5. ä¾›è´§å•†æä»· (å¸‚åœºæ³¢åŠ¨)
        supplier_hike: {
            text: "ä½ çš„å›ºå®šä¾›è´§å•†æ•²å¼€äº†åé—¨ï¼Œä¸€è„¸æ— å¥ˆï¼š\nâ€œå¬ç€ï¼Œè·¯ä¸Šçš„å…³å¡åˆå¤šäº†ä¸¤ä¸ªï¼Œè¿è¾“æˆæœ¬æ¶¨äº†ã€‚ä»Šå¤©çš„è¿›è´§ä»·æˆ‘å¾—è°ƒé«˜ï¼Œæˆ–è€…ä½ èµåŠ©æˆ‘ç‚¹è·¯è´¹ç¨³ä½ä»·æ ¼ã€‚â€",
            speaker: "Supplier",
            options: [
                {
                    text: "æ”¯ä»˜è·¯è´¹ (-$100)",
                    desc: "ç»´æŒåŸä»·ï¼Œé¿å…å¸‚åœºæ³¢åŠ¨",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        log("æ”¯ä»˜ $100 ç¨³å®šäº†ç‰©ä»·", 'loss');
                    },
                    result: "â€œå¤Ÿæ„æ€ï¼è¿™å‘¨æˆ‘ä¿è¯ä»·æ ¼ä¸å˜ã€‚â€"
                },
                {
                    text: "æ‹’ç»æ”¯ä»˜",
                    desc: "å¯¼è‡´ç‰©èµ„è¿›è´§ä»·ä¸Šæ¶¨",
                    effect: s => {
                        // ç®€å•æ¨¡æ‹Ÿï¼šè®©æ‰€æœ‰ä¸œè¥¿è¿›è´§ä»·ä¸´æ—¶ä¸Šæ¶¨ (è¿™é‡Œç”¨æ–‡æœ¬æ¨¡æ‹Ÿï¼Œæˆ–è€…ä½ å¯ä»¥çœŸçš„å»æ”¹ CONFIGï¼Œä½†ä¸ºäº†ä»£ç å®‰å…¨ï¼Œæˆ‘ä»¬åªåšä¸€æ¬¡æ€§æ‰£é™¤æˆ–æ¶¨ä»·æ ‡è®°)
                        // æ—¢ç„¶æ˜¯ç®€å•ç‰ˆï¼Œæˆ‘ä»¬è®©è¿™æˆä¸ºä¸€ä¸ªè´Ÿé¢ Buff
                        printMsg("â€œé‚£å°±æ²¡åŠæ³•äº†ã€‚â€ ä¾›è´§å•†è€¸è€¸è‚©ã€‚", 'system');
                        // å¼ºåˆ¶æ¥ä¸‹æ¥çš„ä¸€æ¬¡è´­ä¹°å˜è´µ (æ¨¡æ‹Ÿ) -> è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ä¸ºç›´æ¥æ‰£ä¸€ç‚¹å£°æœ›æˆ–å¿ƒæƒ…
                        s.rating -= 0.1; // ç¨å¾®å½±å“ä¸€ç‚¹å¿ƒæƒ…
                        printMsg("ä½ ä¸å¾—ä¸æ¥å—äº†æ¶¨ä»·ï¼Œè¿™è®©ä½ ä»Šå¤©å¿ƒæƒ…ä¸å¤ªå¥½ã€‚", 'loss');
                    },
                    result: "ä¾›è´§å•†è°ƒé«˜äº†å•å­ä¸Šçš„ä»·æ ¼ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 6. è€å…µæ¥å–æ”¶è—å“ (æ”¶è—/äº¤æ˜“)
        veteran_coin: {
            text: "ä¸€åå¤´å‘èŠ±ç™½çš„é€€ä¼‘è€å…µè¹’è·šèµ°è¿›åº—é‡Œï¼Œé¢¤å·å·åœ°æ‹¿å‡ºä¸€æšæ—§ç¡¬å¸ï¼š\nâ€œè¿™æ˜¯æˆ‘å¹´è½»æ—¶çš„çºªå¿µå¸... æˆ‘å­™å­ç—…äº†ï¼Œæˆ‘éœ€è¦é’±ã€‚ä½ è¦å—ï¼Ÿâ€",
            speaker: "Veteran",
            type: "dialogue",
            options: [
                {
                    text: "æ”¶è´­çºªå¿µå¸ (-$100)",
                    desc: "è·å¾— 5 æšä»£å¸ (å¯ç”¨äºç›²ç›’)",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        s.gacha_coins += 5; // è¿™é‡ŒæŠŠæ”¶è—å“è½¬åŒ–ä¸ºä»£å¸ï¼Œæ¯”è¾ƒå®æƒ 
                        log("æ”¶è´­çºªå¿µå¸ (ä»£å¸+5)", 'gain');
                    },
                    result: "è€å…µæ„Ÿæ¿€åœ°æ¡ç€ä½ çš„æ‰‹ï¼Œä½ å‘ç°è¿™æšç¡¬å¸æˆè‰²ä¸é”™ï¼Œåœ¨æ”¶è—å®¶é‚£é‡Œèƒ½æ¢ä¸å°‘ä»£å¸ã€‚"
                },
                {
                    text: "ç¤¼è²Œæ‹’ç»",
                    desc: "â€œæŠ±æ­‰ï¼Œæˆ‘ä¸æ”¶è¿™ä¸ªâ€",
                    result: "è€å…µå¤±æœ›åœ°å¹äº†å£æ°”ï¼Œè½¬èº«ç¦»å¼€äº†ã€‚"
                },
                {
                    text: "ä»¥é«˜ä»·æ”¶è´­é¼“åŠ±ä»– (-$150)",
                    desc: "åšæ…ˆå–„ (+è¯„åˆ†)",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        addShopRating(5.0, true);
                        log("å–„è¡Œæ„ŸåŠ¨äº†å‘¨å›´çš„äºº", 'loss');
                    },
                    result: "ä½ å¤šç»™äº†ä»– $50ã€‚è€å…µçƒ­æ³ªç›ˆçœ¶ï¼Œå‘¨å›´çš„é¡¾å®¢éƒ½å¯¹ä½ æŠ•æ¥æ•¬ä½©çš„ç›®å…‰ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 7. ä»“åº“æ¼æ°´è­¦å‘Š (è®¾æ–½ç»´æŠ¤)
        leaky_roof: {
            text: "å¤–é¢ä¸‹ç€å¤§é›¨ï¼Œä½ çªç„¶å¬åˆ°ä»“åº“å¤©èŠ±æ¿ä¼ æ¥â€œæ»´ç­”ã€æ»´ç­”â€çš„å£°éŸ³ã€‚å¦‚æœä¸å¤„ç†ï¼Œåº“å­˜å¯èƒ½ä¼šå—æ½®ã€‚",
            type: "alert",
            options: [
                {
                    text: "ç«‹åˆ»èŠ±é’±é›‡äººä¿®ç† (-$80)",
                    desc: "ç ´è´¢å…ç¾",
                    condition: s => s.money >= 80,
                    effect: s => {
                        s.money -= 80;
                        log("ä¿®è¡¥å±‹é¡¶æ”¯å‡º", 'loss');
                    },
                    result: "ç»´ä¿®å·¥å¾ˆå¿«å°±è¡¥å¥½äº†æ¼ç‚¹ã€‚ç‰©èµ„å®‰å…¨äº†ã€‚"
                },
                {
                    text: "æ‰¾ Ghost å¸®å¿™",
                    desc: "éœ€è¦ Ghost å¥½æ„Ÿ > 40",
                    condition: s => s.chars.ghost.aff > 40,
                    effect: s => {
                        s.chars.ghost.aff += 2;
                        printMsg("Ghost çœ‹èµ·æ¥æœ‰ç‚¹æ— å¥ˆï¼Œä½†ä»–è¿˜æ˜¯çˆ¬ä¸Šæ¢¯å­ï¼Œç”¨æˆ˜æœ¯èƒ¶å¸¦å®Œç¾å°ä½äº†æ¼ç‚¹ã€‚\nâ€œè¿™èƒ¶å¸¦èƒ½é˜²çˆ†ï¼Œå µä¸ªæ°´ç»°ç»°æœ‰ä½™ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "Ghost å¸®ä½ æå®šäº†ï¼Œè€Œä¸”åˆ†æ–‡æœªå–ã€‚è¿™å°±æ˜¯ç†Ÿäººçš„å¥½å¤„ã€‚"
                },
                {
                    text: "æ‹¿ä¸ªæ¡¶æ¥ä½ (å¿½ç•¥)",
                    desc: "50% æ¦‚ç‡æŸå¤±ç‰©èµ„",
                    effect: s => {
                        if (chance(50)) {
                            const loss = rng(1, 2);
                            s.food = Math.max(0, s.food - loss);
                            log(`å±‹é¡¶æ¼æ°´å¯¼è‡´ ${loss} ä»½é£Ÿç‰©å‘éœ‰`, 'loss');
                            printMsg("é›¨æ°´è¿˜æ˜¯æº…æ¹¿äº†è´§æ¶ï¼Œä½ æŸå¤±äº†ä¸€äº›é£Ÿç‰©ã€‚", 'alert');
                        } else {
                            printMsg("è¿æ°”ä¸é”™ï¼Œé›¨åœäº†ï¼Œæ²¡æœ‰é€ æˆæŸå¤±ã€‚", 'system');
                        }
                    }
                }
            ]
        }, // <--- æœ€åä¸€ä¸ªäº‹ä»¶åé¢åŠ ä¸åŠ é€—å·éƒ½è¡Œï¼Œä½†ä¸ºäº†ä»¥åæ–¹ä¾¿å»ºè®®åŠ ä¸Š
// ğŸŸ¢ 8. è‚¥çš‚çš„...è‚¥çš‚ (å½©è›‹äº‹ä»¶)
        soap_request: {
            text: "ä¸€åè«éœå…‹å‘å‹çš„è‹æ ¼å…°å£éŸ³å£«å…µï¼ˆè™½ç„¶æˆ´ç€é¢ç½©çœ‹ä¸æ¸…è„¸ï¼‰åŒ†åŒ†è·‘æ¥ï¼š\nâ€œå˜¿ï¼ä½ è¿™æœ‰é‚£ä¸ªå—ï¼Ÿä½ çŸ¥é“çš„... ç”¨æ¥æ´—æ¾¡çš„é‚£ä¸ªä¸œè¥¿ï¼Ÿåˆ«è¯¯ä¼šï¼Œæˆ‘åˆšä»æˆ˜åœºå›æ¥...â€",
            speaker: "Scottish Soldier",
            type: "dialogue",
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€å—è‚¥çš‚ (-$100)",
                    desc: "å¦‚æœä½ æœ‰å­˜è´§ (å…¶å®æ˜¯æ‰£é’±ä¹°)",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        s.rep_141 += 5; 
                        printMsg("å£«å…µå¤§ç¬‘èµ·æ¥ï¼šâ€œå¤ªå¥½äº†ï¼è°¢äº†ï¼â€", 'dialogue', 'Soap?');
                    },
                    result: "ä»–æ‰”ä¸‹ä¸€æš TF141 çš„å¾½ç« ä½œä¸ºäº¤æ¢ï¼Œå¼€å¿ƒåœ°è·‘äº†ã€‚"
                },
                {
                    text: "â€œè¿™å¯æ˜¯æˆ˜åŒºï¼Œè°æ´—æ¾¡å•Šï¼Ÿâ€",
                    desc: "åæ§½ä»–",
                    result: "â€œè¯¥æ­»..å¯æ˜¯æˆ‘...â€ ä»–æ²®ä¸§åœ°èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·
       
        // ğŸŸ¢ 9. æš—å½±å…¬å¸çš„è·¯éšœ (é˜µè¥å†²çª - ä¿®æ”¹ç‰ˆ)
        shadow_blockade: {
            text: "Shadow Company (æš—å½±å…¬å¸) åœ¨è¡—é“å°½å¤´è®¾äº†è·¯éšœï¼Œä¸€åæŒ‡æŒ¥å®˜èµ°è¿›æ¥ï¼Œåš¼ç€å£é¦™ç³–ï¼š\nâ€œè¿™æ¡è·¯ç°åœ¨å½’ Graves æŒ‡æŒ¥å®˜ç®¡ã€‚è¦ä¹ˆäº¤ $2000 è¿‡è·¯è´¹ï¼Œè¦ä¹ˆä½ çš„è´§è½¦å°±åˆ«æƒ³è¿›æ¥è¡¥è´§ã€‚â€",
            speaker: "Shadow Merc",
            type: "alert",
            options: [
                {
                    text: "æ”¯ä»˜è¿‡è·¯è´¹ (-$2000)",
                    desc: "ç ´è´¢å…ç¾ï¼Œç»´æŒè¿›è´§æ¸ é“",
                    condition: s => s.money >= 2000,
                    effect: s => {
                        s.money -= 2000;
                        log("æ”¯ä»˜æš—å½±å…¬å¸è¿‡è·¯è´¹", 'loss');
                    },
                    result: "â€œè¿™å°±å¯¹äº†ï¼Œåšç”Ÿæ„å˜›ï¼Œå’Œæ°”ç”Ÿè´¢ã€‚â€ æŒ‡æŒ¥å®˜æ‹¿ç€é’±æŒ¥æ‰‹æ”¾è¡Œã€‚"
                },
                {
                    text: "æ‹å‡ºé»‘å¡å’Œå‹‹ç«  (åå‘å‹’ç´¢)",
                    desc: "ã€å¤§ä½¬é™å®šã€‘â€œä½ ä¹Ÿé…æ”¶æˆ‘çš„é’±ï¼Ÿâ€ (éœ€èµ„é‡‘>$5000 ä¸”ä»»æ„å£°æœ›>40)",
                    // æ¡ä»¶ï¼šæ‰‹é‡Œæœ‰å¤§é‡ç°é‡‘ï¼ˆåº•æ°”ï¼‰ ä¸” åœ¨ä»»æ„ä¸»è¦é˜µè¥æ··å¾—å¾ˆå¼€ï¼ˆäººè„‰ï¼‰
                    condition: s => s.money >= 5000 && (s.rep_141 >= 40 || s.rep_kortac >= 40 || s.rep_chimera >= 40),
                    effect: s => {
                        s.money += 1000; // åæŠ¢ä»– $1000
                        addShopRating(5.0, true); // éœ¸æ°”ä¾§æ¼ï¼Œè¯„åˆ†æ‹‰æ»¡
                        log("åå‘å‹’ç´¢æš—å½±å…¬å¸è·åˆ© $1000", 'gain');
                        printMsg("ä½ å†·ç¬‘ç€æŠŠæ˜¾ç¤ºç€å·¨é¢å­˜æ¬¾çš„ç»ˆç«¯å’Œå‡ å¤§é˜µè¥çš„â€œé€šå…³æ–‡ç‰’â€æ‹åœ¨æ¡Œä¸Šï¼Œèº«å Ghost/Krueger/KÃ¶nig/Keeganä¹Ÿé»˜é»˜äº®å‡ºäº†æ­¦å™¨ã€‚\nâ€œGraves è§äº†æˆ‘éƒ½å¾—å®¢æ°”ä¸‰åˆ†ï¼Œä½ ç®—è€å‡ ï¼ŸæŠŠä½ çš„é’±åŒ…ç•™ä¸‹ï¼Œç„¶åæ»šã€‚â€", 'gain');
                    },
                    result: "æŒ‡æŒ¥å®˜çœ‹ç€ä½ çš„èƒŒæ™¯å†·æ±—ç›´æµï¼Œä¸ä»…æ’¤äº†è·¯éšœï¼Œè¿˜ä¹–ä¹–æå‡º $1000 èµ”ç¤¼é“æ­‰ã€‚â€œæœ‰çœ¼ä¸è¯†æ³°å±±ï¼è¿™å°±æ»šï¼è¿™å°±æ»šï¼â€"
                },
                {
                    text: "æ‹’ç»æ”¯ä»˜",
                    desc: "å¯¼è‡´æ˜å¤©æ— æ³•è¿›è´§ (æ¨¡æ‹Ÿ)",
                    effect: s => {
                        printMsg("â€œæœ‰ç§ã€‚é‚£å°±ç¥ä½ å¥½è¿ã€‚â€ æŒ‡æŒ¥å®˜å†·ç¬‘ç€ç¦»å¼€äº†ã€‚", 'alert');
                        // æƒ©ç½šï¼šéšæœºå‡å°‘ä¸€ç‚¹åº“å­˜ï¼Œæ¨¡æ‹Ÿè´§è½¦è¢«æ‰£
                        const loss = rng(2, 4);
                        s.ammo = Math.max(0, s.ammo - loss);
                        log(`è´§è½¦è¢«æ‹¦æˆªï¼ŒæŸå¤± ${loss} å¼¹è¯`, 'loss');
                    },
                    result: "ä½ çš„ä¸‹ä¸€æ‰¹è¡¥ç»™æœç„¶è¢«æ‰£æŠ¼äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 10. å¥‡æ€ªçš„è‚‰ç½å¤´ (é£Ÿå“å®‰å…¨?)
        mystery_meat: {
            text: "ä¸€ä¸ªæ‹¾è’è€…åœ¨å…œå”®ä¸€ç®±æ²¡æœ‰æ ‡ç­¾çš„è‚‰ç½å¤´ï¼š\nâ€œåˆšå‡ºåœŸçš„ï¼ç»å¯¹ç¾å‘³ï¼åªè¦ $50 å…¨æ‹¿èµ°ï¼è¿™å¯æ˜¯è›‹ç™½è´¨ï¼â€ (çœ‹èµ·æ¥éå¸¸å¯ç–‘)",
            speaker: "Scavenger",
            options: [
                {
                    text: "è´ªä¾¿å®œä¹°ä¸‹ (-$50)",
                    desc: "å¯èƒ½è·å¾— 5 Foodï¼Œä¹Ÿå¯èƒ½...",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        if (chance(50)) {
                            s.food += 5;
                            printMsg("æ„å¤–åœ°è¿˜ä¸é”™ï¼Ÿä½ æŠŠå®ƒä»¬é‡æ–°è´´æ ‡ä¸Šæ¶äº†ã€‚", 'gain');
                            log("ä½ä»·ä¹°å…¥é£Ÿç‰©", 'gain');
                        } else {
                            printMsg("ä½ æ‰“å¼€ä¸€ç½... å‘•ã€‚é‡Œé¢å¥½åƒæ˜¯æŸç§å˜å¼‚ç”Ÿç‰©çš„è‚‰ã€‚å…¨æ‰”äº†ã€‚", 'alert');
                            addShopRating(1.0, false); // åº—é‡Œè‡­äº†ï¼Œæ‰£åˆ†
                        }
                    },
                    result: "è¿™æ˜¯ä¸€åœºèµŒåšã€‚"
                },
                {
                    text: "è®©ä»–æ»šè¿œç‚¹",
                    desc: "æ‹’ç»é»‘æš—æ–™ç†",
                    result: "ä½ ä¸ºäº†åº—é“ºçš„å«ç”Ÿç€æƒ³ï¼ŒæŠŠä»–èµ¶èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 11. æªæ”¯èµ°ç«æ„å¤– (åŒ»ç–—éœ€æ±‚)
        accidental_discharge: {
            text: "â€œå•Šï¼ï¼â€ åº—é‡Œä¼ æ¥ä¸€å£°æƒ¨å«ï¼Œä¸€åèœé¸Ÿä½£å…µç©å¼„æ‰‹æªæ—¶èµ°ç«æ‰“ä¸­äº†è‡ªå·±çš„å¤§è…¿ã€‚\nè¡€æµå¦‚æ³¨ï¼Œå‘¨å›´çš„é¡¾å®¢éƒ½åœ¨çœ‹ç€ä½ ã€‚",
            type: "alert",
            options: [
                {
                    text: "ç´§æ€¥åŒ…æ‰ (-1 Medkit)",
                    desc: "æ•‘äººè¦ç´§ (+è¯„åˆ†)",
                    condition: s => s.medkit >= 1,
                    effect: s => {
                        s.medkit--;
                        addShopRating(5.0, true);
                        s.money += 100; // ä»–ä¸ºäº†æ„Ÿè°¢ï¼ˆæˆ–èµ”å¿åœ°æ¿ï¼‰ç»™äº†é’±
                        log("æ²»ç–—å—ä¼¤é¡¾å®¢ (+Cash)", 'gain');
                    },
                    result: "ä½ ç†Ÿç»ƒåœ°æ­¢è¡€åŒ…æ‰ã€‚èœé¸Ÿè„¸è‰²æƒ¨ç™½åœ°ä»˜äº†é’±å’Œæ¸…æ´è´¹ã€‚"
                },
                {
                    text: "â€œåˆ«æ­»åœ¨æˆ‘åº—é‡Œï¼å‡ºå»ï¼â€",
                    desc: "å†·é…·æ— æƒ… (è¯„åˆ†ä¸å˜ï¼Œä½†æ²¡æ”¶ç›Š)",
                    result: "ä»–çš„é˜Ÿå‹æŠŠä»–æ‹–äº†å‡ºå»ã€‚åœ°ä¸Šçš„è¡€è¿¹è®©ä½ èŠ±äº†å¥½ä¹…æ‰æ“¦å¹²å‡€ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 12. å®£ä¼ è½¦å™ªéŸ³ (ç²¾ç¥æ±¡æŸ“)
        propaganda_truck: {
            text: "ä¸€è¾†æŒ‚ç€å¤§å–‡å­çš„å¡è½¦åœåœ¨é—¨å£ï¼Œå¾ªç¯æ’­æ”¾ç€åˆºè€³çš„æ‹›å‹Ÿå¹¿å‘Šå’Œæ´—è„‘éŸ³ä¹ï¼Œåµå¾—ä½ å’Œé¡¾å®¢éƒ½å¿«ç–¯äº†ã€‚",
            type: "event",
            options: [
                {
                    text: "ç²¾å‡†å°„å‡»å–‡å­ (-1 Ammo)",
                    desc: "ç‰©ç†é™éŸ³ (é¡¾å®¢ä¼šé¼“æŒ)",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        addShopRating(5.0, true); // é¡¾å®¢éå¸¸æ„Ÿæ¿€
                        printMsg("ç °ï¼ä¸–ç•Œæ¸…é™äº†ï¼Œåº—é‡Œçš„é¡¾å®¢çº·çº·ä¸ºä½ å«å¥½ã€‚", 'gain');
                    },
                    result: "å¡è½¦å¸æœºå“å¾—æ²¡æ•¢åœè½¦ï¼Œç›´æ¥å¼€èµ°äº†ã€‚"
                },
                {
                    text: "å¿å—",
                    desc: "å¿ƒæƒ…å˜å·®ï¼Œé¡¾å®¢æµå¤±",
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 0.2);
                    },
                    result: "å™ªéŸ³æŒç»­äº†ä¸€æ•´å¤©ï¼Œå¥½å‡ ä¸ªé¡¾å®¢å› ä¸ºå¤ªåµè€Œæ²¡ä¹°ä¸œè¥¿ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 13. é—å¤±çš„åŠå  (å¯»ç‰©)
        lost_pendant: {
            text: "ä¸€åå¹³æ°‘æ»¡è„¸ç„¦æ€¥åœ°åœ¨ä½ çš„åº—é—¨å£å¾˜å¾Šï¼Œä¼¼ä¹åœ¨æ‰¾ä¸œè¥¿ï¼š\nâ€œé‚£æ˜¯... é‚£æ˜¯æˆ‘äº¡å¦»çš„ç…§ç‰‡åŠå ã€‚æˆ‘å¯èƒ½æ‰åœ¨è¿™é™„è¿‘äº†ã€‚â€",
            speaker: "Civilian",
            type: "dialogue",
            options: [
                {
                    text: "å¸®ä»–ä¸€èµ·æ‰¾ (æ¶ˆè€— 1 AP)",
                    desc: "å¥½äººæœ‰å¥½æŠ¥",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.rep_141 += 3; s.rep_kortac += 3; // æ°‘å¿ƒæ‰€å‘
                        addShopRating(5.0, true);
                        printMsg("ä½ åœ¨è´§æ¶ç¼éš™é‡Œæ‰¾åˆ°äº†é‚£ä¸ªé“¶è‰²åŠå ã€‚", 'gain');
                    },
                    result: "ç”·äººæ‹¿ç€åŠå ç—›å“­æµæ¶•ï¼Œæƒ³è¦ç»™ä½ é’±ä½†ä½ æ²¡æ”¶ã€‚è¿™ä»¶äº‹ä¼ å¼€åï¼Œå¤§å®¶éƒ½è¯´ä½ æ˜¯ä¸ªå¥½äººã€‚"
                },
                {
                    text: "æ²¡ç©º",
                    desc: "å„äººè‡ªæ‰«é—¨å‰é›ª",
                    result: "ç”·äººæ‰¾äº†ä¸€ä¼šå„¿æ²¡æ‰¾åˆ°ï¼Œç»æœ›åœ°ç¦»å¼€äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 14. åœ°ä¸‹æ‹³èµ›ä¸‹æ³¨ (èµŒåš)
        fight_club_bet: {
            text: "ä»Šæ™šåå··æœ‰æ‹³èµ›ã€‚Kortac çš„â€œç¢éª¨è€…â€å¯¹é˜µ Chimera çš„â€œç–¯ç‹—â€ã€‚\nèµ”ç‡ 1:1ã€‚ä½ è¦ä¸‹æ³¨å—ï¼Ÿ",
            type: "event",
            options: [
                {
                    text: "æŠ¼â€œç¢éª¨è€…â€èµ¢ (-$100)",
                    desc: "50% èƒœç‡",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        if (chance(50)) {
                            s.money += 200;
                            log("èµŒæ‹³èµ¢äº† $200", 'gain');
                            printMsg("ç¢éª¨è€…ä¸€æ‹³KOäº†å¯¹æ‰‹ï¼ä½ èµ¢äº†ï¼", 'gain');
                        } else {
                            log("èµŒæ‹³è¾“äº†", 'loss');
                            printMsg("ç¢éª¨è€…è¢«ç–¯ç‹—å’¬ä½äº†è€³æœµ... ä»–è®¤è¾“äº†ã€‚", 'loss');
                        }
                    },
                    result: "ä¹°å®šç¦»æ‰‹ï¼"
                },
                {
                    text: "ä¸å‚ä¸èµŒåš",
                    desc: "çœé’±",
                    result: "ä½ å¬ç€åå··ä¼ æ¥çš„æ¬¢å‘¼å£°å’Œæƒ¨å«å£°ï¼Œç»§ç»­æ•°ä½ çš„é’±ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 15. ç‡ƒæ°”æ³„æ¼ (è®¾æ–½ç»´æŠ¤)
        gas_leak: {
            text: "ä½ é—»åˆ°ä¸€è‚¡åˆºé¼»çš„å‘³é“ã€‚ä¸å¥½ï¼æš–æ°”ç®¡é“å¥½åƒæ¼æ°”äº†ï¼Œå¦‚æœä¸ä¿®çš„è¯ï¼Œä»Šæ™šå¯èƒ½ä¼šå¾ˆå†·ç”šè‡³çˆ†ç‚¸ã€‚",
            type: "alert",
            options: [
                {
                    text: "è´­ä¹°é›¶ä»¶ç»´ä¿® (-$60)",
                    desc: "å®‰å…¨ç¬¬ä¸€",
                    condition: s => s.money >= 60,
                    effect: s => {
                        s.money -= 60;
                        log("ç»´ä¿®ç®¡é“æ”¯å‡º", 'loss');
                    },
                    result: "ä½ æ¢æ‰äº†è€åŒ–çš„é˜€é—¨ï¼Œå±æœºè§£é™¤ã€‚"
                },
                {
                    text: "ç”¨èƒ¶å¸¦ç¼ ä¸€ä¸‹ (æ¶ˆè€— 1 AP)",
                    desc: "å‡‘åˆä¿®ä¿®",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        if (chance(20)) { // å°æ¦‚ç‡å¤±è´¥
                            printMsg("èƒ¶å¸¦æ²¡æ’‘ä½ï¼ç®¡é“çˆ†å¼€äº†ï¼", 'alert');
                            s.money -= 100; // è¿˜æ˜¯è¦èŠ±é’±ä¿®ï¼Œè€Œä¸”æ›´è´µ
                        } else {
                            printMsg("æˆ˜æœ¯èƒ¶å¸¦ä¸‡å²ï¼æ¼æ°”æ­¢ä½äº†ã€‚", 'system');
                        }
                    },
                    result: "ä½ è´¹äº†ä¹ç‰›äºŒè™ä¹‹åŠ›æŠŠæ¼ç‚¹ç¼ æˆäº†æœ¨ä¹ƒä¼Šã€‚"
                },
                {
                    text: "æ— è§† (å±é™©)",
                    desc: "å¯èƒ½å¯¼è‡´ç«ç¾",
                    effect: s => {
                        if (chance(40)) {
                            s.medkit = Math.max(0, s.medkit - 2);
                            log("å°å‹çˆ†ç‚¸æŸæ¯äº†ç‰©èµ„", 'loss');
                            printMsg("å˜­ï¼ç®¡é“ç‚¸äº†ï¼Œå†²å‡»æ³¢éœ‡ç¢äº†ä¸¤ä¸ªè¯ç®±ã€‚", 'alert');
                        }
                    },
                    result: "ä½ æ‰“å¼€çª—æˆ·é€šé£ï¼Œç¥ˆç¥·åˆ«å‡ºäº‹ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸŸ¢ 16. æˆ˜åœ°å¿ƒç†åŒ»ç”Ÿ (å€¾å¬)
        ptsd_soldier: {
            text: "ä¸€åè€å…µååœ¨åº—é‡Œå–æ°´ï¼Œçœ¼ç¥ç©ºæ´ï¼Œçªç„¶å¼€å§‹è‡ªè¨€è‡ªè¯­ï¼Œè®²è¿°ä¸€åœºæƒ¨çƒˆçš„é­é‡æˆ˜ã€‚\nä»–ä¼¼ä¹éœ€è¦ä¸€ä¸ªå€¾å¬è€…ã€‚",
            speaker: "Veteran",
            type: "dialogue",
            options: [
                    {
                    text: "è€å¿ƒå¬ä»–è¯´å®Œ (æ¶ˆè€— 1 AP)",
                    desc: "ç»™äºˆç²¾ç¥æ…°è—‰",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.chars.ghost.aff += 2; // Ghost ä¹Ÿä¼šæ¬£èµè¿™ç§åŒç†å¿ƒ
                        s.money += 50; // ä»–ä¸´èµ°æ—¶ç•™ä¸‹äº†é’±
                        
                        // ğŸŸ¢ ã€æ–°å¢ã€‘æ—¥å¿—è¾“å‡º
                        log(`Ghostæ²¡æƒ³åˆ°ä½ ä¼šæœ‰è€å¿ƒå¬è€å…µçš„æ•…äº‹`, 'gain');
                        
                        printMsg("è€å…µè®²äº†ä¸€ä¸ªå°æ—¶ï¼Œä¸´èµ°æ—¶ï¼Œä»–çš„çœ¼ç¥ä¼¼ä¹æ¸…æ¾ˆäº†ä¸€äº›ã€‚", 'event');
                    },
                    result: "â€œè°¢è°¢ä½ å¬æˆ‘å‘ç‰¢éªšã€‚è¿™æ¯”è¯ç‰©ç®¡ç”¨ã€‚â€"
                },
                {
                    text: "æ‰“æ–­ä»–ï¼Œæˆ‘ä»¬è¦æ‰“çƒŠäº†",
                    desc: "ä¸åšå¿ƒç†å’¨è¯¢",
                    result: "è€å…µæ²‰é»˜äº†ï¼Œåƒå…·è¡Œå°¸èµ°è‚‰ä¸€æ ·èµ°äº†å‡ºå»ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸŸ¢ 17. é»„é‡‘AK (é˜¶æ®µä¸€)
        golden_ak_deal: {
            text: "ä¸€ä¸ªè’™é¢çš„å†›ç«å•†æ‚„æ‚„å±•ç¤ºäº†ä¸€æŠŠé‡‘ç¿ç¿çš„ AK-47ã€‚\nâ€œè¿™æ˜¯é‚£ä¸ªå¤§å†›é˜€çš„é…æªã€‚æˆ‘æœ‰è·¯å­ã€‚$500 ç»™ä½ ï¼Œè¿™ç©æ„å„¿è½¬æ‰‹èƒ½å–å¤©ä»·ï¼Œæˆ–è€…... é€ç»™æ‡‚è¡Œçš„äººã€‚â€",
            speaker: "Smuggler",
            type: "event",
            options: [
                {
                    text: "ä¹°ä¸‹é»„é‡‘ AK (-$500)",
                    desc: "é«˜é£é™©æŠ•èµ„ / é€ç¤¼ç¥å™¨",
                    condition: s => s.money >= 500,
                    action: () => {
                        State.money -= 500;
                        updateUI();
                        printMsg("ä½ æ¥è¿‡äº†è¿™æŠŠæ²‰ç”¸ç”¸çš„ã€ä¿—æ°”çš„é‡‘æªã€‚", 'event');
                        // ğŸŸ¢ ä¿®æ”¹ï¼šè·³è½¬åˆ° Special åº“é‡Œçš„äº‹ä»¶
                        triggerEvent(Events.Special.golden_ak_choice); 
                    }
                },
                {
                    text: "å¤ªè´µäº†ï¼Œä¸è¦",
                    result: "â€œä¸è¯†è´§ã€‚â€ å†›ç«å•†æ’‡æ’‡å˜´ï¼ŒæŠŠå®ƒåŒ…èµ·æ¥èµ°äº†ã€‚"
                }
            ]
        },



// 45. è¡¥ç»™çº¿å¤§ç”©å– (å€¾é”€) - [å·²ä¿®å¤ï¼šé˜²çˆ†ä»“]
        fire_sale: {
            text: "ä¸€å®¶ç«äº‰å¯¹æ‰‹çš„åº—é“ºè¢«ç‚¸äº†ï¼Œè€æ¿æ­£åœ¨è¡—è¾¹ä½ä»·ç”©å–æŠ¢æ•‘å‡ºæ¥çš„è´§ç‰©ã€‚\nâ€œæ‰€æœ‰ä¸œè¥¿åŠä»·ï¼åªè¦ç°é‡‘ï¼æˆ‘é©¬ä¸Šå°±è¦æ’¤ç¦»è¿™é‡Œï¼â€",
            type: "event",
            options: [
                {
                    text: "æ‰«è´§ (-$2000)",
                    desc: "å¡«æ»¡ä»“åº“",
                    condition: s => s.money >= 2000,
                    effect: s => {
                        s.money -= 2000;
                        // ğŸŸ¢ ç»Ÿä¸€è®¡ç®—ä¸Šé™
                        const cap = CONFIG.capacity_tiers[s.lvl_store - 1] + (s.set_rewards.konig ? 0 : 0);
                        
                        // ğŸŸ¢ ä¹Ÿå°±æ˜¯ï¼šå½“å‰å€¼ + æ–°å¢å€¼ï¼Œä½†ä¸èƒ½è¶…è¿‡ cap
                        s.medkit = Math.min(cap, s.medkit + 10);
                        s.food = Math.min(cap, s.food + 20);
                        s.ammo = Math.min(cap, s.ammo + 20);
                        
                        log("è¶ç«æ‰“åŠ«è¿›è´§æˆåŠŸ", 'gain');
                    },
                    result: "ä½ ç”¨æä½çš„ä»·æ ¼å¡«æ»¡äº†ä»“åº“ã€‚è™½ç„¶æœ‰ç‚¹ç¼ºå¾·ï¼Œä½†åˆ©æ¶¦æ˜¯å®æ‰“å®çš„ã€‚"
                },
                {
                    text: "å›´è§‚",
                    result: "ä½ çœ‹ç€å…¶ä»–äººæŠŠå¥½ä¸œè¥¿éƒ½æŠ¢å…‰äº†ã€‚"
                }
            ]
        },

        // 31. è¡—å¤´æ¶‚é¸¦ (åº—é“ºå½¢è±¡)
        graffiti_artist: {
            text: "ä½ å‘ç°ä¸€ä¸ªè’™é¢äººæ­£åœ¨ä½ çš„åº—å¤–å¢™ä¸Šå–·æ¶‚é¸¦ã€‚ä»–ç”»çš„æ˜¯ä¸€ä¸ªå·¨å¤§çš„ã€å˜²è®½ KorTac çš„å¡é€šå›¾æ¡ˆã€‚",
            type: "alert",
            options: [
                {
                    text: "åˆ¶æ­¢å¹¶é©±èµ¶",
                    desc: "ç»´æŠ¤ KorTac å…³ç³»",
                    effect: s => {
                        s.rep_kortac += 2;
                        printMsg("ä½ æŠŠä»–èµ¶èµ°äº†ï¼Œå¹¶æ“¦æ‰äº†æ¶‚é¸¦ã€‚", 'system');
                    },
                    result: "æ¶‚é¸¦è€…éª‚éª‚å’§å’§åœ°è·‘äº†ã€‚ä½ ä¿ä½äº†å¢™é¢çš„æ•´æ´ã€‚"
                },
                {
                    text: "è®©ä»–ç”»å®Œ",
                    desc: "è¿™ç”»æŒºé…·çš„ (KorTac å¥½æ„Ÿâ†“ï¼ŒChimera å¥½æ„Ÿâ†‘)",
                    effect: s => {
                        s.rep_kortac -= 5;
                        s.rep_chimera += 5;
                        addShopRating(4.8, true); // å¹´è½»é¡¾å®¢å–œæ¬¢è¿™ä¸ª
                    },
                    result: "è¿™å¹…ç”»æˆäº†è¡—å¤´çš„ä¸€é“é£æ™¯çº¿ï¼Œå¸å¼•äº†ä¸å°‘åæŠ—è€…æ¥æ‰“å¡ã€‚"
                }
            ]
        },

        // 32. å¥‡æ€ªçš„ç§å­ (ç§æ¤æŠ•èµ„)
        strange_seeds: {
            text: "ä¸€ä¸ªè€å†œå¤«ç”¨ä¸€å°è¢‹ç§å­æ¢äº†ä¸€ç“¶æ°´ã€‚ä»–è¯´è¿™äº›æ˜¯æŠ—è¾å°„çš„å˜å¼‚åœŸè±†ç§å­ï¼Œé•¿å¾—å¾ˆå¿«ã€‚",
            type: "event",
            options: [
                {
                    text: "åœ¨åé™¢ç§ä¸‹ (æ¶ˆè€— 1 AP)",
                    desc: "3å¤©åæ”¶è·é£Ÿç‰©",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        // è®¾ç½®ä¸€ä¸ªæ ‡è®°ï¼Œæœªæ¥æ”¶è·ï¼ˆç®€åŒ–é€»è¾‘ï¼šç›´æ¥å»¶è¿Ÿè·å¾—ï¼‰
                        setTimeout(() => {
                            const harvest = rng(3, 6);
                            s.food += harvest;
                            log(`åœŸè±†æˆç†Ÿäº†ï¼æ”¶è· ${harvest} Food`, 'gain');
                            printMsg("ä½ åœ¨åé™¢ç§çš„å˜å¼‚åœŸè±†å±…ç„¶çœŸçš„é•¿å‡ºæ¥äº†ï¼", 'event');
                            updateUI();
                        }, 10000); // 10ç§’åæ¨¡æ‹Ÿâ€œå‡ å¤©åâ€
                    },
                    result: "ä½ æŒ–äº†å‡ ä¸ªå‘æŠŠç§å­ç§äº†ä¸‹å»ã€‚å¸Œæœ›èƒ½æ´»ã€‚"
                },
                {
                    text: "æ‰”è¿›ä»“åº“åƒç°",
                    result: "ä½ æŠŠç§å­æ‰”åˆ°äº†æ¶å­æœ€æ·±å¤„ï¼Œå¾ˆå¿«å°±å¿˜äº†è¿™å›äº‹ã€‚"
                }
            ]
        },

        // 33. åŒ»ç–—äº‹æ•…è°£è¨€ (å±æœº)
        med_scandal: {
            text: "æœ‰äººåœ¨ä¼ è¨€ä½ çš„åŒ»ç–—åŒºä½¿ç”¨äº†ç”¨è¿‡çš„é’ˆå¤´ï¼è¿™å¯¹ä½ çš„å£°èª‰æ˜¯æ¯ç­æ€§çš„æ‰“å‡»ã€‚",
            type: "alert",
            options: [
                {
                    text: "å…¬å¼€é”€æ¯æ—§è®¾å¤‡å¹¶æ¢æ–° (-$1500)",
                    desc: "è‡ªè¯æ¸…ç™½",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 1500;
                        s.rating = Math.min(5.0, s.rating + 0.2);
                        log("èŠ±è´¹å·¨èµ„æ¾„æ¸…äº†è°£è¨€", 'loss');
                    },
                    result: "ä½ å½“ä¼—æ‹†å°äº†ä¸€æ‰¹æ–°å™¨æã€‚è°£è¨€å¹³æ¯äº†ï¼Œå¤§å®¶åè€Œæ›´ä¿¡ä»»ä½ çš„å«ç”Ÿæ ‡å‡†ã€‚"
                },
                {
                    text: "æ— åŠ›è¾©è§£",
                    desc: "è¯„åˆ†å¤§å¹…ä¸‹é™",
                    effect: s => {
                        addShopRating(1.5, false);
                    },
                    result: "è§£é‡Šå°±æ˜¯æ©é¥°ã€‚è¿™ä¸€æ•´å¤©éƒ½æ²¡äººæ•¢æ¥ä½ çš„åŒ»ç–—åŒºã€‚"
                }
            ]
        },

        // 34. èµ°ç§çŠ¯çš„è¯·æ±‚ (é«˜é£é™©è¿è¾“)
        smuggler_stash: {
            text: "ä¸€ä¸ªæ»¡èº«å†·æ±—çš„ç”·äººå†²è¿›æ¥ï¼šâ€œKorTac åœ¨æœæŸ¥æˆ‘ï¼è®©æˆ‘æŠŠè¿™åŒ…ä¸œè¥¿åœ¨ä½ è¿™å„¿æ”¾ä¸€å°æ—¶ï¼ç»™ä½  $300ï¼â€",
            speaker: "Smuggler",
            options: [
                {
                    text: "åŒæ„è—åŒ¿",
                    desc: "è·å¾— $300ï¼Œä½†å¯èƒ½é¢ä¸´æœæŸ¥",
                    effect: s => {
                        s.money += 300;
                        if (chance(40)) {
                            // è¢«æœæŸ¥åˆ°äº†
                            s.rep_kortac -= 10;
                            s.money -= 600; // ç½šæ¬¾ + æ²¡æ”¶
                            printMsg("KorTac å·¡é€»é˜Ÿæœå‡ºäº†è¿ç¦å“ï¼ä½ è¢«ç½šæ¬¾ $600 å¹¶è¢«è®°è¿‡ã€‚", 'alert');
                            log("è—åŒ¿è¿ç¦å“è¢«ç½šæ¬¾", 'loss');
                        } else {
                            printMsg("å·¡é€»é˜Ÿè·¯è¿‡æ²¡è¿›æ¥ã€‚é‚£ä¸ªç”·äººå›æ¥å–èµ°äº†ä¸œè¥¿ï¼Œä½ ç™½èµšäº† $300ã€‚", 'gain');
                        }
                    },
                    result: "ä½ è¿…é€ŸæŠŠåŒ…è£¹å¡è¿›äº†æŸœå°åº•ä¸‹çš„æš—æ ¼ã€‚"
                },
                {
                    text: "æ‹’ç»",
                    result: "â€œæ»šå‡ºå»ï¼Œåˆ«ç»™æˆ‘æƒ¹éº»çƒ¦ï¼â€ ä½ æŠŠä»–æ¨äº†å‡ºå»ï¼Œä¸ä¹…åå¤–é¢ä¼ æ¥äº†é€®æ•å£°ã€‚"
                }
            ]
        },

        // 35. åºŸåœŸç”µå° (ä¿¡æ¯)
        wasteland_radio: {
            text: "ä½ çš„æ— çº¿ç”µçªç„¶æ”¶åˆ°ä¸€ä¸ªæ¸…æ™°çš„å¹¿æ’­é¢‘é“ï¼Œé‡Œé¢æ­£åœ¨æ’­æ”¾æˆ˜å‰çš„æµè¡ŒéŸ³ä¹ï¼Œä¸­é—´ç©¿æ’ç€å¤©æ°”é¢„æŠ¥å’Œé»‘å¸‚è¡Œæƒ…ã€‚",
            type: "event",
            options: [
                {
                    text: "ä»”ç»†æ”¶å¬ (æ¶ˆè€— 1 AP)",
                    desc: "è·å¾—æƒ…æŠ¥ä¿®æ­£å¸‚åœºä»·æ ¼",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        // éšæœºè®©æŸç§èµ„æºæ¶¨ä»·
                        const type = ['medkit', 'food', 'ammo'][rng(0, 2)];
                        s.market_rate[type] = 1.5;
                        printMsg(`ç”µå°æç¤ºï¼šæœ€è¿‘ ${type} çš„éœ€æ±‚é‡æ¿€å¢ã€‚ä»·æ ¼å·²ä¸Šæ¶¨ã€‚`, 'info');
                        log(`è·å–æƒ…æŠ¥ï¼š${type} æ¶¨ä»·`, 'gain');
                    },
                    result: "ä½ åœ¨éŸ³ä¹å£°ä¸­è®°å½•ä¸‹äº†å…³é”®çš„å¸‚åœºä¿¡æ¯ã€‚"
                },
                {
                    text: "ä½œä¸ºèƒŒæ™¯éŸ³ä¹æ’­æ”¾",
                    desc: "æå‡åº—é“ºæ°›å›´",
                    effect: s => {
                        addShopRating(4.5, true);
                    },
                    result: "é¡¾å®¢ä»¬å¬åˆ°ç†Ÿæ‚‰çš„æ—‹å¾‹ï¼Œå¿ƒæƒ…éƒ½å˜å¥½äº†ã€‚"
                }
            ]
        },
        // 10. æç«¯å¤©æ°”é¢„è­¦ (ç­–ç•¥)
        weather_warning: {
            text: "æ”¶éŸ³æœºé‡Œä¼ æ¥ç´§æ€¥å¹¿æ’­ï¼šâ€œç›‘æµ‹åˆ°å¼ºçƒˆçš„æ²™å°˜æš´æ­£åœ¨æ¥è¿‘ï¼å»ºè®®æ‰€æœ‰å±…æ°‘åŠ å›ºé—¨çª—ï¼â€",
            type: "alert",
            options: [
                {
                    text: "èŠ±è´¹ç‰©èµ„åŠ å›ºåº—é“º (-$50)",
                    desc: "é˜²æ­¢æ˜å¤©é­å—æŸå¤±",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        // è¿™é‡Œå¯ä»¥åŠ ä¸ªæ ‡è®°ï¼Œæˆ–è€…å•çº¯å°±æ˜¯èŠ±é’±å…ç¾
                        log("åŠ å›ºäº†é—¨çª—", 'loss');
                    },
                    result: "ä½ é’‰æ­»äº†çª—æˆ·ã€‚è™½ç„¶åº—é‡Œå¾ˆé—·ï¼Œä½†å¾ˆå®‰å…¨ã€‚"
                },
                {
                    text: "ä¸ç®¡å®ƒ",
                    desc: "å¯èƒ½ä¼šæœ‰æŸå¤±",
                    effect: s => {
                        if(chance(60)) {
                            s.rating = Math.max(1.0, s.rating - 0.5);
                            printMsg("é£æ²™å¹è¿›äº†åº—é‡Œï¼Œæå¾—ä¸€å›¢ç³Ÿï¼Œé¡¾å®¢ä½“éªŒæå·®ã€‚", 'alert');
                        }
                    },
                    result: "æ²™å°˜æš´æ¥äº†ã€‚ä½ åƒäº†ä¸€å˜´çš„æ²™å­ã€‚"
                }
            ]
        },

// --- ã€æ–°å¢ã€‘è¯„åˆ†ç³»ç»Ÿæ‰©å±•äº‹ä»¶ (10ä¸ª) ---

        // 6. æˆ˜åœ°ä¸»æ’­ (æµé‡çš„åŒåˆƒå‰‘)
        streamer_visit: {
            text: "ä¸€ä¸ªä¸¾ç€è‡ªæ‹æ†çš„å¹´è½»äººé—¯äº†è¿›æ¥ï¼Œè¿˜åœ¨å¯¹ç€é•œå¤´å¤§å–Šå¤§å«ï¼š\nâ€œå®¶äººä»¬ï¼ä»Šå¤©æˆ‘ä»¬æ¥æ¢ç§˜è¿™å®¶ä¼ è¯´ä¸­çš„å†›éœ€ç«™ï¼è€æ¿ï¼Œèƒ½ä¸èƒ½é€æˆ‘ç‚¹çºªå¿µå“ï¼Ÿç»™ä¸ªé¢å­ï¼â€",
            speaker: "Streamer",
            options: [
                {
                    text: "é€ä»–ä¸€ç®±å¼¹è¯ (-1 Ammo)",
                    desc: "æ¢å–ç½‘ç»œæ›å…‰åº¦",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        addShopRating(5.0, true);
                        s.chars.ghost.aff -= 2; // Ghost è®¨åŒæš´éœ²
                        printMsg("Ghost åœ¨è§’è½é‡Œå•§äº†ä¸€å£°ï¼šâ€œè¯¥æ­»çš„å°ä¸‘ï¼Œä¼šå¼•æ¥æ•Œäººçš„ã€‚â€", 'system');
                    },
                    result: "â€œå¤ªé…·äº†ï¼è€æ¿å¤§æ°”ï¼å…³æ³¨ç‚¹ä¸€ç‚¹ï¼â€ ç›´æ’­é—´äººæ°”çˆ†æ£šï¼Œä½ çš„è¯„åˆ†ä¸Šæ¶¨äº†ã€‚"
                },
                {
                    text: "èµ¶å‡ºå»",
                    desc: "è¿™é‡Œæ˜¯æˆ˜åŒºï¼Œä¸æ˜¯æ¸¸ä¹åœº",
                    effect: s => {
                        addShopRating(1.0, false);
                    },
                    result: "â€œä»€ä¹ˆæ€åº¦ï¼é¿é›·ï¼å¤§å®¶éƒ½åˆ«æ¥ï¼â€ ä»–æ°”æ€¥è´¥ååœ°åœ¨ç½‘ä¸Šå‘äº†å·®è¯„ã€‚"
                }
            ]
        },

        // 7. æ¶æ„é€€æ¬¾ (ç¢°ç“·)
        refund_scam: {
            text: "ä¸€ä¸ªé¡¾å®¢æ‹¿ç€ä¸€ä¸ªåƒäº†ä¸€åŠçš„ç½å¤´å›æ¥æ‹æ¡Œå­ï¼š\nâ€œè¿™å†›ç²®é‡Œæœ‰èŸ‘è‚ï¼é€€é’±ï¼è¿˜è¦èµ”å¿ç²¾ç¥æŸå¤±è´¹ï¼â€ (ä½ å¾ˆç¡®å®šé‚£æ˜¯ä»–è‡ªå·±æ”¾è¿›å»çš„)",
            speaker: "Scammer",
            type: "alert",
            options: [
                {
                    text: "æ¯äº‹å®äºº (-$50)",
                    desc: "ç ´è´¢å…ç¾",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        addShopRating(3.0, true); // å‹‰å¼ºç»´æŒ
                        log("é­é‡ç¢°ç“·æŸå¤± $50", 'loss');
                    },
                    result: "ä»–æ‹¿äº†é’±ï¼Œå¾—æ„æ´‹æ´‹åœ°èµ°äº†ã€‚å‘¨å›´çš„é¡¾å®¢è§‰å¾—ä½ å¾ˆå¥½è¯´è¯ã€‚"
                },
                {
                    text: "â€œKruegerï¼Œé€å®¢ã€‚â€",
                    desc: "æš´åŠ›é©±é€ (éœ€è¦ Krueger åœ¨åœº/æ‹çˆ±)",
                    condition: s => s.chars.krueger.dating || s.chars.krueger.aff > 50,
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        addShopRating(5.0, true); // é¡¾å®¢è§‰å¾—åº—é‡Œå¾ˆå®‰å…¨
                    },
                    result: "Krueger åªæ˜¯äº®äº†ä¸€ä¸‹åˆ€åˆƒï¼Œé‚£ä¸ªéª—å­å°±æŠŠç½å¤´å’½äº†ä¸‹å»ï¼Œå“­ç€è·‘äº†ã€‚â€œè¿™æ‰æ˜¯è§£å†³é—®é¢˜çš„æ–¹å¼ã€‚â€ Krueger è¯„ä»·é“ã€‚"
                },
                {
                    text: "æ‹’ç»é€€æ¬¾",
                    desc: "è·å¾—å·®è¯„",
                    effect: s => {
                        addShopRating(1.0, false);
                    },
                    result: "ä»–åœ¨åº—é—¨å£éª‚äº†åŠå°æ—¶ï¼ŒåŠé€€äº†å¥½å‡ æ³¢å®¢äººã€‚"
                }
            ]
        },

        // 8. ç¥ç§˜é¡¾å®¢ (å®˜æ–¹è´¨æ£€)
        mystery_shopper: {
            text: "ä¸€ä½ç©¿ç€æœ´ç´ ã€æ²‰é»˜å¯¡è¨€çš„é¡¾å®¢åœ¨åº—é‡Œè½¬äº†å¾ˆä¹…ï¼Œåªä¹°äº†ä¸€ç“¶æ°´ã€‚ä½†ä»–ä¸€ç›´åœ¨ç¬”è®°æœ¬ä¸Šè®°å½•ç€ä»€ä¹ˆã€‚\nä»–ä¸´èµ°æ—¶äº®å‡ºäº†è¯ä»¶â€”â€”æ˜¯â€œæˆ˜åŒºå•†ä¸šåä¼šâ€çš„è¯„æµ‹å‘˜ã€‚",
            speaker: "Inspector",
            type: "event",
            options: [
                {
                    text: "è‡ªä¿¡ç­‰å¾…ç»“æœ",
                    desc: "åŸºäºå½“å‰è¯„åˆ†åˆ¤å®š",
                    effect: s => {
                        if (s.rating >= 4.0) {
                            s.money += 300; // å¥–é‡‘
                            addShopRating(5.0, true);
                            printMsg("è¯„æµ‹æŠ¥å‘Šï¼šAçº§ã€‚å«ç”Ÿè‰¯å¥½ï¼ŒæœåŠ¡ä¸“ä¸šã€‚", 'event');
                        } else {
                            s.rating = Math.max(1.0, s.rating - 0.5);
                            printMsg("è¯„æµ‹æŠ¥å‘Šï¼šCçº§ã€‚å»ºè®®æ•´æ”¹ã€‚", 'alert');
                        }
                    },
                    result: "è¯„æµ‹å‘˜ç‚¹äº†ç‚¹å¤´ï¼Œç•™ä¸‹ä¸€ä»½æŠ¥å‘Šç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // 9. æ…ˆå–„å‹Ÿæ (å½¢è±¡å·¥ç¨‹)
        charity_drive: {
            text: "å½“åœ°çš„å­¤å„¿é™¢ä¿®å¥³æ¥è®¿ï¼Œå¸Œæœ›ä½ èƒ½ä¸ºå­©å­ä»¬æèµ ä¸€äº›è¿‡å†¬çš„é£Ÿç‰©ã€‚\nâ€œä¸Šå¸ä¼šä¿ä½‘ä½ çš„å–„è¡Œï¼Œå­©å­ä»¬ä¹Ÿä¼šä¸ºä½ ç¥ˆç¥·ã€‚â€",
            speaker: "Nun",
            options: [
                     {
                    text: "æèµ å¤§é‡é£Ÿç‰© (-5 Food)",
                    desc: "è·å¾—æé«˜çš„å£°èª‰",
                    condition: s => s.food >= 5,
                    effect: s => {
                        s.food -= 5;
                        addShopRating(5.0, true);
                        addShopRating(5.0, true); 
                        // ğŸŸ¢ ã€ä¿®å¤ã€‘è¡¥ä¸Š Ghosts
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_chimera += 5; s.rep_ghosts += 5;
                        
                        log("æ…ˆå–„æèµ æ„ŸåŠ¨äº†å…¨åŸ", 'gain');
                    },
                    result: "KÃ¶nig çœ‹åˆ°äº†è¿™ä¸€å¹•ï¼Œä»–åœ¨é¢ç½©ä¸‹å·å·æŠ¹çœ¼æ³ªã€‚â€œä½ ... ä½ ç®€ç›´æ˜¯å¤©ä½¿ã€‚â€"
                },
                {
                    text: "åªæä¸€ç‚¹ (-1 Food)",
                    desc: "æ„æ€ä¸€ä¸‹",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food -= 1;
                        addShopRating(4.0, true);
                    },
                    result: "ä¿®å¥³æ„Ÿè°¢äº†ä½ çš„å¸®åŠ©ã€‚"
                },
                {
                    text: "å“­ç©·æ‹’ç»",
                    result: "ä¿®å¥³å¹äº†å£æ°”ï¼Œå¤±æœ›åœ°ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        // 10. åŒè¡Œè¯½è°¤ (è°£è¨€å±æœº)
        competitor_slander: {
            text: "æœ€è¿‘æœ‰äº›è°£è¨€åœ¨ä¼ ï¼Œè¯´ä½ å–ç»™ä¼¤å‘˜çš„æ­¢ç—›è¯å…¶å®æ˜¯ç³–è±†ã€‚ä½ çš„è¯„åˆ†æ­£åœ¨ä¸‹é™ï¼\nå¿…é¡»åšç‚¹ä»€ä¹ˆæ¥æ¾„æ¸…è°£è¨€ã€‚",
            type: "alert",
            options: [
                {
                    text: "èŠ±é’±æ‰“å¹¿å‘Šæ¾„æ¸… (-$150)",
                    desc: "æ¢å¤åèª‰",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        // å¼ºåˆ¶æ‹‰å›è¯„åˆ†
                        s.rating = Math.min(5.0, s.rating + 0.3);
                        log("æ”¯ä»˜å…¬å…³è´¹ç”¨", 'loss');
                    },
                    result: "ä½ åœ¨å¹¿æ’­é‡ŒæŠ•æ”¾äº†æ¾„æ¸…å¹¿å‘Šã€‚è°£è¨€ä¸æ”»è‡ªç ´ã€‚"
                },
                {
                    text: "æ— è§†è°£è¨€",
                    desc: "èº«æ­£ä¸æ€•å½±å­æ–œï¼Ÿ",
                    effect: s => {
                        if (chance(50)) {
                            addShopRating(1.0, false);
                            printMsg("è°£è¨€è¶Šä¼ è¶ŠçœŸï¼Œæœ‰äº›è€é¡¾å®¢éƒ½ä¸æ¥äº†ã€‚", 'alert');
                        } else {
                            printMsg("å¤§å®¶éƒ½ä¸ä¿¡è¿™è’è°¬çš„è°£è¨€ï¼Œæ— äº‹å‘ç”Ÿã€‚", 'system');
                        }
                    },
                    result: "ä½ å†³å®šå†·å¤„ç†ã€‚"
                }
            ]
        },

        // 11. é†‰é…’çš„è¯„è®ºå®¶ (éšæœºæ€§)
        drunk_critic: {
            text: "ä¸€ä¸ªå–å¾—çƒ‚é†‰å¦‚æ³¥çš„å®¶ä¼™è¶´åœ¨æŸœå°ä¸Šï¼Œæ‰‹é‡Œæ‹¿ç€ç¬”åœ¨æ„è§ç°¿ä¸Šä¹±ç”»ã€‚\nâ€œæˆ‘è¦... ç»™ä½ å†™ä¸ª... å—... è¯„ä»·...â€",
            speaker: "Drunkard",
            options: [
                {
                    text: "ç»™ä»–å€’æ¯é†’é…’æ±¤ (-1 Food)",
                    desc: "å¸Œæœ›èƒ½å†™ç‚¹å¥½è¯",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        addShopRating(5.0, true);
                        printMsg("è¯„è®ºå†…å®¹ï¼šâ€˜è¿™é‡Œçš„è€æ¿æ˜¯... å¤©åº•ä¸‹æœ€å¥½çš„... å¦ˆå¦ˆï¼Ÿâ€™ (è™½ç„¶èƒ¡è¨€ä¹±è¯­ä½†æ˜¯5æ˜Ÿ)", 'event');
                    },
                    result: "ä»–æŠŠä½ å½“æˆäº†ä»–å¦ˆï¼Œå“­ç€ç»™äº†ä¸ªäº”æ˜Ÿå¥½è¯„ã€‚"
                },
                {
                    text: "æŠŠä»–æ‰”å‡ºå»",
                    desc: "ä¸è®ºå¥½åéƒ½ä¸è¦",
                    result: "ä½ æŠŠä»–æ‰”åˆ°äº†å¤§è¡—ä¸Šã€‚æ„è§ç°¿ä¿ä½äº†ã€‚"
                }
            ]
        },

        // 12. å«ç”Ÿæ£€æŸ¥ (ç¯å¢ƒåˆ†)
        hygiene_check: {
            text: "åº—é‡Œæœ€è¿‘å †ç§¯äº†å¤ªå¤šæ‚ç‰©ï¼Œç”šè‡³æœ‰ç‚¹å¼‚å‘³ã€‚é¡¾å®¢ä»¬å¼€å§‹çš±çœ‰å¤´äº†ã€‚\nå¦‚æœä¸æ¸…ç†ï¼Œå¯èƒ½ä¼šæ”¶åˆ°å·®è¯„ã€‚",
            type: "event",
            options: [
                {
                    text: "å¤§æ‰«é™¤ (æ¶ˆè€— 1 AP)",
                    desc: "æ•´é¡¿åº—é¢ç¯å¢ƒ",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        addShopRating(4.5, true);
                        log("åº—é“ºç„•ç„¶ä¸€æ–°", 'gain');
                    },
                    result: "ä½ èŠ±äº†ä¸€ä¸‹åˆæ“¦æ´—åœ°æ¿å’Œè´§æ¶ã€‚è¿›æ¥çš„å®¢äººéƒ½è¯´è¿™é‡Œæ¯”åŒ»é™¢è¿˜å¹²å‡€ã€‚"
                },
                {
                    text: "å–·ç‚¹é¦™æ°´æ©ç›–",
                    desc: "æ²»æ ‡ä¸æ²»æœ¬",
                    effect: s => {
                        if(chance(50)) {
                            printMsg("é¡¾å®¢è§‰å¾—å‘³é“æ›´æ€ªäº†ã€‚", 'alert');
                            addShopRating(2.0, false);
                        } else {
                            printMsg("å‹‰å¼ºç³Šå¼„è¿‡å»äº†ã€‚", 'system');
                        }
                    },
                    result: "ä½ å–·äº†ä¸€æ•´ç“¶å»‰ä»·å¤é¾™æ°´ã€‚"
                }
            ]
        },

        // 13. æ‹›è´¢çŒ« (å‰ç¥¥ç‰©)
        stray_cat_mascot: {
            text: "ä¸€åªè„å…®å…®çš„å°é‡çŒ«åœ¨é—¨å£å¾˜å¾Šã€‚KÃ¶nig ç›¯ç€å®ƒçœ‹äº†å¾ˆä¹…ï¼Œä¼¼ä¹æƒ³æ‘¸ä½†ä¸æ•¢åŠ¨ã€‚\nâ€œå®ƒ... çœ‹èµ·æ¥å¾ˆé¥¿ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            options: [
                {
                    text: "æ”¶å…»å®ƒä½œä¸ºåº—å®  (-2 Food)",
                    desc: "é•¿æœŸæå‡é¡¾å®¢æ»¡æ„åº¦",
                    condition: s => s.food >= 2,
                    effect: s => {
                        s.food -= 2;
                        s.chars.konig.aff += 8;
                        addShopRating(5.0, true);
                        printMsg("KÃ¶nig å°å¿ƒç¿¼ç¿¼åœ°ç”¨æ‰‹æŒ‡è¹­äº†è¹­çŒ«å¤´ï¼Œå‘å‡ºäº†å¹¸ç¦çš„å¹æ¯ã€‚", 'dialogue', 'KÃ¶nig');
                    },
                    result: "è¿™åªçŒ«æˆäº†æ‹›ç‰Œã€‚å¾ˆå¤šé¡¾å®¢ä¸“é—¨ä¸ºäº†æ’¸çŒ«è€Œæ¥ï¼Œé¡ºä¾¿ä¹°ç‚¹ä¸œè¥¿ã€‚"
                },
                {
                    text: "èµ¶èµ°",
                    desc: "å‡å°‘å¼€æ”¯",
                    effect: s => {
                        s.chars.konig.aff -= 2;
                    },
                    result: "KÃ¶nig çœ‹èµ·æ¥éå¸¸å¤±è½ï¼Œä¸€æ•´å¤©éƒ½æ²¡è¯´è¯ã€‚"
                }
            ]
        },

        // 14. å†›éœ€å®˜çš„å›æ‰£ (ç°è‰²äº¤æ˜“)
        corrupt_quartermaster: {
            text: "æŸä¸ªé˜µè¥çš„åå‹¤å†›éœ€å®˜ç§ä¸‹æ‰¾åˆ°ä½ ã€‚\nâ€œæˆ‘å¯ä»¥æŠŠéƒ¨é˜Ÿçš„é‡‡è´­è®¢å•éƒ½ç»™ä½ ï¼Œä½†æˆ‘ä¸ªäººè¦æ‹¿ 30% çš„å›æ‰£ã€‚ä½ åªéœ€åœ¨è´¦é¢ä¸Šåšç‚¹æ‰‹è„šã€‚â€",
            speaker: "Quartermaster",
            options: [
                {
                    text: "åŒæ„äº¤æ˜“",
                    desc: "èµšé’±ï¼Œä½†ç”±äºè´¦ç›®æ··ä¹±ï¼Œè¯„åˆ†ä¼šä¸‹é™",
                    effect: s => {
                        const profit = rng(500, 800);
                        s.money += profit;
                        s.rating = Math.max(1.0, s.rating - 0.5); // è¯„åˆ†ä¸‹é™
                        log(`åƒå›æ‰£è·åˆ© $${profit}ï¼Œç”±äºåšå‡è´¦ä¿¡èª‰ä¸‹é™`, 'warn');
                    },
                    result: "ä½ ä»¬è¾¾æˆäº†è‚®è„çš„äº¤æ˜“ï¼Œé’±èµšåˆ°äº†ï¼Œä½†ä½ æ€»è§‰å¾—æœ‰äº›å£«å…µåœ¨èƒŒåæŒ‡æŒ‡ç‚¹ç‚¹ã€‚"
                },
                {
                    text: "ä¸¥è¯æ‹’ç»",
                    desc: "ä¿æŒå»‰æ´ (è¯„åˆ†+)",
                    effect: s => {
                        addShopRating(5.0, true);
                    },
                    result: "â€œæˆ‘åšçš„æ˜¯æ­£ç»ç”Ÿæ„ã€‚â€ å†›éœ€å®˜ç°æºœæºœåœ°èµ°äº†ã€‚ä½ çš„æ­£ç›´èµ¢å¾—äº†å°Šé‡ã€‚"
                }
            ]
        },

        // 15. æ’é˜Ÿå±æœº (è¿è¥å‹åŠ›)
        long_queue: {
            text: "ä»Šå¤©ç”Ÿæ„å¼‚å¸¸ç«çˆ†ï¼Œç»“è´¦çš„é˜Ÿä¼æ’åˆ°äº†å¤§è¡—ä¸Šã€‚é¡¾å®¢ä»¬å¼€å§‹å˜å¾—ä¸è€çƒ¦ï¼ŒæŠ±æ€¨å£°æ­¤èµ·å½¼ä¼ã€‚",
            type: "alert",
            options: [
                {
                    text: "å¼€å¯å¿«é€Ÿé€šé“ (æ¶ˆè€— 1 AP)",
                    desc: "å…¨åŠ›ä»¥èµ´åŠ å¿«æœåŠ¡",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        s.money += 200; // é¢å¤–è¥ä¸šé¢
                        addShopRating(4.8, true);
                        log("é«˜å¼ºåº¦å·¥ä½œå¤„ç†äº†æ‰€æœ‰è®¢å•", 'gain');
                    },
                    result: "ä½ åƒä¸ªæœºå™¨ä¸€æ ·å¿«é€Ÿå¤„ç†è®¢å•ã€‚è™½ç„¶ç´¯ç˜«äº†ï¼Œä½†é¡¾å®¢ä»¬å¯¹è¿™ç¥ä¸€èˆ¬çš„é€Ÿåº¦èµä¸ç»å£ã€‚"
                },
                {
                    text: "ä¸ç®¡äº†ï¼Œçˆ±ç­‰ç­‰",
                    desc: "è·å¾—å·®è¯„",
                    effect: s => {
                        addShopRating(2.0, false);
                        s.money += 50; // è¿˜æ˜¯èµšäº†ç‚¹
                    },
                    result: "å‡ ä¸ªæ’åœ¨åé¢çš„é¡¾å®¢å¤±å»äº†è€å¿ƒï¼Œæ‰”ä¸‹ä¸œè¥¿éª‚éª‚å’§å’§åœ°èµ°äº†ã€‚"
                }
            ]
        },
        patrol_check: {
            text: "ä¸€æ”¯ KorTac çš„å·¡é€»é˜Ÿåœåœ¨é—¨å£ã€‚é¢†é˜Ÿçš„å†›å®˜çœ¼ç¥ä¸å–„ã€‚\nâ€œä¾‹è¡Œæ£€æŸ¥ã€‚æˆ‘ä»¬æ¥åˆ°æŠ¥å‘Šè¯´è¿™é‡Œè—åŒ¿äº†è¿ç¦å“ã€‚â€",
            speaker: "Officer",
            options: [
                {
                    text: "é…åˆæ£€æŸ¥",
                    desc: "å¦‚æœä½ æœ‰å¾ˆå¤šå¼¹è¯ï¼Œä»–ä»¬å¯èƒ½ä¼šæ‰¾éº»çƒ¦",
                    effect: s => {
                        if(s.ammo > 20) {
                            s.ammo -= 5;
                            s.money -= 200;
                            log("å¼¹è¯: -5 (è¢«æ²¡æ”¶)", 'loss');
                            log("ç°é‡‘: -$1000 (è¢«ç½šæ¬¾)", 'loss');
                            printMsg("â€œå¼¹è¯å‚¨å¤‡è¶…æ ‡äº†ï¼Œæ²¡æ”¶ä¸€éƒ¨åˆ†å¹¶ç½šæ¬¾ã€‚â€", 'alert');
                        } else {
                            printMsg("â€œçœ‹èµ·æ¥å¾ˆå¹²å‡€ã€‚æ‰“æ‰°äº†ã€‚â€", 'system');
                        }
                    }
                },
                {
                    text: "å¡é’±è´¿èµ‚ ($500)",
                    desc: "çœå»éº»çƒ¦",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        s.rep_kortac += 2;
                        log("ç°é‡‘: -$500 (è´¿èµ‚)", 'loss');
                        log("è´¿èµ‚äº†å·¡é€»é˜Ÿ", 'loss');
                    },
                    result: "å†›å®˜æ”¶ä¸‹é’±ï¼Œéœ²å‡ºäº†å¾®ç¬‘ã€‚â€œæˆ‘æƒ³è¿™åªæ˜¯ä¸ªè¯¯æŠ¥ã€‚ç¥ä½ ç”Ÿæ„å…´éš†ã€‚â€"
                }
            ]
        },
// ğŸ² 21. å˜å¼‚é¸¡é€‰ç¾å¤§èµ› (è¶£å‘³)
        chicken_pageant: {
            text: "ä¸€ç¾¤æ‹¾è’è€…åœ¨ä½ çš„åº—é—¨å£ä¸¾åŠâ€˜ç¬¬ä¸€å±ŠåºŸåœŸå˜å¼‚é¸¡é€‰ç¾å¤§èµ›â€™ã€‚\nâ€œçœ‹è¿™åªï¼ä¸‰ä¸ªç¿…è†€ï¼å¤šä¹ˆå¯¹ç§°çš„ç¾æ„Ÿï¼è¿˜æœ‰è¿™åªï¼Œå®ƒä¼šè·³è¸¢è¸èˆï¼â€",
            speaker: "Chicken Fan",
            type: "event",
            options: [
                {
                    text: "èµåŠ©æ¯”èµ› (-$50)",
                    desc: "æˆä¸ºèµåŠ©å•†ï¼Œè·å¾—å† åæƒ",
                    condition: s => s.money >= 50,
                    effect: s => {
                        s.money -= 50;
                        addShopRating(5.0, true);
                        printMsg("ä½ è¢«æˆäºˆâ€˜é¸¡ç‹ä¹‹å‹â€™çš„è£èª‰ç§°å·ã€‚è™½ç„¶æ²¡ä»€ä¹ˆç”¨ï¼Œä½†å¤§å®¶éƒ½å¾ˆå¼€å¿ƒã€‚", 'gain');
                    },
                    result: "æ¯”èµ›åœ†æ»¡ç»“æŸï¼Œå† å†›é¸¡ï¼ˆä¸€åªé•¿ç€å½©è™¹ç¾½æ¯›çš„åŒå¤´é¸¡ï¼‰åœ¨ä½ çš„åº—é—¨å£ç•™ä¸‹äº†ä¸€å¨... çºªå¿µå“ã€‚"
                },
                {
                    text: "æŠŠå®ƒä»¬èµ¶èµ°",
                    result: "â€œä¸æ‡‚è‰ºæœ¯ï¼â€ ä»–ä»¬æŠ±ç€é¸¡æ„¤æ„¤ä¸å¹³åœ°å»éš”å£äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 22. æ¯’èˆŒè´©å–æœº (ç‰©å“)
        insult_bot: {
            text: "æœ‰äººæ‹–æ¥ä¸€å°è™½ç„¶è¿˜èƒ½ç”¨ã€ä½†è¯­éŸ³æ¨¡å—æŸåçš„è‡ªåŠ¨è´©å–æœºã€‚\næœºå™¨å‘å‡ºåˆºè€³çš„ç”µå­éŸ³ï¼šâ€œå–‚ï¼Œç¢³åŸºç”Ÿç‰©ï¼Œè¦ä¹°é¥®æ–™å—ï¼Ÿè™½ç„¶ä½ å–äº†ä¹Ÿä¸ä¼šå˜å¥½çœ‹ã€‚â€",
            speaker: "Vending Machine",
            type: "dialogue",
            options: [
                {
                    text: "ä¹°ç½é¥®æ–™å µä½å®ƒçš„å˜´ (-$10)",
                    desc: "è·å¾— AP æ¢å¤",
                    condition: s => s.money >= 10,
                    effect: s => {
                        s.money -= 10;
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                        printMsg("æœºå™¨ï¼šâ€œå“¼ï¼Œæ‹¿å»å§ï¼Œå¤±è´¥è€…ã€‚â€\né¥®æ–™å‘³é“ä¸é”™ï¼Œå°½ç®¡æœåŠ¡æ€åº¦æå·®ã€‚", 'gain');
                    },
                    result: "ä½ å–äº†ä¸€å£ï¼Œç¥æ¸…æ°”çˆ½ï¼Œå†³å®šä¸è·Ÿä¸€å°æœºå™¨è®¡è¾ƒã€‚"
                },
                {
                    text: "è¸¢å®ƒä¸€è„š",
                    effect: s => {
                        if (chance(30)) {
                            s.money += 20; // æ‰å‡ºç¡¬å¸
                            printMsg("æœºå™¨ï¼šâ€œå—·ï¼ä½ è¿™ä¸ªé‡è›®äººï¼æ‹¿å»ä½ çš„é’±ï¼â€ å®ƒåå‡ºäº†ä¸€äº›é›¶é’±ã€‚", 'gain');
                        } else {
                            printMsg("æœºå™¨ï¼šâ€œæ²¡åƒé¥­å—ï¼Ÿç”¨åŠ›ç‚¹å•Šï¼â€ ä½ è„šè¶¾è¸¢ç—›äº†ã€‚", 'loss');
                        }
                    },
                    result: "è¿™æœºå™¨çœŸæ¬ æã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 24. è¿·è·¯çš„æŠ«è¨å‘˜ (ç©æ¢—)
        skeleton_pizza: {
            text: "ä½ åœ¨é—¨å£å‘ç°äº†ä¸€å…·ç©¿ç€åˆ¶æœçš„éª·é«…ï¼Œæ€€é‡Œç´§ç´§æŠ±ç€ä¸€ä¸ªè…çƒ‚çš„æŠ«è¨ç›’ï¼Œæ‰‹é‡Œæç€ä¸€å¼ ç™¾å¹´å‰çš„è®¢å•ã€‚\nâ€œ30åˆ†é’Ÿå¿…è¾¾...â€",
            type: "event",
            options: [
                {
                    text: "å®‰è‘¬ä»–",
                    desc: "è‡´æ•¬æ‰“å·¥äºº",
                    effect: s => {
                        s.rep_141 += 2; s.rep_kortac += 2;
                        printMsg("ä½ åœ¨ä»–çš„å£è¢‹é‡Œå‘ç°äº†å‡ æšæˆ˜å‰çš„é‡‘å¸ (+ $100)ã€‚", 'gain');
                        s.money += 100;
                    },
                    result: "ä½ æŠŠä»–åŸ‹åœ¨äº†åé™¢ã€‚è¿™æ˜¯å¯¹èŒä¸šç²¾ç¥çš„å°Šé‡ã€‚"
                },
                {
                    text: "æŸ¥çœ‹æŠ«è¨ç›’",
                    desc: "è¿˜èƒ½åƒå—ï¼Ÿ",
                    effect: s => {
                        printMsg("æ‰“å¼€ç›’å­ï¼Œé‡Œé¢åªæœ‰åŒ–çŸ³ä¸€æ ·çš„é¢é¥¼ã€‚ä½ æ„Ÿåˆ°ä¸€é˜µæ¶å¿ƒã€‚", 'system');
                    },
                    result: "æ˜¾ç„¶ä¸èƒ½åƒäº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 25. æ—¶å°šè­¦å¯Ÿ (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        fashion_raider: {
            text: "ä¸€ä¸ªæ‰“æ‰®å¾—èŠ±é‡Œèƒ¡å“¨ï¼ˆæŒ‚æ»¡éœ“è™¹ç¯ç®¡å’Œç¾½æ¯›ï¼‰çš„åŠ«åŒªæ‹¦ä½äº†è·¯ã€‚\nâ€œæ‰“åŠ«ï¼ä¸å¯¹ï¼Œæ˜¯æ‰“åˆ†ï¼ä½ çš„ç©¿æ­å¤ªåœŸäº†ï¼ç®€ç›´æ±¡æŸ“æˆ‘çš„çœ¼ç›ï¼äº¤ $800 ç²¾ç¥æŸå¤±è´¹ï¼â€",
            speaker: "Fashion Raider",
            type: "alert",
            options: [
                {
                    text: "ç»™é’±äº†äº‹ (-$800)",
                    desc: "ä»–æ‰‹é‡Œæœ‰æªï¼Œè€Œä¸”çœ‹èµ·æ¥æ˜¯ä¸ªç–¯å­",
                    condition: s => s.money >= 800,
                    effect: s => {
                        s.money -= 800;
                        log("è¢«â€˜æ—¶å°šè­¦å¯Ÿâ€™å‹’ç´¢", 'loss');
                    },
                    result: "â€œæ‹¿å»ä¹°ç‚¹å¥½çœ‹çš„è¡£æœå§ï¼Œä¹¡å·´ä½¬ï¼â€ ä»–æ‰­ç€è…°èµ°äº†ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œæˆ‘çš„è¿™èº«è£…å¤‡ï¼Œä¹°ä½ çš„å‘½ç»°ç»°æœ‰ä½™ã€‚â€",
                    desc: "æˆ˜æœ¯å°±æ˜¯æœ€é¡¶çº§çš„æ—¶å°š (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.rep_chimera += 5;
                        printMsg("åŠ«åŒªçœ‹ç€ä½ èº«ä¸Šæ˜‚è´µçš„æˆ˜æœ¯èƒŒå¿ƒå’Œèº«åçš„æ€ç¥ä»¬ï¼Œå’½äº†å£å”¾æ²«ï¼šâ€œå‘ƒ... è¿™ç§æç®€åºŸåœŸé£... å…¶å®å¾ˆæœ‰å“å‘³ï¼æ‰“æ‰°äº†ï¼â€", 'gain');
                    },
                    result: "ä»–é äº†ä¸ªèº¬ï¼Œé€ƒè·‘æ—¶è¿˜è¢«è‡ªå·±ç»Šäº†ä¸€è·¤ã€‚"
                },
                {
                    text: "å˜²ç¬‘ä»–çš„å“å‘³",
                    desc: "â€œä½ åƒä¸ªåœ£è¯æ ‘â€",
                    effect: s => {
                        s.rating -= 0.1; // è¢«ä»–åœ¨å¢™ä¸Šä¹±æ¶‚ä¹±ç”»
                        printMsg("ä»–æ°”æ€¥è´¥ååœ°åœ¨ä½ å¢™ä¸Šå–·äº†â€˜åœŸåŒ…å­â€™ä¸‰ä¸ªå­—ã€‚", 'alert');
                    },
                    result: "ä½†è‡³å°‘æ²¡æŸå¤±é’±ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 26. å® ç‰©çŸ³å¤´ (KÃ¶nig å…»æˆ)
        pet_rock: {
            text: "KÃ¶nig æ¡å›æ¥ä¸€å—åœ†æ»šæ»šçš„çŸ³å¤´ï¼Œåœ¨ä¸Šé¢ç”»äº†ä¸¤åªçœ¼ç›ï¼Œæ”¾åœ¨æŸœå°ä¸Šã€‚\nâ€œå®ƒå«... å°çŸ³ï¼Œå®ƒå¾ˆä¹–ï¼Œä¸åƒä¸œè¥¿ã€‚â€",
            speaker: "KÃ¶nig",
            type: "event",
            options: [
                {
                    text: "ç»™çŸ³å¤´åšä¸ªçª",
                    desc: "é…åˆä»–çš„ç«¥å¿ƒ",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        addShopRating(4.5, true);
                        printMsg("é¡¾å®¢ä»¬è§‰å¾—è¿™ä¸ªçŸ³å¤´å‰ç¥¥ç‰©å¾ˆå¯çˆ±ï¼Œçº·çº·æ¥æ‘¸æ‘¸å¤´ã€‚", 'gain');
                    },
                    result: "KÃ¶nig å¼€å¿ƒæäº†ï¼Œæ¯å¤©éƒ½ç»™çŸ³å¤´æ“¦æ¾¡ã€‚"
                },
                {
                    text: "æ‹¿å»å‹å’¸èœ",
                    result: "KÃ¶nig å‘å‡ºäº†å°ç‹—å—ä¼¤èˆ¬çš„å‘œå’½å£°ï¼Œèµ¶ç´§æŠŠçŸ³å¤´æŠ¢å›å»è—èµ·æ¥äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 27. å¼ºæ•ˆç”Ÿå‘æ°´æ¨é”€ (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        hair_tonic_scam: {
            text: "ä¸€ä¸ªç§ƒé¡¶çš„æ¨é”€å‘˜å¼ºè¡Œå¡ç»™ä½ ä¸€ç“¶ç»¿è‰²çš„æ¶²ä½“ã€‚\nâ€œè¿™æ˜¯å˜å¼‚å£è™å°¾å·´æå–æ¶²ï¼èƒ½è®©å¤´å‘åƒæ‚è‰ä¸€æ ·ç–¯é•¿ï¼åªè¦ $150ï¼ä¸ä¹°æˆ‘å°±èººåœ¨ä½ åº—é—¨å£ä¸èµ·æ¥ï¼â€",
            speaker: "Bald Salesman",
            type: "alert",
            options: [
                {
                    text: "ä¹°ä¸‹å®ƒ (-$150)",
                    desc: "é€ç˜Ÿç¥",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        // ä¹Ÿè®¸çœŸçš„æœ‰ç”¨ï¼Ÿ
                        if (chance(10)) {
                            printMsg("ä½ è‡ªå·±è¯•äº†ä¸€ç‚¹... å¤©å“ªï¼ŒçœŸçš„é•¿å‡ºæ¥äº†ï¼(é­…åŠ›å€¼ä¸Šå‡?)", 'gain');
                        } else {
                            printMsg("æ ¹æœ¬å°±æ˜¯æŸ“äº†è‰²çš„æ°´ã€‚", 'loss');
                        }
                    },
                    result: "æ¨é”€å‘˜æ‹¿ç€é’±ç¾æ»‹æ»‹åœ°èµ°äº†ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œKruegerï¼Œç»™ä»–å‰ƒä¸ªå…‰å¤´ã€‚â€",
                    desc: "ç‰©ç†é™¤æ¯› (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.money += 50; // å“å¾—æ‰é’±
                        printMsg("Krueger é…åˆåœ°æå‡ºäº†åŒ•é¦–ï¼Œæ¨é”€å‘˜æ‘¸ç€è‡ªå·±ä»…å‰©çš„å‡ æ ¹å¤´å‘ï¼Œå°–å«ç€é€ƒè·‘äº†ï¼Œè¿æ ·å“éƒ½æ²¡æ•¢æ‹¿ã€‚", 'gain');
                    },
                    result: "ä¸–ç•Œæ¸…é™äº†ï¼ŒKrueger ä¼¼ä¹è¿˜åœ¨é—æ†¾æ²¡èƒ½å±•ç¤ºä»–çš„å‰ƒå¤´æ‰‹è‰ºã€‚"
                },
                {
                    text: "è®©ä»–èºº",
                    result: "ä»–çœŸçš„åœ¨é—¨å£èººäº†ä¸€ä¸‹åˆï¼Œç›´åˆ°ä¸‹é…¸é›¨æ‰è·‘ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 29. è°æ˜¯å§åº• (è¯¯ä¼š)
        spy_confusion: {
            text: "ä¸¤ä¸ªä¸åŒé˜µè¥çš„é—´è°åŒæ—¶èµ°è¿›äº†åº—é‡Œï¼Œä»–ä»¬éƒ½ç©¿ç€ä¾¿æœï¼Œè£…ä½œçœ‹æŠ¥çº¸ã€‚\nä»–ä»¬äº’ç›¸å·ç„ï¼Œéƒ½ä»¥ä¸ºå¯¹æ–¹æ˜¯æ¥å¤´äººï¼Œå¼€å§‹ç–¯ç‹‚åœ°å¯¹æš—å·ï¼ˆçœ¨çœ¼ã€å’³å—½ã€æ‘¸é¼»å­ï¼‰ã€‚",
            type: "event",
            options: [
                {
                    text: "é…åˆä»–ä»¬ä¸€èµ·æ¼”",
                    desc: "åŠ å…¥æ··ä¹±",
                    effect: s => {
                        s.money += 200;
                        printMsg("ä½ éšä¾¿æ¯”åˆ’äº†å‡ ä¸ªæ‰‹åŠ¿ï¼Œä¸¤äººéƒ½ä»¥ä¸ºä½ æ˜¯åŒé¢é—´è°ï¼Œå„è‡ªå¡ç»™ä½ ä¸€ç¬”â€œå°å£è´¹â€ç„¶ååŒ†åŒ†ç¦»å¼€äº†ã€‚", 'gain');
                    },
                    result: "ä½ ç™½èµšäº†ä¸¤ä»½é’±ï¼Œè™½ç„¶ä½ æ ¹æœ¬ä¸çŸ¥é“æš—å·æ˜¯ä»€ä¹ˆæ„æ€ã€‚"
                },
                {
                    text: "æˆ³ç©¿ï¼šâ€œè¦æ‰“æ¶å»å¤–é¢ï¼â€",
                    result: "ä¸¤äººå°´å°¬åœ°å¯¹è§†ä¸€çœ¼ï¼Œå‘ç°è®¤é”™äººäº†ï¼Œçº¢ç€è„¸è·‘äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 30. åºŸåœŸå¤§èƒƒç‹ (æŒ‘æˆ˜)
        gluttony_challenge: {
            text: "ä¸€ä¸ªæµæµªçš„å¤§èƒƒç‹æ¥åˆ°åº—é‡Œå‘èµ·æŒ‘æˆ˜ï¼š\nâ€œå¦‚æœä½ èƒ½æä¾› 10 ä»½é£Ÿç‰©è®©æˆ‘åƒé¥±ï¼Œæˆ‘å°±å‘Šè¯‰ä½ ä¸€ä¸ªè—å®åœ°ç‚¹ï¼å¦‚æœæˆ‘åƒä¸é¥±ï¼Œæˆ‘å°±èµ–ç€ä¸èµ°ï¼â€",
            speaker: "Big Eater",
            type: "event",
            options: [
                {
                    text: "æ¥å—æŒ‘æˆ˜ (-10 Food)",
                    desc: "èµŒä»–çš„æƒ…æŠ¥æ˜¯çœŸçš„",
                    condition: s => s.food >= 10,
                    effect: s => {
                        s.food -= 10;
                        const reward = rng(300, 600);
                        s.money += reward;
                        log(`å¤§èƒƒç‹åƒé¥±åç»™äº†ä½ ä»·å€¼ $${reward} çš„é‡‘æ¡`, 'gain');
                    },
                    result: "ä»–é£å·æ®‹äº‘èˆ¬åƒå…‰äº†é£Ÿç‰©ï¼Œæ‰“äº†ä¸ªé¥±å—ï¼Œæ‰”ç»™ä½ ä¸€å—æ²‰ç”¸ç”¸çš„é‡‘æ¡ã€‚"
                },
                {
                    text: "â€œå‡ºé—¨å³è½¬æ˜¯åƒåœ¾åœºã€‚â€",
                    result: "å¤§èƒƒç‹çœ‹ä½ ä¸å¥½æƒ¹ï¼Œæ‘¸æ‘¸è‚šå­èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸ² 1. åºŸåœŸé¢„è¨€å®¶ (è¶£å‘³)
        wasteland_prophet: {
            text: "ä¸€ä¸ªç–¯ç–¯ç™«ç™«çš„è€å¤´ç«™åœ¨åº—é—¨å£ï¼Œå¤´æˆ´é“ç®”å¸½ï¼Œå¤§å£°åš·åš·ç€ä»–æ¥æ”¶åˆ°äº†æ¥è‡ªå¤§è¥¿ç“œå«æ˜Ÿçš„è®¯æ¯ã€‚\nâ€œå¬æˆ‘è¯´ï¼æ˜å¤©ï¼æ˜å¤©ä¼šæœ‰é…¸é›¨ï¼æˆ–è€…é‡‘é’±é›¨ï¼å…¨çœ‹ä½ çš„è¯šæ„ï¼â€",
            speaker: "Mad Prophet",
            type: "event",
            options: [
                {
                    text: "ç»™ $10 å¬å¬é¢„è¨€",
                    desc: "è¿™å°±å½“ä¹°ä¸ªä¹å­",
                    condition: s => s.money >= 10,
                    effect: s => {
                        s.money -= 10;
                        if (chance(50)) {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                            printMsg("è€å¤´ç¥ç¥ç§˜ç§˜åœ°å¡ç»™ä½ ä¸€å—è–„è·ç³–ï¼šâ€œåƒä¸‹è¿™ä¸ªï¼Œç²¾ç¥ç™¾å€ï¼â€ (AP+1)", 'gain');
                        } else {
                            printMsg("â€œæˆ‘çœ‹é€äº†å‘½è¿ï¼...å‘ƒï¼Œä¸ï¼Œåªæ˜¯æˆ‘çœ¼é•œè„äº†ã€‚â€ ä»–æ“¦äº†æ“¦çœ¼é•œèµ°äº†ã€‚", 'system');
                        }
                    },
                    result: "ä½ èŠ±é’±å¬äº†ä¸€æ®µèƒ¡è¨€ä¹±è¯­ï¼Œä½†å¿ƒæƒ…è«åå˜å¥½äº†ã€‚"
                },
                {
                    text: "æ— è§†",
                    result: "ä½ å…³ä¸Šäº†é—¨ï¼Œè€å¤´è½¬å¤´å»éªšæ‰°éš”å£çš„å˜å¼‚èŸ‘è‚äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 2. å¤å¤æ¸¸æˆè¿· (æ”¶è—/äº¤æ˜“)
        retro_gamer: {
            text: "ä¸€åå¹´è½»çš„æ‹¾è’è€…å…´å¥‹åœ°å†²è¿›æ¥ï¼Œæ‰‹é‡Œä¸¾ç€ä¸€å°æˆ˜å‰çš„æŒä¸Šæ¸¸æˆæœºã€‚\nâ€œè€æ¿ï¼æˆ‘æœ‰è¿™ä¸ªï¼GameBoyï¼è¿˜æ˜¯å½©å±çš„ï¼ä½†æˆ‘ç¼ºç”µæ± ... ä½ èƒ½ç»™æˆ‘ 5 ä»½å¼¹è¯æ¢è¿™ä¸ªå—ï¼Ÿæ±‚ä½ äº†ï¼Œæˆ‘æƒ³é€šå…³ï¼â€",
            speaker: "Gamer",
            type: "dialogue",
            options: [
                {
                    text: "äº¤æ¢ (-5 Ammo)",
                    desc: "è·å¾—ç¨€æœ‰æ¸¸æˆæœº (å¯é«˜ä»·è½¬å–)",
                    condition: s => s.ammo >= 5,
                    effect: s => {
                        s.ammo -= 5;
                        s.money += 300; // è½¬å–ä»·å€¼
                        log("è·å¾—å¤è‘£æ¸¸æˆæœºå¹¶è½¬å–", 'gain');
                    },
                    result: "ä½ ç»™äº†ä»–å¼¹è¯ï¼ˆå…¶å®ä»–åªæ˜¯æŠŠç«è¯æ‹†å‡ºæ¥åšç”µæ± ï¼‰ã€‚ä½ æŠŠæ¸¸æˆæœºå–ç»™äº†æ”¶è—å®¶ï¼Œå¤§èµšä¸€ç¬”ã€‚"
                },
                {
                    text: "ä¸æ¢",
                    result: "â€œå¥½å§... æˆ‘å†å»ç¿»ç¿»åƒåœ¾å †ã€‚â€ ä»–å¤±è½åœ°èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 3. æ¶éœ¸æ”¶ä¿æŠ¤è´¹ (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        bully_extortion: {
            text: "å‡ ä¸ªçº¹ç€éª·é«…å¤´çš„å°æ··æ··ä»¥æ­¤åœ°åŒºâ€œæ–°ç®¡äº‹äººâ€çš„èº«ä»½èµ°äº†è¿›æ¥ï¼Œåš¼ç€æ§Ÿæ¦”ï¼Œæ€åº¦åš£å¼ ã€‚\nâ€œå–‚ï¼Œè¿™ç‰‡è¡—åŒºä»¥åå½’æˆ‘ä»¬â€˜éª·é«…å¸®â€™ç®¡ã€‚æƒ³ç»§ç»­å¼€åº—ï¼Œå°±äº¤ $800 çš„â€˜å®‰ä¿è´¹â€™ã€‚å¦åˆ™ï¼Œå“¼å“¼...â€",
            speaker: "Thug Leader",
            type: "alert",
            options: [
                {
                    text: "ç ´è´¢å…ç¾ (-$800)",
                    desc: "å¿ä¸€æ—¶é£å¹³æµªé™",
                    condition: s => s.money >= 800,
                    effect: s => {
                        s.money -= 800;
                        log("è¢«è¿«æ”¯ä»˜ä¿æŠ¤è´¹", 'loss');
                    },
                    result: "ä»–ä»¬æ‹¿äº†é’±ï¼Œåœ¨ä½ é—¨ä¸Šå–·äº†ä¸ªéš¾çœ‹çš„éª·é«…æ ‡è®°ï¼Œå¤§æ‘‡å¤§æ‘†åœ°èµ°äº†ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œæŠŠæ‰‹ä¼¸å‡ºæ¥ã€‚â€",
                    desc: "éœ¸æ°”å›åº” (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        addShopRating(5.0, true); // éœ¸æ°”åŠ åˆ†
                        s.rep_141 += 5; s.rep_kortac += 5; s.rep_ghosts += 5; s.rep_chimera += 5;
                        printMsg("ä½ ç”šè‡³æ²¡æœ‰æ­£çœ¼çœ‹ä»–ï¼Œåªæ˜¯åœ¨æ“¦æ‹­æŸœå°ä¸Šçš„ç°å°˜ã€‚\nèº«åçš„é˜´å½±é‡Œï¼ŒGhost æ‹‰åŠ¨äº†æªæ “ï¼ŒKÃ¶nig ç«™ç›´äº†å·¨å¤§çš„èº«èº¯ï¼ŒKrueger çš„åˆ€å°–å·²ç»æŠµåœ¨äº†æ··æ··å¤´ç›®çš„åè…°ä¸Šã€‚\nä½ ï¼šâ€œæŠŠæ‰‹ä¼¸å‡ºæ¥ï¼Œç•™ä¸‹ä¹°å‘½é’±ï¼Œç„¶åæ»šã€‚â€", 'gain');
                        s.money += 500; // åæŠ¢
                    },
                    result: "æ··æ··å¤´ç›®å“å¾—å°¿äº†è£¤å­ï¼Œæç©ºäº†æ‰€æœ‰å£è¢‹ï¼Œè·ªç€çˆ¬å‡ºäº†åº—é—¨ã€‚"
                },
                {
                    text: "æ‹’ç»æ”¯ä»˜",
                    desc: "å¯èƒ½ä¼šå‘ç”Ÿå†²çª",
                    effect: s => {
                        if (chance(40)) {
                            s.money = Math.max(0, s.money - 200);
                            printMsg("ä»–ä»¬ç ¸åäº†é—¨å£çš„æ‹›ç‰Œï¼ŒæŠ¢èµ°äº†ä¸€äº›é›¶é’±ã€‚", 'alert');
                        } else {
                            printMsg("ä½ æå‡ºäº†å–·å­ï¼Œä»–ä»¬éª‚éª‚å’§å’§åœ°èµ°äº†ï¼Œæ²¡æ•¢åŠ¨æ‰‹ã€‚", 'system');
                        }
                    },
                    result: "è™½ç„¶ä¿ä½äº†å¤§é’±ï¼Œä½†åº—é¢å—æŸäº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 4. é»‘æš—æ–™ç†ç•Œ (è¶£å‘³)
        mystery_stew: {
            text: "ä¸€ä¸ªè‡ªç§°â€œåºŸåœŸå¨ç¥â€çš„å®¶ä¼™åœ¨é—¨å£æ”¯èµ·äº†é”…ï¼Œç…®ç€ä¸€é”…ç»¿æ²¹æ²¹çš„ç³ŠçŠ¶ç‰©ã€‚\nâ€œè¿™æ˜¯ç”¨å˜å¼‚ä»™äººæŒå’Œè¾å°„é¼ è‚‰ç†¬åˆ¶çš„ç§˜åˆ¶ç‚–èœï¼è€æ¿ï¼Œè¦ä¸è¦å°å°ï¼Ÿå…è´¹è¯•åƒï¼â€",
            speaker: "Chef",
            type: "event",
            options: [
                {
                    text: "å‹‡æ•¢å°è¯•",
                    desc: "å¯èƒ½å›å¤ APï¼Œä¹Ÿå¯èƒ½...",
                    effect: s => {
                        if (chance(50)) {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 2);
                            printMsg("æ„å¤–åœ°ç¾å‘³ï¼Ÿï¼ä½ çš„å‘³è•¾è¢«æ‰“å¼€äº†ï¼(AP+2)", 'gain');
                        } else {
                            s.medkit = Math.max(0, s.medkit - 1);
                            printMsg("å‘•... ä½ é£Ÿç‰©ä¸­æ¯’äº†ï¼Œä¸å¾—ä¸æ¶ˆè€—ä¸€ä¸ªåŒ»ç–—åŒ…æ´—èƒƒã€‚", 'loss');
                        }
                    },
                    result: "è¿™æ˜¯ä¸€æ¬¡å‘³è§‰çš„èµŒåšã€‚"
                },
                {
                    text: "ç¦»è¿œç‚¹",
                    result: "é‚£å‘³é“å¤ªå†²äº†ï¼Œä½ èµ¶ç´§å…³ä¸Šäº†é—¨çª—ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 5. å‚²æ…¢çš„è´µå¦‡ (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        arrogant_noble: {
            text: "ä¸€ä½ç©¿ç€æˆ˜å‰åæœçš„è´µå¦‡èµ°è¿›äº†åº—é‡Œï¼Œç”¨æ‰‹å¸•æ‚ç€é¼»å­ï¼Œä¸€è„¸å«Œå¼ƒã€‚\nâ€œå¤©å“ªï¼Œè¿™ç§çŒªåœˆä¸€æ ·çš„åœ°æ–¹ä¹Ÿèƒ½å«å•†åº—ï¼ŸæŠŠä½ ä»¬æœ€å¥½çš„ä¸œè¥¿æ‹¿å‡ºæ¥ï¼Œè™½ç„¶æˆ‘æ€€ç–‘ä½ ä»¬åªæœ‰åƒåœ¾ã€‚å¿«ç‚¹ï¼Œåˆ«æµªè´¹æˆ‘çš„æ—¶é—´ã€‚â€",
            speaker: "Noble Woman",
            type: "dialogue",
            options: [
                {
                    text: "å¿æ°”åå£°ï¼Œçƒ­æƒ…æœåŠ¡",
                    desc: "ä¹Ÿè®¸èƒ½èµšç‚¹å°è´¹",
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 0.2); // å¿ƒæƒ…ä¸å¥½å¯¼è‡´æœåŠ¡åˆ†ä¸‹é™
                        s.money += 50;
                    },
                    result: "å¥¹æŒ‘ä¸‰æ‹£å››äº†åŠå¤©ï¼Œåªä¹°äº†ä¸€ç“¶æ°´ï¼Œè¿˜æ‰”ç»™ä½  $50 åƒæ˜¯æ–½èˆä¹ä¸ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œè¿™é‡Œä¸æ¬¢è¿åƒåœ¾ã€‚â€",
                    desc: "è®©å¥¹çŸ¥é“è°æ‰æ˜¯è¿™é‡Œçš„ä¸»äºº (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        addShopRating(5.0, true);
                        printMsg("ä½ å†·å†·åœ°æŒ‡ç€å¤§é—¨ã€‚\nè´µå¦‡åˆšæƒ³å‘ä½œï¼Œå´çœ‹åˆ° Krueger æ­£ç”¨çœ‹æ­»äººçš„çœ¼ç¥ç›¯ç€å¥¹çš„è„–å­ï¼Œè€Œ Ghost æ­£åœ¨ç©å¼„ä¸€æŠŠæˆ˜æœ¯åŒ•é¦–ã€‚\nå¥¹è„¸è‰²æƒ¨ç™½ï¼šâ€œä½ ã€ä½ ä»¬... ç»™æˆ‘ç­‰ç€ï¼â€", 'event');
                    },
                    result: "å¥¹ç‹¼ç‹ˆåœ°é€ƒè·‘äº†ï¼Œé«˜è·Ÿé‹éƒ½è·‘æ‰äº†ä¸€åªã€‚åº—é‡Œçš„å…¶ä»–é¡¾å®¢ä¸ºä½ é¼“æŒã€‚"
                },
                {
                    text: "ä¸äºˆç†ç¬",
                    desc: "å†·å¤„ç†",
                    result: "å¥¹è‡ªè®¨æ²¡è¶£ï¼Œéª‚äº†å‡ å¥â€œä¹¡å·´ä½¬â€åç¦»å¼€äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 6. å¥‡æ€ªçš„å® ç‰© (é£å‘³)
        weird_pet: {
            text: "ä¸€ä¸ªè·¯è¿‡çš„é›‡ä½£å…µç‰µç€ä¸€åª... æ‹´ç€é“é“¾çš„å˜å¼‚å·¨èœ¥èµ°äº†è¿›æ¥ã€‚\nâ€œåˆ«æ€•ï¼Œâ€˜Lucyâ€™ä¸å’¬äººï¼Œå®ƒåªæ˜¯æƒ³è¿›æ¥è¹­ä¸ªç©ºè°ƒã€‚ç»™å®ƒå–ç‚¹æ°´è¡Œå—ï¼Ÿâ€",
            speaker: "Mercenary",
            type: "event",
            options: [
                {
                    text: "ç»™å·¨èœ¥å€’æ°´",
                    desc: "çœ‹èµ·æ¥ç¡®å®æŒºæ¸´çš„",
                    effect: s => {
                        addShopRating(4.5, true);
                        printMsg("å·¨èœ¥åƒå°ç‹—ä¸€æ ·å–å®Œäº†æ°´ï¼Œè¿˜ç”¨å¤´è¹­äº†è¹­ä½ çš„è…¿ï¼ˆä½†æ˜¯çš®å¥½ç¡¬ï¼‰ã€‚", 'gain');
                    },
                    result: "â€œè°¢äº†è€æ¿ï¼Lucyå¾ˆå–œæ¬¢ä½ ï¼â€ ä½£å…µå¼€å¿ƒåœ°èµ°äº†ã€‚"
                },
                {
                    text: "æ‹’ç»",
                    desc: "å¤ªå“äººäº†",
                    result: "â€œå¥½å§ï¼Œéœ²è¥¿ï¼Œæˆ‘ä»¬å»åˆ«å¤„ã€‚â€ ä½£å…µæ‹½ç€é‚£åªå·¨å¤§çš„èœ¥èœ´èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 7. å¼ºä¹°å¼ºå–çš„å†›ç«å•† (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        forceful_seller: {
            text: "ä¸€ä¸ªæ»¡è„¸æ¨ªè‚‰çš„å†›ç«è´©å­æŠŠä¸€ç®±ç”Ÿé”ˆçš„æ‰‹é›·é‡é‡åœ°ç ¸åœ¨æŸœå°ä¸Šã€‚\nâ€œè¿™æ‰¹è´§ï¼Œæˆ‘çœ‹ä½ åº—é‡Œç¼ºï¼Œç‰¹æ„ç»™ä½ ç•™çš„ã€‚ä¸€å£ä»· $500ï¼Œä¸ä¹°å°±æ˜¯ä¸ç»™æˆ‘é¢å­ã€‚ä½ ä¹Ÿä¸æƒ³åº—é‡Œå‘ç”Ÿä»€ä¹ˆâ€˜æ„å¤–â€™çˆ†ç‚¸å§ï¼Ÿâ€",
            speaker: "Arms Dealer",
            type: "alert",
            options: [
                {
                    text: "è¢«è¿«ä¹°ä¸‹ (-$500)",
                    desc: "èŠ±é’±æ¶ˆç¾",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        s.ammo += 5; // ç»™ç‚¹åƒåœ¾å¼¹è¯
                        log("è¢«è¿«ä¹°ä¸‹åŠ£è´¨å†›ç«", 'loss');
                    },
                    result: "ä½ å«æ³ªä¹°ä¸‹äº†è¿™å †ç ´é“œçƒ‚é“ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œä½ åœ¨å¨èƒæˆ‘ï¼Ÿâ€",
                    desc: "è®©ä»–åæ‚”å‡ºç”Ÿ (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.ammo += 20; // åæŠ¢ä»–çš„å¥½è´§
                        printMsg("ä½ è½»ç¬‘ä¸€å£°ã€‚KÃ¶nig ç›´æ¥å•æ‰‹æŠŠä»–æ‹äº†èµ·æ¥ï¼ŒåŒè„šç¦»åœ°ã€‚\nGhost æ£€æŸ¥äº†ä¸€ä¸‹é‚£ç®±æ‰‹é›·ï¼šâ€œå…¨æ˜¯å“‘å¼¹ã€‚ä¸è¿‡ä»–è…°ä¸Šçš„é‚£æŠŠæªä¸é”™ã€‚â€\nä½ æ²¡æ”¶äº†ä»–çš„é…æªå’Œå¼¹è¯ä½œä¸ºâ€˜ç²¾ç¥æŸå¤±è´¹â€™ã€‚", 'gain');
                    },
                    result: "â€œå¤§å§å¤´é¥¶å‘½ï¼æˆ‘é”™äº†ï¼â€ å†›ç«è´©å­å“­çˆ¹å–Šå¨˜åœ°è·‘äº†ï¼Œè¿é‚£ç®±åƒåœ¾éƒ½æ²¡æ•¢æ‹¿èµ°ã€‚"
                },
                {
                    text: "åšå®šæ‹’ç»",
                    desc: "ä¸è®ºå¦‚ä½•éƒ½ä¸ä¹°",
                    effect: s => {
                        if (chance(30)) {
                            printMsg("ä»–ä¸´èµ°æ—¶è¸¢ç¿»äº†ä½ çš„åƒåœ¾æ¡¶ï¼Œå¼„å¾—åˆ°å¤„éƒ½æ˜¯ã€‚", 'alert');
                            s.rating -= 0.1;
                        }
                    },
                    result: "ä½ æ¡ç´§äº†æŸœå°ä¸‹çš„è­¦æŠ¥å™¨ã€‚ä»–çœ‹ä½ ä¸å¥½æƒ¹ï¼Œéª‚éª‚å’§å’§åœ°èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 8. æˆ˜å‰æ—¶å°šæ‚å¿— (ç‰©å“)
        fashion_magazine: {
            text: "ä½ åœ¨æ•´ç†æ—§è´§æ—¶å‘ç°äº†ä¸€æœ¬ä¿å­˜å®Œå¥½çš„æˆ˜å‰æ—¶å°šæ‚å¿—ï¼Œå°é¢ä¸Šå°ç€å…‰é²œäº®ä¸½çš„æ¨¡ç‰¹å’Œæ¼‚äº®çš„è¡£æœã€‚\nåœ¨è¿™ä¸ªç°æš—çš„ä¸–ç•Œé‡Œï¼Œè¿™ç®€ç›´æ˜¯ç¨€ä¸–çå®ã€‚",
            type: "event",
            options: [
                {
                    text: "æ‘†åœ¨åº—é‡Œä¾›äººé˜…è¯»",
                    desc: "æå‡åº—é“ºæ ¼è°ƒ (+è¯„åˆ†)",
                    effect: s => {
                        addShopRating(5.0, true);
                        printMsg("é¡¾å®¢ä»¬æ’é˜Ÿç¿»é˜…è¿™æœ¬æ‚å¿—ï¼Œå“ªæ€•åªæ˜¯çœ‹çœ‹å›¾ç‰‡ä¹Ÿèƒ½è®©äººæ„Ÿåˆ°æ…°è—‰ã€‚", 'gain');
                    },
                    result: "ä½ çš„åº—é“ºæˆäº†è¿™æ¡è¡—æœ€â€˜æ—¶å°šâ€™çš„åœ°æ–¹ã€‚"
                },
                {
                    text: "é«˜ä»·å–ç»™æ”¶è—å®¶",
                    desc: "æ¢å–ç°é‡‘ (+$150)",
                    effect: s => {
                        s.money += 150;
                    },
                    result: "ä¸€ä½æ”¶è—å®¶åƒæ§ç€åœ£ç»ä¸€æ ·æŠŠå®ƒä¹°èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 9. è¡—å¤´è¯—äºº (æ–‡åŒ–)
        street_poet: {
            text: "ä¸€ä¸ªè½é­„çš„è¯—äººç«™åœ¨åº—ä¸­å¤®ï¼Œçªç„¶å¼€å§‹æ·±æƒ…æœ—è¯µï¼š\nâ€œå•Šï¼åºŸåœŸçš„å°˜åŸƒæ©ç›–ä¸äº†ä½ çš„å…‰è¾‰ï¼ä½ æ˜¯ç“¦ç ¾ä¸­çš„ç«ç‘°ï¼ç»™æˆ‘ä¸€ç“¶é…’ï¼Œæˆ‘å°†ä¸ºä½ å†™ä¸‹ä¸æœ½çš„è¯—ç¯‡ï¼â€",
            speaker: "Poet",
            type: "dialogue",
            options: [
                {
                    text: "è¯·ä»–å–é…’ (-$20)",
                    desc: "èµ„åŠ©è‰ºæœ¯",
                    condition: s => s.money >= 20,
                    effect: s => {
                        s.money -= 20;
                       s.rating = Math.min(5.0, s.rating + 0.1);
                        printMsg("ä»–å–å®Œé…’ï¼Œåœ¨å¢™ä¸Šå†™ä¸‹äº†ä¸€é¦–èµç¾ä½ åº—é“ºçš„çŸ­è¯—ã€‚", 'event');
                    },
                    result: "è™½ç„¶è¯—å¥æœ‰ç‚¹è‚‰éº»ï¼Œä½†é¡¾å®¢ä»¬è§‰å¾—å¾ˆæœ‰è¶£ã€‚"
                },
                {
                    text: "â€œè¿™é‡Œä¸æ˜¯å‰§é™¢ã€‚â€",
                    result: "è¯—äººæ‘‡æ‘‡å¤´ï¼šâ€œä¸–äººçš†é†‰æˆ‘ç‹¬é†’ã€‚â€ ç„¶åèµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 10. é”™è¯¯çš„å¿«é€’ (æƒŠå–œ)
        wrong_delivery: {
            text: "ä¸€æ¶ä¸çŸ¥åçš„æ— äººæœºåœ¨ä½ åº—é—¨å£æ‰”ä¸‹äº†ä¸€ä¸ªåŒ…è£¹å°±é£èµ°äº†ã€‚åŒ…è£¹ä¸Šå†™ç€â€œè‡´ï¼šäº²çˆ±çš„ Sâ€ã€‚\nè¿™æ˜¾ç„¶é€é”™äººäº†ï¼Œä½†ç°åœ¨å®ƒå½’ä½ äº†ã€‚",
            type: "event",
            options: [
                {
                    text: "æ‹†å¼€åŒ…è£¹",
                    desc: "çœ‹çœ‹æœ‰ä»€ä¹ˆå¥½ä¸œè¥¿",
                    effect: s => {
                        const loot = rng(1, 3);
                        if (loot === 1) {
                            s.food += 5;
                            printMsg("æ˜¯å‡ ç›’é«˜çº§å·§å…‹åŠ›ï¼èµšåˆ°äº†ï¼", 'gain');
                        } else if (loot === 2) {
                            s.medkit += 2;
                            printMsg("æ˜¯æ€¥æ•‘ç‰©èµ„ï¼Œéå¸¸å®ç”¨ã€‚", 'gain');
                        } else {
                            printMsg("é‡Œé¢æ˜¯ä¸€å çœ‹ä¸æ‡‚çš„æƒ…ä¹¦... æ¯«æ— ä»·å€¼ã€‚", 'system');
                        }
                    },
                    result: "åºŸåœŸæ³•åˆ™ï¼šæ¡åˆ°å°±æ˜¯æˆ‘çš„ã€‚"
                },
                {
                    text: "æ”¾åœ¨é—¨å£",
                    desc: "ä¸‡ä¸€ä¸»äººæ‰¾å›æ¥å‘¢",
                    result: "ç¬¬äºŒå¤©åŒ…è£¹ä¸è§äº†ï¼Œåœ°ä¸Šå¤šäº†ä¸€è¡Œå­—ï¼šâ€˜è°¢äº†ï¼Œè¯šå®çš„äººã€‚â€™ (ä»€ä¹ˆä¹Ÿæ²¡å‘ç”Ÿ)"
                }
            ]
        }, // <--- æœ€åä¸€ä¸ªäº‹ä»¶
// ğŸ² 11. æ— çº¿ç”µé—®ç­” (è¶£å‘³/çŸ¥è¯†)
        radio_quiz: {
            text: "æ”¶éŸ³æœºé‡Œçªç„¶ä¼ æ¥æ¬¢å¿«çš„éŸ³ä¹ï¼šâ€œæ¬¢è¿æ”¶å¬åºŸåœŸæ™ºåŠ›å¤§å†²å…³ï¼å¬ä¼—æœ‹å‹ï¼Œå¦‚æœæ‚¨èƒ½ç­”å¯¹è¿™ä¸ªé—®é¢˜ï¼Œå°†è·å¾— $200 çš„ç°é‡‘ç©ºæŠ•ï¼\nè¯·é—®ï¼šAK-47 çš„å£å¾„æ˜¯å¤šå°‘ï¼Ÿâ€",
            speaker: "Radio Host",
            type: "event",
            options: [
                {
                    text: "å›ç­”ï¼š7.62mm",
                    desc: "è‡ªä¿¡æŠ¢ç­”",
                    effect: s => {
                        s.money += 200;
                        printMsg("â€œå›ç­”æ­£ç¡®ï¼å¹¸è¿å„¿ï¼æ— äººæœºæ­£åœ¨å‰å¾€ä½ çš„åæ ‡ï¼â€\nå‡ åˆ†é’Ÿåï¼Œä¸€ä¸ªå°åŒ…è£¹æ‰”åœ¨äº†é—¨å£ã€‚", 'gain');
                        log("æ— çº¿ç”µé—®ç­”è·å¥–", 'gain');
                    },
                    result: "çŸ¥è¯†å°±æ˜¯é‡‘é’±ã€‚"
                },
                {
                    text: "å›ç­”ï¼š5.56mm",
                    desc: "çŠ¹è±«ä¸å†³",
                    result: "â€œå“¦è±ï¼Œç­”é”™äº†ï¼é‚£æ˜¯ M4 çš„å£å¾„ã€‚ä¸‹æ¬¡å¥½è¿ï¼â€ ä¿¡å·ä¸­æ–­äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 12. è‡ªç§°æˆ¿ä¸œçš„äºº (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        fake_landlord: {
            text: "ä¸€ä¸ªç©¿ç€è¥¿è£…ã€æ‹¿ç€å…¬æ–‡åŒ…çš„ç”·äººèµ°äº†è¿›æ¥ï¼Œèº«åè·Ÿç€ä¸¤ä¸ªä¿é•–ã€‚\nâ€œå¥³å£«ï¼Œæ ¹æ®æˆ˜å‰çš„åœ°å¥‘è®°å½•ï¼Œè¿™æ ‹å»ºç­‘å½’æˆ‘æ‰€æœ‰ã€‚ä½ éœ€è¦è¡¥äº¤è¿™ä¸‰å¹´çš„ç§Ÿé‡‘ï¼Œæ€»å…± $1500ã€‚å¦åˆ™è¯·ç«‹å³æ¬èµ°ã€‚â€",
            speaker: "Landlord?",
            type: "alert",
            options: [
                {
                    text: "ç ´è´¢å…ç¾ (-$1500)",
                    desc: "ä¸æƒ³æƒ¹æ³•å¾‹ï¼ˆæˆ–è€…ä¼ªæ³•å¾‹ï¼‰éº»çƒ¦",
                    condition: s => s.money >= 1500,
                    effect: s => {
                        s.money -= 1500;
                        log("è¢«â€˜æˆ¿ä¸œâ€™å‹’ç´¢ç§Ÿé‡‘", 'loss');
                    },
                    result: "ä»–æ”¶ä¸‹é’±ï¼Œå¼€äº†ä¸€å¼ çœ‹èµ·æ¥å°±å¾ˆå‡çš„æ”¶æ®ï¼šâ€œä¸‹ä¸ªæœˆæˆ‘ä¼šå†æ¥çš„ã€‚â€"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œè¿™é‡Œåªæœ‰ä¸€ç§æ³•å¾‹ã€‚â€",
                    desc: "è®©ä»–è§è¯†ä¸€ä¸‹è°æ‰æ˜¯åœ°ä¸» (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.rep_141 += 5; s.rep_kortac += 5;
                        printMsg("ä½ æŠŠè…¿æ­åœ¨æŸœå°ä¸Šï¼Œæ¼«ä¸ç»å¿ƒåœ°æ“¦ç€æªã€‚\nGhost åƒå¹½çµä¸€æ ·å‡ºç°åœ¨ä»–èº«åï¼šâ€œæ ¹æ®æˆ˜æ—¶å¾ç”¨æ¡ä¾‹ï¼Œä½ çš„å‘½ç°åœ¨å½’æˆ‘ä»¬æ‰€æœ‰ã€‚â€\nKÃ¶nig æ°æ–­äº†ä»–æ‰‹é‡Œçš„å…¬æ–‡åŒ…æŠŠæ‰‹ã€‚\né‚£äººå“å¾—è¿æ»šå¸¦çˆ¬åœ°é€ƒèµ°äº†ã€‚", 'gain');
                    },
                    result: "â€œä¸‹æ¬¡å¸¦ç‚¹çœŸå®¶ä¼™æ¥ã€‚â€ ä½ å†·ç¬‘é“ã€‚"
                },
                {
                    text: "èµ–ç€ä¸ç»™",
                    desc: "çœ‹ä»–èƒ½æ€æ ·",
                    effect: s => {
                        if (chance(40)) {
                            printMsg("ä»–è®©ä¿é•–ç ¸åäº†ä½ çš„æ©±çª—ç»ç’ƒï¼Œç„¶åè·‘äº†ã€‚", 'alert');
                            s.money = Math.max(0, s.money - 200); // ç»´ä¿®è´¹
                        } else {
                            printMsg("å‘¨å›´çš„é‚»å±…å›´äº†è¿‡æ¥ï¼ŒæŠŠä»–éª‚è·‘äº†ã€‚", 'system');
                        }
                    },
                    result: "ä¸€åœºé—¹å‰§ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 13. èµ°å¤±çš„æ‰«åœ°æœºå™¨äºº (ç§‘æŠ€)
        lost_roomba: {
            text: "ä¸€ä¸ªåœ†ç›˜çŠ¶çš„æ‰«åœ°æœºå™¨äººä¸çŸ¥ä»å“ªé’»äº†è¿›æ¥ï¼Œæ­£åœ¨æ’ä½ çš„æŸœå°è„šã€‚å®ƒä¸Šé¢è´´ç€ä¸€ä¸ªä¾¿åˆ©è´´ï¼šâ€˜åˆ«è¸©æˆ‘ï¼Œæˆ‘åœ¨ç¦»å®¶å‡ºèµ°â€™ã€‚",
            type: "event",
            options: [
                {
                    text: "ä¿®ç†å¹¶ç•™ç”¨ (æ¶ˆè€— 1 AP)",
                    desc: "è‡ªåŠ¨æ¸…æ´æå‡è¯„åˆ†",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        addShopRating(5.0, true); // å«ç”ŸåŠ åˆ†
                        printMsg("ä½ ä¿®å¥½äº†å®ƒçš„å¯¼èˆªæ¨¡å—ã€‚ç°åœ¨å®ƒæ¯å¤©éƒ½åœ¨åº—é‡Œå‹¤åŠ³åœ°è½¬åœˆåœˆï¼Œé¡¾å®¢ä»¬è§‰å¾—å¾ˆæ–°å¥‡ã€‚", 'gain');
                    },
                    result: "åº—é‡Œå˜å¾—ä¸€å°˜ä¸æŸ“ã€‚"
                },
                {
                    text: "æ‹†äº†å–é›¶ä»¶",
                    desc: "å›æ”¶ç”µå­åƒåœ¾",
                    effect: s => {
                        s.money += 80;
                        log("æ‹†è§£æœºå™¨äººè·åˆ©", 'gain');
                    },
                    result: "ä½ å¾—åˆ°äº†ä¸€äº›ç”µè·¯æ¿å’Œç”µçº¿ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 14. é†‰é…’å°é˜Ÿé—¹äº‹ (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        drunk_squad: {
            text: "å‡ ä¸ªå–é«˜äº†çš„é›‡ä½£å…µåœ¨åº—é‡Œå¤§åµå¤§é—¹ï¼Œç”šè‡³å¼€å§‹æ¯”æ‹¼è°èƒ½æŠŠç©ºé…’ç“¶æ‰”è¿›ä½ çš„åƒåœ¾æ¡¶ï¼ˆå¤§éƒ¨åˆ†éƒ½ç ¸åœ¨äº†åœ°ä¸Šï¼‰ã€‚\nå…¶ä»–é¡¾å®¢è¢«å“å¾—ä¸æ•¢è¿›é—¨ã€‚",
            speaker: "Drunk Mercs",
            type: "alert",
            options: [
                {
                    text: "è¯·ä»–ä»¬å–é†’é…’æ±¤ (-2 Food)",
                    desc: "å¥½è¨€ç›¸åŠ",
                    condition: s => s.food >= 2,
                    effect: s => {
                        s.food -= 2;
                        addShopRating(4.0, true);
                        printMsg("ä»–ä»¬å–äº†çƒ­æ±¤ï¼Œç¨å¾®æ¸…é†’äº†ä¸€ç‚¹ï¼Œç•™ä¸‹ $50 æ¸…æ´è´¹èµ°äº†ã€‚", 'system');
                        s.money += 50;
                    },
                    result: "è™½ç„¶åœ°æ¿è„äº†ï¼Œä½†è‡³å°‘æ²¡å‡ºä¹±å­ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œæƒ³æ¯”åˆ’æ¯”åˆ’ï¼Ÿâ€",
                    desc: "ç‰©ç†é†’é…’ (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        printMsg("Krueger ä¸€è„šè¸¢é£äº†é£åœ¨ç©ºä¸­çš„é…’ç“¶ã€‚\nKÃ¶nig åƒæ‹å°é¸¡ä¸€æ ·æŠŠå¸¦å¤´é‚£ä¸ªæ‹äº†èµ·æ¥ã€‚\nä½ å¾®ç¬‘ç€é—®ï¼šâ€œè°è¿˜è¦æ‰”ï¼Ÿâ€\nå…¨åœºæ­»å¯‚ã€‚", 'event');
                    },
                    result: "ä»–ä»¬ç¬é—´é†’é…’äº†ï¼Œè¿æ»šå¸¦çˆ¬çš„è·‘äº†å‡ºå»ã€‚"
                },
                {
                    text: "æŠ¥è­¦ (å‘å·¡é€»é˜Ÿæ±‚åŠ©)",
                    desc: "å¯èƒ½ä¼šè¢«æ”¶ä¿æŠ¤è´¹",
                    effect: s => {
                        s.money = Math.max(0, s.money - 100); // å·¡é€»é˜Ÿä¹Ÿè¦å–èŒ¶é’±
                        printMsg("å·¡é€»é˜Ÿæ¥äº†ï¼ŒæŠŠä»–ä»¬èµ¶èµ°äº†ï¼Œä½†ä¹Ÿé¡ºæ‰‹æ‹¿èµ°äº†ä½  $100 çš„â€˜å‡ºè­¦è´¹â€™ã€‚", 'loss');
                    },
                    result: "ç ´è´¢æ¶ˆç¾ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 15. æˆ˜å‰å’–å•¡ç²‰ (äº¤æ˜“)
        antique_coffee: {
            text: "ä¸€ä¸ªæ‹¾è’è€…åƒçŒ®å®ä¸€æ ·æ‹¿å‡ºä¸€ç½ç”Ÿé”ˆçš„é“ç½ã€‚\nâ€œçœ‹ï¼æˆ˜å‰çš„é€Ÿæº¶å’–å•¡ï¼è¿˜æ²¡å¼€å°ï¼åªè¦ $300ï¼Œè¿™å¯æ˜¯è´µæ—äº«å—ï¼â€",
            speaker: "Scavenger",
            options: [
                {
                    text: "ä¹°ä¸‹ ($300)",
                    desc: "èµŒå®ƒæ²¡å˜è´¨",
                    condition: s => s.money >= 300,
                    effect: s => {
                        s.money -= 300;
                        if (chance(70)) {
                            s.ap = Math.min(CONFIG.max_ap, s.ap + 2); // å’–å•¡æç¥
                           s.rating += 0.2; // <--- è¿™é‡Œä¹Ÿä¼šçªç ´ 5.0
                            printMsg("å¤©å“ªï¼Œè¿™å‘³é“ç®€ç›´ç»äº†ï¼ä½ å’Œé¡¾å®¢åˆ†äº«äº†å’–å•¡ï¼Œæ‰€æœ‰äººç²¾ç¥å¤§æŒ¯ï¼(AP+2)", 'gain');
                        } else {
                            printMsg("æ‰“å¼€åå‘ç°é‡Œé¢å·²ç»ç»“æˆäº†ä¸€å—é»‘è‰²çš„çŸ³å¤´... è¢«éª—äº†ã€‚", 'loss');
                        }
                    },
                    result: "è¿™æ˜¯ä¸€æ¬¡å‘³è•¾çš„è±ªèµŒã€‚"
                },
                {
                    text: "â€œæˆ‘åªå–ç™½å¼€æ°´ã€‚â€",
                    result: "æ‹¾è’è€…å˜Ÿå›”ç€â€œä¸æ‡‚ç”Ÿæ´»â€ç¦»å¼€äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

        // âš ï¸ 16. æ¶æ„ç«äº‰è€… (åäº‹ä»¶ - å«å¥³ç‹é€‰é¡¹)
        rival_sabotage: {
            text: "æœ€è¿‘è¡—å¯¹é¢æ–°å¼€äº†ä¸€å®¶é»‘å¸‚åº—ã€‚ä»Šå¤©ä½ å‘ç°å‡ ä¸ªæµæ°“æ•…æ„å µåœ¨ä½ é—¨å£ï¼ŒåŠè¯´é¡¾å®¢å»å¯¹é¢ä¹°ä¸œè¥¿ã€‚\nâ€œåˆ«å»è¿™å®¶ï¼Œè¿™å®¶ä¸œè¥¿è´µï¼Œå¯¹é¢æ–°åº—æ‰“å…«æŠ˜ï¼â€",
            speaker: "Rival Thugs",
            type: "alert",
            options: [
                {
                    text: "æˆ‘ä»¬ä¹Ÿæ‰“æŠ˜ï¼ (åˆ©æ¶¦é™ä½)",
                    desc: "è¢«å·å…¥ä»·æ ¼æˆ˜",
                    effect: s => {
                        s.money = Math.max(0, s.money - 200); // æŸå¤±åˆ©æ¶¦
                        log("å› ä»·æ ¼æˆ˜æŸå¤±åˆ©æ¶¦", 'loss');
                    },
                    result: "é¡¾å®¢è™½ç„¶ç•™ä½äº†ï¼Œä½†ä½ ä»Šå¤©åŸºæœ¬ç™½å¹²äº†ã€‚"
                },
                {
                    text: "ã€å¥³ç‹é™ä¸´ã€‘â€œKruegerï¼Œå»â€˜é—®å€™â€™ä¸€ä¸‹å¯¹é¢ã€‚â€",
                    desc: "è§£å†³æå‡ºé—®é¢˜çš„äºº (éœ€å¥³ç‹ Buff)",
                    condition: s => s.flags.harem_queen,
                    effect: s => {
                        s.money += 1000; // å¯¹é¢äº¤çš„â€œå­¦è´¹â€
                        printMsg("Krueger éœ²å‡ºäº†æ®‹å¿çš„å¾®ç¬‘ï¼Œæ¶ˆå¤±åœ¨åå··ã€‚\nååˆ†é’Ÿåï¼Œå¯¹é¢çš„åº—å…³é—¨äº†ï¼Œè€æ¿äº²è‡ªè·‘è¿‡æ¥é€ä¸Šäº† $1000 èµ”ç¤¼é‡‘ï¼Œå¹¶è¡¨ç¤ºé©¬ä¸Šæ¬èµ°ã€‚", 'gain');
                    },
                    result: "æµæ°“ä»¬çœ‹åˆ° Krueger æ“¦ç€åˆ€å›æ¥ï¼Œå“å¾—å½“åœºæ”¹å£ï¼šâ€œå…¶å®... è¿™å®¶åº—æ‰æ˜¯æœ€å¥½çš„ï¼â€"
                },
                {
                    text: "æ— è§†ä»–ä»¬ï¼Œåšå¥½æœåŠ¡",
                    desc: "ç›¸ä¿¡è€é¡¾å®¢çš„å¿ è¯š",
                    effect: s => {
                         addShopRating(4.0, true); // å£ç¢‘å°å¹…æå‡
                    },
                    result: "è™½ç„¶å®¢æµå°‘äº†ç‚¹ï¼Œä½†è€é¡¾å®¢éƒ½è¡¨ç¤ºæ”¯æŒä½ ï¼šâ€œæˆ‘å°±è®¤å‡†è¿™å®¶ï¼â€"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 17. å¹¸è¿é¥¼å¹² (ç„å­¦)
        fortune_cookie: {
            text: "ä½ åœ¨è¿›è´§çš„ç®±å­é‡Œæ„å¤–å‘ç°äº†ä¸€åŒ…æˆ˜å‰çš„å¹¸è¿é¥¼å¹²ã€‚è™½ç„¶æœ‰ç‚¹å—æ½®äº†ï¼Œä½†é‡Œé¢çš„çº¸æ¡åº”è¯¥è¿˜èƒ½çœ‹ã€‚",
            type: "event",
            options: [
                {
                    text: "åƒä¸€ä¸ªçœ‹çœ‹è¿æ°”",
                    desc: "è·å¾—éšæœº Buff",
                    effect: s => {
                        const luck = rng(1, 3);
                        if (luck === 1) {
                            s.money += 100;
                            printMsg("çº¸æ¡ä¸Šå†™ç€ï¼šâ€˜è´¢è¿äº¨é€šâ€™ã€‚å‡ºé—¨ç«Ÿç„¶çœŸçš„æ¡åˆ°äº†é’±ï¼", 'gain');
                        } else if (luck === 2) {
                            s.chars.ghost.aff += 2; s.chars.konig.aff += 2; s.chars.krueger.aff += 2;
                            printMsg("çº¸æ¡ä¸Šå†™ç€ï¼šâ€˜æ¡ƒèŠ±æœµæœµå¼€â€™ã€‚ä»Šå¤©ç”·ä¸»ä»¬çœ‹ä½ çš„çœ¼ç¥éƒ½æ€ªæ€ªçš„ã€‚", 'gain');
                        } else {
                            s.ap = Math.max(0, s.ap - 1);
                            printMsg("çº¸æ¡ä¸Šå†™ç€ï¼šâ€˜æ³¨æ„è‚ èƒƒâ€™ï¼Œå‘ƒ... è‚šå­ç—›ã€‚(AP-1)", 'loss');
                        }
                    },
                    result: "å‘½è¿çš„å‘³é“æ˜¯ç”œçš„ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿‡æœŸçš„ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 18. åºŸåœŸè‰ºæœ¯å®¶ (è£…é¥°)
        wasteland_artist: {
            text: "ä¸€ä¸ªç”¨åºŸé“å’Œå¼¹å£³åˆ¶ä½œé›•å¡‘çš„è‰ºæœ¯å®¶è·¯è¿‡ï¼Œæƒ³ç”¨ä»–çš„ä½œå“æ¢ç‚¹åƒçš„ã€‚\né‚£æ˜¯ä¸€ä¸ª... çœ‹èµ·æ¥åƒæ˜¯ä¸€æŠŠæªä¸Šå¼€å‡ºäº†ä¸€æœµèŠ±çš„é›•å¡‘ã€‚",
            speaker: "Artist",
            type: "dialogue",
            options: [
                {
                    text: "äº¤æ¢ (-2 Food)",
                    desc: "è£…é¥°åº—é“º (+è¯„åˆ†)",
                    condition: s => s.food >= 2,
                    effect: s => {
                        s.food -= 2;
                        addShopRating(5.0, true);
                        printMsg("ä½ æŠŠé›•å¡‘æ‘†åœ¨æŸœå°ä¸Šï¼Œéå¸¸æœ‰è‰ºæœ¯æ„Ÿï¼Œé¡¾å®¢ä»¬çº·çº·æ‹ç…§ç•™å¿µã€‚", 'gain');
                    },
                    result: "è‰ºæœ¯å®¶æ„Ÿæ¿€åœ°åƒç€ä¸œè¥¿ï¼šâ€œä½ æ‡‚è‰ºæœ¯ï¼Œæœ‹å‹ã€‚â€"
                },
                {
                    text: "æ‹’ç»",
                    result: "â€œæ²¡äººæ‡‚æˆ‘...â€ è‰ºæœ¯å®¶æ‹–ç€ä»–çš„åºŸé“è½å¯åœ°èµ°äº†ã€‚"
                }
            ]
        }, // <--- é€—å·

// ğŸ² 19. å“‘å¼¹å±æœº (æƒŠé™©)
        dud_bomb: {
            text: "é™„è¿‘çš„æ–½å·¥é˜ŸæŒ–å‡ºäº†ä¸€æšæœªå¼•çˆ†çš„èˆªå¼¹ï¼å°±åœ¨ä½ åº—é—¨å£ä¸è¿œï¼\næ•´æ¡è¡—çš„äººéƒ½æ…Œäº†ã€‚",
            type: "alert",
            options: [
                {
                    text: "å‘¼å«ä¸“å®¶å¤„ç† (-$500)",
                    desc: "å®‰å…¨æ‹†é™¤",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        s.rep_141 += 5; // 141 çš„æ‹†å¼¹ä¸“å®¶
                        log("æ”¯ä»˜æ‹†å¼¹è´¹ç”¨", 'loss');
                    },
                    result: "æ‹†å¼¹ä¸“å®¶å¾ˆä¸“ä¸šï¼Œå±æœºè§£é™¤äº†ï¼Œå¤§å®¶æŠŠä½ å½“æˆäº†è‹±é›„ã€‚"
                },
                {
                    text: "è‡ªå·±åŠ¨æ‰‹ (æ¶ˆè€— 1 AP)",
                    desc: "æˆ‘æœ‰å‰ªçº¿é’³ï¼(50% æ¦‚ç‡å¤±è´¥)",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        if (chance(50)) {
                            s.rep_chimera += 10; // è¿™ç§ç–¯ç‹‚è¡Œä¸º Chimera å¾ˆæ¬£èµ
                            printMsg("å¤©å“ªï¼ä½ å‰ªæ–­äº†çº¢çº¿... è®¡æ—¶å™¨åœäº†ï¼ä½ ç®€ç›´æ˜¯ç–¯å­ï¼", 'gain');
                        } else {
                            s.money = Math.floor(s.money * 0.8); // åº—é“ºå—æŸ
                            s.medkit = Math.max(0, s.medkit - 2);
                            printMsg("è½°ï¼è™½ç„¶åªæ˜¯å¼•ä¿¡çˆ†ç‚¸ï¼Œä½†éœ‡ç¢äº†ä½ æ‰€æœ‰çš„ç»ç’ƒï¼Œä½ ä¹Ÿå—äº†ä¼¤ã€‚", 'loss');
                        }
                    },
                    result: "è¿™æ˜¯ä¸€ç”Ÿä¸­æœ€æ¼«é•¿çš„å‡ åˆ†é’Ÿã€‚"
                },
                // âœ… æ–°å¢ä¿åº•é€‰é¡¹ï¼šé˜²æ­¢å¡æ­»
                {
                    text: "è¿…é€Ÿæ’¤ç¦» (æ”¾å¼ƒåº—é“º)",
                    desc: "ä¿å‘½è¦ç´§ï¼(æ— æ¶ˆè€—ï¼Œä½†åº—é“ºå¯èƒ½å—æŸ)",
                    // æ²¡æœ‰ conditionï¼Œæ°¸è¿œå¯ç”¨
                    effect: s => {
                        s.rating = Math.max(1.0, s.rating - 0.5); // ä¸´é˜µè„±é€ƒæ‰£ä¿¡èª‰
                        // 70% æ¦‚ç‡çˆ†ç‚¸ï¼Œå› ä¸ºæ²¡äººæ‹†
                        if(chance(70)) {
                            s.money = Math.floor(s.money * 0.7); // æŸå¤± 30% èµ„é‡‘ç”¨äºä¿®åº—
                            printMsg("è½°â€”â€”ï¼ç‚¸å¼¹è¿˜æ˜¯ç‚¸äº†ã€‚ä½ è™½ç„¶äººæ²¡äº‹ï¼Œä½†åº—é“ºçš„ä¸€é¢å¢™è¢«ç‚¸å¡Œäº†ã€‚", 'loss');
                            log("åº—é“ºé­é‡çˆ†ç‚¸å—æŸ", 'loss');
                        } else {
                            printMsg("ä¸‡å¹¸... é‚£æ˜¯ä¸ªå®Œå…¨çš„å“‘å¼¹ï¼Œæœ€åå¹¶æ²¡æœ‰ç‚¸ã€‚ä½†ä½ å› ä¸ºé€ƒè·‘è¢«é‚»å±…å˜²ç¬‘äº†ä¸€ç•ªã€‚", 'system');
                        }
                    },
                    result: "ä½ èº²åˆ°äº†ä¸¤æ¡è¡—ä»¥å¤–çš„å®‰å…¨åŒºï¼Œç›´åˆ°é£æ³¢å¹³æ¯ã€‚"
                }
            ]
        }, // <--- é€—å·

        // ğŸ² 20. ç¥ç§˜çš„ç§å­ (ç§æ¤åç»­)
        flower_bloom: {
            text: "è®°å¾—ä½ ä¹‹å‰ç§åœ¨åé™¢çš„ä¸çŸ¥åç§å­å—ï¼Ÿä»Šå¤©å®ƒå¼€èŠ±äº†ï¼\né‚£æ˜¯ä¸€æœµåœ¨åºŸåœŸä¸Šä»æœªè§è¿‡çš„ã€æ•£å‘ç€å¹½è“è‰²å…‰èŠ’çš„èŠ±ã€‚",
            type: "event",
            // è¿™æ˜¯ä¸€ä¸ªçº¯éšæœºäº‹ä»¶ï¼Œä¸éœ€è¦æ¡ä»¶
            options: [
                {
                    text: "æ‘˜ä¸‹æ¥é€ç»™æŸäºº",
                    desc: "éšæœºå¢åŠ ä¸€ä½ç”·ä¸»çš„å¥½æ„Ÿ",
                    effect: s => {
                        const target = ['ghost', 'konig', 'krueger'][rng(0, 2)];
                        s.chars[target].aff += 10;
                        printMsg(`ä½ æŠŠèŠ±é€ç»™äº† ${target}ã€‚ä»–çœ‹èµ·æ¥éå¸¸æƒŠè®¶ï¼Œéšåå°å¿ƒç¿¼ç¿¼åœ°æŠŠå®ƒå¤¹åœ¨äº†ç¬”è®°æœ¬é‡Œ/æˆ´åœ¨äº†èƒ¸å‰ã€‚`, 'gain');
                    },
                    result: "è¿™ç§ç¾ä¸½çš„ä¸œè¥¿åœ¨åºŸåœŸä¸Šä»£è¡¨ç€å¸Œæœ›ã€‚"
                },
                {
                    text: "ç•™åœ¨é‚£é‡Œè§‚èµ",
                    desc: "å¿ƒæƒ…å˜å¥½ (AP+1)",
                    effect: s => {
                        s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                    },
                    result: "æ¯æ¬¡ç´¯äº†å»åé™¢çœ‹çœ‹å®ƒï¼Œå°±è§‰å¾—ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ã€‚"
                }
            ]
        },

        scavenger_box: {
            text: "ä¸€ä¸ªæ‹¾è’è€…ç¥ç§˜å…®å…®åœ°å‡‘è¿‡æ¥ã€‚\nâ€œè€æ¿ï¼Œæˆ‘åœ¨å æœºç‚¹æ¡åˆ°ä¸€ä¸ªç®±å­ï¼Œæ²¡æ‰“å¼€è¿‡ã€‚$200 å–ç»™ä½ ï¼Œè¦ä¸è¦èµŒä¸€æŠŠï¼Ÿâ€",
            speaker: "Scavenger",
            options: [
                {
                    text: "ä¹°ä¸‹ ($200)",
                    desc: "å¯èƒ½æ˜¯åƒåœ¾ï¼Œä¹Ÿå¯èƒ½æ˜¯å¥½ä¸œè¥¿",
                    condition: s => s.money >= 200,
                    effect: s => {
                        s.money -= 200;
                        const luck = Math.random();
                        if (luck > 0.7) {
                            s.medkit += 3;
                            printMsg("èµšå¤§äº†ï¼é‡Œé¢æ˜¯å®Œå¥½çš„æ€¥æ•‘ç‰©èµ„ï¼(+3 Medkit)", 'event');
                        } else if (luck > 0.4) {
                            s.ammo += 5;
                            printMsg("è¿˜è¡Œï¼Œæ˜¯ä¸€äº›æ•£è£…å­å¼¹ã€‚(+5 Ammo)", 'system');
                        } else {
                            printMsg("è¯¥æ­»ï¼Œé‡Œé¢å…¨æ˜¯çŸ³å¤´å’Œç ´å¸ƒã€‚", 'alert');
                        }
                    }
                },
                {
                    text: "è®©ä»–æ»š",
                    result: "æ‹¾è’è€…è€¸è€¸è‚©å»æ‰¾ä¸‹ä¸€ä¸ªå†¤å¤§å¤´äº†ã€‚"
                }
            ]
        },

        ghost_rain: {
            text: "å¤–é¢æ­£ä¸‹ç€å€¾ç›†å¤§é›¨ï¼ŒGhost æ¨é—¨è€Œå…¥ï¼Œæµ‘èº«æ¹¿é€äº†ï¼Œé›¨æ°´é¡ºç€ä»–çš„é¢ç½©æ»´è½ã€‚\nâ€œè·¯è¿‡ï¼Œå€Ÿä¸ªåœ°æ–¹é¿é›¨ï¼Œé¡ºä¾¿æ•´å¤‡ä¸€ä¸‹è£…å¤‡ã€‚â€",
            speaker: "Ghost",
            type: "dialogue",
            options: [
                {
                    text: "é€’ç»™ä»–ä¸€æ¡å¹²æ¯›å·¾å’Œçƒ­é¥®",
                    desc: "ç®€å•çš„å…³æ€€ (+Ghostå¥½æ„Ÿ)",
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.ap = Math.max(0, s.ap - 1);
                        printMsg("Ghost æ¥è¿‡æ¯›å·¾ï¼ŒåŠ¨ä½œåœé¡¿äº†ä¸€ä¸‹ã€‚â€œè°¢äº†ï¼Œè¿™ç§å¤©æ°”æ€»è®©äººæƒ³èµ·ä»¥å‰çš„ä»»åŠ¡ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä½ ä»¬åœ¨é›¨å£°ä¸­å®‰é™åœ°åäº†ä¸€ä¼šå„¿ï¼Œæ°”æ°›å¾ˆèæ´½ã€‚"
                },
                {
                    text: "è®©ä»–è‡ªä¾¿",
                    desc: "ä¿æŒè·ç¦»",
                    result: "Ghost é»˜é»˜åœ°ç«™åœ¨è§’è½æ“¦æ‹­æ­¦å™¨ï¼Œé›¨åœåä¾¿æ‚„æ— å£°æ¯åœ°ç¦»å¼€äº†ã€‚"
                }
            ]
        },

        konig_anxiety: {
            text: "KÃ¶nig è¯•å›¾èµ°è¿›åº—é‡Œï¼Œä½†ä»–çš„æˆ˜æœ¯èƒŒå¿ƒå‹¾åˆ°äº†é—¨å£çš„è£…é¥°ç‰©ï¼Œå‘å‡ºå·¨å¤§çš„å£°å“ã€‚\nä»–åƒµåœ¨åŸåœ°ï¼Œçœ‹èµ·æ¥æƒŠæ…Œå¤±æªï¼šâ€œå‘ƒï¼ScheiÃŸe... æˆ‘ä¸æ˜¯æ•…æ„çš„...â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "æ¸©æŸ”åœ°å¸®ä»–è§£å¼€",
                    desc: "å®‰æŠšä»–çš„æƒ…ç»ª (+KÃ¶nigå¥½æ„Ÿ)",
                    effect: s => {
                        s.chars.konig.aff += 8;
                        printMsg("ä½ èƒ½æ„Ÿè§‰åˆ°ä»–æ­£åœ¨å‘æŠ–ï¼Œè§£å¼€åï¼Œä»–æ¾äº†ä¸€å¤§å£æ°”ã€‚â€œä½ ...ä½ äººçœŸå¥½ã€‚è°¢è°¢ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä»–ä¸ºäº†è¡¨ç¤ºæ­‰æ„ï¼Œåœ¨æŸœå°ä¸Šå¤šæ”¾äº† $50 å°è´¹ã€‚"
                },
                {
                    text: "å˜²ç¬‘ä»–çš„ç¬¨æ‹™",
                    desc: "è¿™ä¼šä¼¤å®³ä»–çš„è‡ªå°Š",
                    effect: s => {
                        s.chars.konig.aff -= 10;
                    },
                    result: "KÃ¶nig ä½ç€å¤´ï¼ŒçŒ›åœ°æ‰¯æ–­äº†æŒ‚é’©ï¼Œé€ƒä¹Ÿä¼¼çš„ç¦»å¼€äº†ã€‚"
                }
            ]
        },

krueger_shadow: {
            text: "ä½ æ²¡çœ‹è§äººï¼Œä½†æŸœå°ä¸Šçªç„¶å¤šäº†ä¸€æŠŠæ²¾è¡€çš„åŒ•é¦–å’Œä¸€å¼ çº¸æ¡ã€‚\nçº¸æ¡ä¸Šå†™ç€ï¼šâ€˜ä»Šæ™šåˆå¤œï¼Œæˆ‘ä¸å¸Œæœ›çœ‹åˆ°å·¡é€»é˜Ÿç»è¿‡è¿™é‡Œã€‚â€™",
            speaker: "Krueger",
            type: "event",
            // ğŸŸ¢ æ–°å¢ï¼šä»…åœ¨ Krueger æœªå¤„äºæ‹çˆ±çŠ¶æ€æ—¶è§¦å‘
            condition: s => !s.chars.krueger.dating, 
            options: [
                {
                    text: "ç…§åš (å…³ç¯é—­åº—)",
                    desc: "é…åˆä»–çš„è¡ŒåŠ¨ (+Kruegerå¥½æ„Ÿ)",
                    effect: s => {
                        s.chars.krueger.aff += 5;
                        s.rep_chimera += 5;
                        s.ap = 0; // ç›´æ¥ç»“æŸå½“æ™šç²¾åŠ›
                        log("é…åˆ Krueger è¡ŒåŠ¨", 'info');
                    },
                    result: "ä½ æ—©æ—©å…³äº†ç¯ã€‚åŠå¤œä½ å¬åˆ°å‡ å£°é—·å“ï¼Œç¬¬äºŒå¤©é—¨å£å¤šäº†ä¸€ç®±ä½œä¸ºå›æŠ¥çš„å¼¹è¯ (+5 Ammo)ã€‚"
                },
                {
                    text: "æ— è§†å¹¶åŠ å¼ºè­¦æˆ’",
                    desc: "ä¸æƒ³æƒ¹éº»çƒ¦",
                    result: "è™½ç„¶ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Œä½†ä½ æ„Ÿè§‰è„ŠèƒŒå‘å‡‰ï¼Œä»¿ä½›è¢«æ¯’è›‡ç›¯ç€ã€‚"
                }
            ]
        },

        ghost_injured: {
            text: "Ghost åƒå¾€å¸¸ä¸€æ ·æ¥ä¹°è¡¥ç»™ï¼Œä½†ä½ æ³¨æ„åˆ°ä»–çš„æ‰‹åœ¨å¾®å¾®é¢¤æŠ–ï¼Œè…¹éƒ¨çš„æˆ˜æœ¯èƒŒå¿ƒæœ‰ä¸€å—æ·±è‰²çš„æ±¡æ¸æ¸—å‡ºã€‚",
            speaker: "Ghost",
            type: "alert",
            options: [
                {
                    text: "å¼ºè¡Œè¦æ±‚æŸ¥çœ‹ä¼¤å£ (-1 Medkit)",
                    desc: "ä»–æ˜¯ä¸ªå€”è„¾æ°”ï¼Œä½†éœ€è¦æ²»ç–—",
                    condition: s => s.medkit >= 1,
                    effect: s => {
                        s.medkit--;
                        s.chars.ghost.aff += 12; // å¤§å¹…æå‡
                        printMsg("Ghost è¯•å›¾æ‹’ç»ï¼Œä½†æœ€ç»ˆå¦¥åäº†ã€‚â€œ...å¥½å§ï¼ŒåŠ¨ä½œå¿«ç‚¹ã€‚â€", 'dialogue', 'Ghost');
                    },
                    result: "ä½ å¸®ä»–å¤„ç†äº†ä¸¥é‡çš„è´¯ç©¿ä¼¤ï¼Œä»–ä¸´èµ°æ—¶è„šæ­¥é¡¿äº†é¡¿ï¼šâ€œæ¬ ä½ ä¸€æ¬¡ã€‚â€"
                },
                {
                    text: "å‡è£…æ²¡çœ‹è§",
                    desc: "å°Šé‡ä»–çš„ä¼ªè£…",
                    result: "Ghost ä¹°å®Œä¸œè¥¿å°±èµ°äº†ï¼Œåœ°æ­¥ç•™ä¸‹äº†å‡ æ»´è¡€è¿¹ã€‚"
                }
            ]
        },

        konig_gift: {
            text: "KÃ¶nig æ»¡è„¸é€šçº¢åœ°å†²è¿›åº—é‡Œï¼ŒæŠŠä¸€ä¸ªè¿˜åœ¨æ»´è¡€çš„å¸ƒè¢‹å­æ‰”åœ¨æ¡Œä¸Šã€‚\nâ€œç»™...ç»™ä½ çš„ï¼é‚£ä¸ªä¼å›¾å·ä½ ä¸œè¥¿çš„æ··è›‹ï¼Œæˆ‘å¤„ç†æ‰äº†ï¼â€",
            speaker: "KÃ¶nig",
            type: "dialogue",
            options: [
                {
                    text: "å¤¸å¥–ä»–åšå¾—å¥½",
                    desc: "è™½ç„¶æœ‰ç‚¹è¡€è…¥ï¼Œä½†ä»–æ˜¯åœ¨ä¿æŠ¤ä½ ",
                    effect: s => {
                        s.chars.konig.aff += 5;
                        s.rep_kortac += 5;
                        printMsg("KÃ¶nig åœ¨é¢ç½©ä¸‹å‘å‡ºäº†å¼€å¿ƒçš„é—·å“¼å£°ã€‚â€œåªè¦æˆ‘åœ¨ï¼Œæ²¡äººèƒ½åŠ¨ä½ ã€‚â€", 'dialogue', 'KÃ¶nig');
                    },
                    result: "ä½ åœ¨è¢‹å­é‡Œå‘ç°äº†é‚£ä¸ªå°å·æŠ¢èµ°çš„ $200ã€‚"
                },
                {
                    text: "è¡¨ç°å‡ºææƒ§",
                    desc: "è¿™ä¼šè®©ä»–è§‰å¾—è¢«å«Œå¼ƒ",
                    effect: s => {
                        s.chars.konig.aff -= 5;
                    },
                    result: "â€œå¯¹...å¯¹ä¸èµ·ï¼Œæˆ‘åªæ˜¯æƒ³å¸®å¿™ã€‚â€ KÃ¶nig æ…Œä¹±åœ°æŠ“èµ·è¢‹å­è·‘äº†ã€‚"
                }
            ]
        },

        krueger_disguise: {
            text: "ä¸€ä¸ªæ™®é€šçš„å¹³æ°‘èµ°è¿›åº—é‡Œä¹°æ°´ã€‚ä½†ä½ æ³¨æ„åˆ°äº†ä»–æ‰‹ä¸Šçš„è€èŒ§å’Œé‚£åŒå†°å†·ä¸”ç†Ÿæ‚‰çš„çœ¼ç›â€”â€”æ˜¯ä¼ªè£…åçš„ Kruegerã€‚",
            type: "event",
            options: [
                {
                    text: "é€’ç»™ä»–æ°´ï¼Œå¹¶æ‚„æ‚„å¡ä¸€å¼ â€˜å®‰å…¨â€™å­—æ¡",
                    desc: "è¡¨æ˜ä½ è®¤å‡ºä»–äº†ï¼Œä¸”æ„¿æ„æ©æŠ¤",
                    effect: s => {
                        s.chars.krueger.aff += 3;
                        s.money -= 10; // é€æ°´çš„æˆæœ¬
                        printMsg("ä»–æ¥è¿‡æ°´ï¼Œæ‰‹æŒ‡è½»è½»æ•²äº†ä¸‰ä¸‹æŸœå°â€”â€”è¿™æ˜¯ç‰¹å®šçš„è‡´è°¢æš—å·ã€‚", 'system');
                    },
                    result: "ä»–åƒä¸ªæ™®é€šäººä¸€æ ·ç¦»å¼€äº†ï¼Œæ²¡å¼•èµ·ä»»ä½•äººæ³¨æ„ã€‚"
                },
                {
                    text: "å¤§å£°æ‹›å‘¼ä»–â€œKruegerå…ˆç”Ÿâ€",
                    desc: "è¿™ä¼šæš´éœ²ä»–ï¼",
                    effect: s => {
                        s.chars.krueger.aff -= 20;
                        s.rep_chimera -= 10;
                    },
                    result: "ä»–ç¬é—´æ‹”æªï¼Œè™½ç„¶æ²¡æ€ä½ ï¼Œä½†é‚£å……æ»¡æ€æ„çš„çœ¼ç¥è®©ä½ å‡ å¤©ç¡ä¸ç€è§‰ã€‚"
                }
            ]
        },

        sanctuary_chaos: {
            text: "å¤–é¢çš„äº¤ç«å¼‚å¸¸æ¿€çƒˆã€‚Ghost, KÃ¶nig å’Œ Krueger å±…ç„¶åŒæ—¶å‡ºç°åœ¨ä½ çš„åº—é—¨å£å¯»æ±‚ä¸´æ—¶æ©æŠ¤ï¼\næ°”æ°›ç¬é—´å‰‘æ‹”å¼©å¼ ï¼Œä»–ä»¬æªå£äº’æŒ‡ã€‚",
            type: "alert",
            options: [
                {
                    text: "â€œè¦æ‰“å‡ºå»æ‰“ï¼â€ (å¨æ…‘)",
                    desc: "ä¸ä»…è¦èƒ†é‡ï¼Œè¿˜è¦å£°æœ›",
                    condition: s => s.rep_141 > 10 && s.rep_kortac > 10 && s.rep_chimera > 10,
                    effect: s => {
                        s.chars.ghost.aff += 5;
                        s.chars.konig.aff += 5;
                        s.chars.krueger.aff += 5;
                        printMsg("ä¸‰äººäº’ç›¸å¯¹è§†ä¸€çœ¼ï¼Œç«Ÿç„¶çœŸçš„åŒæ—¶æ”¾ä¸‹äº†æªã€‚", 'system');
                    },
                    result: "è¿™æ˜¯å¥‡è¿¹èˆ¬çš„ä¸€åˆ»ã€‚ä¸‰ä¸ªæ­»æ•Œåœ¨ä½ çš„æŸœå°å‰å„è‡ªå–äº†ä¸€ç“¶æ°´ï¼Œç„¶ååˆ†å¤´ç¦»å¼€ã€‚"
                },
                {
                    text: "èº²åœ¨æŸœå°ä¸‹ç‘Ÿç‘Ÿå‘æŠ–",
                    desc: "æ™®é€šäººçš„ååº”",
                    effect: s => {
                        s.money -= 300;
                    },
                    result: "ä»–ä»¬åœ¨ä½ åº—é‡Œæ‰“äº†ä¸€æ¶ã€‚è™½ç„¶æ²¡æ­»äººï¼Œä½†ä½ çš„è´§æ¶å…¨çƒ‚äº†ã€‚"
                }
            ]
        },

        ghost_mask: {
            text: "Ghost ååœ¨è§’è½çš„é˜´å½±é‡Œï¼Œä»–ä¼¼ä¹æ­£åœ¨è°ƒæ•´è‡ªå·±çš„å·´æ‹‰å…‹æ‹‰ç“¦é¢ç½©ï¼Œè¿™æ˜¯ä»–é˜²å¾¡è–„å¼±çš„æ—¶åˆ»ã€‚",
            speaker: "Ghost",
            type: "dialogue",
            options: [
                {
                    text: "è½¬èº«èƒŒå¯¹ç€ä»–ï¼Œå®ˆä½é—¨å£",
                    desc: "ç»™äºˆç»å¯¹çš„ä¿¡ä»»å’Œéšç§",
                    effect: s => {
                        s.chars.ghost.aff += 4;
                        s.ap = Math.max(0, s.ap - 1);
                    },
                    result: "è¿‡äº†ä¸€ä¼šï¼Œä»–æ‹äº†æ‹ä½ çš„è‚©è†€ã€‚\nâ€œä½ å¯ä»¥è½¬è¿‡æ¥äº†ï¼Œè°¢è°¢ä½ çš„ä¿¡ä»»ã€‚â€"
                },
                {
                    text: "è¯•å›¾å·çœ‹ä»–çš„è„¸",
                    desc: "ä½œæ­»è¡Œä¸º",
                    effect: s => {
                        s.chars.ghost.aff -= 15;
                    },
                    result: "ä¸€æŠŠé£åˆ€ç¬é—´æ’åœ¨ä½ è€³è¾¹çš„å¢™ä¸Šã€‚Ghost å†·å†·åœ°è¯´ï¼šâ€œåˆ«è¶Šç•Œã€‚â€"
                }
            ]
        },

        konig_sketch: {
            text: "KÃ¶nig ç¦»å¼€åï¼Œä½ å‘ç°ä»–è½çš„ä¸€æœ¬ç ´æ—§ç¬”è®°æœ¬ã€‚é‡Œé¢ç”»æ»¡äº†ç´ æï¼Œæœ‰äº›ç”»çš„ç«Ÿç„¶æ˜¯ä½ å·¥ä½œçš„æ ·å­ã€‚",
            type: "event",
            options: [
                {
                    text: "å¦¥å–„ä¿ç®¡ï¼Œç­‰ä»–å›æ¥",
                    desc: "å°Šé‡éšç§",
                    effect: s => {
                        s.chars.konig.aff += 10;
                    },
                    result: "KÃ¶nig å‡ å°æ—¶åæ»¡å¤´å¤§æ±—åœ°è·‘å›æ¥ã€‚å½“ä½ å®Œå¥½åœ°äº¤è¿˜ç»™ä»–æ—¶ï¼Œä»–å¼€å¿ƒå¾—åƒä¸ª2ç±³é«˜çš„å­©å­ã€‚"
                },
                {
                    text: "åœ¨ä¸Šé¢ç”»ä¸ªç¬‘è„¸",
                    desc: "è°ƒçš®çš„å›åº”",
                    effect: s => {
                        s.chars.konig.aff += 15;
                    },
                    result: "ä¸‹æ¬¡è§åˆ° KÃ¶nig æ—¶ï¼Œä»–ç‰¹æ„æŒ‡äº†æŒ‡é‚£ä¸ªç¬‘è„¸ï¼Œçœ‹èµ·æ¥å¿ƒæƒ…å¥½æäº†ã€‚"
                }
            ]
        },

        krueger_pet: {
            text: "Krueger èµ°è¿›åº—é‡Œï¼Œè‚©è†€ä¸Šç«Ÿç„¶åœç€ä¸€åªçœ‹èµ·æ¥å¾ˆå‡¶çŒ›çš„çŒé¹°ã€‚\nâ€œå®ƒé¥¿äº†ã€‚ç»™å®ƒç‚¹è‚‰ã€‚â€",
            speaker: "Krueger",
            type: "dialogue",
            options: [
                {
                    text: "å–‚é£Ÿæœ€å¥½çš„é²œè‚‰ç½å¤´ (-1 Food)",
                    desc: "è®¨å¥½ä»–çš„å® ç‰©å°±æ˜¯è®¨å¥½ä»–",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.chars.krueger.aff += 8;
                        printMsg("Krueger éš¾å¾—éœ²å‡ºäº†ä¸€ä¸ç¬‘æ„ã€‚â€œGood girlï¼Œçœ‹æ¥å®ƒå–œæ¬¢ä½ ã€‚â€", 'dialogue', 'Krueger');
                    },
                    result: "çŒé¹°ç”šè‡³è®©ä½ æ‘¸äº†æ‘¸å®ƒçš„å¤´ï¼ŒKrueger å¯¹æ­¤è¡¨ç¤ºè®¤å¯ã€‚"
                },
                {
                    text: "æ‹’ç»",
                    desc: "äººéƒ½ä¸å¤Ÿåƒè¿˜å–‚é¸Ÿï¼Ÿ",
                    result: "Krueger å•§äº†ä¸€å£°ï¼Œå–‚äº†çŒé¹°ä¸€å—ç”Ÿè‚‰ï¼Œå†·ç€è„¸èµ°äº†ã€‚"
                }
            ]
        },

        drone_crash: {
            text: "ä½ ä¸è¿œå¤„å¬åˆ°ä¸€å£°å·¨å“ã€‚ä¸€æ¶æ— äººæœºå æ¯åœ¨é™„è¿‘çš„åºŸå¢Ÿé‡Œã€‚å†’ç€çƒŸï¼Œçœ‹èµ·æ¥è¿˜æ²¡å½»åº•æŠ¥åºŸã€‚",
            type: "event",
            options: [
                {
                    text: "å°è¯•æ‹†è§£é›¶ä»¶",
                    desc: "æ¶ˆè€—ç²¾åŠ›ï¼Œå¯èƒ½è·å¾—é«˜é¢é‡‘é’±",
                    effect: s => {
                        s.ap = Math.max(0, s.ap - 1);
                        if (chance(70)) {
                            const gain = rng(300, 600);
                            s.money += gain;
                            log(`å›æ”¶ç”µå­å…ƒä»¶è·åˆ© $${gain}`, 'gain');
                            printMsg("ä½ æˆåŠŸæ‹†ä¸‹äº†æ ¸å¿ƒå¤„ç†å™¨å’Œæ‘„åƒå¤´ã€‚", 'system');
                        } else {
                            s.medkit = Math.max(0, s.medkit - 1);
                            log("ç”µæ± çˆ†ç‚¸å—äº†ä¼¤ (-1 Medkit)", 'loss');
                            printMsg("åˆšé è¿‘å®ƒå°±è‡ªçˆ†äº†ï¼ä½ è¢«ç¢ç‰‡åˆ’ä¼¤ã€‚", 'alert');
                        }
                    }
                },
                {
                    text: "æ— è§†",
                    result: "å¤ªå±é™©äº†ï¼Œè¿˜æ˜¯å®ˆåœ¨åº—é‡Œæ¯”è¾ƒå®‰å…¨ã€‚"
                }
            ]
        },

        ammo_gambit: {
            text: "ä¸€ä¸ªç¥è‰²æ…Œå¼ çš„å†›ç«è´©å­è·¯è¿‡ï¼Œä»–æƒ³ä»¥æä½çš„ä»·æ ¼æŠ›å”®ä¸€æ‰¹å­å¼¹ã€‚\nâ€œåªè¦ $100ï¼Œè¿™ç®±å…¨æ˜¯ä½ çš„ï¼ä½†æˆ‘ç°åœ¨å°±è¦èµ°ï¼â€",
            speaker: "Smuggler",
            options: [
                {
                    text: "è´ªä¾¿å®œä¹°ä¸‹ (-$100)",
                    desc: "å¯èƒ½æœ‰è¯ˆ",
                    condition: s => s.money >= 100,
                    effect: s => {
                        s.money -= 100;
                        if (chance(60)) {
                            const gain = rng(5, 10);
                            s.ammo += gain;
                            log(`èµšåˆ°äº†ï¼è·å¾— ${gain} å¼¹è¯`, 'gain');
                            printMsg("æ£€æŸ¥åå‘ç°å­å¼¹éƒ½æ˜¯å¥½è´§ï¼Œè¿™äººå¯èƒ½åªæ˜¯æ€¥ç€é€ƒå‘½ã€‚", 'system');
                        } else {
                            s.ammo += 1;
                            log("è¢«éª—äº†ï¼Œåªæœ‰ä¸Šé¢ä¸€å±‚æ˜¯çœŸçš„", 'loss');
                            printMsg("ç®±å­åº•ä¸‹å…¨æ˜¯çŸ³å¤´ã€‚è¯¥æ­»çš„éª—å­ï¼", 'alert');
                        }
                    }
                },
                {
                    text: "æ‹’ç»",
                    result: "å¤©ä¸Šä¸ä¼šæ‰é¦…é¥¼ï¼Œä½ æ‘‡äº†æ‘‡å¤´ã€‚"
                }
            ]
        },

        refugee_child: {
            text: "ä¸€ä¸ªå°å¥³å­©æ‰’åœ¨ä½ çš„æ©±çª—å¤–ç›¯ç€é‡Œé¢çš„ç½å¤´ï¼Œå¥¹çœ‹èµ·æ¥ç˜¦éª¨å¶™å³‹ï¼Œæ‰‹é‡Œç´§ç´§æ”¥ç€ä¸€æšç”Ÿé”ˆçš„å¾½ç« ã€‚",
            type: "event",
            options: [
                {
                    text: "èµ é€é£Ÿç‰© (-1 Food)",
                    desc: "è·å¾—å¤§é‡ TF141 å£°æœ›",
                    condition: s => s.food >= 1,
                    effect: s => {
                        s.food--;
                        s.rep_141 += 8;
                        s.chars.ghost.aff += 2; // å¦‚æœ Ghost çœ‹åˆ°ä¼šæ¬£èµ
                        log("å–„è¡Œæå‡äº†å£°æœ›", 'gain');
                    },
                    result: "å¥¹ç‹¼åè™å’½åœ°åƒå®Œï¼ŒæŠŠé‚£ä¸ªç”Ÿé”ˆçš„å¾½ç« æ”¾åœ¨é—¨å£ä½œä¸ºè°¢ç¤¼ï¼Œç„¶åè·‘å¼€äº†ã€‚"
                },
                {
                    text: "é©±èµ¶",
                    desc: "ä¿æŠ¤åº“å­˜",
                    result: "å¥¹è¢«å“è·‘äº†ã€‚è™½ç„¶ä½ å®ˆä½äº†é£Ÿç‰©ï¼Œä½†å¿ƒé‡Œæœ‰ç‚¹ä¸æ˜¯æ»‹å‘³ã€‚"
                }
            ]
        },

        storm_leak: {
            text: "æ˜¨æ™šçš„äº¤ç«éœ‡è£‚äº†å±‹é¡¶ï¼Œç°åœ¨å¤–é¢ä¸‹ç€æš´é›¨ï¼Œé›¨æ°´æ­£åœ¨æ»´å‘ä½ çš„å†›ç²®å‚¨å¤‡åŒºï¼",
            type: "alert",
            options: [
                {
                    text: "ç´§æ€¥ä¿®è¡¥ (-$150)",
                    desc: "èŠ±é’±ä¹°ææ–™ä¿®è¡¥",
                    condition: s => s.money >= 150,
                    effect: s => {
                        s.money -= 150;
                        log("æ”¯ä»˜ç»´ä¿®è´¹", 'loss');
                    },
                    result: "ä½ èŠ±é’±è¯·äººè¿…é€Ÿè¡¥å¥½äº†å±‹é¡¶ï¼Œç‰©èµ„å®‰ç„¶æ— æ™ã€‚"
                },
                {
                    text: "æ”¾ä»»ä¸ç®¡",
                    desc: "å¯èƒ½ä¼šæŸå¤±åº“å­˜",
                    effect: s => {
                        if (s.food > 0) {
                            const loss = rng(1, 3);
                            s.food = Math.max(0, s.food - loss);
                            log(`é›¨æ°´æ³¡åäº† ${loss} ä»½å†›ç²®`, 'loss');
                            printMsg("å‡ ç®±å†›ç²®å—æ½®å‘éœ‰ï¼Œåªèƒ½æ‰”æ‰äº†ã€‚", 'alert');
                        } else {
                            printMsg("åæ­£ä¹Ÿæ²¡å‰©å¤šå°‘åƒçš„ï¼Œæ·‹å°±æ·‹å§ã€‚", 'system');
                        }
                    }
                }
            ]
        },

        jammed_gun: {
            text: "ä¸€åæ–°å…µæ»¡å¤´å¤§æ±—åœ°è·‘è¿›æ¥ï¼Œä»–çš„æ­¥æªå¡å£³äº†ï¼Œè€Œé•¿å®˜æ­£åœ¨å¤–é¢å¼ä»–ã€‚\nâ€œè€æ¿ï¼ä½ ä¼šä¿®è¿™ä¸ªå—ï¼Ÿå¿«å¸®å¸®æˆ‘ï¼â€",
            speaker: "Rookie",
            options: [
                {
                    text: "å¸®å¿™ä¿®ç† (æ¶ˆè€— 1 AP)",
                    desc: "ä¸éœ€è¦é›¶ä»¶ï¼Œåªéœ€è¦æŠ€æœ¯",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        if (chance(80)) {
                            s.rep_kortac += 5;
                            s.money += 50;
                            log("ä¿®ç†æˆåŠŸï¼Œè·å¾—å°è´¹", 'gain');
                            printMsg("ä½ ç†Ÿç»ƒåœ°æ‹†è§£å¹¶æ’é™¤äº†æ•…éšœã€‚æ–°å…µæ„Ÿæ¿€åœ°å¡ç»™ä½  $50ã€‚", 'system');
                        } else {
                            printMsg("è¿™æªå½»åº•æŠ¥åºŸäº†ã€‚æ–°å…µç»æœ›åœ°å“­ç€è·‘äº†å‡ºå»ã€‚", 'alert');
                        }
                    }
                },
                {
                    text: "å–ç»™ä»–æ–°æªæ²¹ (-1 Ammo)",
                    desc: "å…¶å®æ˜¯æ‹¿å¼¹è¯é‡Œçš„ç«è¯å‡‘åˆ",
                    condition: s => s.ammo >= 1,
                    effect: s => {
                        s.ammo--;
                        s.money += 80;
                        log("å‡ºå”®åº”æ€¥ç‰©èµ„", 'gain');
                    },
                    result: "ä½ ç»™äº†ä»–ä¸€äº›æ¶¦æ»‘å‰‚ã€‚å¸Œæœ›èƒ½æ’‘è¿‡è¿™åœºæˆ˜æ–—ã€‚"
                }
            ]
        },

        faction_poster: {
            text: "Chimera çš„å®£ä¼ å®˜é€’ç»™ä½ ä¸€å¼ æµ·æŠ¥ï¼Œä¸Šé¢å†™ç€â€œç§©åºæºäºåŠ›é‡â€ã€‚\nâ€œæŠŠå®ƒè´´åœ¨åº—é‡Œæœ€æ˜¾çœ¼çš„ä½ç½®ï¼Œæˆ‘ä»¬ä¼šè®°ä½ä½ çš„å¿ è¯šã€‚â€",
            speaker: "Chimera Rep",
            options: [
                {
                    text: "å¼ è´´æµ·æŠ¥",
                    desc: "Chimeraå¥½æ„Ÿâ†‘ï¼Œå…¶ä»–â†“",
                    effect: s => {
                        s.rep_chimera += 10;
                        s.rep_141 -= 5;
                        s.rep_kortac -= 5;
                        log("å…¬å¼€æ”¯æŒ Chimera", 'info');
                    },
                    result: "å®£ä¼ å®˜æ»¡æ„åœ°ç‚¹ç‚¹å¤´ã€‚ä½†è¿›æ¥çš„å…¶ä»–é˜µè¥å£«å…µçœ‹ä½ çš„çœ¼ç¥å˜äº†ã€‚"
                },
                {
                    text: "å©‰æ‹’",
                    desc: "ä¿æŒä¸­ç«‹",
                    effect: s => {
                        s.rep_chimera -= 3;
                    },
                    result: "â€œä¸è¯†æŠ¬ä¸¾ã€‚â€ ä»–å†·å“¼ä¸€å£°èµ°äº†ã€‚"
                }
            ]
        },

        mystery_pills: {
            text: "ä½ åœ¨æ¸…ç†æŸœå°ç¼éš™æ—¶å‘ç°äº†ä¸€ç“¶æ²¡æ ‡ç­¾çš„è¯å‰‚ï¼Œçœ‹èµ·æ¥åƒæ˜¯æŸç§å¼ºåŠ›å…´å¥‹å‰‚ã€‚",
            type: "event",
            options: [
                {
                    text: "è‡ªå·±è¯•ç”¨",
                    desc: "æ¢å¤ç²¾åŠ›æˆ–ä¸­æ¯’",
                    effect: s => {
                        if (chance(50)) {
                            s.ap = Math.min(3, s.ap + 2);
                            log("ç²¾åŠ›å……æ²›ï¼(+2 AP)", 'gain');
                            printMsg("æ„Ÿè§‰å¥½æäº†ï¼å°±åƒæ‰“äº†è‚¾ä¸Šè…ºç´ ï¼", 'system');
                        } else {
                            s.medkit = Math.max(0, s.medkit - 1);
                            log("è¯ç‰©è¿‡æ• (-1 Medkit)", 'loss');
                            printMsg("ç³Ÿç³•ï¼Œè¿™æ˜¯è¿‡æœŸè¯ï¼ä½ åäº†ä¸€åœ°ï¼Œä¸å¾—ä¸ç»™è‡ªå·±æ‰“ç‚¹æ»´ã€‚", 'alert');
                        }
                    }
                },
                {
                    text: "é‡æ–°åŒ…è£…å–æ‰",
                    desc: "å¢åŠ  1 ä¸ªåŒ»ç–—åŒ…åº“å­˜",
                    effect: s => {
                        s.medkit++;
                        log("è·å¾— 1 Medkit", 'gain');
                    },
                    result: "ä½ è´´äº†ä¸ªâ€œå¼ºæ•ˆæ­¢ç—›è¯â€çš„æ ‡ç­¾æŠŠå®ƒæ”¾å›äº†è´§æ¶ã€‚å¸Œæœ›èƒ½å–å‡ºå»ã€‚"
                }
            ]
        },

        sniper_duel: {
            text: "â€œåˆ«åŠ¨ï¼â€ æ— çº¿ç”µé‡Œä¼ æ¥ Ghost çš„å£°éŸ³ï¼Œâ€œæˆ‘è¢«å‹åˆ¶äº†ï¼Œå¯¹é¢æ¥¼é¡¶æœ‰ä¸ªç‹™å‡»æ‰‹ï¼Œæˆ‘éœ€è¦ä½ åœ¨é‚£ä¸ªæ–¹å‘æ”¾ä¸ªçƒŸèŠ±æˆ–è€…éšä¾¿ä»€ä¹ˆä¸œè¥¿å¹²æ‰°ä»–ä¸€ä¸‹ã€‚â€",
            speaker: "Ghost (Radio)",
            options: [
                {
                    text: "åˆ¶é€ çˆ†ç‚¸å£° (-2 Ammo)",
                    desc: "æ¶ˆè€—å¼¹è¯å¼•çˆ†åºŸå¢Ÿ",
                    condition: s => s.ammo >= 2,
                    effect: s => {
                        s.ammo -= 2;
                        s.chars.ghost.aff += 8;
                        s.rep_141 += 5;
                        log("ååŠ© Ghost å‡»æ€ç›®æ ‡", 'gain');
                    },
                    result: "ä¸€å£°å·¨å“åï¼Œä½ å¬åˆ°æ— çº¿ç”µé‡Œä¼ æ¥æªå£°å’Œ Ghost çš„è½»ç¬‘ï¼šâ€œç›®æ ‡æ¸…é™¤ï¼Œæ¬ ä½ ä¸€æ¬¡ã€‚â€"
                },
                {
                    text: "ä¿æŒé™é»˜",
                    desc: "ä¸æƒ³å·å…¥æˆ˜æ–—",
                    effect: s => {
                        s.chars.ghost.aff -= 2;
                    },
                    result: "å‡ åˆ†é’Ÿåï¼Œæªå£°åœæ­¢äº†ï¼Œä½ ä¸çŸ¥é“è°èµ¢äº†ï¼Œä½†è¿™è®©ä½ å¾ˆç„¦è™‘ã€‚"
                }
            ]
        },

// ã€ä¿®æ”¹ã€‘åå‹¤å¨å¸ˆ (å‰Šå¼±ç‰ˆï¼šé«˜é£é™©é«˜æ”¶ç›Š)
        bulk_food_buyer: {
            text: "é‚£ä¸ªå¤§å—å¤´å¨å¸ˆåˆæ¥äº†ï¼Œä»–çœ‹èµ·æ¥å¾ˆç€æ€¥ã€‚\nâ€œå‰çº¿åƒç´§ï¼æˆ‘éœ€è¦ä½ æ‰€æœ‰çš„å†›ç²®ï¼ä½†æˆ‘ä»Šå¤©é¢„ç®—æœ‰é™ï¼Œåªèƒ½å‡º 1.2 å€çš„ä»·æ ¼ã€‚â€",
            speaker: "The Cook",
            options: [
                {
                    text: "1.2å€å‡ºå”® (ç¨³å¦¥)",
                    desc: "æ¸…ç©ºåº“å­˜ï¼Œå°èµšä¸€ç¬”",
                    condition: s => s.food > 0,
                    effect: s => {
                        const amount = s.food;
                        // å‰Šå¼±ï¼šå€ç‡ä» 2.5 é™ä¸º 1.2
                        const profit = Math.floor(amount * CONFIG.sell_price.food * 1.2);
                        s.food = 0;
                        s.money += profit;
                        log(`å‡ºå”®æ‰€æœ‰é£Ÿç‰©ï¼Œè·åˆ© $${profit}`, 'gain');
                    },
                    result: "â€œè°¢äº†ï¼è™½ç„¶ä¸å¤šï¼Œä½†è¿™èƒ½æ•‘æ€¥ã€‚â€ å¨å¸ˆæ‰›ç€ç®±å­è·‘äº†ã€‚"
                },
                {
                    text: "ååœ°èµ·ä»· (è¦æ±‚ 2.5 å€)",
                    desc: "æˆåŠŸç‡ 30%ï¼Œå¤±è´¥ä¼šå¯¼è‡´ä»–æ„¤æ€’ç¦»å¼€",
                    condition: s => s.food > 0,
                    effect: s => {
                        if (chance(30)) {
                            const amount = s.food;
                            const profit = Math.floor(amount * CONFIG.sell_price.food * 2.5);
                            s.food = 0;
                            s.money += profit;
                            log(`è°ˆåˆ¤æˆåŠŸï¼æš´åˆ© $${profit}`, 'gain');
                            printMsg("å¨å¸ˆå’¬å’¬ç‰™ï¼šâ€œè¡Œï¼ç®—ä½ ç‹ ï¼æˆ‘ä¹°äº†ï¼â€", 'system');
                        } else {
                            s.rep_141 -= 5;
                            s.rep_kortac -= 5; // å¾—ç½ªé˜µè¥
                            log("è°ˆåˆ¤ç ´è£‚ï¼Œå¾—ç½ªäº†åå‹¤éƒ¨", 'loss');
                            printMsg("å¨å¸ˆå¤§æ€’ï¼šâ€œä½ æƒ³è¶ç«æ‰“åŠ«ï¼Ÿåšæ¢¦ï¼â€ ä»–æ‘”é—¨è€Œå»ã€‚", 'alert');
                        }
                    }
                }
            ]
        },
// --- æ–°å¢é£é™©äº‹ä»¶ 1ï¼šç¨åŠ¡ç¨½æŸ¥ ---
        tax_audit: {
            text: "å‡ åå…¨å‰¯æ­¦è£…çš„ KorTac å†›å®˜èµ°è¿›äº†åº—é‡Œï¼Œä»–ä»¬æ‰‹é‡Œæ‹¿ç€è´¦æœ¬ã€‚\nâ€œæ ¹æ®æˆ˜åŒºä¸´æ—¶ç®¡ç†æ¡ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¸æŸ¥ä½ çš„ç¨åŠ¡æƒ…å†µã€‚äº¤å‡º $1800 ç¨æ¬¾ï¼Œæˆ–è€…æ¥å—â€˜èµ„äº§æ²¡æ”¶â€™ã€‚â€",
            speaker: "Tax Officer",
            type: "alert",
            options: [
                {
                    text: "ç¼´çº³ç¨æ¬¾ (-$1800)",
                    desc: "ç ´è´¢å…ç¾",
                    condition: s => s.money >= 1800,
                    effect: s => {
                        s.money -= 1800;
                        s.rep_kortac += 2;
                        log("ç¼´çº³äº†é«˜é¢ç¨æ¬¾", 'loss');
                    },
                    result: "â€œå¾ˆå¥½ï¼Œä½ æ˜¯åˆè§„ç»è¥è€…ã€‚â€ ä»–ä»¬æ‹¿ç€é’±æ»¡æ„åœ°èµ°äº†ã€‚"
                },
                {
                    text: "æš´åŠ›æŠ—ç¨ / æ²¡é’±",
                    desc: "æ‰£é™¤å¤§é‡å£°æœ›å¹¶æ²¡æ”¶ç°æœ‰èµ„é‡‘çš„ 30%",
                    effect: s => {
                        s.rep_kortac -= 20;
                        const fine = Math.floor(s.money * 0.3);
                        s.money -= fine;
                        log(`è¢«å¼ºåˆ¶å¾æ”¶ $${fine}`, 'loss');
                    },
                    result: "ä»–ä»¬å¼ºè¡Œæ’¬å¼€äº†ä½ çš„æ”¶é“¶æœºï¼Œæ‹¿èµ°äº†ä¸€éƒ¨åˆ†ç°é‡‘ï¼Œå¹¶æŠŠåº—é‡Œç ¸å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚"
                }
            ]
        },

        // --- æ–°å¢é£é™©äº‹ä»¶ 2ï¼šç‰©èµ„å—æ½® ---
        humidity_disaster: {
            text: "è¯¥æ­»ï¼åœ°ä¸‹å®¤çš„é™¤æ¹¿æœºåäº†ï¼Œæ˜¨æ™šçš„æ½®æ°”å…¥ä¾µäº†ä»“åº“ã€‚å¦‚æœä½ ä¸ç«‹åˆ»èŠ±é’±ç»´ä¿®å¹¶çƒ˜å¹²ï¼Œåº“å­˜å°†ä¼šæŸå¤±æƒ¨é‡ã€‚",
            type: "alert",
            options: [
                {
                    text: "ç´§æ€¥ç»´æŠ¤ (-$300)",
                    desc: "ä¿ä½åº“å­˜",
                    condition: s => s.money >= 300,
                    effect: s => {
                        s.money -= 300;
                        log("æ”¯ä»˜ç»´ä¿®è´¹", 'loss');
                    },
                    result: "ä½ èŠ±äº†ä¸€å¤§ç¬”é’±ä¿®å¥½äº†æœºå™¨ï¼Œç‰©èµ„ä¿ä½äº†ã€‚"
                },
                {
                    text: "æ”¾å¼ƒæŠ¢æ•‘",
                    desc: "éšæœºæŸå¤± 20%~40% çš„æ‰€æœ‰åº“å­˜",
                    effect: s => {
                        const lossMed = Math.floor(s.medkit * rng(20, 40) / 100);
                        const lossFood = Math.floor(s.food * rng(20, 40) / 100);
                        const lossAmmo = Math.floor(s.ammo * rng(20, 40) / 100);
                        
                        s.medkit -= lossMed;
                        s.food -= lossFood;
                        s.ammo -= lossAmmo;
                        
                        log(`å—æ½®æŸå¤±: è¯-${lossMed}, é£Ÿ-${lossFood}, å¼¹-${lossAmmo}`, 'loss');
                    },
                    result: "çœ‹ç€å‘éœ‰çš„é£Ÿç‰©å’Œç”Ÿé”ˆçš„å­å¼¹ï¼Œä½ å¿ƒç—›ä¸å·²ã€‚"
                }
            ]
        },

        // --- æ–°å¢é£é™©äº‹ä»¶ 3ï¼šæµæ°“ä¿æŠ¤è´¹ ---
        protection_racket: {
            text: "å‡ ä¸ªå¸¦ç€ Chimera æ ‡å¿—çš„æš´å¾’å µä½äº†é—¨å£ã€‚\nâ€œè¿™ç‰‡åŒºåŸŸç°åœ¨å½’æˆ‘ä»¬ç®¡ã€‚æ¯å‘¨çš„â€˜å®‰ä¿è´¹â€™æ˜¯ $1200ã€‚ä¸æƒ³äº¤ï¼Ÿé‚£ä½ çš„åº—å¯èƒ½å°±ä¸å®‰å…¨äº†ã€‚â€",
            speaker: "Thug Leader",
            type: "alert",
            options: [
                {
                    text: "æ”¯ä»˜ (-$1200)",
                    desc: "è·å¾— Chimera å£°æœ›",
                    condition: s => s.money >= 1200,
                    effect: s => {
                        s.money -= 1200;
                        s.rep_chimera += 5;
                        log("æ”¯ä»˜ä¿æŠ¤è´¹", 'loss');
                    },
                    result: "â€œè¿™å°±å¯¹äº†ï¼Œæˆ‘ä»¬ä¼šâ€˜ç½©â€™ç€ä½ çš„ã€‚â€"
                },
                {
                    text: "å‘¼å« Ghost å¸®å¿™",
                    desc: "éœ€è¦ Ghost å¥½æ„Ÿ > 50",
                    condition: s => s.chars.ghost.aff > 50,
                    effect: s => {
                        s.rep_chimera -= 10;
                        printMsg("Ghost ä»é˜´å½±ä¸­ç°èº«ï¼Œä¸€è¨€ä¸å‘åœ°ç»™æ‰‹æªä¸Šè†›ï¼Œæš´å¾’ä»¬ç¬é—´è„¸è‰²æƒ¨ç™½ï¼Œå±æ»šå°¿æµåœ°é€ƒè·‘äº†ã€‚", 'event');
                    },
                    result: "Ghost æ”¶èµ·æªï¼šâ€œæ¸…ç†å¹²å‡€äº†ã€‚â€"
                },
                {
                    text: "æ‹’ç»æ”¯ä»˜",
                    desc: "å¤§æ¦‚ç‡è¢«æ‰“åŠ«",
                    effect: s => {
                        if(chance(20)) {
                            printMsg("ä½ æ°”åŠ¿å¤ªå¼ºï¼Œä»–ä»¬å±…ç„¶è¢«å“é€€äº†ã€‚", 'gain');
                        } else {
                            s.money = Math.floor(s.money * 0.5); // æŸå¤±ä¸€åŠç°é‡‘
                            s.medkit = Math.max(0, s.medkit - 5);
                            log("é­åˆ°æ´—åŠ«ï¼ŒæŸå¤±æƒ¨é‡", 'loss');
                            printMsg("ä»–ä»¬å†²è¿›æ¥æŠŠä½ æ‰“äº†ä¸€é¡¿ï¼ŒæŠ¢èµ°äº†æ”¶é“¶æœºé‡Œçš„ä¸€åŠç°é‡‘å’ŒæŸœå°ä¸Šçš„è¯åŒ…ã€‚", 'alert');
                        }
                    }
                }
            ]
        },

        abandoned_merc: {
            text: "KorTac æ’¤é€€æ—¶é—å¼ƒäº†ä¸€åé‡ä¼¤å‘˜åœ¨ä½ çš„åå··ã€‚ä»–çœ‹èµ·æ¥å¿«ä¸è¡Œäº†ã€‚",
            type: "event",
            options: [
                {
                    text: "æ•‘æ²»å¹¶é€šçŸ¥ KorTac (-1 Medkit)",
                    desc: "KorTac å¥½æ„Ÿå¤§å¹…æå‡",
                    condition: s => s.medkit >= 1,
                    effect: s => {
                        s.medkit--;
                        s.rep_kortac += 10;
                        s.chars.konig.aff += 3; // Konig å°Šé‡è¿™ç§è¡Œä¸º
                        log("æ•‘å›ä¸€å KorTac å£«å…µ", 'gain');
                    },
                    result: "KorTac çš„å›æ”¶å°é˜Ÿéšåèµ¶åˆ°ï¼Œå¯¹ä½ çš„ä¸“ä¸šå’Œä¸­ç«‹è¡¨ç¤ºäº†æå¤§çš„èµèµã€‚"
                },
                {
                    text: "æŠŠä»–äº¤ç»™ TF141",
                    desc: "ä½œä¸ºä¿˜è™äº¤æ¢èµé‡‘",
                    effect: s => {
                        s.money += 200;
                        s.rep_kortac -= 10;
                        s.rep_141 += 5;
                        log("å‡ºå–ä¼¤å‘˜è·å¾— $200", 'gain');
                    },
                    result: "TF141 æŠŠäººå¸¦èµ°äº†ã€‚è¿™å¾ˆæ®‹é…·ï¼Œä½†è¿™å°±æ˜¯æˆ˜äº‰ç”Ÿæ„ã€‚"
                }
            ]
        },

        jammer_found: {
            text: "ä½ åœ¨åº—é—¨å£å‘ç°äº†ä¸€ä¸ªæ­£åœ¨è¿ä½œçš„å¹²æ‰°è£…ç½®ï¼Œè¿™ä¸œè¥¿å¯¼è‡´é™„è¿‘çš„é€šè®¯å…¨éƒ¨ä¸­æ–­äº†ã€‚",
            type: "event",
            options: [
                {
                    text: "æ‹†é™¤å¹¶å›æ”¶é›¶ä»¶ (æ¶ˆè€— 1 AP)",
                    desc: "è·å¾—ç”µå­å…ƒä»¶",
                    condition: s => s.ap > 0,
                    effect: s => {
                        s.ap--;
                        const gain = rng(150, 250);
                        s.money += gain;
                        log(`å›æ”¶é›¶ä»¶è·åˆ© $${gain}`, 'gain');
                    },
                    result: "ä½ æš´åŠ›æ‹†è§£äº†å®ƒã€‚é€šè®¯æ¢å¤äº†ï¼Œä½ ä¹Ÿå¾—åˆ°äº†ä¸€äº›å€¼é’±çš„ç”µè·¯æ¿ã€‚"
                },
                {
                    text: "å¼€å¯å¹¶å¢å¼ºåŠŸç‡",
                    desc: "åˆ¶é€ æ··ä¹±ï¼Œæœ‰äººä¼šå–œæ¬¢çš„",
                    effect: s => {
                        s.rep_chimera += 8;
                        printMsg("æ··ä¹±æ˜¯ Chimera çš„é˜¶æ¢¯ã€‚ç¨åæœ‰äººåœ¨ä½ çš„é—¨ç¼é‡Œå¡äº†å¼ æ„Ÿè°¢æ¡ã€‚", 'system');
                    },
                    result: "æ•´ä¸ªåŒºåŸŸé™·å…¥äº†æ— çº¿ç”µé™é»˜ï¼Œè¿™è‚¯å®šæç ¸äº†æŸäº›äººçš„è¡ŒåŠ¨ã€‚"
                }
            ]
        },

        double_spy: {
            text: "ä¸€ååŒé‡é—´è°èµ°è¿›åº—é‡Œï¼Œä»–æ‰‹é‡Œæœ‰ä¸€ä»½å…³äº TF141 ä¸‹ä¸€æ¬¡è¡ŒåŠ¨çš„æƒ…æŠ¥ã€‚ä»–æƒ³å–ç»™ä½ ï¼Œæˆ–è€…è®©ä½ è½¬äº¤ç»™ KorTacã€‚",
            speaker: "Spy",
            options: [
                {
                    text: "ä¹°ä¸‹æƒ…æŠ¥ ($300)",
                    desc: "ä¹‹åå¯ä»¥é«˜ä»·å–ç»™ KorTac",
                    condition: s => s.money >= 300,
                    effect: s => {
                        s.money -= 300;
                        s.rep_kortac += 15;
                        s.money += 500; // è‡ªåŠ¨è½¬å–é€»è¾‘ç®€åŒ–
                        log("æƒ…æŠ¥å€’æ‰‹è·åˆ© $200", 'gain');
                    },
                    result: "ä½ è½¬æ‰‹å°±æŠŠæƒ…æŠ¥å–ç»™äº† KorTac çš„è”ç»œäººã€‚è™½ç„¶æœ‰ç‚¹ä¸é“å¾·ï¼Œä½†åˆ©æ¶¦å¯è§‚ã€‚"
                },
                {
                    text: "æ‰£æŠ¼å¹¶äº¤ç»™ TF141",
                    desc: "å¤§å¹…æå‡ TF141 å¥½æ„Ÿ",
                    effect: s => {
                        s.rep_141 += 15;
                        s.rep_kortac -= 10;
                    },
                    result: "ä½ ç§˜å¯†è”ç³»äº† Price ä¸Šå°‰ã€‚é‚£ä¸ªé—´è°æ²¡èƒ½èµ°å‡ºè¿™ç‰‡åŒºåŸŸã€‚"
                }
            ]
        },

        desperate_soldier: {
            text: "å‰çº¿åˆšæ’¤ä¸‹æ¥ä¸€åå£«å…µï¼Œå…¨èº«æ˜¯æ³¥ï¼Œè¯ä»¶å’Œé’±åŒ…éƒ½ä¸¢äº†ã€‚ä»–æ‹¿å‡ºä¸€å¼ è„å…®å…®çš„çº¸æ¡ã€‚\nâ€œæ±‚ä½ äº†ï¼Œæˆ‘éœ€è¦ 3 ä¸ªåŒ»ç–—åŒ…æ•‘æˆ‘çš„å…„å¼Ÿã€‚æˆ‘ç»™ä½ æ‰“æ¬ æ¡ã€‚â€",
            speaker: "Soldier",
            options: [
                   {
                    text: "æ–½èˆ (-3 Medkit)",
                    desc: "å¯èƒ½æ²¡æœ‰ä»»ä½•ç‰©è´¨å›æŠ¥",
                    condition: s => s.medkit >= 3,
                    effect: s => {
                        s.medkit -= 3;
                        // ğŸŸ¢ ã€ä¿®å¤ã€‘è¡¥ä¸Š Ghosts
                        s.rep_141 += 3; s.rep_kortac += 3; s.rep_chimera += 3; s.rep_ghosts += 3;
                        
                        log("åšäº†ä»¶å¥½äº‹", 'info');
                    },
                    result: "å£«å…µå«ç€æ³ªæ¥è¿‡ç‰©èµ„ã€‚â€œä¸Šå¸ä¿ä½‘ä½ ã€‚â€"
                },
                {
                    text: "æ‹’ç»",
                    desc: "è¿™é‡Œä¸æ˜¯æ…ˆå–„æœºæ„",
                    result: "å£«å…µç»æœ›åœ°è·ªåœ¨åœ°ä¸Šï¼Œæœ€ç»ˆè¢«é˜Ÿå‹æ‹–èµ°äº†ã€‚"
                }
            ]
        },

// ğŸŸ¢ [Keegan ä¸“å±] æ‹çˆ±æ—¥å¸¸ï¼šé—¹äº‹è€…çš„ä¸‹åœº
        keegan_shop_protection: {
            text: "ä¸€åä¸€è„¸æ¨ªè‚‰çš„é—¹äº‹è€…çŒ›æ‹æŸœå°ï¼Œéœ‡å¾—è¯ç“¶ä¹±é¢¤ã€‚\nâ€œè¿™ç»·å¸¦æ˜¯å‘éœ‰çš„ï¼èµ”æˆ‘ $500 ç²¾ç¥æŸå¤±è´¹ï¼Œä¸ç„¶æˆ‘å°±åœ¨é»‘å¸‚å¹¿æ’­é‡Œåˆ·ä½ çš„å·®è¯„ï¼Œè®©ä½ å¼€ä¸ä¸‹å»ï¼â€\n(ä½ çŸ¥é“ä»–åœ¨è®¹è¯ˆï¼Œè±åˆ©åœ¨è§’è½é‡Œå‘å‡ºäº†ä½å¼)",
            speaker: "Thug",
            type: "alert",
            options: [
                {
                    text: "èŠ±é’±æ¶ˆç¾ (-$500)",
                    desc: "å¿æ°”åå£°ä¿è¯„åˆ†",
                    condition: s => s.money >= 500,
                    effect: s => {
                        s.money -= 500;
                        addShopRating(4.0, true);
                        log("é­é‡å‹’ç´¢", 'loss');
                    },
                    result: "â€œç®—ä½ è¯†ç›¸ã€‚â€ ä»–æ‹¿é’±èµ°äº†ã€‚"
                },
                {
                    text: "ç¡¬å¹²åˆ°åº•",
                    desc: "æ‹’ä¸èµ”å¿ (è¯„åˆ†ä¸‹é™)",
                    effect: s => {
                        addShopRating(1.0, false);
                    },
                    result: "ä»–åœ¨é—¨å£éª‚äº†åŠå¤©ï¼Œç¡®å®å½±å“äº†ç”Ÿæ„ã€‚"
                },
                // ğŸŸ¢ Keegan æ‹çˆ±ä¸“å±é€‰é¡¹
                {
                    text: "ã€Keeganã€‘å…³é—¨ï¼Œä¸¢å‡ºå»",
                    desc: "ç”·å‹åŠ›çˆ†æ£š (éœ€ä¸ Keegan æ‹çˆ±)",
                    // åªæœ‰æ‹çˆ±æ‰è§¦å‘ï¼Œä¸”å¤§æ¦‚ç‡æˆåŠŸ
                    condition: s => s.chars.keegan.dating,
                    effect: s => {
                        s.chars.keegan.aff += 5;
                        addShopRating(5.0, true); // é¡¾å®¢è§‰å¾—å¾ˆæœ‰å®‰å…¨æ„Ÿ
                        printMsg("ä¸€ç›´åœ¨è§’è½é‡Œå®‰é™æ“¦ç‹™å‡»é•œçš„ Keegan çªç„¶åŠ¨äº†ã€‚\nä»–å•æ‰‹æªä½é‚£äººçš„è¡£é¢†ï¼Œåƒæåƒåœ¾ä¸€æ ·æŠŠä»–åŒè„šç¦»åœ°æäº†èµ·æ¥ã€‚", 'event');
                    },
                    result: "Keegan æ²¡æœ‰å¤šåºŸè¯ï¼Œç›´æ¥æŠŠé‚£äººæ‰”å‡ºäº†å¤§é—¨å¤–ï¼ˆç‰©ç†ï¼‰ã€‚\né‚£äººå“å¾—è¿æ»šå¸¦çˆ¬ï¼ŒKeegan å›å¤´çœ‹å‘ä½ è½»è½»è€¸äº†è€¸è‚©ï¼Œå¸®ä½ æ‰¶æ­£äº†æŸœå°ä¸Šçš„æ‘†ä»¶"
                }
            ]
        }, // <--- å¦‚æœè¿™æ˜¯æœ€åä¸€ä¸ªäº‹ä»¶ï¼Œè¿™é‡Œä¸è¦åŠ é€—å·ï¼›å¦‚æœåé¢è¿˜æœ‰ï¼Œè®°å¾—åŠ é€—å·

        water_crisis: {
            text: "é™„è¿‘çš„æ°´æºè¢«æ±¡æŸ“äº†ï¼Œå¹²å‡€çš„é¥®ç”¨æ°´å’Œé£Ÿç‰©å˜å¾—æåº¦ç´§ç¼ºã€‚",
            type: "event",
            options: [
                {
                    text: "è¶æœºæ¶¨ä»·å‡ºå”®å†›ç²®",
                    desc: "å–å‡º 5 Food, è·å¾— 3 å€åˆ©æ¶¦",
                    condition: s => s.food >= 5,
                    effect: s => {
                        s.food -= 5;
                        const gain = CONFIG.sell_price.food * 5 * 3;
                        s.money += gain;
                        s.rep_141 -= 5; s.rep_kortac -= 5;
                        log(`å¤§å‘æ¨ªè´¢ $${gain}`, 'gain');
                    },
                    result: "è™½ç„¶å¤§å®¶éƒ½åœ¨éª‚ä½ ï¼Œä½†ä»–ä»¬è¿˜æ˜¯æé’±äº†ã€‚"
                },
                {
                    text: "å¹³ä»·ä¾›åº”",
                    desc: "è·å¾—å£°æœ›",
                    effect: s => {
                        s.rep_141 += 5;
                        s.rep_kortac += 5; s.rep_chimera += 5;
                    },
                    result: "äººä»¬è®°ä½äº†ä½ çš„ä»æ…ˆã€‚"
                }
            ]
        }
    }
};
       
// --- æ¢ç´¢é€»è¾‘ ---

/**
 * åŠ æƒéšæœºé€‰æ‹©å‡½æ•°
 * @param {Array} pool - åŒ…å« weight å±æ€§çš„å¯¹è±¡æ•°ç»„
 * @returns {Object} é€‰ä¸­çš„å¯¹è±¡
 */
function weightedSelection(pool) {
    const totalWeight = pool.reduce((sum, item) => sum + item.weight, 0);
    let randomNum = Math.random() * totalWeight;

    for (const item of pool) {
        if (randomNum < item.weight) {
            return item;
        }
        randomNum -= item.weight;
    }
    return pool[pool.length - 1];
}

// è¶…è¿‡ 90 ç§å¯èƒ½çš„æ¢ç´¢ç»“æœ (å·²å¤§å¹…æ‰©å……)
const ExplorationOutcomes = [
    // ==========================================
    // ğŸŸ¢ 1. é«˜æ”¶ç›Š (High Gain) - æƒé‡ ~20%
    // ==========================================
    { weight: 10, msg: "ä½ åœ¨ä¸€ä¸ªè¢«ç‚¸æ¯çš„å‚¨ç‰©æŸœé‡Œæ‰¾åˆ°äº†ä¸€ç®±å†›ç«ã€‚", resource: 'ammo', amount: rng(8, 15), type: 'gain' },
    { weight: 10, msg: "ä½ å‘ç°äº†ä¸€å †è¢«ä¸¢å¼ƒçš„å†›ç”¨åŒ»ç–—ç”¨å“ã€‚", resource: 'medkit', amount: rng(2, 4), type: 'gain' },
    { weight: 15, msg: "ä½ åœ¨ä¸€ä¸ªä¿é™©ç®±æ®‹éª¸ä¸­æ’¬å‡ºäº†å¤§é‡ç°é‡‘ã€‚", resource: 'money', amount: rng(300, 600), type: 'gain' },
    { weight: 5, msg: "ä½ åœ¨ä¸€ä¸ªè¢«æ©åŸ‹çš„ä¿é™©æŸœé‡Œæ‰¾åˆ°äº†å¤§é‡ç°é‡‘ï¼Œå¿…é¡»ç«‹åˆ»å¸¦èµ°ï¼", resource: 'money', amount: rng(800, 1200), type: 'gain_major' },
    
    // [æ–°å¢ 10 æ¡]
    { weight: 8, msg: "ä½ å‘ç°äº†ä¸€è¾†ä¾§ç¿»çš„è¿é’è½¦ï¼Œè™½ç„¶å¤§éƒ¨åˆ†ç©ºäº†ï¼Œä½†è§’è½é‡Œè¿˜å‰©ä¸€è¢‹é’±ã€‚", resource: 'money', amount: rng(500, 900), type: 'gain_major' },
    { weight: 8, msg: "ä½ é—¯å…¥äº†ä¸€ä¸ªåºŸå¼ƒçš„é‡æˆ˜åŒ»é™¢ï¼Œæ‰¾åˆ°äº†ä¸€æ•´ç®±æœªå¼€å°çš„æŠ—ç”Ÿç´ ã€‚", resource: 'medkit', amount: rng(3, 5), type: 'gain' },
    { weight: 8, msg: "ä½ å‘ç°äº†ä¸€ä¸ªéšè”½çš„çŒäººåœ°çª–ï¼Œé‡Œé¢æŒ‚æ»¡äº†é£å¹²çš„è‚‰æ¡ï¼", resource: 'food', amount: rng(10, 20), type: 'gain' },
    { weight: 8, msg: "ä½ åœ¨ä¸€ä¸ªæ­»å»çš„é»‘å¸‚å•†äººçš„èƒŒåŒ…é‡Œå‘ç°äº†å¤§é‡å¼¹è¯ã€‚", resource: 'ammo', amount: rng(15, 25), type: 'gain' },
    { weight: 5, msg: "è¿æ°”çˆ†æ£šï¼ä½ æ¡åˆ°äº†ä¸€å—å®Œå¥½çš„æˆ˜æœ¯å¹³æ¿ç”µè„‘ï¼Œè½¬æ‰‹å–äº†å¤§ä»·é’±ã€‚", resource: 'money', amount: 800, type: 'gain_major' },
    { weight: 6, msg: "ä½ å‘ç°äº†ä¸€ä¸ªç©ºæŠ•è¡¥ç»™ç®±ï¼Œè™½ç„¶é™è½ä¼æŒ‚åœ¨æ ‘ä¸Šï¼Œä½†é‡Œé¢çš„ä¸œè¥¿è¿˜åœ¨ã€‚", resource: 'food', amount: rng(8, 15), type: 'gain' },
    { weight: 6, msg: "ä½ åœ¨åºŸå¢Ÿä¸‹æŒ–å‡ºäº†ä¸€ä¸ªå®Œå¥½çš„æ€¥æ•‘åŒ…ã€‚", resource: 'medkit', amount: 3, type: 'gain' },
    { weight: 6, msg: "ä½ å‘ç°äº†ä¸€ä¸ªå†›ç«è´©å­çš„ä¸´æ—¶è—åŒ¿ç‚¹ã€‚", resource: 'ammo', amount: rng(20, 30), type: 'gain_major' },
    { weight: 5, msg: "ä½ åœ¨é«˜çº§å…¬å¯“çš„åºŸå¢Ÿé‡Œæ‰¾åˆ°äº†ä¸€ç›’æ˜‚è´µçš„ç å®ã€‚", resource: 'money', amount: 1000, type: 'gain_major' },
    { weight: 5, msg: "ä½ å‘ç°äº†ä¸€è¾†æ»¡è½½ç‡ƒæ²¹çš„æ‘©æ‰˜è½¦ï¼ŒæŠ½å¹²ç‡ƒæ²¹å–äº†ä¸å°‘é’±ã€‚", resource: 'money', amount: rng(400, 700), type: 'gain' },
// [æ–°å¢ 10 æ¡ï¼šåºŸåœŸç”Ÿæ´»ç™¾æ€]
    { weight: 7, msg: "ä½ åœ¨ä¸€è¾†åºŸå¼ƒçš„å†°æ·‡æ·‹è½¦é‡Œæ‰¾åˆ°äº†å‡ ç½è¿˜æ²¡åçš„ç‚¼ä¹³ã€‚", resource: 'food', amount: rng(4, 8), type: 'gain' },
    { weight: 7, msg: "ä½ åœ¨å¢™ç¼é‡Œå‘ç°äº†ä¸€ä¸ªç§æˆ¿é’±é“ç›’ï¼Œé‡Œé¢å¡æ»¡äº†çš±å·´å·´çš„é’ç¥¨ã€‚", resource: 'money', amount: rng(150, 300), type: 'gain' },
    { weight: 6, msg: "ä½ æ¡åˆ°äº†ä¸€å¼  TF141 çš„æˆ˜æœ¯åœ°å›¾ï¼Œä¸Šé¢æ ‡è®°äº†ä¸€ä¸ªè¡¥ç»™ç‚¹ã€‚", resource: 'ammo', amount: rng(10, 20), type: 'gain' },
    { weight: 5, msg: "ä½ èµ°è·¯ä¸çœ‹è·¯ï¼Œæ‰è¿›äº†ä¸€ä¸ªæµ…å‘ï¼Œæ‰­ä¼¤äº†è„šè¸ã€‚", resource: 'medkit', amount: -1, type: 'loss' },
    { weight: 5, msg: "ä¸€åªå˜å¼‚çš„ä¹Œé¸¦æŠ¢èµ°äº†ä½ æ‰‹é‡Œçš„ä¸€å—å‹ç¼©é¥¼å¹²ï¼", resource: 'food', amount: -1, type: 'loss' },
    { weight: 6, msg: "ä½ å¶é‡äº†ä¸€æ”¯æ­£åœ¨ä¼‘æ¯çš„ Chimera å°é˜Ÿï¼Œåˆ†äº«äº†ä½ çš„æ°´ï¼Œä»–ä»¬å›èµ äº†ä¸€äº›æƒ…æŠ¥ã€‚", resource: 'rep_chimera', amount: 5, type: 'rep_gain' },
    { weight: 4, msg: "ä½ åœ¨åºŸå¢Ÿé‡Œå‘ç°äº†ä¸€å°è¿˜èƒ½ç”¨çš„å¤å¤æ¸¸æˆæœºï¼Œé«˜ä»·å–ç»™äº†æ”¶è—å®¶ã€‚", resource: 'money', amount: 500, type: 'gain_major' },
    { weight: 5, msg: "ä½ è·¯è¿‡ä¸€ç‰‡å¼€æ»¡é‡èŠ±çš„å¼¹å‘ï¼Œå¿ƒæƒ…å˜å¾—æ ¼å¤–å¹³é™ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ åœ¨ç”µçº¿æ†ä¸Šçœ‹åˆ°äº†å¯»æ‰¾èµ°å¤±çŒ«å’ªçš„å¯»ç‰©å¯äº‹ï¼Œè¿™åœ¨åºŸåœŸä¸ŠçœŸå°‘è§ã€‚", type: 'neutral' },
// [æ‰©å……] ğŸŸ¢ é«˜æ”¶ç›Š
    { weight: 8, msg: "ä½ åœ¨åºŸå¼ƒé“¶è¡Œçš„é‡‘åº“é‡Œæ‰¾åˆ°äº†æœªè¢«ç†”æ¯çš„é‡‘æ¡ï¼", resource: 'money', amount: 1200, type: 'gain_major' },
    { weight: 8, msg: "ä½ å‘ç°äº†ä¸€ä¸ªå±äºæš—å½±å…¬å¸çš„ç§˜å¯†è¡¥ç»™ç®±ã€‚", resource: 'ammo', amount: 20, type: 'gain' },
    { weight: 8, msg: "ä½ åœ¨ä¸€è¾†å æ¯çš„åŒ»ç–—ç›´å‡æœºé‡Œæ‰¾åˆ°äº†æ€¥æ•‘ç®±ã€‚", resource: 'medkit', amount: 4, type: 'gain' },
    { weight: 8, msg: "ä½ é—¯å…¥äº†ä¸€ä¸ªæˆ˜å‰çš„é«˜çº§é¤å…å†·åº“ï¼Œé‡Œé¢å…¨æ˜¯å†»è‚‰ï¼", resource: 'food', amount: 15, type: 'gain' },
    { weight: 6, msg: "ä½ åœ¨é»‘å¸‚å•†äººçš„å°¸ä½“ä¸Šæœåˆ°äº†å¤§é‡ç°é‡‘ã€‚", resource: 'money', amount: rng(400, 800), type: 'gain' },
    { weight: 6, msg: "ä½ å‘ç°äº†ä¸€ä¸ªéšè—çš„ç‹™å‡»ç‚¹ï¼Œæ—è¾¹ç•™ç€å‡ ç›’é«˜ç²¾å¼¹è¯ã€‚", resource: 'ammo', amount: 10, type: 'gain' },
    { weight: 6, msg: "ä½ æ¡åˆ°äº†ä¸€ä¸ªå®Œå¥½çš„æˆ˜æœ¯èƒŒåŒ…ï¼Œé‡Œé¢å¡æ»¡äº†å‹ç¼©é¥¼å¹²ã€‚", resource: 'food', amount: 8, type: 'gain' },
    { weight: 6, msg: "ä½ åœ¨åºŸå¢Ÿä¸‹æŒ–å‡ºäº†ä¸€ä¸ªè¢«é—å¿˜çš„åŒ»ç–—åŒ…ã€‚", resource: 'medkit', amount: 2, type: 'gain' },
    { weight: 5, msg: "è¿æ°”çˆ†æ£šï¼ä½ æ‰¾åˆ°äº†ä¸€æŠŠå¸¦ç„å…·çš„çªå‡»æ­¥æªï¼Œå–ç»™äº†é»‘å¸‚ã€‚", resource: 'money', amount: 1500, type: 'gain_major' },
    { weight: 5, msg: "ä½ å‘ç°äº†ä¸€ä¸ªéšè”½çš„åœ°ä¸‹å®¤ï¼Œé‡Œé¢å…¨æ˜¯ç½å¤´ï¼", resource: 'food', amount: 10, type: 'gain' },
    { weight: 5, msg: "ä½ åœ¨åŒ»é™¢çš„æ€¥è¯Šå®¤é‡Œæ‰¾åˆ°äº†è‚¾ä¸Šè…ºç´ ã€‚", resource: 'medkit', amount: 3, type: 'gain' },
    { weight: 5, msg: "ä½ æ¡åˆ°äº†ä¸€ä¸ªæ— äººæœºçš„æ§åˆ¶ç»ˆç«¯ï¼Œè™½ç„¶åäº†ä½†é›¶ä»¶å¾ˆå€¼é’±ã€‚", resource: 'money', amount: 300, type: 'gain' },
    { weight: 5, msg: "ä½ å‘ç°äº†ä¸€ä¸ªè£…æ»¡æ‰‹é›·çš„æˆ˜æœ¯èƒŒå¿ƒã€‚", resource: 'ammo', amount: 15, type: 'gain' },
    { weight: 5, msg: "ä½ åœ¨è±ªå®…çš„ä¿é™©æŸœé‡Œæ‰¾åˆ°äº†ç å®ã€‚", resource: 'money', amount: 800, type: 'gain_major' },
    { weight: 5, msg: "ä½ æ‰¾åˆ°äº†ä¸€ç®±æˆ˜å‰çš„é«˜çº§çº¢é…’ã€‚", resource: 'food', amount: 6, type: 'gain' },
    { weight: 5, msg: "ä½ åœ¨è¯åº—çš„ä»“åº“é‡Œæ‰¾åˆ°äº†å¤§é‡ç»·å¸¦ã€‚", resource: 'medkit', amount: 4, type: 'gain' },
    { weight: 5, msg: "ä½ å‘ç°äº†ä¸€è¾†è£…æ»¡è¡¥ç»™çš„å¡è½¦ï¼Œè™½ç„¶è½¦åäº†ï¼Œä½†è´§æ˜¯å¥½çš„ã€‚", resource: 'ammo', amount: 20, type: 'gain' },
    { weight: 5, msg: "ä½ åœ¨ ATM æœºé‡Œæ’¬å‡ºäº†æœ€åä¸€å·é’ç¥¨ã€‚", resource: 'money', amount: 200, type: 'gain' },
    { weight: 5, msg: "ä½ æ‰¾åˆ°äº†ä¸€è¢‹æ–°é²œçš„åœŸè±†ï¼Œçœ‹èµ·æ¥æ˜¯æœ‰äººåˆšç§ä¸‹çš„ã€‚", resource: 'food', amount: 5, type: 'gain' },


    // ==========================================
    // ğŸ­ 2. è§’è‰²é­é‡ (Character Encounter) - æƒé‡ ~10%
    // ==========================================
    { weight: 3, msg: "ä½ åœ¨åºŸå¢Ÿä¸­é‡åˆ°äº†æ­£åœ¨æ‰§è¡Œä¾¦å¯Ÿä»»åŠ¡çš„ Ghostã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "Ghost åœ¨é›¨ä¸­æ“¦æ‹­ä»–çš„åŒ•é¦–ï¼Œé›¨æ°´é¡ºç€é¢ç½©æ»‘è½ï¼Œç”»é¢å¾ˆæœ‰ç”µå½±æ„Ÿã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "ä½ å¶é‡äº† Ghostï¼Œä»–æ­£ç›¯ç€ä¸€åªè·¯è¿‡çš„æµæµªçŒ«å‘å‘†ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "Ghost æ­£åœ¨å’Œ Price é€šè¯ï¼Œå¬åˆ°ä½ çš„è„šæ­¥å£°ç«‹åˆ»åˆ‡æ–­äº†é€šè®¯ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "ä½ åœ¨åºŸå¢Ÿé¡¶ç«¯çœ‹åˆ°äº† Ghost çš„èƒŒå½±ï¼Œå­¤ç‹¬è€Œå¼ºå¤§ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "KÃ¶nig è¯•å›¾æŠŠè‡ªå·±è—åœ¨è·¯ç¯æŸ±åé¢ï¼Œä½†ä»–å®åœ¨å¤ªå¤§äº†ã€‚", type: 'encounter_konig' },
    { weight: 3, msg: "ä½ çœ‹åˆ° KÃ¶nig æ­£åœ¨åŠªåŠ›å­¦ä¹ å¦‚ä½•ç”¨é‚£ä¸ªå°å·§çš„å¼€ç½å™¨ã€‚", type: 'encounter_konig' },
    { weight: 3, msg: "KÃ¶nig ç»™ä½ å±•ç¤ºäº†ä»–æ¡åˆ°çš„ä¸€å—æ¼‚äº®çš„çŸ³å¤´ã€‚", type: 'encounter_konig' },
    { weight: 3, msg: "KÃ¶nig æ­£åœ¨å¸®ä¸€ä½è€å¥¶å¥¶æ¬è¿æ²‰é‡çš„å®¶å…·ã€‚", type: 'encounter_konig' },
    { weight: 5, msg: "Krueger é åœ¨å¢™è¾¹ï¼Œä¼¼ä¹åœ¨ç¡è§‰ï¼Œä½†å½“ä½ é è¿‘æ—¶ä»–ç¬é—´çå¼€äº†çœ¼ã€‚", type: 'encounter_krueger' },
    { weight: 3, msg: "ä½ ç›®ç¹äº† Krueger æ— å£°è§£å†³æ‰ä¸€ä¸ªæƒ³å·è¢­ä½ çš„æš´å¾’ã€‚", type: 'encounter_krueger' },
    { weight: 3, msg: "Krueger å¯¹ä½ åšäº†ä¸€ä¸ªâ€˜å®‰é™â€™çš„æ‰‹åŠ¿ï¼Œç„¶åæŒ‡äº†æŒ‡å‰é¢çš„é™·é˜±ã€‚", type: 'encounter_krueger' },
    { weight: 5, msg: "Krueger çš„çœ¼ç¥è®©ä½ èƒŒè„Šå‘å‡‰ï¼Œä½†ä»–ä¼¼ä¹åªæ˜¯ä¸ºäº†ç¡®è®¤ä½ çš„å®‰å…¨ã€‚", type: 'encounter_krueger' },
    { weight: 4, msg: "ä½ æ„Ÿè§‰æœ‰äººåœ¨è·Ÿè¸ªä½ ï¼Œå›å¤´å‘ç°æ˜¯ Keeganï¼Œä»–ç¬‘äº†ç¬‘ï¼šâ€˜åä¾¦å¯Ÿèƒ½åŠ›ä¸é”™ã€‚â€™", type: 'encounter_keegan_love' },
    { weight: 4, msg: "Keegan æ­£åœ¨è°ƒè¯•ä»–çš„å››çœ¼å¤œè§†ä»ªï¼Œç»¿è‰²çš„å…‰åœ¨é»‘æš—ä¸­é—ªçƒã€‚", type: 'encounter_keegan_love' },
    { weight: 4, msg: "Keegan æ­£åœ¨é›¨ä¸­é™åï¼Œä»¿ä½›ä¸ç¯å¢ƒèä¸ºä¸€ä½“ã€‚", type: 'encounter_keegan_love' },
    { weight: 4, msg: "ä½ å‘ç° Keegan æ­£åœ¨ä½ çš„å¿…ç»ä¹‹è·¯ä¸Šæ¸…é™¤è·¯éšœã€‚", type: 'encounter_keegan_love' },
    { weight: 3, msg: "ä½ çœ‹åˆ° Ghost æ­£åœ¨é«˜å¤„ç”¨æœ›è¿œé•œè§‚å¯Ÿæ•Œæƒ…ï¼Œä»–å‘ä½ ç‚¹äº†ç‚¹å¤´ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "ä½ åœ¨æš—å··é‡Œå·®ç‚¹æ’åˆ° Ghostï¼Œè™½ç„¶é¢æ— è¡¨æƒ…ï¼Œä½†ä½ èƒ½çœ‹å‡ºæ¥ä»–è¢«ä½ å“äº†ä¸€è·³ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "Ghost çªç„¶ä»çƒŸé›¾ä¸­ç°èº«ï¼Œé€’ç»™ä½ ä¸€äº›è¡¥ç»™åæ¶ˆå¤±äº†ã€‚", type: 'encounter_ghost' },
    { weight: 3, msg: "KÃ¶nig æ­£åœ¨ç„¦è™‘åœ°æ¥å›è¸±æ­¥ï¼Œçœ‹åˆ°ä½ åæ˜æ˜¾æ¾äº†å£æ°”ã€‚", type: 'encounter_konig' },
    { weight: 3, msg: "KÃ¶nig ç¬¨æ‹™åœ°è¯•å›¾æŠŠä»–å·¨å¤§çš„èº«èº¯è—åœ¨æ©ä½“åé¢ï¼Œä½ ç¬‘ç€å’Œä»–æ‰“æ‹›å‘¼ã€‚", type: 'encounter_konig' },
    { weight: 8, msg: "ä½ æ„Ÿè§‰è¢«ç›¯ä¸Šäº†ï¼Œå›å¤´å‘ç° Krueger è‹¥æ— å…¶äº‹çš„æ”¶èµ·äº†åŒ•é¦–ã€‚", type: 'encounter_krueger' },
// ğŸŸ¢ Keegan æ‹çˆ±ä¸“å±æ‰è½
    { weight: 8, msg: "ä½ åœ¨å‰æ–¹åºŸå¢Ÿçš„é«˜åœ°ä¸Šå‘ç°äº†ä¸€ä¸ªç†Ÿæ‚‰çš„ç‹™å‡»æ‰‹èº«å½±...", type: 'encounter_keegan_love' },


    // ==========================================
    // ğŸ”µ 3. ä¸­ç­‰æ”¶ç›Š (Medium Gain) - æƒé‡ ~30%
    // ==========================================
    { weight: 10, msg: "ä½ æ‰¾åˆ°äº†å‡ åŒ…å®Œå¥½çš„ MRE å†›ç²®ã€‚", resource: 'food', amount: rng(5, 12), type: 'gain' },
    { weight: 10, msg: "ä½ ä»ä¸€ä¸ªåºŸå¼ƒçš„é€šè®¯å¡”ä¸Šæ‹†ä¸‹äº†å€¼é’±çš„ç”µå­é›¶ä»¶ã€‚", resource: 'money', amount: rng(150, 250), type: 'gain' },
    { weight: 10, msg: "ä½ å‘ç°äº†ä¸€æ”¯ TF141 å°é˜Ÿç•™ä¸‹çš„ç´§æ€¥è¡¥ç»™ç‚¹ã€‚", resource: 'rep_141', amount: rng(5, 10), type: 'rep_gain' },
    { weight: 8, msg: "ä½ åœ¨åœ°ä¸‹å®¤å‘ç°äº† KorTac ç§˜å¯†è—åŒ¿çš„æˆ˜æœ¯ç‰©èµ„ã€‚", resource: 'ammo', amount: rng(5, 10), type: 'gain' },
    { weight: 7, msg: "ä½ å¶ç„¶å‘ç°äº†ä¸€å…· Chimera å£«å…µçš„å°¸ä½“ï¼Œå¸¦èµ°äº†ä»–çš„ç§äººè¡¥ç»™ã€‚", resource: 'medkit', amount: rng(1, 2), type: 'gain' },
    { weight: 5, msg: "ä½ æ‰¾åˆ°äº†ä¸€ä¸ªå¹²å‡€çš„æ°´æºã€‚", resource: 'food', amount: 3, type: 'gain' },
    { weight: 4, msg: "ä½ æ¡åˆ°äº†ä¸€äº›åºŸå¼ƒçš„ä¿¡å·å¼¹å’ŒçƒŸé›¾å¼¹ã€‚", resource: 'ammo', amount: 2, type: 'gain' },
    
    // [æ–°å¢ 10 æ¡]
    { weight: 8, msg: "ä½ åœ¨ä¾¿åˆ©åº—åºŸå¢Ÿé‡Œæ‰¾åˆ°äº†å‡ ç½æœªå¼€å°çš„å¯ä¹ã€‚", resource: 'food', amount: 4, type: 'gain' },
    { weight: 8, msg: "ä½ æ¡åˆ°äº†ä¸€ä¸ªé—è½çš„å¼¹å¤¹ï¼Œå‹å·åˆšå¥½åŒ¹é…ã€‚", resource: 'ammo', amount: 5, type: 'gain' },
    { weight: 8, msg: "ä½ å‘ç°äº†ä¸€å·å®Œå¥½çš„åŒ»ç”¨ç»·å¸¦ã€‚", resource: 'medkit', amount: 1, type: 'gain' },
    { weight: 8, msg: "ä½ åœ¨ATMæœºæ®‹éª¸é‡Œæ‰¾åˆ°äº†ä¸€äº›é’ç¥¨ã€‚", resource: 'money', amount: 120, type: 'gain' },
    { weight: 7, msg: "ä½ å¸®åŠ©äº†ä¸€æ”¯ KorTac å·¡é€»é˜ŸæŒ‡è·¯ï¼Œä»–ä»¬ç»™äº†ä½ ä¸€äº›æŠ¥é…¬ã€‚", resource: 'rep_kortac', amount: 5, type: 'rep_gain' },
    { weight: 7, msg: "ä½ æ¡åˆ°äº†ä¸€æŠŠè¿˜èƒ½ç”¨çš„å·¥å…µé“²ï¼Œå–ç»™å›æ”¶ç«™æ¢äº†é’±ã€‚", resource: 'money', amount: 180, type: 'gain' },
    { weight: 6, msg: "ä½ åœ¨åºŸå¼ƒè½¦è¾†çš„åå¤‡ç®±é‡Œå‘ç°äº†ä¸€ç®±æ°´ã€‚", resource: 'food', amount: 6, type: 'gain' },
    { weight: 6, msg: "ä½ æ‰¾åˆ°äº†åŠç“¶æ­¢ç—›è¯ã€‚", resource: 'medkit', amount: 1, type: 'gain' },
    { weight: 6, msg: "ä½ æ¡åˆ°äº†ä¸€äº›æ•£è½çš„éœ°å¼¹æªå­å¼¹ã€‚", resource: 'ammo', amount: 8, type: 'gain' },
    { weight: 6, msg: "ä½ æŠŠå…³äº Chimera åŠ¨å‘çš„æƒ…æŠ¥å–ç»™äº†æƒ…æŠ¥è´©å­ã€‚", resource: 'money', amount: 250, type: 'gain' },


    // ==========================================
    // âšª 4. è´Ÿé¢/ä¸­ç«‹ (Neutral/Loss) - æƒé‡ ~30%
    // ==========================================
    { weight: 15, msg: "ä»€ä¹ˆéƒ½æ²¡æ‰¾åˆ°ï¼Œè¿˜å·®ç‚¹è¸©åˆ°åœ°é›·ã€‚ç™½è·‘ä¸€è¶Ÿã€‚", type: 'neutral' }, 
    { weight: 5, msg: "ä½ é­é‡äº†é‡ç‹—è¢­å‡»ï¼ä¸å¾—ä¸ä½¿ç”¨äº†ä¸€ä¸ªåŒ»ç–—åŒ…ã€‚", resource: 'medkit', amount: -1, type: 'loss' }, 
    { weight: 5, msg: "ä½ è§¦å‘äº†ä¸€ä¸ªé™·é˜±ï¼Œæ‰‹è‡‚è¢«åˆ’ä¼¤ã€‚", resource: 'medkit', amount: -1, type: 'loss' },
    { weight: 5, msg: "ä½ è¢«ä¸æ˜æ­¦è£…äººå‘˜å·è¢­ï¼Œä¸å¾—ä¸äº¤å‡ºä¸€äº›ç°é‡‘æ‰è„±èº«ã€‚", resource: 'money', amount: rng(-50, -150), type: 'loss' },
    { weight: 5, msg: "ä½ æ‰¾åˆ°äº†ä¸€æ‰¹é£Ÿç‰©ï¼Œä½†å®ƒä»¬å·²ç»è¿‡æœŸï¼Œåƒäº†å¯èƒ½ä¼šç”Ÿç—…ã€‚", resource: 'food', amount: rng(1, 5), type: 'gain_risk' },
    { weight: 5, msg: "ä½ å‘ç°äº†ä¸¤ä¸ªé˜µè¥çš„äº¤æˆ˜è®°å½•ï¼Œè¿™è®©å…¶ä»–é˜µè¥å¯¹ä½ äº§ç”Ÿäº†ä¸€ç‚¹æˆ’å¿ƒã€‚", resource: 'rep_kortac', amount: -2, resource2: 'rep_chimera', amount2: -2, type: 'rep_loss' },
    { weight: 4, msg: "ä½ åˆ¶é€ äº†å¤ªå¤§çš„å™ªéŸ³ï¼Œå¼•æ¥äº†å·¡é€»é˜Ÿã€‚ä½ å¿…é¡»è¿…é€Ÿèº²è—èµ·æ¥ã€‚", type: 'neutral' },
    { weight: 3, msg: "ä½ æ„Ÿè§‰åˆ°æœ‰äººåœ¨ç›‘è§†ä½ ï¼Œä½†ä½ æ²¡èƒ½å‘ç°ä»»ä½•äººã€‚", type: 'neutral' },
    
    // [æ–°å¢ 10 æ¡]
    { weight: 6, msg: "ä¸‹èµ·äº†é…¸é›¨ï¼Œä½ ä¸å¾—ä¸èº²åœ¨å±±æ´é‡Œï¼Œæµªè´¹äº†åŠå¤©æ—¶é—´ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ åœ¨æ”€çˆ¬åºŸå¢Ÿæ—¶æ‘”äº†ä¸€è·¤ï¼Œä¸¢äº†ä¸€äº›é›¶é’±ã€‚", resource: 'money', amount: -20, type: 'loss' },
    { weight: 5, msg: "ä½ çš„èƒŒåŒ…è¢«é”‹åˆ©çš„é’¢ç­‹åˆ’ç ´äº†ï¼Œæ¼æ‰äº†ä¸€äº›å­å¼¹ã€‚", resource: 'ammo', amount: -3, type: 'loss' },
    { weight: 5, msg: "ä½ é‡åˆ°äº†ä¸€ç¾¤éš¾æ°‘ï¼Œå¿ƒè½¯åˆ†äº†ä»–ä»¬ä¸€ç‚¹é£Ÿç‰©ã€‚", resource: 'food', amount: -2, type: 'loss' },
    { weight: 4, msg: "ä½ åœ¨é»‘æš—ä¸­æ’åˆ°äº†å¤´ï¼Œéœ€è¦ç”¨ç»·å¸¦åŒ…æ‰ä¸€ä¸‹ã€‚", resource: 'medkit', amount: -1, type: 'loss' },
    { weight: 4, msg: "ä¸€åªå˜å¼‚è€é¼ å’¬ç©¿äº†ä½ çš„å£è¢‹ï¼Œå·èµ°äº†ä¸€å—å‹ç¼©é¥¼å¹²ã€‚", resource: 'food', amount: -1, type: 'loss' },
    { weight: 4, msg: "ä½ è¢«å‡ ä¸ªå°æ··æ··å‹’ç´¢äº†ï¼Œäº¤å‡ºäº†ä¸€äº›ä¿æŠ¤è´¹ã€‚", resource: 'money', amount: -80, type: 'loss' },
    { weight: 4, msg: "ä½ å› ä¸ºè¯¯å…¥ç¦åŒºè¢«æ— äººæœºé©±é€ã€‚", type: 'neutral' },
    { weight: 4, msg: "é£æ²™å¤ªå¤§ï¼Œè¿·äº†çœ¼ï¼Œä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°ã€‚", type: 'neutral' },
// [æ‰©å……] âšª è´Ÿé¢/ä¸­ç«‹
    { weight: 5, msg: "ä½ è¸©åˆ°äº†ä¸€å¨å˜å¼‚ç‹—çš„æ’æ³„ç‰©ï¼Œå¿ƒæƒ…æå·®ã€‚", type: 'neutral' },
    { weight: 5, msg: "çªç„¶ä¸‹èµ·äº†é»‘é›¨ï¼Œä½ ä¸å¾—ä¸èº²åœ¨åƒåœ¾ç®±é‡Œï¼Œæµ‘èº«æ¶è‡­ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ è·¯è¿‡ä¸€ä¸ªé—¹é¬¼çš„åºŸå¼ƒæ¸¸ä¹å›­ï¼Œæ—‹è½¬æœ¨é©¬çªç„¶è‡ªå·±åŠ¨äº†ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ å¬åˆ°ä¸‹æ°´é“é‡Œä¼ æ¥å¥‡æ€ªçš„æ­Œå£°ï¼Œæ²¡æ•¢é è¿‘ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ çš„æ‰‹ç”µç­’æ²¡ç”µäº†ï¼Œåœ¨é»‘æš—ä¸­æ‘¸ç´¢äº†åŠå¤©ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä¸€é˜µç‹‚é£å¹èµ°äº†ä½ çš„å¸½å­ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ çœ‹åˆ°ä¸¤ä¸ªæœºå™¨äººåœ¨æ‰“æ¶ï¼Œå›´è§‚äº†ä¸€ä¼šå„¿ã€‚", type: 'neutral' },
    { weight: 5, msg: "ä½ è¿·è·¯äº†ï¼Œç»•å›äº†åŸç‚¹ã€‚", type: 'neutral' },
    { weight: 4, msg: "ä½ çš„æ°´å£¶æ¼æ°´äº†ï¼Œå¼„æ¹¿äº†è£¤å­ã€‚", type: 'neutral' },
    { weight: 4, msg: "ä½ çš„ä¼¤å£è£‚å¼€äº†ï¼Œéœ€è¦é‡æ–°åŒ…æ‰ã€‚", resource: 'medkit', amount: -1, type: 'loss' },
    { weight: 4, msg: "ä½ çš„åœ°å›¾è¢«é£å¹èµ°äº†ï¼Œä¸å¾—ä¸ä¹°å¼ æ–°çš„ã€‚", resource: 'money', amount: -60, type: 'loss' },


    // ==========================================
    // âœ¨ 5. ç»†å¾®æ”¶ç›Š/é£å‘³ (Flavor/Minor) - æƒé‡ ~10%
    // ==========================================
    { weight: 5, msg: "ä½ æ‰¾åˆ°äº†ä¸€å¼ æ—§åœ°å›¾ï¼Œæé«˜äº†ä½ å¯¹å‘¨è¾¹æˆ˜åŒºçš„äº†è§£ã€‚", resource: 'rep_141', amount: 3, type: 'rep_gain' },
    { weight: 3, msg: "ä½ æ‰¾åˆ°ä¸€ä¸ªåŠæŸåçš„æ”¶éŸ³æœºï¼Œæ”¶å¬åˆ°äº† KorTac çš„åŠ å¯†å¹¿æ’­ã€‚", resource: 'rep_kortac', amount: 3, type: 'rep_gain' },
    { weight: 3, msg: "ä½ å‘ç°äº†ä¸€ä¸ªåºŸå¼ƒçš„åŒ»ç–—ç«™ï¼Œä½†åªæ‰¾åˆ°äº†ä¸€äº›ç»·å¸¦ã€‚", resource: 'medkit', amount: 1, type: 'gain' },
    { weight: 3, msg: "ä½ åœ¨å¢™ä¸Šå‘ç°äº†ä¸€ä¸ª Chimera æ ‡è®°ï¼Œçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªç§˜å¯†é›†åˆç‚¹ã€‚", resource: 'rep_chimera', amount: 3, type: 'rep_gain' },
    { weight: 3, msg: "ä½ æ‰¾åˆ°äº†ä¸€ä¸ªè¢«é—å¿˜çš„å°é’±åŒ…ã€‚", resource: 'money', amount: 50, type: 'gain' },
    { weight: 3, msg: "ä½ æ‰¾åˆ°äº†ä¸€ä¸ªæŸåçš„æ— äººæœºå¤–å£³ï¼Œå–äº†ç‚¹å°é’±ã€‚", resource: 'money', amount: 80, type: 'gain' },
    { weight: 2, msg: "ä½ é‡åˆ°äº†ä¸€æ”¯å‹å¥½çš„è¡¥ç»™é˜Ÿï¼Œä½ ä»¬äº’ç›¸äº¤æ¢äº†æƒ…æŠ¥ã€‚", resource: 'rep_141', amount: 1, resource2: 'rep_kortac', amount2: 1, type: 'rep_gain' },

    // [æ–°å¢ 10 æ¡]
    { weight: 4, msg: "ä½ æ¡åˆ°äº†ä¸€å¼ æˆ˜å‰çš„æ˜ä¿¡ç‰‡ï¼Œä¸Šé¢å†™ç€â€œç¥ä½ å®‰å¥½â€ã€‚", type: 'neutral' },
    { weight: 4, msg: "ä½ åœ¨åºŸå¢Ÿç¼éš™é‡Œå‘ç°äº†ä¸€æœµé¡½å¼ºç››å¼€çš„å°é»„èŠ±ã€‚", type: 'neutral' },
    { weight: 4, msg: "ä½ æ¡åˆ°äº†ä¸€æœ¬ç ´æŸçš„æ¼«ç”»ä¹¦ï¼Œæ‹¿å›å»è§£é—·ä¸é”™ã€‚", type: 'neutral' },
    { weight: 3, msg: "ä½ åœ¨å¢™è§’æ¡åˆ°äº†ä¸€æšç”Ÿé”ˆçš„ç¡¬å¸ã€‚", resource: 'money', amount: 5, type: 'gain' },
    { weight: 3, msg: "ä½ æ¡åˆ°äº†ä¸€é¢—è¿˜èƒ½ç”¨çš„ 9mm å­å¼¹ã€‚", resource: 'ammo', amount: 1, type: 'gain' },
    { weight: 3, msg: "ä½ å‘ç°äº†ä¸€åŒ…è¿˜å‰©ä¸€åŠçš„å£é¦™ç³–ã€‚", resource: 'food', amount: 1, type: 'gain' },
    { weight: 3, msg: "ä½ å¸®ä¸€ä¸ªè¿·è·¯çš„ä¿¡ä½¿æŒ‡äº†è·¯ï¼Œä»–æ„Ÿè°¢äº†ä½ ã€‚", resource: 'rep_141', amount: 2, type: 'rep_gain' },
    { weight: 3, msg: "ä½ æ¡åˆ°äº†ä¸€ä¸ªè¿˜ç®—å¹²å‡€çš„ç©ºæ°´å£¶ã€‚", type: 'neutral' },
    { weight: 3, msg: "ä½ çœ‹åˆ°äº†å£®è§‚çš„æå…‰ï¼Œå¿ƒæƒ…å˜å¥½äº†ã€‚", type: 'neutral' },
    { weight: 3, msg: "ä½ æ¡åˆ°äº†ä¸€å¼ è¢«é—å¼ƒçš„èº«ä»½è¯†åˆ«ç‰Œï¼ˆç‹—ç‰Œï¼‰ã€‚", resource: 'money', amount: 30, type: 'gain' },


    // ==========================================
    // ğŸ”´ 6. å·¨å¤§æŸå¤± (Major Loss) - æƒé‡ ~1%
    // ==========================================
    { weight: 1, msg: "ä½ å‘¨å›´å‘ç”Ÿäº†çˆ†ç‚¸ï¼ä½ é™©äº›ä¸§å‘½ï¼", resource: 'medkit', amount: -2, type: 'loss_major' },
    { weight: 1, msg: "ä½ è§¦å‘äº†ä¸€ä¸ªè‡´å‘½é™·é˜±ï¼Œä½†å‡­å€Ÿä½ çš„æ•æ·èº²äº†è¿‡å»ã€‚åªå—äº†ç‚¹è½»ä¼¤ã€‚", resource: 'medkit', amount: -1, type: 'loss' },
    
    // [æ–°å¢ 10 æ¡] (æ³¨æ„ï¼šè¿™äº›äº‹ä»¶è™½ç„¶å¯æ€•ï¼Œä½†èƒ½å¢åŠ ç”Ÿå­˜çš„ç´§å¼ æ„Ÿ)
    { weight: 1, msg: "ä½ é­é‡äº†å¤§è§„æ¨¡å¡Œæ–¹ï¼ä¸ºäº†çˆ¬å‡ºæ¥ä½ ä¸¢å¼ƒäº†å¤§é‡ç‰©èµ„ï¼", resource: 'food', amount: -5, type: 'loss' },
    { weight: 1, msg: "ä½ è¢«ä¸€é˜Ÿå…¨å‰¯æ­¦è£…çš„å¼ºç›—æ´—åŠ«ä¸€ç©ºï¼", resource: 'money', amount: -500, type: 'loss_major' },
    { weight: 1, msg: "ä½ çš„èƒŒåŒ…å¸¦æ–­äº†ï¼Œä¸€ç®±å¼¹è¯æ‰è¿›æ·±æ¸Šï¼", resource: 'ammo', amount: -20, type: 'loss' },
    { weight: 1, msg: "ä½ è¢«å·å…¥äº†ä¸¤å¤§é˜µè¥çš„äº¤ç«ä¸­å¿ƒï¼Œä¸å¾—ä¸æ¶ˆè€—å¤§é‡è¯å“è‡ªæ•‘ï¼", resource: 'medkit', amount: -2, type: 'loss' },
    { weight: 1, msg: "ä½ é­é‡äº†ç‹™å‡»æ‰‹ä¼å‡»ï¼è‚©è†€ä¸­å¼¹ï¼", resource: 'medkit', amount: -2, type: 'loss_major' },
    { weight: 1, msg: "ä½ çš„é˜²æ¯’é¢å…·å¤±æ•ˆäº†ï¼Œå¸å…¥äº†æœ‰æ¯’æ°”ä½“ï¼", resource: 'medkit', amount: -2, type: 'loss' },
    { weight: 1, msg: "ä½ è¢«é»‘å¸‚èµé‡‘çŒäººç›¯ä¸Šï¼Œä¸å¾—ä¸èŠ±å¤§é’±ä¹°å‘½ï¼", resource: 'money', amount: -300, type: 'loss' },
    { weight: 1, msg: "ä½ å­˜æ”¾é£Ÿç‰©çš„è¢‹å­è¢«å˜å¼‚ç”Ÿç‰©å’¬ç ´ï¼Œé£Ÿç‰©å…¨æ¼å…‰äº†ï¼", resource: 'food', amount: -10, type: 'loss' },
    { weight: 1, msg: "ä½ çš„èƒŒåŒ…è¢«å‰²ç ´ï¼Œæ‰€æœ‰ç°é‡‘æ´’è½ä¸€åœ°è¢«é£å¹èµ°ï¼", resource: 'money', amount: -800, type: 'loss_major' },
    { weight: 1, msg: "ä½ é­é‡äº†é£Ÿäººæ—è¢­å‡»ï¼Œä¸¢å¼ƒäº†æ‰€æœ‰é£Ÿç‰©æ‰é€ƒè„±ï¼", resource: 'food', amount: -30, type: 'loss_major' },
    { weight: 1, msg: "ä½ è¢«åŸ‹åœ¨å€’å¡Œçš„å»ºç­‘ç‰©ä¸‹ä¸‰å¤©ä¸‰å¤œï¼", resource: 'medkit', amount: -4, type: 'loss_major' },
    { weight: 1, msg: "ä½ çš„ä¸€ä¸ªç”µå­è´¦æˆ·è¢«é»‘å®¢å½»åº•æ¸…ç©ºï¼", resource: 'money', amount: -2000, type: 'loss_major' },
    { weight: 1, msg: "ä½ é­é‡äº†ç²¾è‹±ç‹™å‡»æ‰‹ï¼Œå·®ç‚¹çˆ†å¤´ï¼", resource: 'medkit', amount: -3, type: 'loss_major' },
    { weight: 1, msg: "ä¸€åœºçªå¦‚å…¶æ¥çš„é…¸é›¨è…èš€äº†ä½ çš„è£…å¤‡ï¼", resource: 'ammo', amount: -10, type: 'loss' }
];

function triggerExploration() {
    // ç«‹å³æ¸…ç©ºæŒ‰é’®åŒºï¼Œé˜²æ­¢è¿ç‚¹ Bug
    $('controls-area').innerHTML = '<div style="color:#888; padding:20px; text-align:center;">æ­£åœ¨æ¢ç´¢ä¸­...</div>';
    
    printMsg("ä½ é”å¥½åº—é—¨ï¼Œå‰å¾€åºŸå¢Ÿæ·±å¤„æ¢ç´¢...", 'system');
    
    // å»¶è¿Ÿæ˜¾ç¤ºç»“æœ
    setTimeout(() => {
        // å®‰å…¨æ£€æŸ¥
        if (typeof weightedSelection !== 'function') {
             printMsg("æ¢ç´¢ç³»ç»Ÿå‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œè¿”å›å®‰å…¨åŒºã€‚", 'alert');
             updateUI();
             showMainMenu();
             return;
        }

        const outcome = weightedSelection(ExplorationOutcomes);
        
        // ğŸŸ¢ è·å–å½“å‰ä»“åº“å®¹é‡ä¸Šé™
        const cap = CONFIG.capacity_tiers[State.lvl_store - 1] + (State.set_rewards.konig ? 0 : 0); // ç¡®ä¿åŠ ä¸Š Konig çš„Buff

        // ğŸŸ¢ è¾…åŠ©å‡½æ•°ï¼šå®‰å…¨å¢åŠ ç‰©èµ„ (ä¸è¶…è¿‡ä¸Šé™)
        const addSafe = (type, amount) => {
            if (['money', 'rep_141', 'rep_kortac', 'rep_chimera', 'rep_ghosts', 'gacha_coins'].includes(type)) {
                State[type] += amount;
                return amount;
            } else {
                const current = State[type] || 0;
                if (current >= cap) return 0;
                const actualAdd = Math.min(amount, cap - current);
                State[type] += actualAdd;
                return actualAdd;
            }
        };

        switch(outcome.type) {
            case 'encounter_ghost':
                State.chars.ghost.aff += 3;
                const ammoAddedG = addSafe('ammo', 3);
                if (State.chars.ghost.dating) {
                    if (ammoAddedG > 0) log(`æ”¶åˆ° Ghost çš„ä¸“å±è¡¥ç»™: +${ammoAddedG} Ammo`, 'gain');
                    else log(`å¼¹è¯å·²æ»¡ï¼ŒGhost å¸®ä½ æ•´ç†äº†è£…å¤‡`, 'gain');
                    printMsg(`Ghost ä»é˜´å½±ä¸­ç°èº«ï¼Œä½†ä»–æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·ä¿æŒè·ç¦»ï¼Œä»–äº²æ‰‹æŠŠå¼¹è¯æŒ‚åœ¨ä½ çš„æˆ˜æœ¯èƒŒå¿ƒä¸Šï¼Œæ‰‹æŒ‡æœ‰æ„æ— æ„åœ°æ“¦è¿‡ä½ çš„ä¾§è…°ã€‚\nâ€œä¿æŠ¤å¥½è‡ªå·±ï¼Œåˆ«è®©æˆ‘æ‹…å¿ƒï¼Œ${State.player}ã€‚â€`, 'dialogue', 'Ghost');
                } else {
                    if (ammoAddedG > 0) log(`è·å¾—å¼¹è¯: +${ammoAddedG}`, 'gain');
                    else log(`å¼¹è¯å·²æ»¡ï¼ŒGhost æ‰”æ¥çš„å­å¼¹æ²¡åœ°æ–¹æ”¾`, 'warn');
                    printMsg(`Ghost åªæ˜¯çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ‰”ç»™ä½ å‡ æ’å­å¼¹ï¼šâ€œåˆ«åœ¨å¤–é¢æ™ƒè¡äº†ï¼Œ${State.player}ã€‚â€`, 'dialogue', 'Ghost');
                }
                break;
                
            case 'encounter_konig':
                State.chars.konig.aff += 3;
                addSafe('money', 100); 
                if (State.chars.konig.dating) {
                    log(`KÃ¶nig çš„é›¶èŠ±é’±: +$100`, 'gain');
                    printMsg(`KÃ¶nig çœ‹åˆ°æ˜¯ä½ ï¼Œé¢ç½©ä¸‹çš„çœ¼ç›ç¬é—´äº®äº†èµ·æ¥ï¼Œä»–å‡‘è¿‡æ¥ç¡¬å¡ç»™ä½ ä¸€å·é’ç¥¨ã€‚\nâ€œæ˜¯... æ˜¯ç»™ä½ çš„ï¼æˆ‘æƒ³ç»™ä½ èŠ±é’±ï¼â€`, 'dialogue', 'KÃ¶nig');
                } else {
                    log(`ä¿®ç†æŠ¥é…¬: +$100`, 'gain');
                    printMsg(`ä½ å¸® KÃ¶nig ä¿®å¥½äº†æ”¶éŸ³æœºï¼Œä»–çœ‹èµ·æ¥å¾ˆç„¦è™‘ï¼ŒåŒ†å¿™ä»˜äº†é’±å¹¶å¯¹ä½ çš„å‡ºç°è¡¨ç¤ºæ„Ÿæ¿€ã€‚`, 'dialogue', 'KÃ¶nig');
                }
                break;
                
            // ğŸŸ¢ Keegan æ‹çˆ±ä¸“å±ï¼šå·è¢­ä¸åå·è¢­
            case 'encounter_keegan_love':
                if (State.chars.keegan.dating) {
                    triggerEvent({
                        text: "ä½ åœ¨åºŸå¢Ÿå¤–å›´æ¢ç´¢æ—¶å‘ç°å‰æ–¹çš„é«˜åœ°ä¸Šæœ‰ä¸ªç†Ÿæ‚‰çš„èº«å½±ã€‚\nKeegan æ­£è¶´åœ¨æ©ä½“åè¿›è¡Œç‹™å‡»è­¦æˆ’ï¼Œèº«è¾¹çš„å†›çŠ¬ Riley æ­£å¯¹ç€ä½ ç–¯ç‹‚æ‘‡å°¾å·´ï¼ˆå‡ºå–äº†é˜Ÿå‹ï¼‰ã€‚\nä»–çœ‹ä¸Šå»å®Œå…¨æ²¡æœ‰å‘ç°ä½ ã€‚",
                        speaker: "System",
                        type: "event",
                        options: [
                            {
                                text: "æ‚„æ‚„ç»•åï¼Œç”¨ç¡¬ç‰©æŠµä½ä»–çš„è…°",
                                desc: "ç”¨æ‰‹ç”µç­’è£…ä½œæ‰‹æªï¼šâ€œä¸è®¸åŠ¨ï¼â€",
                                effect: s => {
                                    s.chars.keegan.aff += 5;
                                    s.ap = Math.min(CONFIG.max_ap, s.ap + 1);
                                    printMsg("Keegan é¡ºä»åœ°ä¸¾èµ·äº†åŒæ‰‹ï¼Œå£°éŸ³é‡Œå¸¦ç€æ˜æ˜¾çš„ç¬‘æ„ï¼š\nâ€œæˆ‘æŠ•é™ï¼ŒCariÃ±o ... ä¸‹æ¬¡åˆ«è®© Riley çš„å°¾å·´æ‘‡æˆèºæ—‹æ¡¨ï¼Œæˆ‘å°±çœŸä¿¡äº†ã€‚â€", 'dialogue', 'Keegan');
                                },
                                result: "ä»–åœ¨ä»»åŠ¡é—´éš™æ‘˜ä¸‹é¢ç½©ï¼Œç»™äº†ä½ ä¸€ä¸ªå¸¦ç€ç¡çƒŸå‘³çš„å»ã€‚\nâ€œæ—©å°±é€è¿‡åå…‰ç»ç’ƒçœ‹åˆ°ä½ äº†ï¼Œæ³¨æ„å®‰å…¨ã€‚â€"
                            },
                            {
                                text: "æ­£å¸¸èµ°è¿‡å»æ‰“æ‹›å‘¼",
                                desc: "æ’¸ç‹—",
                                result: "Riley å…´å¥‹åœ°æ‰‘åˆ°äº†ä½ æ€€é‡Œï¼ŒKeegan å›å¤´çœ‹äº†ä½ ä¸€çœ¼ï¼Œçœ¼ç¥æ¸©æŸ”ï¼šâ€œæˆ‘åœ¨å‡ºä»»åŠ¡ï¼Œä½ å¯ä»¥è¿™é™„è¿‘å®‰å…¨è¡ŒåŠ¨ï¼Œä½†åˆ«èµ°å¤ªè¿œã€‚â€"
                            }
                        ]
                    });
                } else {
                    printMsg("ä½ è¿œè¿œçœ‹åˆ°äº† Keegan å’Œ Riley åœ¨æ‰§è¡Œä¾¦å¯Ÿä»»åŠ¡ï¼Œä¸ºäº†ä¸æ‰“æ‰°ä»–ä»¬ï¼Œä½ é€‰æ‹©äº†ç»•è·¯ã€‚", 'system');
                }
                break;

            case 'encounter_krueger':
                if (State.chars.krueger.dating) {
                    State.chars.krueger.aff += 5;
                    const foodGain = addSafe('food', 3);
                    if (foodGain > 0) log(`è·å¾—å†›ç²®: +${foodGain}`, 'gain');
                    else log(`Krueger æƒ³ç»™ä½ é£Ÿç‰©ï¼Œä½†ä½ è£…ä¸ä¸‹äº†`, 'warn');
                    printMsg(`Krueger ä»é˜´å½±ä¸­ç°èº«ï¼Œå°†å‡ åŒ…æˆ˜åˆ©å“å¡è¿›ä½ æ€€é‡Œã€‚\nâ€œæ‹¿ç€å§ï¼Œæˆ‘çœ‹è¿™é™„è¿‘æœ€è¿‘ä¸å¤ªå¹³ï¼Œåˆ«é¥¿ç€ã€‚â€`, 'dialogue', 'Krueger');
                } else {
                    State.chars.krueger.aff += 3;
                    if ((State.food || 0) < 10) {
                        printMsg("Krueger ç¿»äº†ç¿»ä½ çš„èƒŒåŒ…ï¼Œçœ‹åˆ°é‡Œé¢å°‘å¾—å¯æ€œçš„é£Ÿç‰©åå‘å‡ºä¸€å£°ä¸å±‘çš„å—¤ç¬‘ã€‚\nâ€œå°±è¿™ç‚¹å­˜ç²®ï¼Œä½ æ˜¯æ‰“ç®—é¥¿æ­»è‡ªå·±å—ï¼Ÿâ€\nä»–ç”šè‡³æ‡’å¾—åŠ¨æ‰‹æŠ¢ï¼Œè½¬èº«æ¶ˆå¤±åœ¨é˜´å½±ä¸­ã€‚", 'dialogue', 'Krueger');
                    } else {
                        const foodLoss = Math.min(State.food || 0, 3);
                        State.food = Math.max(0, (State.food || 0) - foodLoss);
                        if(foodLoss > 0) log(`å†›ç²®: -${foodLoss}`, 'loss');
                        printMsg(`Krueger é˜´æ£®åœ°çœ‹ç€ä½ ï¼Œä¸€è¨€ä¸å‘åœ°æ‹¿èµ°äº†ä½ èƒŒåŒ…é‡Œçš„å‡ ä»½å†›ç²®ã€‚`, 'dialogue', 'Krueger');
                    }
                }
                break;

            case 'gain':
            case 'gain_major':
                if (outcome.resource && typeof outcome.amount === 'number') {
                    const realGain = addSafe(outcome.resource, outcome.amount);
                    if (realGain > 0) {
                        log(`${outcome.resource}: +${realGain}`, 'gain');
                        printMsg(outcome.msg, 'event');
                    } else {
                        printMsg(`${outcome.msg} (ä½†ä»“åº“å·²æ»¡ï¼Œæ— æ³•æºå¸¦)`, 'warn');
                    }
                } else {
                    printMsg("ä½ åœ¨åºŸå¢Ÿé‡Œç¿»æ‰¾äº†ä¸€ä¼šå„¿ï¼Œä½†ä»€ä¹ˆéƒ½æ²¡æ‰¾åˆ°ã€‚", 'system');
                }
                break;
                
            case 'loss':
            case 'loss_major':
                if (outcome.resource && typeof outcome.amount === 'number') {
                    State[outcome.resource] = (State[outcome.resource] || 0) + outcome.amount;
                    if(State[outcome.resource] < 0) State[outcome.resource] = 0;
                    log(`${outcome.resource}: ${outcome.amount}`, 'loss');
                    printMsg(outcome.msg, 'alert');
                }
                break;
                
            case 'rep_gain':
                if (outcome.resource && typeof outcome.amount === 'number') {
                    addSafe(outcome.resource, outcome.amount);
                    if (outcome.resource2 && typeof outcome.amount2 === 'number') addSafe(outcome.resource2, outcome.amount2);
                    log(`${outcome.resource}: +${outcome.amount}`, 'gain');
                    printMsg(outcome.msg, 'event');
                }
                break;
                
            case 'rep_loss':
                if (outcome.resource && typeof outcome.amount === 'number') {
                    State[outcome.resource] += outcome.amount;
                    if (outcome.resource2 && typeof outcome.amount2 === 'number') State[outcome.resource2] += outcome.amount2;
                    log(`å£°æœ›å˜åŒ–: ${outcome.amount}`, 'loss');
                    printMsg(outcome.msg, 'alert');
                }
                break;
                
            case 'gain_risk':
                if (outcome.resource && typeof outcome.amount === 'number') {
                    const foodGain = addSafe(outcome.resource, outcome.amount);
                    State.medkit = Math.max(0, State.medkit - 1);
                    if (foodGain > 0) log(`${outcome.resource}: +${foodGain}`, 'gain');
                    log(`Medkit: -1`, 'loss');
                    printMsg(`${outcome.msg} (åƒä¸‹åæ„Ÿåˆ°ä¸é€‚ï¼Œéœ€è¦åŒ»ç–—åŒ…!)`, 'alert');
                }
                break;

            case 'neutral':
            default:
                printMsg(outcome.msg, 'system');
                break;
        }

        // ğŸŸ¢ [Keegan Buff Check] æ ¸å¿ƒé€»è¾‘ï¼šå¦‚æœè§£é”äº†æƒ…æŠ¥ç½‘ç»œï¼Œé¢å¤–å¢åŠ èµ„é‡‘
        if (State.set_rewards.keegan) {
            const bonus = rng(150, 300); // é¢å¤–çš„æƒ…æŠ¥è´¹
            State.money += bonus;
            log(`æƒ…æŠ¥ç½‘ç»œåˆ†çº¢ +$${bonus}`, 'gain');
            printMsg("ã€Ghosts Networkã€‘ä½ é€šè¿‡æƒ…æŠ¥ç½‘ç»œè·å¾—äº†é¢å¤–çš„èµé‡‘ã€‚", 'system');
        }

        updateUI();
        showMainMenu();
    }, 1000);
} 
// ==============================
// ğŸ”½ ç›²ç›’ç³»ç»Ÿé€»è¾‘ (å·²ä¿®å¤å±‚çº§é”™è¯¯) ğŸ”½
// ==============================

function openGacha() {
    $('gacha-overlay').style.display = 'flex';
    $('gacha-money').innerText = State.money;
    $('gacha-coins').innerText = State.gacha_coins;
}

function drawGacha(times) {
    const cost = 10000 * times;
    if(State.money < cost) {
        alert("èµ„é‡‘ä¸è¶³ï¼ä½ éœ€è¦ $" + cost);
        return;
    }
    
    State.money -= cost;
    let resultHtml = `<div style="display:grid; grid-template-columns:repeat(5,1fr); gap:10px;">`;

    for(let i=0; i<times; i++) {
        const roll = Math.random() * 100;
        let rarity = 'N';
        if(roll > 95) rarity = 'SSR';      // 5%
        else if(roll > 80) rarity = 'SR';  // 15%
        else if(roll > 50) rarity = 'R';   // 30%
        
        // Nå¡ï¼šç»™èµ„æº
           if(rarity === 'N') {
            const res = ['medkit', 'food', 'ammo'][rng(0,2)];
            
            // ğŸ“¦ ä¿®æ”¹ 3ï¼šä» +1 æ”¹ä¸º +5~10ï¼Œè™½ç„¶è¿˜æ˜¯äºï¼Œä½†çœ‹èµ·æ¥åƒä¸ªè¡¥ç»™åŒ…äº†
            const amount = rng(5, 10); 
            State[res] += amount;
            
            resultHtml += `<div class="gacha-card rarity-N">
                <div class="card-name">æ ‡å‡†è¡¥ç»™ç®±</div>
                <div class="card-desc">è·å¾— ${amount} ${res}</div>
            </div>`;
        } else {
            // æŠ½å–è§’è‰²ç‰©å“
                     // ğŸŸ¢ ä¿®æ”¹ä¸º (èŒƒå›´æ”¹æˆ 0,3 å¹¶åŠ å…¥ keegan)ï¼š
        const char = ['ghost', 'konig', 'krueger', 'keegan'][rng(0,3)];
            const pool = GachaPool[char].filter(x => x.rarity === rarity);
            const item = pool[rng(0, pool.length-1)];
            
            // æŸ¥é‡
            if(State.collection.includes(item.id)) {
                let coins = rarity === 'SSR' ? 20 : (rarity === 'SR' ? 5 : 1);
                State.gacha_coins += coins;
                resultHtml += `<div class="gacha-card rarity-${rarity}" style="opacity:0.8">
                    <div class="card-name">${item.name}</div>
                    <div class="card-desc">é‡å¤è·å¾—<br>è½¬åŒ– ${coins} ä»£å¸</div>
                </div>`;
            } else {
                State.collection.push(item.id);
                resultHtml += `<div class="gacha-card rarity-${rarity}">
                    <span class="new-tag">NEW!</span>
                    <div class="card-name">${item.name}</div>
                    <div class="card-desc">${item.desc}</div>
                </div>`;
                
                // æ£€æŸ¥æ˜¯å¦è§¦å‘SSRç‰¹æ®Šå¯¹è¯ (ä»…å½“é¦–æ¬¡è·å¾—æ—¶)
                if(rarity === 'SSR') {
                    setTimeout(() => {
                        switch(item.id) {
                            case 'g_ssr': // Ghost - éª·é«…å›¾æ¡ˆå¹³è§’è£¤
                                printMsg(`å½“ä½ æŠŠã€${item.name}ã€‘æ‹¿å‡ºæ¥æ—¶ï¼Œç©ºæ°”ç¬é—´å‡å›ºäº†ï¼ŒGhost æ­»æ­»ç›¯ç€ä½ æ‰‹é‡Œçš„èƒ–æ¬¡ï¼Œé¢å…·ä¸‹çš„çœ¼ç›é‡Œå……æ»¡äº†ä»æœªæœ‰è¿‡çš„éœ‡æƒŠã€‚`, 'event');
                                printMsg(`â€œ......â€ Ghost æ²‰é»˜äº†æ•´æ•´åç§’ï¼Œç„¶åæŒ‡ç€é‚£æ¡å†…è£¤ï¼Œè¯­æ°”ç”šè‡³æœ‰ç‚¹ç»“å·´ï¼Œâ€œè®¤çœŸçš„å—ï¼Ÿ${State.player}ï¼Ÿä½ ... ä½ è¦è¿™ä¸ªå¹²ä»€ä¹ˆï¼Ÿæ‹¿å»åšé¢ç½©å—ï¼Ÿéš¾ä»¥ç½®ä¿¡...â€`, 'dialogue', 'Ghost');
                                break;
                            case 'g_ssr2': // Ghost - æ®‹ç¼ºçš„å…¨å®¶ç¦
                                printMsg(`Ghost çœ‹åˆ°é‚£å¼ ç…§ç‰‡çš„ç¬é—´ï¼Œå‘¨èº«çš„æ°”å‹éª¤é™ï¼Œä»–çš„æ‹‡æŒ‡ç”¨åŠ›æŒ‰ä½é‚£ä¸ªè¢«æ’•æ‰çš„ç¼ºå£ã€‚`, 'event');
                                printMsg(`â€œåˆ«é—®é‚£ä¸ªè¢«æ’•æ‰çš„äººæ˜¯è°...â€ ä»–å£°éŸ³æ²™å“‘ï¼Œç›®å…‰è½åœ¨ç…§ç‰‡ä¸­ç¬‘ç€çš„å¥³äººå’Œç”·å­©èº«ä¸Šï¼Œâ€œä½†å…¶ä»–äºº... ä»–ä»¬æ˜¯æˆ‘æ›¾ç»æ‹¥æœ‰çš„å…¨éƒ¨ã€‚â€`, 'dialogue', 'Ghost');
                                break;
                           case 'g_ssr3': // é“¶è‰²å­å¼¹
                                printMsg(`Ghost çœ‹åˆ°é‚£æšã€${item.name}ã€‘æ—¶ï¼Œæ²‰é»˜äº†å¾ˆä¹…ï¼Œä»–æ‹¿èµ·å­å¼¹ï¼Œåœ¨ä½ çœ¼å‰æ™ƒäº†æ™ƒï¼Œç„¶åå¡è¿›ä½ çš„æ‰‹å¿ƒã€‚`, 'event');
                                printMsg(`â€œæˆ‘åŸæœ¬ç•™ç€å®ƒï¼Œæ˜¯ä¸ºäº†åœ¨ä»»åŠ¡å¤±è´¥æˆ–è€…æ²¡è·¯å¯é€€æ—¶è‡ªæˆ‘äº†æ–­çš„...â€ ä»–å¹äº†å£æ°”ï¼Œâ€œä½†æˆ‘æƒ³ç°åœ¨æœ‰äº†æ— è®ºå¦‚ä½•éƒ½å›æ¥çš„ç†ç”±ã€‚â€`, 'dialogue', 'Ghost');
                                break;
                                
                            case 'k_ssr': // KÃ¶nig - æœªå¯„å‡ºçš„å®¶ä¹¦
                                printMsg(`å½“ä½ å±•å¼€é‚£å°ã€${item.name}ã€‘æ—¶ï¼ŒKÃ¶nig åƒè§¦ç”µä¸€æ ·è·³äº†èµ·æ¥ï¼ä»–æ‰‹å¿™è„šä¹±åœ°è¯•å›¾æŒ¡ä½ä¿¡çº¸ï¼Œæ•´å¼ è„¸è¿å¸¦ç€è„–å­éƒ½çº¢é€äº†ã€‚`, 'event');
                                printMsg(`â€œåˆ«ã€åˆ«å¿µå‡ºæ¥ï¼æ±‚ä½ äº†ï¼...é‚£æ˜¯å†™ç»™æˆ‘å¦ˆå¦ˆçš„... è™½ç„¶ã€è™½ç„¶ä¸Šé¢å†™çš„å…³äºä½ çš„äº‹æƒ…éƒ½æ˜¯çœŸçš„...â€`, 'dialogue', 'KÃ¶nig');
                                break;
                            case 'k_ssr2': // KÃ¶nig - æ‰‹ç»‡å›´å·¾
                                printMsg(`KÃ¶nig æ„£ä½äº†ï¼Œçœ¼ç¥å˜å¾—å¼‚å¸¸æ¸©æŸ”ï¼Œä»–å°å¿ƒç¿¼ç¿¼åœ°ç¢°äº†ç¢°é‚£æ¡å›´å·¾ã€‚`, 'event');
                                printMsg(`â€œè¿™æ˜¯ Oma (ç¥–æ¯) ç»™æˆ‘ç»‡çš„... æˆ‘ä¸€ç›´æ€•å¼„è„ä¸æ•¢æˆ´ï¼Œæ—¢ç„¶æ˜¯ä½ æŠ½åˆ°äº†ï¼Œé‚£å°±... é€ç»™ä½ å–æš–å§ã€‚â€`, 'dialogue', 'KÃ¶nig');
                                break;
                            case 'k_ssr3': // ä½ çš„ç´ æç”»
                                printMsg(`ä½ éœ‡æƒŠåœ°å‘ç°ã€${item.name}ã€‘é‡Œç”»çš„ç«Ÿç„¶æ˜¯ä½ è¶´åœ¨æŸœå°ç¡ç€çš„æ ·å­ï¼KÃ¶nig å‘å‡ºä¸€å£°åƒæ°´å£¶çƒ§å¼€èˆ¬çš„å°–å«ï¼ŒåŒæ‰‹æ»‘ç¨½åœ°æ‚ä½äº†å¤´ç½©ã€‚`, 'event');
                                printMsg(`â€œå•Šå•Šå•Šï¼é‚£ä¸ªæ˜¯... æˆ‘åªæ˜¯... æ™šä¸Šå®ˆå¤œçœ‹ä½ ç¡å¾—å¾ˆé¦™... æˆ‘ä¸æ˜¯å˜æ€ï¼æˆ‘åªæ˜¯... è§‰å¾—ä½ å¾ˆ... å¥½çœ‹...â€`, 'dialogue', 'KÃ¶nig');
                                break;
                                
                            case 'r_ssr': // Krueger - æµ·è¾¹çš„æˆ¿äº§è¯
                                printMsg(`Krueger çœ‹åˆ°ä½ æŠ½å‡ºäº†ã€${item.name}ã€‘ï¼Œå¾®å¾®æŒ‘çœ‰ï¼Œæœ‰äº›æƒŠè®¶ã€‚`, 'event');
                                printMsg(`ä»–ä½å£°ç¬‘äº†ä¸€ä¸‹ï¼Œé‚£ç¬‘æ„é‡Œæ··ç€éš¾å¾—çš„æŸ”è½¯ï¼šâ€œé›‡ä½£å…µé€šå¸¸ä»€ä¹ˆéƒ½æ²¡æœ‰â€¦â€¦ä¹Ÿä¸è¯¥å»æƒ³è¿™äº›ã€‚â€`, 'dialogue', 'Krueger');
                                printMsg(`Krueger æŠ¬çœ¼çœ‹å‘ä½ ï¼Œé‚£åŒå®¡è§†ä¸€åˆ‡çš„æ£•è‰²çœ¼ç›éš¾å¾—æ²‰é™ï¼šâ€œå…ˆæ›¿æˆ‘ä¿ç®¡å®ƒå§ï¼Œä¼šç”¨å¾—ä¸Šçš„ã€‚â€`, 'dialogue', 'Krueger');
                                printMsg(`â€œæµ·è¾¹çš„æˆ¿å­ï¼Œé£å£°å¤§ï¼Œé€‚åˆéšé€€ã€‚â€ä»–é¡¿äº†é¡¿ï¼Œå£°éŸ³ä½æ²‰ï¼Œâ€œä½ è¦æˆ‘åšä»€ä¹ˆï¼Œ${State.player}ï¼Ÿâ€`, 'dialogue', 'Krueger');
                                break;
                            case 'r_ssr2': // Krueger - ç«¥å¹´å…«éŸ³ç›’
                                printMsg(`éšç€å…«éŸ³ç›’å‘å‡ºçš„æ¸…è„†ä¹å£°ï¼ŒKrueger èº«ä¸Šé‚£ç§å±é™©çš„ç´§ç»·æ„Ÿå¥‡è¿¹èˆ¬åœ°æ¶ˆå¤±äº†ï¼Œä»–é—­ä¸Šçœ¼ï¼Œä»¿ä½›å›åˆ°äº†å¥¥åœ°åˆ©çš„ç«¥å¹´ã€‚`, 'event');
                                printMsg(`â€œæˆ‘çˆ¶æ¯å¾ˆå® æˆ‘... ä»¥å‰ï¼Œæˆ‘å¹¶ä¸æ˜¯ä»€ä¹ˆæ¶é¬¼ï¼Œåªæ˜¯ä¸ªå« Josef çš„æ™®é€šå­©å­ã€‚â€ ä»–çå¼€çœ¼ï¼Œæ ¼å¤–è®¤çœŸåœ°çœ‹ç€ä½ ï¼Œâ€œè°¢è°¢ä½ è®©æˆ‘è®°èµ·è¿™äº›ã€‚â€`, 'dialogue', 'Krueger');
                                break;
                             case 'r_ssr3': // çˆ¶äº²çš„çŒåˆ€
                                printMsg(`Krueger çš„è§†çº¿è½åœ¨é‚£æŠŠã€${item.name}ã€‘ä¸Šï¼Œçœ¼ç¥å˜å¾—æŸ”å’Œèµ·æ¥ï¼Œä»–è½»è½»æŠšæ‘¸ç€åˆ€æŸ„ä¸Šåˆ»ç€çš„ "Josef"ã€‚`, 'event');
                                printMsg(`â€œè¿™æ˜¯æˆ‘çˆ¶äº²ç•™ç»™æˆ‘çš„ï¼Œä¸æ˜¯ç”¨æ¥æ€äººçš„ï¼Œæ˜¯ç”¨æ¥åœ¨æ£®æ—é‡Œç”Ÿå­˜çš„ã€‚â€ ä»–æŠŠå®ƒåˆ«åœ¨ä½ çš„è…°é—´ï¼Œâ€œå¸¦ç€å®ƒï¼Œå°±åƒæˆ‘ä¹Ÿåœ¨ä½ èº«è¾¹ä¸€æ ·ã€‚â€`, 'dialogue', 'Krueger');
                                break;

// ğŸŸ¢ æ–°å¢ Keegan çš„ SSR ååº”
                            case 'ke_ssr': 
                                printMsg(`Keegan çœ‹åˆ°é‚£å¼ é€šç¼‰ä»¤æ—¶ï¼Œçœ¼ç¥æš—äº†ä¸€ç¬ã€‚`, 'event');
                                printMsg(`â€œæˆ‘ä»¥ä¸ºæˆ‘å·²ç»æŠŠå®ƒçƒ§äº†...â€ ä»–è½»å£°è¯´é“ï¼Œä»ä½ æ‰‹ä¸­æ¥è¿‡çº¸æ¡ï¼Œâ€œä½†æ—¢ç„¶ä½ æ‰¾åˆ°äº†å®ƒï¼Œä¹Ÿè®¸è¿™æ„å‘³ç€æˆ‘è¯¥å½»åº•å‘å‰çœ‹äº†ã€‚â€`, 'dialogue', 'Keegan');
                                break;
                            case 'ke_ssr2': 
                                printMsg(`Keegan çœ‹åˆ°ä½ åœ¨è¯»é‚£æœ¬æ—¥å¿—ï¼Œä¸€å‘å†·é™çš„ä»–ç«Ÿç„¶æœ‰äº›æ…Œä¹±åœ°ä¼¸æ‰‹æƒ³æ‹¿å›æ¥ã€‚`, 'event');
                                printMsg(`â€œç­‰ä¸€ä¸‹... é‚£ä¸ªä¸æ˜¯æƒ…æŠ¥ï¼é‚£åªæ˜¯...â€ ä»–å¹äº†å£æ°”ï¼Œè€³æ ¹æœ‰ç‚¹çº¢ï¼Œâ€œå¥½å§ï¼Œé‚£æ˜¯å…³äºä½ çš„è§‚å¯ŸæŠ¥å‘Šï¼Œç»“è®ºæ˜¯... ä½ å¯¹æˆ‘å¾ˆé‡è¦ã€‚â€`, 'dialogue', 'Keegan');
                                break;
                            case 'ke_ssr3': 
                                printMsg(`Keegan é™é™åœ°çœ‹ç€é‚£ä¸ªæ—§é¢ç½©ï¼Œæ‰‹æŒ‡æŠšæ‘¸è¿‡ä¸Šé¢çš„åˆ’ç—•ã€‚`, 'event');
                                printMsg(`â€œè¿™ä¸ªé¢ç½©æˆ‘æ²¡æœ‰æˆ´è¿‡ï¼Œä½†æˆ‘ä¸€ç›´è´´èº«å­˜æ”¾ï¼Œå®ƒä¿æŠ¤äº†æˆ‘å¾ˆå¤šå¹´ï¼Œä¹Ÿé™ªä¼´æˆ‘åº¦è¿‡äº†æ— æ•°ä»»åŠ¡ã€‚â€ ä»–æŠ¬èµ·å¤´ï¼Œé‚£åŒè“çœ¼ç›ä¸“æ³¨åœ°çœ‹ç€ä½ ï¼Œâ€œä½†ç°åœ¨ï¼Œæˆ‘æƒ³è®©ä½ è®°ä½æˆ‘çš„è„¸ã€‚â€`, 'dialogue', 'Keegan');
                                break;

                                
                            default:
                                printMsg(`ä½ è·å¾—äº†æå…·ä»·å€¼çš„ã€${item.name}ã€‘ï¼`, 'event');
                        }
                    }, 1000);
                  } // end if SSR
            } // end else (new item)
        } // end else (not N)
    } // end for loop
    
    resultHtml += `</div>`;
    
    // æ›´æ–°UI
    $('gacha-money').innerText = State.money;
    $('gacha-coins').innerText = State.gacha_coins;
    $('gacha-view-main').innerHTML = `
        <h3 style="color:var(--secondary); margin-bottom:10px;">è¡¥ç»™ç®±å·²å¼€å¯ï¼</h3>
        ${resultHtml}
        <button onclick="resetGachaView()" style="margin-top:20px; width:100%;">ç¡®è®¤</button>
    `;
    
    checkSetCompletion(); // æ£€æŸ¥æ˜¯å¦é›†é½
}

function resetGachaView() {
    $('gacha-view-main').innerHTML = `
        <div style="margin: 30px 0; padding: 40px; border: 2px dashed #333; border-radius: 10px; background: rgba(0,0,0,0.3);">
            <div style="font-size: 4rem; margin-bottom: 20px;">ğŸšğŸ“¦</div>
            <p style="color:#888; margin-bottom: 30px;">"å“ªæ€•æ˜¯åºŸåœŸï¼Œåªè¦æœ‰é’±ï¼Œå°±æ²¡æœ‰ä¹°ä¸åˆ°çš„ä¸œè¥¿ã€‚"</p>
            <div style="display:flex; gap:20px; justify-content:center;">
                <button onclick="drawGacha(1)" style="width:150px; border-color:var(--primary);">
                    <div class="btn-title">å•æ¬¡ç©ºæŠ•</div>
                    <div class="btn-desc">$10,000</div>
                </button>
                <button onclick="drawGacha(10)" style="width:150px; border-color:var(--secondary);">
                    <div class="btn-title">åè¿ç©ºæŠ•</div>
                    <div class="btn-desc">$100,000</div>
                </button>
            </div>
        </div>
        <button onclick="showCollection()" style="margin-top:20px; width:100%;">ğŸ“– æŸ¥çœ‹æ”¶è—å›¾é‰´ / å…‘æ¢å•†åº—</button>
    `;
}

let currentTab = 'ghost';
function showCollection() {
    $('gacha-view-main').style.display = 'none';
    $('gacha-view-collection').style.display = 'block';
    switchTab(currentTab);
}

function switchTab(char) {
    currentTab = char;
    // æ›´æ–°Tabæ ·å¼
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    if(event) event.target.classList.add('active'); 
    
    const container = $('collection-grid');
    container.innerHTML = '';
    
    GachaPool[char].forEach(item => {
        const owned = State.collection.includes(item.id);
        // æ£€æŸ¥æ˜¯å¦ä¹°å¾—èµ·
        const canAfford = State.gacha_coins >= item.cost;
        
        const div = document.createElement('div');
        // é»˜è®¤ç»™ä¸ªç¨€æœ‰åº¦è¾¹æ¡†
        div.className = `gacha-card rarity-${item.rarity}`;
        
        // æ ·å¼é€»è¾‘ï¼š
        // 1. å·²æ‹¥æœ‰ï¼šæ™®é€šæ˜¾ç¤º
        // 2. æœªæ‹¥æœ‰ä½†ä¹°å¾—èµ·ï¼šé«˜äº®ç»¿è‰²è¾¹æ¡† + å‘å…‰
        // 3. æœªæ‹¥æœ‰ä¸”ä¹°ä¸èµ·ï¼šç°è‰²åŠé€æ˜
        
        if (owned) {
            div.style.border = '1px solid #444'; 
            div.style.opacity = '1';
        } else if (canAfford) {
            div.style.borderColor = 'var(--primary)'; // äº®ç»¿è‰²
            div.style.boxShadow = '0 0 15px rgba(0, 255, 204, 0.2)'; // å‘å…‰
            div.style.cursor = 'pointer';
        } else {
            div.style.borderColor = '#333';
            div.style.opacity = '0.6'; // å˜æš—
        }
        
        // æŒ‰é’®é€»è¾‘
        let btnHtml = '';
        if(owned) {
            btnHtml = `<div style="font-size:0.7rem; color:#888; margin-top:5px;">âœ… å·²æ”¶è—</div>`;
        } else {
            // ä¹°å¾—èµ·å°±æ˜¯äº®è‰²æŒ‰é’®ï¼Œä¹°ä¸èµ·å°±æ˜¯ç°è‰²
            const btnStyle = canAfford ? 
                "background:var(--primary); color:#000; font-weight:bold; cursor:pointer; box-shadow: 0 0 8px var(--primary);" : 
                "background:#222; color:#555; cursor:not-allowed; border:1px solid #333;";
            
            const btnText = canAfford ? `âœ¨ ${item.cost}å¸ å…‘æ¢` : `${item.cost} ä»£å¸`;
            
            btnHtml = `<button onclick="redeemItem('${char}', '${item.id}', ${item.cost})" style="font-size:0.7rem; margin-top:8px; padding:5px; width:100%; border-radius:4px; border:none; ${btnStyle}">
                ${btnText}
            </button>`;
        }

        // ã€æ ¸å¿ƒä¿®æ”¹ã€‘ç›´æ¥æ˜¾ç¤ºåå­—å’Œæè¿°ï¼Œä¸å†æ˜¾ç¤º ???
        // è¿™æ ·ç©å®¶æ‰èƒ½çœ‹æ‡‚å•†åº—é‡Œå–çš„æ˜¯ä»€ä¹ˆ
        div.innerHTML = `
            <div class="card-name">${item.name}</div>
            <div class="card-desc">${item.desc}</div>
            ${btnHtml}
        `;
        
        container.appendChild(div);
    });
}
function redeemItem(char, id, cost) {
    if(State.gacha_coins >= cost) {
        if(confirm(`ç¡®å®šæ¶ˆè€— ${cost} ä»£å¸å…‘æ¢å—ï¼Ÿ`)) {
            State.gacha_coins -= cost;
            State.collection.push(id);
            $('gacha-coins').innerText = State.gacha_coins;
            switchTab(char); 
            checkSetCompletion();
        }
    } else {
        alert("ä»£å¸ä¸è¶³ï¼");
    }
}

function checkSetCompletion() {
['ghost', 'konig', 'krueger', 'keegan'].forEach(char => {
        if(!State.set_rewards[char]) {
            const allOwned = GachaPool[char].every(item => State.collection.includes(item.id));
            if(allOwned) {
                $('gacha-overlay').style.display = 'none'; 
                setTimeout(() => {
                    triggerEvent(Events.Special[char + '_set_complete']);
                }, 500);
            }
        }
    });
}

// ğŸ’” è¾…åŠ©å‡½æ•°ï¼šå¤„ç†å•é€‰é€»è¾‘ (å·²ä¿®å¤è¯¯ä¼¤ Bug)
function handleChoice(s, winner) {
    // 1. æ‰¾å‡ºæ‰€æœ‰çš„â€œè¾“å®¶â€
    // å®šä¹‰ï¼š(æ˜¯å››ä¸ªç”·ä¸»ä¹‹ä¸€) ä¸” (ä¸æ˜¯èµ¢å®¶) ä¸” (æ­£åœ¨å’Œä½ è°ˆæ‹çˆ±)
    const losers = ['ghost', 'konig', 'krueger', 'keegan'].filter(x => 
        x !== winner && s.chars[x].dating === true
    );
    
    // 2. èƒœè€…ï¼šå¥½æ„Ÿæš´å¢ï¼Œä¿æŒæ‹çˆ±
    s.chars[winner].aff += 50;
    
    // 3. è´¥è€…ï¼šåªå¤„ç†é‚£äº›çœŸæ­£å’Œä½ ç¡®ç«‹äº†å…³ç³»çš„äºº
    losers.forEach(k => {
        s.chars[k].dating = false;       // åˆ†æ‰‹
        s.chars[k].aff = 0;              // å¥½æ„Ÿæ¸…é›¶
        s.chars[k].confessed = true;     // æ ‡è®°ä¸ºå·²è¡¨ç™½è¿‡(é˜²æ­¢é‡å¤è§¦å‘æ™®é€šè¡¨ç™½ï¼Œè®©ä»–æ­»å¿ƒ)
        // å¯ä»¥åŠ ä¸ªæ ‡è®°é˜²æ­¢ä»¥åå†è½»æ˜“è¿½å›æ¥ï¼Œæˆ–è€…è¿™å°±æ˜¯å½»åº•å†³è£‚
    });
    
    printMsg(`ä½ ç´§ç´§æ¡ä½äº† ${winner} çš„æ‰‹ï¼Œå…¶ä»–äººçœ‹ç€è¿™ä¸€å¹•ï¼Œçœ‹æ‡‚äº†ä½ çš„é€‰æ‹©ï¼Œé»˜é»˜é€€å‡ºäº†ä½ çš„ä¸–ç•Œã€‚`, 'event');
    log(`ä¸ ${winner} ç¡®ç«‹å”¯ä¸€å…³ç³»`, 'gain');
}


// åˆå§‹åŒ–è¿è¡Œ
window.onload = () => {
    // é»˜è®¤æ˜¾ç¤ºæ¨¡æ€æ¡†ï¼Œä¸éœ€è¦é¢å¤–é€»è¾‘
};

</script>
<div style="
    position: fixed; 
    bottom: 10px; 
    right: 15px; 
    color: rgba(255, 255, 255, 0.5); /* é€æ˜åº¦æ”¹ä¸º 50%ï¼Œæ›´æ¸…æ™° */
    font-size: 16px; /* å­—ä½“å˜å¤§ */
    font-family: 'Consolas', monospace; 
    font-weight: bold; /* åŠ ç²—ä¸€ç‚¹ */
    pointer-events: none; 
    z-index: 9999; 
    user-select: none;
    text-shadow: 0 0 4px rgba(0,0,0,0.8); /* åŠ å¼ºé˜´å½±ï¼Œè®©å­—æ›´ç«‹ä½“ */
">
    åˆ¶ä½œäººï¼šAAAé£å²›è£…ä¿®å¼ å§
</div>
</body>

</html>
